<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Command Line Interface for IBM Aspera products</title>
  <style>

code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}

ul.task-list[class]{list-style: none;}
ul.task-list li input[type="checkbox"] {
font-size: inherit;
width: 0.8em;
margin: 0 0.8em 0.2em -1.6em;
vertical-align: middle;
}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}

html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
  <style type="text/css">.admonition {
border-left: 4px solid;
padding: 0.75em 1em;
margin: 1em 0;
border-radius: 4px;
background-color: #f6f8fa;
font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji";
box-sizing: border-box;
}
.admonition-title {
font-weight: 600;
font-size: 1.1em;
margin-bottom: 0.5em;
color: inherit;
}
.admonition.note {
border-color: #1d70b8;
background-color: #dbeafe;
color: #0c4a6e;
}
.admonition.caution {
border-color: #b45309;
background-color: #fef3c7;
color: #78350f;
}
.admonition.warning {
border-color: #b91c1c;
background-color: #fee2e2;
color: #7f1d1d;
}
.admonition.tip {
border-color: #166534;
background-color: #dcfce7;
color: #14532d;
}
.admonition.important {
border-color: #b45309;
background-color: #fef3c7;
color: #78350f;
}
.admonition.info {
border-color: #374151;
background-color: #e5e7eb;
color: #1f2937;
}
.admonition-body {
margin-top: 0;
line-height: 1.4;
}</style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Command Line Interface for IBM Aspera products</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#introduction" id="toc-introduction"><span class="toc-section-number">1</span> Introduction</a>
<ul>
<li><a href="#bugs-features-contribution" id="toc-bugs-features-contribution"><span class="toc-section-number">1.1</span> BUGS, FEATURES,
CONTRIBUTION</a></li>
<li><a href="#when-to-use-and-when-not-to-use" id="toc-when-to-use-and-when-not-to-use"><span class="toc-section-number">1.2</span> When to use and when not to
use</a></li>
<li><a href="#notations-shell-examples" id="toc-notations-shell-examples"><span class="toc-section-number">1.3</span> Notations, Shell,
Examples</a></li>
</ul></li>
<li><a href="#quick-start" id="toc-quick-start"><span class="toc-section-number">2</span> Quick Start</a>
<ul>
<li><a href="#first-use" id="toc-first-use"><span class="toc-section-number">2.1</span> First use</a></li>
<li><a href="#going-further" id="toc-going-further"><span class="toc-section-number">2.2</span> Going further</a></li>
</ul></li>
<li><a href="#installation" id="toc-installation"><span class="toc-section-number">3</span> Installation</a>
<ul>
<li><a href="#single-file-executable" id="toc-single-file-executable"><span class="toc-section-number">3.1</span> Single file executable</a></li>
<li><a href="#ruby" id="toc-ruby"><span class="toc-section-number">3.2</span> Ruby</a>
<ul>
<li><a href="#windows-installer" id="toc-windows-installer"><span class="toc-section-number">3.2.1</span> Windows: Installer</a></li>
<li><a href="#macos-brew" id="toc-macos-brew"><span class="toc-section-number">3.2.2</span> macOS:
<code>brew</code></a></li>
<li><a href="#linux-package" id="toc-linux-package"><span class="toc-section-number">3.2.3</span> Linux: Package</a></li>
<li><a href="#unix-like-rvm-single-user-installation-not-root" id="toc-unix-like-rvm-single-user-installation-not-root"><span class="toc-section-number">3.2.4</span> Unix-like: RVM: Single user
installation (not root)</a></li>
<li><a href="#unix-like-rbenv" id="toc-unix-like-rbenv"><span class="toc-section-number">3.2.5</span> Unix-like:
<code>rbenv</code></a></li>
<li><a href="#other-unixes-aix" id="toc-other-unixes-aix"><span class="toc-section-number">3.2.6</span> Other Unixes (AIX)</a></li>
<li><a href="#jruby" id="toc-jruby"><span class="toc-section-number">3.2.7</span> JRuby</a></li>
<li><a href="#optional-gems" id="toc-optional-gems"><span class="toc-section-number">3.2.8</span> Optional gems</a></li>
</ul></li>
<li><a href="#ruby-gem-aspera-cli" id="toc-ruby-gem-aspera-cli"><span class="toc-section-number">3.3</span> Ruby Gem:
<code>aspera-cli</code></a>
<ul>
<li><a href="#gem-installation-with-signature-verification" id="toc-gem-installation-with-signature-verification"><span class="toc-section-number">3.3.1</span> Gem installation with signature
verification</a></li>
</ul></li>
<li><a href="#fasp-protocol-ascp" id="toc-fasp-protocol-ascp"><span class="toc-section-number">3.4</span> FASP Protocol:
<code>ascp</code></a>
<ul>
<li><a href="#installation-of-ascp-through-transferd" id="toc-installation-of-ascp-through-transferd"><span class="toc-section-number">3.4.1</span> Installation of
<code>ascp</code> through <code>transferd</code></a></li>
<li><a href="#installation-of-ascp-through-other-component" id="toc-installation-of-ascp-through-other-component"><span class="toc-section-number">3.4.2</span> Installation of
<code>ascp</code> through other component</a></li>
</ul></li>
<li><a href="#installation-in-air-gapped-environment" id="toc-installation-in-air-gapped-environment"><span class="toc-section-number">3.5</span> Installation in air gapped
environment</a>
<ul>
<li><a href="#gem-files-and-dependencies" id="toc-gem-files-and-dependencies"><span class="toc-section-number">3.5.1</span> Gem files and
dependencies</a></li>
<li><a href="#unix-like" id="toc-unix-like"><span class="toc-section-number">3.5.2</span> Unix-like</a></li>
<li><a href="#windows" id="toc-windows"><span class="toc-section-number">3.5.3</span> Windows</a></li>
</ul></li>
<li><a href="#container" id="toc-container"><span class="toc-section-number">3.6</span> Container</a>
<ul>
<li><a href="#container-quick-start" id="toc-container-quick-start"><span class="toc-section-number">3.6.1</span> Container: Quick start</a></li>
<li><a href="#container-details" id="toc-container-details"><span class="toc-section-number">3.6.2</span> Container: Details</a></li>
<li><a href="#container-sample-start-script" id="toc-container-sample-start-script"><span class="toc-section-number">3.6.3</span> Container: Sample start
script</a></li>
<li><a href="#container-offline-installation" id="toc-container-offline-installation"><span class="toc-section-number">3.6.4</span> Container: Offline
installation</a></li>
<li><a href="#container-asperaconf" id="toc-container-asperaconf"><span class="toc-section-number">3.6.5</span> Container:
<code>aspera.conf</code></a></li>
<li><a href="#container-singularity" id="toc-container-singularity"><span class="toc-section-number">3.6.6</span> Container: Singularity</a></li>
</ul></li>
<li><a href="#ssl-library" id="toc-ssl-library"><span class="toc-section-number">3.7</span> SSL library</a></li>
<li><a href="#ssl-ca-certificate-bundle" id="toc-ssl-ca-certificate-bundle"><span class="toc-section-number">3.8</span> SSL CA certificate bundle</a></li>
</ul></li>
<li><a href="#command-line-interface" id="toc-command-line-interface"><span class="toc-section-number">4</span> Command Line Interface</a>
<ul>
<li><a href="#ascp-command-line" id="toc-ascp-command-line"><span class="toc-section-number">4.1</span> <code>ascp</code> command
line</a></li>
<li><a href="#command-line-parsing-special-characters" id="toc-command-line-parsing-special-characters"><span class="toc-section-number">4.2</span> Command line parsing, Special
Characters</a>
<ul>
<li><a href="#shell-parsing-for-unix-like-systems-linux-macos-aix" id="toc-shell-parsing-for-unix-like-systems-linux-macos-aix"><span class="toc-section-number">4.2.1</span> Shell parsing for Unix-like
systems: Linux, macOS, AIX</a></li>
<li><a href="#shell-parsing-for-windows" id="toc-shell-parsing-for-windows"><span class="toc-section-number">4.2.2</span> Shell parsing for
Windows</a></li>
<li><a href="#shell-parsing-for-windows-cmdexe" id="toc-shell-parsing-for-windows-cmdexe"><span class="toc-section-number">4.2.3</span> Shell parsing for Windows:
<code>cmd.exe</code></a></li>
<li><a href="#shell-parsing-for-windows-powershell" id="toc-shell-parsing-for-windows-powershell"><span class="toc-section-number">4.2.4</span> Shell parsing for Windows:
Powershell</a></li>
<li><a href="#extended-values-json-ruby-" id="toc-extended-values-json-ruby-"><span class="toc-section-number">4.2.5</span> Extended Values (JSON, Ruby,
...)</a></li>
<li><a href="#testing-extended-values" id="toc-testing-extended-values"><span class="toc-section-number">4.2.6</span> Testing Extended Values</a></li>
<li><a href="#using-a-shell-variable-parsed-by-shell-in-an-extended-value" id="toc-using-a-shell-variable-parsed-by-shell-in-an-extended-value"><span class="toc-section-number">4.2.7</span> Using a shell variable, parsed
by shell, in an extended value</a></li>
<li><a href="#double-quote-in-strings-in-command-line" id="toc-double-quote-in-strings-in-command-line"><span class="toc-section-number">4.2.8</span> Double quote in strings in
command line</a></li>
<li><a href="#shell-and-json-or-ruby-special-characters-in-extended-value" id="toc-shell-and-json-or-ruby-special-characters-in-extended-value"><span class="toc-section-number">4.2.9</span> Shell and JSON or Ruby special
characters in extended value</a></li>
<li><a href="#reading-special-characters-interactively" id="toc-reading-special-characters-interactively"><span class="toc-section-number">4.2.10</span> Reading special characters
interactively</a></li>
<li><a href="#command-line-arguments-from-a-file" id="toc-command-line-arguments-from-a-file"><span class="toc-section-number">4.2.11</span> Command line arguments from a
file</a></li>
<li><a href="#extended-value-using-special-characters-read-from-environmental-variables-or-files" id="toc-extended-value-using-special-characters-read-from-environmental-variables-or-files"><span class="toc-section-number">4.2.12</span> Extended value using special
characters read from environmental variables or files</a></li>
</ul></li>
<li><a href="#positional-arguments-and-options" id="toc-positional-arguments-and-options"><span class="toc-section-number">4.3</span> Positional Arguments and
Options</a>
<ul>
<li><a href="#positional-arguments" id="toc-positional-arguments"><span class="toc-section-number">4.3.1</span> Positional Arguments</a></li>
<li><a href="#options" id="toc-options"><span class="toc-section-number">4.3.2</span> Options</a></li>
</ul></li>
<li><a href="#interactive-input" id="toc-interactive-input"><span class="toc-section-number">4.4</span> Interactive Input</a></li>
<li><a href="#output" id="toc-output"><span class="toc-section-number">4.5</span> Output</a>
<ul>
<li><a href="#types-of-output-data" id="toc-types-of-output-data"><span class="toc-section-number">4.5.1</span> Types of output data</a></li>
<li><a href="#option-format" id="toc-option-format"><span class="toc-section-number">4.5.2</span> Option:
<code>format</code></a></li>
<li><a href="#option-table_style" id="toc-option-table_style"><span class="toc-section-number">4.5.3</span> Option:
<code>table_style</code></a></li>
<li><a href="#option-flat_hash-single-level-hash" id="toc-option-flat_hash-single-level-hash"><span class="toc-section-number">4.5.4</span> Option: <code>flat_hash</code>:
Single level <code>Hash</code></a></li>
<li><a href="#enhanced-display-of-special-values" id="toc-enhanced-display-of-special-values"><span class="toc-section-number">4.5.5</span> Enhanced display of special
values</a></li>
<li><a href="#option-multi_single" id="toc-option-multi_single"><span class="toc-section-number">4.5.6</span> Option:
<code>multi_single</code></a></li>
<li><a href="#option-display-verbosity-of-output" id="toc-option-display-verbosity-of-output"><span class="toc-section-number">4.5.7</span> Option: <code>display</code>:
Verbosity of output</a></li>
<li><a href="#option-show_secrets-hide-or-show-secrets-in-results" id="toc-option-show_secrets-hide-or-show-secrets-in-results"><span class="toc-section-number">4.5.8</span> Option:
<code>show_secrets</code>: Hide or show secrets in results</a></li>
<li><a href="#option-fields-selection-of-output-object-fields" id="toc-option-fields-selection-of-output-object-fields"><span class="toc-section-number">4.5.9</span> Option: <code>fields</code>:
Selection of output object fields</a></li>
<li><a href="#option-select" id="toc-option-select"><span class="toc-section-number">4.5.10</span> Option:
<code>select</code></a></li>
<li><a href="#percent-selector" id="toc-percent-selector"><span class="toc-section-number">4.5.11</span> Percent selector</a></li>
</ul></li>
<li><a href="#extended-value-syntax" id="toc-extended-value-syntax"><span class="toc-section-number">4.6</span> Extended Value Syntax</a></li>
<li><a href="#configuration-and-persistency-folder" id="toc-configuration-and-persistency-folder"><span class="toc-section-number">4.7</span> Configuration and Persistency
Folder</a></li>
<li><a href="#invalid-filename-characters" id="toc-invalid-filename-characters"><span class="toc-section-number">4.8</span> Invalid Filename
Characters</a></li>
<li><a href="#temporary-files" id="toc-temporary-files"><span class="toc-section-number">4.9</span> Temporary files</a></li>
<li><a href="#configuration-file" id="toc-configuration-file"><span class="toc-section-number">4.10</span> Configuration file</a>
<ul>
<li><a href="#option-preset" id="toc-option-preset"><span class="toc-section-number">4.10.1</span> Option Preset</a></li>
<li><a href="#special-option-preset-config" id="toc-special-option-preset-config"><span class="toc-section-number">4.10.2</span> Special Option Preset:
<code>config</code></a></li>
<li><a href="#special-option-preset-default" id="toc-special-option-preset-default"><span class="toc-section-number">4.10.3</span> Special Option Preset:
<code>default</code></a></li>
<li><a href="#plugin-config-configuration" id="toc-plugin-config-configuration"><span class="toc-section-number">4.10.4</span> Plugin: <code>config</code>:
Configuration</a></li>
</ul></li>
<li><a href="#tested-commands-for-config" id="toc-tested-commands-for-config"><span class="toc-section-number">4.11</span> Tested commands for
<code>config</code></a>
<ul>
<li><a href="#format-of-file" id="toc-format-of-file"><span class="toc-section-number">4.11.1</span> Format of file</a></li>
<li><a href="#evaluation-order-of-options" id="toc-evaluation-order-of-options"><span class="toc-section-number">4.11.2</span> Evaluation order of
options</a></li>
<li><a href="#wizard" id="toc-wizard"><span class="toc-section-number">4.11.3</span> Wizard</a></li>
<li><a href="#example-of-configuration-for-a-plugin" id="toc-example-of-configuration-for-a-plugin"><span class="toc-section-number">4.11.4</span> Example of configuration for a
plugin</a></li>
</ul></li>
<li><a href="#secret-vault" id="toc-secret-vault"><span class="toc-section-number">4.12</span> Secret Vault</a>
<ul>
<li><a href="#vault-ibm-hashicorp-vault" id="toc-vault-ibm-hashicorp-vault"><span class="toc-section-number">4.12.1</span> Vault: IBM HashiCorp
Vault</a></li>
<li><a href="#vault-system-keychain" id="toc-vault-system-keychain"><span class="toc-section-number">4.12.2</span> Vault: System keychain</a></li>
<li><a href="#vault-encrypted-file" id="toc-vault-encrypted-file"><span class="toc-section-number">4.12.3</span> Vault: Encrypted file</a></li>
<li><a href="#vault-operations" id="toc-vault-operations"><span class="toc-section-number">4.12.4</span> Vault: Operations</a></li>
<li><a href="#configuration-finder" id="toc-configuration-finder"><span class="toc-section-number">4.12.5</span> Configuration Finder</a></li>
<li><a href="#securing-passwords-and-secrets" id="toc-securing-passwords-and-secrets"><span class="toc-section-number">4.12.6</span> Securing passwords and
secrets</a></li>
</ul></li>
<li><a href="#private-key" id="toc-private-key"><span class="toc-section-number">4.13</span> Private Key</a>
<ul>
<li><a href="#ascli-for-key-generation" id="toc-ascli-for-key-generation"><span class="toc-section-number">4.13.1</span> <code>ascli</code> for key
generation</a></li>
<li><a href="#ssh-keygen" id="toc-ssh-keygen"><span class="toc-section-number">4.13.2</span>
<code>ssh-keygen</code></a></li>
<li><a href="#openssl" id="toc-openssl"><span class="toc-section-number">4.13.3</span> <code>openssl</code></a></li>
<li><a href="#using-an-application-to-generate-a-key-pair" id="toc-using-an-application-to-generate-a-key-pair"><span class="toc-section-number">4.13.4</span> Using an application to
generate a key pair</a></li>
</ul></li>
<li><a href="#web-service" id="toc-web-service"><span class="toc-section-number">4.14</span> Web service</a></li>
<li><a href="#image-and-video-thumbnails" id="toc-image-and-video-thumbnails"><span class="toc-section-number">4.15</span> Image and video
thumbnails</a></li>
<li><a href="#graphical-interactions-browser-and-text-editor" id="toc-graphical-interactions-browser-and-text-editor"><span class="toc-section-number">4.16</span> Graphical Interactions: Browser
and Text Editor</a></li>
<li><a href="#logging-debugging" id="toc-logging-debugging"><span class="toc-section-number">4.17</span> Logging, Debugging</a></li>
<li><a href="#learning-aspera-product-apis-rest" id="toc-learning-aspera-product-apis-rest"><span class="toc-section-number">4.18</span> Learning Aspera Product APIs
(REST)</a></li>
<li><a href="#http-socket-parameters" id="toc-http-socket-parameters"><span class="toc-section-number">4.19</span> HTTP socket parameters</a></li>
<li><a href="#proxy" id="toc-proxy"><span class="toc-section-number">4.20</span> Proxy</a>
<ul>
<li><a href="#proxy-for-rest-and-http-gateway" id="toc-proxy-for-rest-and-http-gateway"><span class="toc-section-number">4.20.1</span> Proxy for REST and HTTP
Gateway</a></li>
<li><a href="#proxy-for-legacy-aspera-https-fallback" id="toc-proxy-for-legacy-aspera-https-fallback"><span class="toc-section-number">4.20.2</span> Proxy for Legacy Aspera HTTP/S
Fallback</a></li>
<li><a href="#fasp-proxy-forward-for-transfers" id="toc-fasp-proxy-forward-for-transfers"><span class="toc-section-number">4.20.3</span> FASP proxy (forward) for
transfers</a></li>
</ul></li>
<li><a href="#fasp-configuration" id="toc-fasp-configuration"><span class="toc-section-number">4.21</span> FASP configuration</a>
<ul>
<li><a href="#show-path-of-currently-used-ascp" id="toc-show-path-of-currently-used-ascp"><span class="toc-section-number">4.21.1</span> Show path of currently used
<code>ascp</code></a></li>
<li><a href="#selection-of-ascp-location-for-direct-agent" id="toc-selection-of-ascp-location-for-direct-agent"><span class="toc-section-number">4.21.2</span> Selection of <code>ascp</code>
location for <code>direct</code> agent</a></li>
<li><a href="#installation-of-connect-client-on-command-line" id="toc-installation-of-connect-client-on-command-line"><span class="toc-section-number">4.21.3</span> Installation of Connect Client
on command line</a></li>
</ul></li>
<li><a href="#transfer-clients-agents" id="toc-transfer-clients-agents"><span class="toc-section-number">4.22</span> Transfer Clients: Agents</a>
<ul>
<li><a href="#agent-direct" id="toc-agent-direct"><span class="toc-section-number">4.22.1</span> Agent: Direct</a></li>
<li><a href="#agent-connect-client" id="toc-agent-connect-client"><span class="toc-section-number">4.22.2</span> Agent: Connect Client</a></li>
<li><a href="#agent-desktop-client" id="toc-agent-desktop-client"><span class="toc-section-number">4.22.3</span> Agent: Desktop Client</a></li>
<li><a href="#agent-node-api" id="toc-agent-node-api"><span class="toc-section-number">4.22.4</span> Agent: Node API</a></li>
<li><a href="#agent-http-gateway" id="toc-agent-http-gateway"><span class="toc-section-number">4.22.5</span> Agent: HTTP Gateway</a></li>
<li><a href="#agent-transfer-daemon" id="toc-agent-transfer-daemon"><span class="toc-section-number">4.22.6</span> Agent: Transfer Daemon</a></li>
</ul></li>
<li><a href="#transfer-specification" id="toc-transfer-specification"><span class="toc-section-number">4.23</span> Transfer Specification</a></li>
<li><a href="#transfer-parameters" id="toc-transfer-parameters"><span class="toc-section-number">4.24</span> Transfer Parameters</a>
<ul>
<li><a href="#destination-folder-for-transfers" id="toc-destination-folder-for-transfers"><span class="toc-section-number">4.24.1</span> Destination folder for
transfers</a></li>
<li><a href="#list-of-files-for-transfers" id="toc-list-of-files-for-transfers"><span class="toc-section-number">4.24.2</span> List of files for
transfers</a></li>
<li><a href="#source-directory-structure-on-destination" id="toc-source-directory-structure-on-destination"><span class="toc-section-number">4.24.3</span> Source directory structure on
destination</a></li>
<li><a href="#multi-session-transfer" id="toc-multi-session-transfer"><span class="toc-section-number">4.24.4</span> Multi-session transfer</a></li>
<li><a href="#content-protection" id="toc-content-protection"><span class="toc-section-number">4.24.5</span> Content protection</a></li>
<li><a href="#transfer-spec-examples" id="toc-transfer-spec-examples"><span class="toc-section-number">4.24.6</span> Transfer Spec Examples</a></li>
</ul></li>
<li><a href="#transfer-progress-bar" id="toc-transfer-progress-bar"><span class="toc-section-number">4.25</span> Transfer progress bar</a></li>
<li><a href="#scheduler" id="toc-scheduler"><span class="toc-section-number">4.26</span> Scheduler</a>
<ul>
<li><a href="#windows-scheduler" id="toc-windows-scheduler"><span class="toc-section-number">4.26.1</span> Windows Scheduler</a></li>
<li><a href="#unix-like-scheduler" id="toc-unix-like-scheduler"><span class="toc-section-number">4.26.2</span> Unix-like Scheduler</a></li>
</ul></li>
<li><a href="#running-as-service" id="toc-running-as-service"><span class="toc-section-number">4.27</span> Running as service</a></li>
<li><a href="#locking-for-exclusive-execution" id="toc-locking-for-exclusive-execution"><span class="toc-section-number">4.28</span> Locking for exclusive
execution</a></li>
<li><a href="#provençal" id="toc-provençal"><span class="toc-section-number">4.29</span> &quot;Provençal&quot;</a></li>
<li><a href="#faux-for-testing" id="toc-faux-for-testing"><span class="toc-section-number">4.30</span> <code>faux:</code> for
testing</a></li>
<li><a href="#usage" id="toc-usage"><span class="toc-section-number">4.31</span> Usage</a></li>
<li><a href="#bulk-creation-and-deletion-of-resources" id="toc-bulk-creation-and-deletion-of-resources"><span class="toc-section-number">4.32</span> Bulk creation and deletion of
resources</a></li>
<li><a href="#option-query" id="toc-option-query"><span class="toc-section-number">4.33</span> Option:
<code>query</code></a></li>
<li><a href="#plugins" id="toc-plugins"><span class="toc-section-number">4.34</span> Plugins</a></li>
<li><a href="#plugins-vs-transfer-agents" id="toc-plugins-vs-transfer-agents"><span class="toc-section-number">4.35</span> Plugins vs Transfer
Agents</a></li>
</ul></li>
<li><a href="#plugin-aoc-ibm-aspera-on-cloud" id="toc-plugin-aoc-ibm-aspera-on-cloud"><span class="toc-section-number">5</span> Plugin: <code>aoc</code>: IBM Aspera
on Cloud</a>
<ul>
<li><a href="#configuration-using-wizard" id="toc-configuration-using-wizard"><span class="toc-section-number">5.1</span> Configuration: Using
Wizard</a></li>
<li><a href="#configuration-using-manual-setup" id="toc-configuration-using-manual-setup"><span class="toc-section-number">5.2</span> Configuration: Using manual
setup</a>
<ul>
<li><a href="#configuration-details" id="toc-configuration-details"><span class="toc-section-number">5.2.1</span> Configuration details</a></li>
<li><a href="#api-client-registration" id="toc-api-client-registration"><span class="toc-section-number">5.2.2</span> API Client Registration</a></li>
<li><a href="#configuration-for-aspera-on-cloud" id="toc-configuration-for-aspera-on-cloud"><span class="toc-section-number">5.2.3</span> Configuration for Aspera on
Cloud</a></li>
<li><a href="#authentication-with-private-key" id="toc-authentication-with-private-key"><span class="toc-section-number">5.2.4</span> Authentication with private
key</a></li>
<li><a href="#user-key-registration" id="toc-user-key-registration"><span class="toc-section-number">5.2.5</span> User key registration</a></li>
<li><a href="#option-preset-modification-for-jwt" id="toc-option-preset-modification-for-jwt"><span class="toc-section-number">5.2.6</span> Option Preset modification for
JWT</a></li>
<li><a href="#public-and-private-links" id="toc-public-and-private-links"><span class="toc-section-number">5.2.7</span> Public and private
links</a></li>
<li><a href="#aoc-first-use" id="toc-aoc-first-use"><span class="toc-section-number">5.2.8</span> AoC: First Use</a></li>
</ul></li>
<li><a href="#calling-aoc-apis-from-command-line" id="toc-calling-aoc-apis-from-command-line"><span class="toc-section-number">5.3</span> Calling AoC APIs from command
line</a></li>
<li><a href="#administration" id="toc-administration"><span class="toc-section-number">5.4</span> Administration</a>
<ul>
<li><a href="#listing-resources" id="toc-listing-resources"><span class="toc-section-number">5.4.1</span> Listing resources</a></li>
<li><a href="#selecting-a-resource" id="toc-selecting-a-resource"><span class="toc-section-number">5.4.2</span> Selecting a resource</a></li>
<li><a href="#creating-a-resource" id="toc-creating-a-resource"><span class="toc-section-number">5.4.3</span> Creating a resource</a></li>
<li><a href="#access-key-secrets" id="toc-access-key-secrets"><span class="toc-section-number">5.4.4</span> Access Key secrets</a></li>
<li><a href="#activity" id="toc-activity"><span class="toc-section-number">5.4.5</span> Activity</a></li>
<li><a href="#transfer-using-specific-transfer-ports" id="toc-transfer-using-specific-transfer-ports"><span class="toc-section-number">5.4.6</span> Transfer: Using specific
transfer ports</a></li>
<li><a href="#using-ats" id="toc-using-ats"><span class="toc-section-number">5.4.7</span> Using ATS</a></li>
<li><a href="#files-with-type-link" id="toc-files-with-type-link"><span class="toc-section-number">5.4.8</span> Files with type
<code>link</code></a></li>
<li><a href="#example-bulk-creation-of-users" id="toc-example-bulk-creation-of-users"><span class="toc-section-number">5.4.9</span> Example: Bulk creation of
users</a></li>
<li><a href="#example-find-with-filter-and-delete" id="toc-example-find-with-filter-and-delete"><span class="toc-section-number">5.4.10</span> Example: Find with filter and
delete</a></li>
<li><a href="#example-find-deactivated-users-since-more-than-2-years" id="toc-example-find-deactivated-users-since-more-than-2-years"><span class="toc-section-number">5.4.11</span> Example: Find deactivated users
since more than 2 years</a></li>
<li><a href="#example-display-current-users-workspaces" id="toc-example-display-current-users-workspaces"><span class="toc-section-number">5.4.12</span> Example: Display current user&#39;s
workspaces</a></li>
<li><a href="#example-create-a-sub-access-key-in-a-node" id="toc-example-create-a-sub-access-key-in-a-node"><span class="toc-section-number">5.4.13</span> Example: Create a sub access
key in a <code>node</code></a></li>
<li><a href="#example-display-transfer-events-opstransfer" id="toc-example-display-transfer-events-opstransfer"><span class="toc-section-number">5.4.14</span> Example: Display transfer
events (ops/transfer)</a></li>
<li><a href="#example-display-node-events-events" id="toc-example-display-node-events-events"><span class="toc-section-number">5.4.15</span> Example: Display node events
(events)</a></li>
<li><a href="#example-display-members-of-a-workspace" id="toc-example-display-members-of-a-workspace"><span class="toc-section-number">5.4.16</span> Example: Display members of a
workspace</a></li>
<li><a href="#example-add-all-members-of-a-workspace-to-another-workspace" id="toc-example-add-all-members-of-a-workspace-to-another-workspace"><span class="toc-section-number">5.4.17</span> Example: Add all members of a
workspace to another workspace</a></li>
<li><a href="#example-get-users-who-did-not-log-since-a-date" id="toc-example-get-users-who-did-not-log-since-a-date"><span class="toc-section-number">5.4.18</span> Example: Get users who did not
log since a date</a></li>
<li><a href="#example-list-limited-users" id="toc-example-list-limited-users"><span class="toc-section-number">5.4.19</span> Example: List
<strong>Limited</strong> users</a></li>
<li><a href="#example-create-a-group-add-to-workspace-and-add-user-to-group" id="toc-example-create-a-group-add-to-workspace-and-add-user-to-group"><span class="toc-section-number">5.4.20</span> Example: Create a group, add to
workspace and add user to group</a></li>
<li><a href="#example-perform-a-multi-gbps-transfer-between-two-remote-shared-folders" id="toc-example-perform-a-multi-gbps-transfer-between-two-remote-shared-folders"><span class="toc-section-number">5.4.21</span> Example: Perform a multi Gbps
transfer between two remote shared folders</a></li>
<li><a href="#example-create-registration-key-to-register-a-tethered-node" id="toc-example-create-registration-key-to-register-a-tethered-node"><span class="toc-section-number">5.4.22</span> Example: Create registration
key to register a tethered node</a></li>
<li><a href="#example-delete-all-registration-keys" id="toc-example-delete-all-registration-keys"><span class="toc-section-number">5.4.23</span> Example: Delete all
registration keys</a></li>
<li><a href="#example-create-a-node" id="toc-example-create-a-node"><span class="toc-section-number">5.4.24</span> Example: Create a Node</a></li>
</ul></li>
<li><a href="#list-of-files-to-transfer" id="toc-list-of-files-to-transfer"><span class="toc-section-number">5.5</span> List of files to transfer</a></li>
<li><a href="#packages-app" id="toc-packages-app"><span class="toc-section-number">5.6</span> Packages app</a>
<ul>
<li><a href="#send-a-package" id="toc-send-a-package"><span class="toc-section-number">5.6.1</span> Send a Package</a></li>
<li><a href="#receive-packages" id="toc-receive-packages"><span class="toc-section-number">5.6.2</span> Receive packages</a></li>
<li><a href="#list-packages" id="toc-list-packages"><span class="toc-section-number">5.6.3</span> List packages</a></li>
</ul></li>
<li><a href="#files-app" id="toc-files-app"><span class="toc-section-number">5.7</span> Files app</a>
<ul>
<li><a href="#download-files" id="toc-download-files"><span class="toc-section-number">5.7.1</span> Download Files</a></li>
<li><a href="#shared-folders" id="toc-shared-folders"><span class="toc-section-number">5.7.2</span> Shared folders</a></li>
<li><a href="#cross-organization-transfers" id="toc-cross-organization-transfers"><span class="toc-section-number">5.7.3</span> Cross Organization
transfers</a></li>
<li><a href="#find-files" id="toc-find-files"><span class="toc-section-number">5.7.4</span> Find Files</a></li>
</ul></li>
<li><a href="#tested-commands-for-aoc" id="toc-tested-commands-for-aoc"><span class="toc-section-number">5.8</span> Tested commands for
<code>aoc</code></a></li>
</ul></li>
<li><a href="#plugin-ats-ibm-aspera-transfer-service" id="toc-plugin-ats-ibm-aspera-transfer-service"><span class="toc-section-number">6</span> Plugin: <code>ats</code>: IBM Aspera
Transfer Service</a>
<ul>
<li><a href="#ibm-cloud-ats--creation-of-api-key" id="toc-ibm-cloud-ats--creation-of-api-key"><span class="toc-section-number">6.1</span> IBM Cloud ATS : Creation of API
key</a></li>
<li><a href="#ats-access-key-creation-parameters" id="toc-ats-access-key-creation-parameters"><span class="toc-section-number">6.2</span> ATS Access key creation
parameters</a></li>
<li><a href="#misc-examples" id="toc-misc-examples"><span class="toc-section-number">6.3</span> Misc. Examples</a></li>
<li><a href="#tested-commands-for-ats" id="toc-tested-commands-for-ats"><span class="toc-section-number">6.4</span> Tested commands for
<code>ats</code></a></li>
</ul></li>
<li><a href="#plugin-server-ibm-aspera-high-speed-transfer-server-ssh" id="toc-plugin-server-ibm-aspera-high-speed-transfer-server-ssh"><span class="toc-section-number">7</span> Plugin: <code>server</code>: IBM
Aspera High Speed Transfer Server (SSH)</a>
<ul>
<li><a href="#tested-commands-for-server" id="toc-tested-commands-for-server"><span class="toc-section-number">7.1</span> Tested commands for
<code>server</code></a></li>
<li><a href="#authentication-on-server-with-ssh-session" id="toc-authentication-on-server-with-ssh-session"><span class="toc-section-number">7.2</span> Authentication on Server with SSH
session</a></li>
<li><a href="#other-session-channels-for-server" id="toc-other-session-channels-for-server"><span class="toc-section-number">7.3</span> Other session channels for
<code>server</code></a></li>
<li><a href="#examples-server" id="toc-examples-server"><span class="toc-section-number">7.4</span> Examples:
<code>server</code></a></li>
</ul></li>
<li><a href="#plugin-node-ibm-aspera-high-speed-transfer-server-node" id="toc-plugin-node-ibm-aspera-high-speed-transfer-server-node"><span class="toc-section-number">8</span> Plugin: <code>node</code>: IBM
Aspera High Speed Transfer Server Node</a>
<ul>
<li><a href="#file-operations" id="toc-file-operations"><span class="toc-section-number">8.1</span> File Operations</a>
<ul>
<li><a href="#browse" id="toc-browse"><span class="toc-section-number">8.1.1</span> Browse</a></li>
</ul></li>
<li><a href="#operation-find-on-gen4access-key" id="toc-operation-find-on-gen4access-key"><span class="toc-section-number">8.2</span> Operation <code>find</code> on
<strong>gen4/access key</strong></a></li>
<li><a href="#listing-transfer-events" id="toc-listing-transfer-events"><span class="toc-section-number">8.3</span> Listing transfer events</a></li>
<li><a href="#central" id="toc-central"><span class="toc-section-number">8.4</span> Central</a></li>
<li><a href="#sync" id="toc-sync"><span class="toc-section-number">8.5</span> Sync</a></li>
<li><a href="#fasp-stream" id="toc-fasp-stream"><span class="toc-section-number">8.6</span> FASP Stream</a></li>
<li><a href="#watchfolder" id="toc-watchfolder"><span class="toc-section-number">8.7</span> Watchfolder</a></li>
<li><a href="#out-of-transfer-file-validation" id="toc-out-of-transfer-file-validation"><span class="toc-section-number">8.8</span> Out of Transfer File
Validation</a></li>
<li><a href="#example-shod-to-ats" id="toc-example-shod-to-ats"><span class="toc-section-number">8.9</span> Example: SHOD to ATS</a></li>
<li><a href="#node-file-information" id="toc-node-file-information"><span class="toc-section-number">8.10</span> Node file information</a></li>
<li><a href="#create-access-key" id="toc-create-access-key"><span class="toc-section-number">8.11</span> Create access key</a></li>
<li><a href="#generate-and-use-bearer-token" id="toc-generate-and-use-bearer-token"><span class="toc-section-number">8.12</span> Generate and use bearer token</a>
<ul>
<li><a href="#bearer-token-environment" id="toc-bearer-token-environment"><span class="toc-section-number">8.12.1</span> Bearer token:
Environment</a></li>
<li><a href="#bearer-token-preparation" id="toc-bearer-token-preparation"><span class="toc-section-number">8.12.2</span> Bearer token:
Preparation</a></li>
<li><a href="#bearer-token-configuration-for-user" id="toc-bearer-token-configuration-for-user"><span class="toc-section-number">8.12.3</span> Bearer token: Configuration for
user</a></li>
<li><a href="#bearer-token-user-side" id="toc-bearer-token-user-side"><span class="toc-section-number">8.12.4</span> Bearer token: User
side</a></li>
</ul></li>
<li><a href="#tested-commands-for-node" id="toc-tested-commands-for-node"><span class="toc-section-number">8.13</span> Tested commands for
<code>node</code></a></li>
<li><a href="#open-telemetry" id="toc-open-telemetry"><span class="toc-section-number">8.14</span> Open Telemetry</a></li>
</ul></li>
<li><a href="#plugin-faspex5-ibm-aspera-faspex-v5" id="toc-plugin-faspex5-ibm-aspera-faspex-v5"><span class="toc-section-number">9</span> Plugin: <code>faspex5</code>: IBM
Aspera Faspex v5</a>
<ul>
<li><a href="#faspex-5-jwt-authentication" id="toc-faspex-5-jwt-authentication"><span class="toc-section-number">9.1</span> Faspex 5 JWT
authentication</a></li>
<li><a href="#faspex-5-web-authentication" id="toc-faspex-5-web-authentication"><span class="toc-section-number">9.2</span> Faspex 5 web
authentication</a></li>
<li><a href="#faspex-5-bootstrap-authentication" id="toc-faspex-5-bootstrap-authentication"><span class="toc-section-number">9.3</span> Faspex 5 bootstrap
authentication</a></li>
<li><a href="#tested-commands-for-faspex5" id="toc-tested-commands-for-faspex5"><span class="toc-section-number">9.4</span> Tested commands for
<code>faspex5</code></a></li>
<li><a href="#faspex-5-inbox-selection" id="toc-faspex-5-inbox-selection"><span class="toc-section-number">9.5</span> Faspex 5: Inbox selection</a></li>
<li><a href="#faspex-5-send-a-package" id="toc-faspex-5-send-a-package"><span class="toc-section-number">9.6</span> Faspex 5: Send a package</a></li>
<li><a href="#faspex-5-send-a-package-with-metadata" id="toc-faspex-5-send-a-package-with-metadata"><span class="toc-section-number">9.7</span> Faspex 5: Send a package with
metadata</a></li>
<li><a href="#faspex-5-list-packages" id="toc-faspex-5-list-packages"><span class="toc-section-number">9.8</span> Faspex 5: List packages</a></li>
<li><a href="#faspex-5-browsing-folder-content" id="toc-faspex-5-browsing-folder-content"><span class="toc-section-number">9.9</span> Faspex 5: Browsing folder
content</a></li>
<li><a href="#faspex-5-content-of-a-received-package" id="toc-faspex-5-content-of-a-received-package"><span class="toc-section-number">9.10</span> Faspex 5: Content of a received
Package</a></li>
<li><a href="#faspex-5-receive-a-package" id="toc-faspex-5-receive-a-package"><span class="toc-section-number">9.11</span> Faspex 5: Receive a
package</a></li>
<li><a href="#faspex-5-list-all-shared-inboxes-and-work-groups" id="toc-faspex-5-list-all-shared-inboxes-and-work-groups"><span class="toc-section-number">9.12</span> Faspex 5: List all shared inboxes
and work groups</a></li>
<li><a href="#faspex-5-create-metadata-profile" id="toc-faspex-5-create-metadata-profile"><span class="toc-section-number">9.13</span> Faspex 5: Create Metadata
profile</a></li>
<li><a href="#faspex-5-create-a-shared-inbox-with-specific-metadata-profile" id="toc-faspex-5-create-a-shared-inbox-with-specific-metadata-profile"><span class="toc-section-number">9.14</span> Faspex 5: Create a Shared inbox
with specific metadata profile</a></li>
<li><a href="#faspex-5-list-content-in-shared-folder-and-send-package-from-remote-source" id="toc-faspex-5-list-content-in-shared-folder-and-send-package-from-remote-source"><span class="toc-section-number">9.15</span> Faspex 5: List content in Shared
folder and send package from remote source</a></li>
<li><a href="#faspex-5-receive-all-packages-cargo" id="toc-faspex-5-receive-all-packages-cargo"><span class="toc-section-number">9.16</span> Faspex 5: Receive all packages
(cargo)</a></li>
<li><a href="#faspex-5-invitations" id="toc-faspex-5-invitations"><span class="toc-section-number">9.17</span> Faspex 5: Invitations</a></li>
<li><a href="#faspex-5-cleanup-packages" id="toc-faspex-5-cleanup-packages"><span class="toc-section-number">9.18</span> Faspex 5: Cleanup
packages</a></li>
<li><a href="#faspex-5-admin-unlock-user" id="toc-faspex-5-admin-unlock-user"><span class="toc-section-number">9.19</span> Faspex 5: Admin: Unlock
user</a></li>
<li><a href="#faspex-5-faspex-4-style-post-processing" id="toc-faspex-5-faspex-4-style-post-processing"><span class="toc-section-number">9.20</span> Faspex 5: Faspex 4-style
post-processing</a></li>
<li><a href="#faspex-5-faspex-4-gateway" id="toc-faspex-5-faspex-4-gateway"><span class="toc-section-number">9.21</span> Faspex 5: Faspex 4
Gateway</a></li>
<li><a href="#faspex-5-get-bearer-token-to-use-api" id="toc-faspex-5-get-bearer-token-to-use-api"><span class="toc-section-number">9.22</span> Faspex 5: Get Bearer token to use
API</a></li>
</ul></li>
<li><a href="#plugin-faspex-ibm-aspera-faspex-v4" id="toc-plugin-faspex-ibm-aspera-faspex-v4"><span class="toc-section-number">10</span> Plugin: <code>faspex</code>: IBM
Aspera Faspex v4</a>
<ul>
<li><a href="#listing-packages" id="toc-listing-packages"><span class="toc-section-number">10.1</span> Listing Packages</a>
<ul>
<li><a href="#option-box" id="toc-option-box"><span class="toc-section-number">10.1.1</span> Option
<code>box</code></a></li>
<li><a href="#option-recipient" id="toc-option-recipient"><span class="toc-section-number">10.1.2</span> Option
<code>recipient</code></a></li>
<li><a href="#option-query-1" id="toc-option-query-1"><span class="toc-section-number">10.1.3</span> Option
<code>query</code></a></li>
<li><a href="#example-list-packages-in-dropbox" id="toc-example-list-packages-in-dropbox"><span class="toc-section-number">10.1.4</span> Example: List packages in
dropbox</a></li>
</ul></li>
<li><a href="#receiving-a-package" id="toc-receiving-a-package"><span class="toc-section-number">10.2</span> Receiving a Package</a></li>
<li><a href="#sending-a-package" id="toc-sending-a-package"><span class="toc-section-number">10.3</span> Sending a Package</a></li>
<li><a href="#email-notification-on-transfer" id="toc-email-notification-on-transfer"><span class="toc-section-number">10.4</span> Email notification on
transfer</a></li>
<li><a href="#operations-on-dropbox" id="toc-operations-on-dropbox"><span class="toc-section-number">10.5</span> Operations on dropbox</a></li>
<li><a href="#remote-sources" id="toc-remote-sources"><span class="toc-section-number">10.6</span> Remote sources</a></li>
<li><a href="#automated-package-download-cargo" id="toc-automated-package-download-cargo"><span class="toc-section-number">10.7</span> Automated package download
(cargo)</a></li>
<li><a href="#tested-commands-for-faspex" id="toc-tested-commands-for-faspex"><span class="toc-section-number">10.8</span> Tested commands for
<code>faspex</code></a></li>
</ul></li>
<li><a href="#plugin-shares-ibm-aspera-shares-v1" id="toc-plugin-shares-ibm-aspera-shares-v1"><span class="toc-section-number">11</span> Plugin: <code>shares</code>: IBM
Aspera Shares v1</a>
<ul>
<li><a href="#tested-commands-for-shares" id="toc-tested-commands-for-shares"><span class="toc-section-number">11.1</span> Tested commands for
<code>shares</code></a></li>
</ul></li>
<li><a href="#plugin-console-ibm-aspera-console" id="toc-plugin-console-ibm-aspera-console"><span class="toc-section-number">12</span> Plugin: <code>console</code>: IBM
Aspera Console</a>
<ul>
<li><a href="#transfer-filter" id="toc-transfer-filter"><span class="toc-section-number">12.1</span> Transfer filter</a></li>
<li><a href="#tested-commands-for-console" id="toc-tested-commands-for-console"><span class="toc-section-number">12.2</span> Tested commands for
<code>console</code></a></li>
</ul></li>
<li><a href="#plugin-orchestratoribm-aspera-orchestrator" id="toc-plugin-orchestratoribm-aspera-orchestrator"><span class="toc-section-number">13</span> Plugin:
<code>orchestrator</code>:IBM Aspera Orchestrator</a>
<ul>
<li><a href="#tested-commands-for-orchestrator" id="toc-tested-commands-for-orchestrator"><span class="toc-section-number">13.1</span> Tested commands for
<code>orchestrator</code></a></li>
</ul></li>
<li><a href="#plugin-cos-ibm-cloud-object-storage" id="toc-plugin-cos-ibm-cloud-object-storage"><span class="toc-section-number">14</span> Plugin: <code>cos</code>: IBM Cloud
Object Storage</a>
<ul>
<li><a href="#using-endpoint-api-key-and-resource-instance-id-crn" id="toc-using-endpoint-api-key-and-resource-instance-id-crn"><span class="toc-section-number">14.1</span> Using endpoint, API key and
Resource Instance ID (CRN)</a></li>
<li><a href="#using-service-credential-file" id="toc-using-service-credential-file"><span class="toc-section-number">14.2</span> Using service credential
file</a></li>
<li><a href="#operations-transfers" id="toc-operations-transfers"><span class="toc-section-number">14.3</span> Operations, transfers</a></li>
<li><a href="#tested-commands-for-cos" id="toc-tested-commands-for-cos"><span class="toc-section-number">14.4</span> Tested commands for
<code>cos</code></a></li>
</ul></li>
<li><a href="#plugin-httpgw-http-gateway" id="toc-plugin-httpgw-http-gateway"><span class="toc-section-number">15</span> Plugin: <code>httpgw</code>: HTTP
Gateway</a>
<ul>
<li><a href="#tested-commands-for-httpgw" id="toc-tested-commands-for-httpgw"><span class="toc-section-number">15.1</span> Tested commands for
<code>httpgw</code></a></li>
</ul></li>
<li><a href="#plugin-faspio-faspio-gateway" id="toc-plugin-faspio-faspio-gateway"><span class="toc-section-number">16</span> Plugin: <code>faspio</code>: Faspio
Gateway</a>
<ul>
<li><a href="#tested-commands-for-faspio" id="toc-tested-commands-for-faspio"><span class="toc-section-number">16.1</span> Tested commands for
<code>faspio</code></a></li>
</ul></li>
<li><a href="#plugin-alee-aspera-license-entitlement-engine" id="toc-plugin-alee-aspera-license-entitlement-engine"><span class="toc-section-number">17</span> Plugin: <code>alee</code>: Aspera
License Entitlement Engine</a>
<ul>
<li><a href="#tested-commands-for-alee" id="toc-tested-commands-for-alee"><span class="toc-section-number">17.1</span> Tested commands for
<code>alee</code></a></li>
</ul></li>
<li><a href="#plugin-preview-preview-generator-for-aoc" id="toc-plugin-preview-preview-generator-for-aoc"><span class="toc-section-number">18</span> Plugin: <code>preview</code>:
Preview generator for AoC</a>
<ul>
<li><a href="#aspera-server-configuration" id="toc-aspera-server-configuration"><span class="toc-section-number">18.1</span> Aspera Server
configuration</a></li>
<li><a href="#external-tools-linux" id="toc-external-tools-linux"><span class="toc-section-number">18.2</span> External tools: Linux</a>
<ul>
<li><a href="#image-imagemagick-and-optipng" id="toc-image-imagemagick-and-optipng"><span class="toc-section-number">18.2.1</span> Image: ImageMagick and
<code>optipng</code></a></li>
<li><a href="#video-ffmpeg" id="toc-video-ffmpeg"><span class="toc-section-number">18.2.2</span> Video: FFmpeg</a></li>
<li><a href="#office-unoconv-and-libreoffice" id="toc-office-unoconv-and-libreoffice"><span class="toc-section-number">18.2.3</span> Office: <code>unoconv</code>
and LibreOffice</a></li>
</ul></li>
<li><a href="#configuration" id="toc-configuration"><span class="toc-section-number">18.3</span> Configuration</a></li>
<li><a href="#options-for-generated-files" id="toc-options-for-generated-files"><span class="toc-section-number">18.4</span> Options for generated
files</a></li>
<li><a href="#execution" id="toc-execution"><span class="toc-section-number">18.5</span> Execution</a></li>
<li><a href="#configuration-for-execution-in-scheduler" id="toc-configuration-for-execution-in-scheduler"><span class="toc-section-number">18.6</span> Configuration for Execution in
scheduler</a></li>
<li><a href="#candidate-detection-for-creation-or-update-or-deletion" id="toc-candidate-detection-for-creation-or-update-or-deletion"><span class="toc-section-number">18.7</span> Candidate detection for creation
or update (or deletion)</a></li>
<li><a href="#preview-file-types" id="toc-preview-file-types"><span class="toc-section-number">18.8</span> Preview File types</a></li>
<li><a href="#supported-input-files-types" id="toc-supported-input-files-types"><span class="toc-section-number">18.9</span> Supported input Files
types</a></li>
<li><a href="#mimemagic" id="toc-mimemagic"><span class="toc-section-number">18.10</span> <code>mimemagic</code></a></li>
<li><a href="#generation-read-source-files-and-write-preview" id="toc-generation-read-source-files-and-write-preview"><span class="toc-section-number">18.11</span> Generation: Read source files
and write preview</a></li>
<li><a href="#tested-commands-for-preview" id="toc-tested-commands-for-preview"><span class="toc-section-number">18.12</span> Tested commands for
<code>preview</code></a></li>
</ul></li>
<li><a href="#ibm-aspera-sync" id="toc-ibm-aspera-sync"><span class="toc-section-number">19</span> IBM Aspera Sync</a>
<ul>
<li><a href="#starting-a-sync-session" id="toc-starting-a-sync-session"><span class="toc-section-number">19.1</span> Starting a sync session</a>
<ul>
<li><a href="#sync_info-conf-format" id="toc-sync_info-conf-format"><span class="toc-section-number">19.1.1</span> <code>sync_info</code>:
<code>conf</code> format</a></li>
<li><a href="#sync_info-args-format" id="toc-sync_info-args-format"><span class="toc-section-number">19.1.2</span> <code>sync_info</code>:
<code>args</code> format</a></li>
</ul></li>
<li><a href="#sync-management-and-monitoring" id="toc-sync-management-and-monitoring"><span class="toc-section-number">19.2</span> Sync management and
monitoring</a></li>
</ul></li>
<li><a href="#hot-folder" id="toc-hot-folder"><span class="toc-section-number">20</span> Hot folder</a>
<ul>
<li><a href="#requirements" id="toc-requirements"><span class="toc-section-number">20.1</span> Requirements</a></li>
<li><a href="#setup-procedure" id="toc-setup-procedure"><span class="toc-section-number">20.2</span> Setup procedure</a>
<ul>
<li><a href="#ascp-features" id="toc-ascp-features"><span class="toc-section-number">20.2.1</span> <code>ascp</code>
features</a></li>
<li><a href="#server-side-and-configuration" id="toc-server-side-and-configuration"><span class="toc-section-number">20.2.2</span> Server side and
configuration</a></li>
<li><a href="#scheduling" id="toc-scheduling"><span class="toc-section-number">20.2.3</span> Scheduling</a></li>
</ul></li>
<li><a href="#example-upload-hot-folder" id="toc-example-upload-hot-folder"><span class="toc-section-number">20.3</span> Example: Upload hot
folder</a></li>
<li><a href="#example-unidirectional-synchronization-upload-to-server" id="toc-example-unidirectional-synchronization-upload-to-server"><span class="toc-section-number">20.4</span> Example: Unidirectional
synchronization (upload) to server</a></li>
<li><a href="#example-unidirectional-synchronization-download-from-aspera-on-cloud-files" id="toc-example-unidirectional-synchronization-download-from-aspera-on-cloud-files"><span class="toc-section-number">20.5</span> Example: Unidirectional
synchronization (download) from Aspera on Cloud Files</a></li>
</ul></li>
<li><a href="#health-check-and-nagios" id="toc-health-check-and-nagios"><span class="toc-section-number">21</span> Health check and Nagios</a></li>
<li><a href="#smtp-for-email-notifications" id="toc-smtp-for-email-notifications"><span class="toc-section-number">22</span> SMTP for email notifications</a>
<ul>
<li><a href="#example-of-configuration" id="toc-example-of-configuration"><span class="toc-section-number">22.1</span> Example of configuration</a></li>
<li><a href="#email-templates" id="toc-email-templates"><span class="toc-section-number">22.2</span> Email templates</a></li>
<li><a href="#test" id="toc-test"><span class="toc-section-number">22.3</span> Test</a></li>
<li><a href="#notifications-for-transfer-status" id="toc-notifications-for-transfer-status"><span class="toc-section-number">22.4</span> Notifications for transfer
status</a></li>
</ul></li>
<li><a href="#tool-asession" id="toc-tool-asession"><span class="toc-section-number">23</span> Tool: <code>asession</code></a>
<ul>
<li><a href="#comparison-of-interfaces" id="toc-comparison-of-interfaces"><span class="toc-section-number">23.1</span> Comparison of interfaces</a></li>
<li><a href="#simple-session" id="toc-simple-session"><span class="toc-section-number">23.2</span> Simple session</a></li>
<li><a href="#asynchronous-commands-and-persistent-session" id="toc-asynchronous-commands-and-persistent-session"><span class="toc-section-number">23.3</span> Asynchronous commands and
Persistent session</a></li>
<li><a href="#example-of-language-wrapper" id="toc-example-of-language-wrapper"><span class="toc-section-number">23.4</span> Example of language
wrapper</a></li>
<li><a href="#help" id="toc-help"><span class="toc-section-number">23.5</span> Help</a></li>
</ul></li>
<li><a href="#ruby-module-aspera" id="toc-ruby-module-aspera"><span class="toc-section-number">24</span> Ruby Module:
<code>Aspera</code></a></li>
<li><a href="#history" id="toc-history"><span class="toc-section-number">25</span> History</a></li>
<li><a href="#common-problems" id="toc-common-problems"><span class="toc-section-number">26</span> Common problems</a>
<ul>
<li><a href="#error-remote-host-is-not-who-we-expected" id="toc-error-remote-host-is-not-who-we-expected"><span class="toc-section-number">26.1</span> Error: &quot;Remote host is not who we
expected&quot;</a></li>
<li><a href="#error-cant-find-header-files-for-ruby" id="toc-error-cant-find-header-files-for-ruby"><span class="toc-section-number">26.2</span> Error: &quot;can&#39;t find header files
for ruby&quot;</a></li>
<li><a href="#ed25519-key-not-supported" id="toc-ed25519-key-not-supported"><span class="toc-section-number">26.3</span> ED25519 key not
supported</a></li>
<li><a href="#jruby-net-ssh-unsupported-algorithm" id="toc-jruby-net-ssh-unsupported-algorithm"><span class="toc-section-number">26.4</span> JRuby: <code>net-ssh</code>:
Unsupported algorithm</a></li>
<li><a href="#error-ssl_read-unexpected-eof-while-reading" id="toc-error-ssl_read-unexpected-eof-while-reading"><span class="toc-section-number">26.5</span> Error: &quot;SSL_read: unexpected eof
while reading&quot;</a></li>
<li><a href="#error-ascp-lib64libcso6-version-glibc_228-not-found" id="toc-error-ascp-lib64libcso6-version-glibc_228-not-found"><span class="toc-section-number">26.6</span> Error: <code>ascp</code>:
/lib64/libc.so.6: version `GLIBC_2.28&#39; not found</a></li>
<li><a href="#error-cannot-rename-partial-file" id="toc-error-cannot-rename-partial-file"><span class="toc-section-number">26.7</span> Error: Cannot rename partial
file</a></li>
</ul></li>
</ul>
</nav>
<!--
DO NOT EDIT: THIS FILE IS GENERATED, edit docs/README.erb.md, for details, read docs/README.md
PANDOC_META_BEGIN
subtitle: "ascli 4.24.0.pre"
author: "Laurent MARTIN"
PANDOC_META_END
-->

<!-- markdownlint-disable MD033 -->

<p><a href="https://badge.fury.io/rb/aspera-cli"><img role="img" aria-label="Gem Version" src="data:image/svg+xml;base64,PHN2ZwogIHdpZHRoPSIxMjciCiAgaGVpZ2h0PSIyMCIKICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxkZWZzPgogICAgPGxpbmVhckdyYWRpZW50CiAgICAgIGlkPSJhIgogICAgICB4MT0iMCIKICAgICAgeTE9IjAiCiAgICAgIHgyPSIwIgogICAgICB5Mj0iMSIKICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiCiAgICAgIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoMTI3IDAgMCAyMCAtMCAwKSI+CiAgICAgIDxzdG9wCiAgICAgICAgb2Zmc2V0PSIwIgogICAgICAgIHN0b3AtY29sb3I9IiNiYmJiYmIiCiAgICAgICAgc3RvcC1vcGFjaXR5PSIwLjEiLz4KICAgICAgPHN0b3AKICAgICAgICBvZmZzZXQ9IjEiCiAgICAgICAgc3RvcC1jb2xvcj0iIzAwMDAwMCIKICAgICAgICBzdG9wLW9wYWNpdHk9IjAuMSIvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICA8L2RlZnM+CiAgPHBhdGgKICAgIGZpbGw9IiM1NTU1NTUiCiAgICBzdHJva2U9Im5vbmUiCiAgICBkPSJNIDMgMCBMIDEyNCAwIEMgMTI1LjY1Njg1IDAgMTI3IDEuMzQzMTQ1NyAxMjcgMyBMIDEyNyAxNyBDIDEyNyAxOC42NTY4NTUgMTI1LjY1Njg1IDIwIDEyNCAyMCBMIDMgMjAgQyAxLjM0MzE0NTcgMjAgMCAxOC42NTY4NTUgMCAxNyBMIDAgMyBDIC0wIDEuMzQzMTQ1NyAxLjM0MzE0NTcgMCAzIDAgWiIvPgogIDxwYXRoCiAgICBmaWxsPSIjNDRjYzExIgogICAgc3Ryb2tlPSJub25lIgogICAgZD0iTSA4NCAwIEwgMTI0IDAgQyAxMjUuNjU2ODUgMCAxMjcgMS4zNDMxNDU3IDEyNyAzIEwgMTI3IDE3IEMgMTI3IDE4LjY1Njg1NSAxMjUuNjU2ODUgMjAgMTI0IDIwIEwgODQgMjAgQyA4Mi4zNDMxNSAyMCA4MSAxOC42NTY4NTUgODEgMTcgTCA4MSAzIEMgODEgMS4zNDMxNDU3IDgyLjM0MzE1IDAgODQgMCBaIi8+CiAgPHBhdGgKICAgIGZpbGw9IiM0NGNjMTEiCiAgICBzdHJva2U9Im5vbmUiCiAgICBkPSJNIDgxIDAgTCA5NCAwIEwgOTQgMjAgTCA4MSAyMCBaIi8+CiAgPHBhdGgKICAgIGZpbGw9InVybCgjYSkiCiAgICBzdHJva2U9Im5vbmUiCiAgICBkPSJNIDMgMCBMIDEyNCAwIEMgMTI1LjY1Njg1IDAgMTI3IDEuMzQzMTQ1NyAxMjcgMyBMIDEyNyAxNyBDIDEyNyAxOC42NTY4NTUgMTI1LjY1Njg1IDIwIDEyNCAyMCBMIDMgMjAgQyAxLjM0MzE0NTcgMjAgMCAxOC42NTY4NTUgMCAxNyBMIDAgMyBDIC0wIDEuMzQzMTQ1NyAxLjM0MzE0NTcgMCAzIDAgWiIvPgogIDxnPgogICAgPGcKICAgICAgaWQ9InRCYWNrIj4KICAgICAgPHBhdGgKICAgICAgICBmaWxsPSIjMDEwMTAxIgogICAgICAgIGZpbGwtb3BhY2l0eT0iMC4zIgogICAgICAgIHN0cm9rZT0iIzAxMDEwMSIKICAgICAgICBzdHJva2Utb3BhY2l0eT0iMC4xMDE5NjA3ODYiCiAgICAgICAgc3Ryb2tlLXdpZHRoPSIwLjMiCiAgICAgICAgZD0iTSAxMC45OTUxMTcgMTEuOTIyMzYzIFEgMTAuOTk1MTE3IDEwLjg0ODE0NSAxMC41NTIwMDIgMTAuMjU3MzI0IFEgMTAuMTA4ODg3IDkuNjY2NTA0IDkuMzA4NTk0IDkuNjY2NTA0IFEgOC41MTM2NzIgOS42NjY1MDQgOC4wNzA1NTcgMTAuMjU3MzI0IFEgNy42Mjc0NDE0IDEwLjg0ODE0NSA3LjYyNzQ0MTQgMTEuOTIyMzYzIFEgNy42Mjc0NDE0IDEyLjk5MTIxMiA4LjA3MDU1NyAxMy41ODIwMzEgUSA4LjUxMzY3MiAxNC4xNzI4NTIgOS4zMDg1OTQgMTQuMTcyODUyIFEgMTAuMTA4ODg3IDE0LjE3Mjg1MiAxMC41NTIwMDIgMTMuNTgyMDMxIFEgMTAuOTk1MTE3IDEyLjk5MTIxMiAxMC45OTUxMTcgMTEuOTIyMzYzIFogTSAxMS45ODMzOTggMTQuMjUzNDE4IFEgMTEuOTgzMzk4IDE1Ljc4OTU1MiAxMS4zMDEyNyAxNi41Mzg4MTggUSAxMC42MTkxNDEgMTcuMjg4MDg2IDkuMjExOTE0IDE3LjI4ODA4NiBRIDguNjkwOTE4IDE3LjI4ODA4NiA4LjIyOTAwNCAxNy4yMTAyMDUgUSA3Ljc2NzA5IDE3LjEzMjMyNCA3LjMzMjAzMTMgMTYuOTcxMTkxIEwgNy4zMzIwMzEzIDE2LjAwOTc2NiBRIDcuNzY3MDkgMTYuMjQ2MDk0IDguMTkxNDA2IDE2LjM1ODg4NyBRIDguNjE1NzIzIDE2LjQ3MTY4IDkuMDU2MTUyIDE2LjQ3MTY4IFEgMTAuMDI4MzIgMTYuNDcxNjggMTAuNTExNzE5IDE1Ljk2NDExMSBRIDEwLjk5NTExNyAxNS40NTY1NDMgMTAuOTk1MTE3IDE0LjQzMDY2NCBMIDEwLjk5NTExNyAxMy45NDE4OTUgUSAxMC42ODg5NjUgMTQuNDczNjMzIDEwLjIxMDkzNzUgMTQuNzM2ODE2IFEgOS43MzI5MSAxNSA5LjA2Njg5NSAxNSBRIDcuOTYwNDQ5IDE1IDcuMjgzNjkxNCAxNC4xNTY3MzggUSA2LjYwNjkzMzYgMTMuMzEzNDc3NSA2LjYwNjkzMzYgMTEuOTIyMzYzIFEgNi42MDY5MzM2IDEwLjUyNTg3OSA3LjI4MzY5MTQgOS42ODI2MTcgUSA3Ljk2MDQ0OSA4LjgzOTM1NSA5LjA2Njg5NSA4LjgzOTM1NSBRIDkuNzMyOTEgOC44MzkzNTUgMTAuMjEwOTM3NSA5LjEwMjUzOSBRIDEwLjY4ODk2NSA5LjM2NTcyMyAxMC45OTUxMTcgOS44OTc0NjEgTCAxMC45OTUxMTcgOC45ODQzNzUgTCAxMS45ODMzOTggOC45ODQzNzUgTCAxMS45ODMzOTggMTQuMjUzNDE4IFogTSAxOS4xNjQ1NSAxMS43NDUxMTcgTCAxOS4xNjQ1NSAxMi4yMjg1MTYgTCAxNC42MjA2MDUgMTIuMjI4NTE2IFEgMTQuNjg1MDU5IDEzLjI0OTAyNCAxNS4yMzU1OTYgMTMuNzgzNDQ3IFEgMTUuNzg2MTMzIDE0LjMxNzg3MSAxNi43NjkwNDMgMTQuMzE3ODcxIFEgMTcuMzM4Mzc5IDE0LjMxNzg3MSAxNy44NzI4MDMgMTQuMTc4MjIyIFEgMTguNDA3MjI3IDE0LjAzODU3NCAxOC45MzM1OTQgMTMuNzU5Mjc2IEwgMTguOTMzNTk0IDE0LjY5Mzg0NyBRIDE4LjQwMTg1NSAxNC45MTk0MzMgMTcuODQzMjYyIDE1LjAzNzU5OCBRIDE3LjI4NDY2OCAxNS4xNTU3NjIgMTYuNzA5OTYgMTUuMTU1NzYyIFEgMTUuMjcwNTA4IDE1LjE1NTc2MiAxNC40Mjk5MzIgMTQuMzE3ODcxIFEgMTMuNTg5MzU1IDEzLjQ3OTk4IDEzLjU4OTM1NSAxMi4wNTEyNyBRIDEzLjU4OTM1NSAxMC41NzQyMTkgMTQuMzg2OTYzIDkuNzA2Nzg3IFEgMTUuMTg0NTcxIDguODM5MzU1IDE2LjUzODA4NiA4LjgzOTM1NSBRIDE3Ljc1MTk1MyA4LjgzOTM1NSAxOC40NTgyNTIgOS42MjA4NSBRIDE5LjE2NDU1IDEwLjQwMjM0NCAxOS4xNjQ1NSAxMS43NDUxMTcgWiBNIDE4LjE3NjI3IDExLjQ1NTA3OCBRIDE4LjE2NTUyNyAxMC42NDQwNDMgMTcuNzIyNDEyIDEwLjE2MDY0NSBRIDE3LjI3OTI5NyA5LjY3NzI0NiAxNi41NDg4MjggOS42NzcyNDYgUSAxNS43MjE2OCA5LjY3NzI0NiAxNS4yMjQ4NTM1IDEwLjE0NDUzMSBRIDE0LjcyODAyNyAxMC42MTE4MTYgMTQuNjUyODMyIDExLjQ2MDQ0OSBMIDE4LjE3NjI3IDExLjQ1NTA3OCBaIE0gMjUuNDcwMjE1IDEwLjEzOTE2IFEgMjUuODQwODE4IDkuNDczMTQ1IDI2LjM1NjQ0MyA5LjE1NjI1IFEgMjYuODcyMDY4IDguODM5MzU1IDI3LjU3MDMxMyA4LjgzOTM1NSBRIDI4LjUxMDI1NCA4LjgzOTM1NSAyOS4wMjA1MDggOS40OTczMTQgUSAyOS41MzA3NjIgMTAuMTU1MjczIDI5LjUzMDc2MiAxMS4zNjkxNDEgTCAyOS41MzA3NjIgMTUgTCAyOC41MzcxMSAxNSBMIDI4LjUzNzExIDExLjQwMTM2NyBRIDI4LjUzNzExIDEwLjUzNjYyMSAyOC4yMzA5NTkgMTAuMTE3Njc2IFEgMjcuOTI0ODA1IDkuNjk4NzMgMjcuMjk2Mzg3IDkuNjk4NzMgUSAyNi41MjgzMiA5LjY5ODczIDI2LjA4MjUyIDEwLjIwODk4NCBRIDI1LjYzNjcxOSAxMC43MTkyMzggMjUuNjM2NzE5IDExLjYwMDA5OCBMIDI1LjYzNjcxOSAxNSBMIDI0LjY0MzA2NiAxNSBMIDI0LjY0MzA2NiAxMS40MDEzNjcgUSAyNC42NDMwNjYgMTAuNTMxMjUgMjQuMzM2OTE0IDEwLjExNDk5IFEgMjQuMDMwNzYyIDkuNjk4NzMgMjMuMzkxNjAyIDkuNjk4NzMgUSAyMi42MzQyOCA5LjY5ODczIDIyLjE4ODQ3NyAxMC4yMTE2NyBRIDIxLjc0MjY3NiAxMC43MjQ2MDkgMjEuNzQyNjc2IDExLjYwMDA5OCBMIDIxLjc0MjY3NiAxNSBMIDIwLjc0OTAyMyAxNSBMIDIwLjc0OTAyMyA4Ljk4NDM3NSBMIDIxLjc0MjY3NiA4Ljk4NDM3NSBMIDIxLjc0MjY3NiA5LjkxODk0NSBRIDIyLjA4MTA1NSA5LjM2NTcyMyAyMi41NTM3MSA5LjEwMjUzOSBRIDIzLjAyNjM2NyA4LjgzOTM1NSAyMy42NzYyNyA4LjgzOTM1NSBRIDI0LjMzMTU0MyA4LjgzOTM1NSAyNC43OTA3NzEgOS4xNzIzNjMgUSAyNS4yNSA5LjUwNTM3MSAyNS40NzAyMTUgMTAuMTM5MTYgWiBNIDM0LjI4OTU1IDguOTg0Mzc1IEwgMzUuMzM2OTE0IDguOTg0Mzc1IEwgMzcuMjE2Nzk3IDE0LjAzMzIwMyBMIDM5LjA5NjY4IDguOTg0Mzc1IEwgNDAuMTQ0MDQzIDguOTg0Mzc1IEwgMzcuODg4MTg0IDE1IEwgMzYuNTQ1NDEgMTUgTCAzNC4yODk1NSA4Ljk4NDM3NSBaIE0gNDYuNjUzODEgMTEuNzQ1MTE3IEwgNDYuNjUzODEgMTIuMjI4NTE2IEwgNDIuMTA5ODYzIDEyLjIyODUxNiBRIDQyLjE3NDMxNiAxMy4yNDkwMjQgNDIuNzI0ODU0IDEzLjc4MzQ0NyBRIDQzLjI3NTM5IDE0LjMxNzg3MSA0NC4yNTgzIDE0LjMxNzg3MSBRIDQ0LjgyNzYzNyAxNC4zMTc4NzEgNDUuMzYyMDU3IDE0LjE3ODIyMiBRIDQ1Ljg5NjQ4NCAxNC4wMzg1NzQgNDYuNDIyODUgMTMuNzU5Mjc2IEwgNDYuNDIyODUgMTQuNjkzODQ3IFEgNDUuODkxMTEzIDE0LjkxOTQzMyA0NS4zMzI1MiAxNS4wMzc1OTggUSA0NC43NzM5MjIgMTUuMTU1NzYyIDQ0LjE5OTIyIDE1LjE1NTc2MiBRIDQyLjc1OTc2NiAxNS4xNTU3NjIgNDEuOTE5MTkgMTQuMzE3ODcxIFEgNDEuMDc4NjEzIDEzLjQ3OTk4IDQxLjA3ODYxMyAxMi4wNTEyNyBRIDQxLjA3ODYxMyAxMC41NzQyMTkgNDEuODc2MjIgOS43MDY3ODcgUSA0Mi42NzM4MyA4LjgzOTM1NSA0NC4wMjczNDggOC44MzkzNTUgUSA0NS4yNDEyMSA4LjgzOTM1NSA0NS45NDc1MSA5LjYyMDg1IFEgNDYuNjUzODEgMTAuNDAyMzQ0IDQ2LjY1MzgxIDExLjc0NTExNyBaIE0gNDUuNjY1NTI3IDExLjQ1NTA3OCBRIDQ1LjY1NDc4NSAxMC42NDQwNDMgNDUuMjExNjcgMTAuMTYwNjQ1IFEgNDQuNzY4NTU1IDkuNjc3MjQ2IDQ0LjAzODA4NiA5LjY3NzI0NiBRIDQzLjIxMDkzOCA5LjY3NzI0NiA0Mi43MTQxMSAxMC4xNDQ1MzEgUSA0Mi4yMTcyODUgMTAuNjExODE2IDQyLjE0MjA5IDExLjQ2MDQ0OSBMIDQ1LjY2NTUyNyAxMS40NTUwNzggWiBNIDUxLjc2MTcyIDkuOTA4MjAzIFEgNTEuNTk1MjEgOS44MTE1MjMgNTEuMzk5MTY2IDkuNzY1ODY5IFEgNTEuMjAzMTI1IDkuNzIwMjE1IDUwLjk2NjggOS43MjAyMTUgUSA1MC4xMjg5MDYgOS43MjAyMTUgNDkuNjgwNDIgMTAuMjY1MzgxIFEgNDkuMjMxOTM0IDEwLjgxMDU0NyA0OS4yMzE5MzQgMTEuODMxMDU0IEwgNDkuMjMxOTM0IDE1IEwgNDguMjM4MjggMTUgTCA0OC4yMzgyOCA4Ljk4NDM3NSBMIDQ5LjIzMTkzNCA4Ljk4NDM3NSBMIDQ5LjIzMTkzNCA5LjkxODk0NSBRIDQ5LjU0MzQ1MyA5LjM3MTA5NCA1MC4wNDI5NyA5LjEwNTIyNSBRIDUwLjU0MjQ4IDguODM5MzU1IDUxLjI1NjgzNiA4LjgzOTM1NSBRIDUxLjM1ODg5IDguODM5MzU1IDUxLjQ4MjQyNiA4Ljg1Mjc4MyBRIDUxLjYwNTk1MyA4Ljg2NjIxMSA1MS43NTYzNDggOC44OTMwNjYgTCA1MS43NjE3MiA5LjkwODIwMyBaIE0gNTYuNjMzMzA1IDkuMTYxNjIxIEwgNTYuNjMzMzA1IDEwLjA5NjE5MSBRIDU2LjIxNDM1NSA5Ljg4MTM0OCA1NS43NjMxODQgOS43NzM5MjYgUSA1NS4zMTIwMSA5LjY2NjUwNCA1NC44Mjg2MTcgOS42NjY1MDQgUSA1NC4wOTI3NzMgOS42NjY1MDQgNTMuNzI0ODUgOS44OTIwOSBRIDUzLjM1NjkzNCAxMC4xMTc2NzYgNTMuMzU2OTM0IDEwLjU2ODg0OCBRIDUzLjM1NjkzNCAxMC45MTI1OTggNTMuNjIwMTE3IDExLjEwODY0MyBRIDUzLjg4MzMgMTEuMzA0Njg3NSA1NC42NzgyMjMgMTEuNDgxOTM1IEwgNTUuMDE2NiAxMS41NTcxMjkgUSA1Ni4wNjkzMzYgMTEuNzgyNzE1IDU2LjUxMjQ1IDEyLjE5MzYwMzUgUSA1Ni45NTU1NjYgMTIuNjA0NDkzIDU2Ljk1NTU2NiAxMy4zNDAzMzEgUSA1Ni45NTU1NjYgMTQuMTc4MjIyIDU2LjI5MjIzMyAxNC42NjY5OTIgUSA1NS42Mjg5MDYgMTUuMTU1NzYyIDU0LjQ2ODc1IDE1LjE1NTc2MiBRIDUzLjk4NTM1IDE1LjE1NTc2MiA1My40NjE2NjYgMTUuMDYxNzY4IFEgNTIuOTM3OTkgMTQuOTY3NzczIDUyLjM1NzkxIDE0Ljc3OTc4NSBMIDUyLjM1NzkxIDEzLjc1OTI3NiBRIDUyLjkwNTc2NiAxNC4wNDM5NDUgNTMuNDM3NSAxNC4xODYyNzkgUSA1My45NjkyNCAxNC4zMjg2MTMgNTQuNDkwMjM0IDE0LjMyODYxMyBRIDU1LjE4ODQ3NyAxNC4zMjg2MTMgNTUuNTY0NDUzIDE0LjA4OTYgUSA1NS45NDA0MyAxMy44NTA1ODYgNTUuOTQwNDMgMTMuNDE1NTI3IFEgNTUuOTQwNDMgMTMuMDEyNjk1IDU1LjY2OTE5MyAxMi43OTc4NTI1IFEgNTUuMzk3OTUgMTIuNTgzMDA4IDU0LjQ3OTQ5MiAxMi4zODQyNzcgTCA1NC4xMzU3NDIgMTIuMzAzNzExIFEgNTMuMjE3Mjg1IDEyLjExMDM1MiA1Mi44MDkwODIgMTEuNzEwMjA1IFEgNTIuNDAwODggMTEuMzEwMDU5IDUyLjQwMDg4IDEwLjYxMTgxNiBRIDUyLjQwMDg4IDkuNzYzMTg0IDUzLjAwMjQ0IDkuMzAxMjcgUSA1My42MDQwMDQgOC44MzkzNTUgNTQuNzEwNDUzIDguODM5MzU1IFEgNTUuMjU4MyA4LjgzOTM1NSA1NS43NDE3IDguOTE5OTIyIFEgNTYuMjI1MDk0IDkuMDAwNDg4IDU2LjYzMzMwNSA5LjE2MTYyMSBaIE0gNTguNTI5Mjk3IDguOTg0Mzc1IEwgNTkuNTE3NTggOC45ODQzNzUgTCA1OS41MTc1OCAxNSBMIDU4LjUyOTI5NyAxNSBMIDU4LjUyOTI5NyA4Ljk4NDM3NSBaIE0gNTguNTI5Mjk3IDYuNjQyNTc4IEwgNTkuNTE3NTggNi42NDI1NzggTCA1OS41MTc1OCA3Ljg5NDA0MyBMIDU4LjUyOTI5NyA3Ljg5NDA0MyBMIDU4LjUyOTI5NyA2LjY0MjU3OCBaIE0gNjMuOTE2NTA0IDkuNjc3MjQ2IFEgNjMuMTIxNTgyIDkuNjc3MjQ2IDYyLjY1OTY2NCAxMC4yOTc2MDcgUSA2Mi4xOTc3NTQgMTAuOTE3OTY5IDYyLjE5Nzc1NCAxMS45OTc1NTkgUSA2Mi4xOTc3NTQgMTMuMDc3MTQ4IDYyLjY1Njk4MiAxMy42OTc1MTEgUSA2My4xMTYyMSAxNC4zMTc4NzEgNjMuOTE2NTA0IDE0LjMxNzg3MSBRIDY0LjcwNjA1NSAxNC4zMTc4NzEgNjUuMTY3OTcgMTMuNjk0ODIzIFEgNjUuNjI5ODggMTMuMDcxNzc3IDY1LjYyOTg4IDExLjk5NzU1OSBRIDY1LjYyOTg4IDEwLjkyODcxIDY1LjE2Nzk3IDEwLjMwMjk3ODUgUSA2NC43MDYwNTUgOS42NzcyNDYgNjMuOTE2NTA0IDkuNjc3MjQ2IFogTSA2My45MTY1MDQgOC44MzkzNTUgUSA2NS4yMDU1NyA4LjgzOTM1NSA2NS45NDE0MSA5LjY3NzI0NiBRIDY2LjY3NzI0NiAxMC41MTUxMzcgNjYuNjc3MjQ2IDExLjk5NzU1OSBRIDY2LjY3NzI0NiAxMy40NzQ2MSA2NS45NDE0MSAxNC4zMTUxODYgUSA2NS4yMDU1NyAxNS4xNTU3NjIgNjMuOTE2NTA0IDE1LjE1NTc2MiBRIDYyLjYyMjA3IDE1LjE1NTc2MiA2MS44ODg5MTYgMTQuMzE1MTg2IFEgNjEuMTU1NzYgMTMuNDc0NjEgNjEuMTU1NzYgMTEuOTk3NTU5IFEgNjEuMTU1NzYgMTAuNTE1MTM3IDYxLjg4ODkxNiA5LjY3NzI0NiBRIDYyLjYyMjA3IDguODM5MzU1IDYzLjkxNjUwNCA4LjgzOTM1NSBaIE0gNzMuMzE1OTIgMTEuMzY5MTQxIEwgNzMuMzE1OTIgMTUgTCA3Mi4zMjc2NCAxNSBMIDcyLjMyNzY0IDExLjQwMTM2NyBRIDcyLjMyNzY0IDEwLjU0NzM2MyA3MS45OTQ2MyAxMC4xMjMwNDcgUSA3MS42NjE2MiA5LjY5ODczIDcwLjk5NTYwNSA5LjY5ODczIFEgNzAuMTk1MzEgOS42OTg3MyA2OS43MzM0IDEwLjIwODk4NCBRIDY5LjI3MTQ4NCAxMC43MTkyMzggNjkuMjcxNDg0IDExLjYwMDA5OCBMIDY5LjI3MTQ4NCAxNSBMIDY4LjI3NzgzIDE1IEwgNjguMjc3ODMgOC45ODQzNzUgTCA2OS4yNzE0ODQgOC45ODQzNzUgTCA2OS4yNzE0ODQgOS45MTg5NDUgUSA2OS42MjU5OCA5LjM3NjQ2NSA3MC4xMDY2OSA5LjEwNzkxIFEgNzAuNTg3NCA4LjgzOTM1NSA3MS4yMTU4MiA4LjgzOTM1NSBRIDcyLjI1MjQ0IDguODM5MzU1IDcyLjc4NDE4IDkuNDgxMjAxIFEgNzMuMzE1OTIgMTAuMTIzMDQ3IDczLjMxNTkyIDExLjM2OTE0MSBaIi8+CiAgICA8L2c+CiAgICA8ZwogICAgICBpZD0idFRleHQiPgogICAgICA8cGF0aAogICAgICAgIGZpbGw9IiNmZmZmZmYiCiAgICAgICAgc3Ryb2tlPSIjZmZmZmZmIgogICAgICAgIHN0cm9rZS13aWR0aD0iMC4zIgogICAgICAgIGQ9Ik0gMTAuOTk1MTE3IDEwLjkyMjM2MyBRIDEwLjk5NTExNyA5Ljg0ODE0NSAxMC41NTIwMDIgOS4yNTczMjQgUSAxMC4xMDg4ODcgOC42NjY1MDQgOS4zMDg1OTQgOC42NjY1MDQgUSA4LjUxMzY3MiA4LjY2NjUwNCA4LjA3MDU1NyA5LjI1NzMyNCBRIDcuNjI3NDQxNCA5Ljg0ODE0NSA3LjYyNzQ0MTQgMTAuOTIyMzYzIFEgNy42Mjc0NDE0IDExLjk5MTIxMiA4LjA3MDU1NyAxMi41ODIwMzEgUSA4LjUxMzY3MiAxMy4xNzI4NTIgOS4zMDg1OTQgMTMuMTcyODUyIFEgMTAuMTA4ODg3IDEzLjE3Mjg1MiAxMC41NTIwMDIgMTIuNTgyMDMxIFEgMTAuOTk1MTE3IDExLjk5MTIxMiAxMC45OTUxMTcgMTAuOTIyMzYzIFogTSAxMS45ODMzOTggMTMuMjUzNDE4IFEgMTEuOTgzMzk4IDE0Ljc4OTU1MiAxMS4zMDEyNyAxNS41Mzg4MTggUSAxMC42MTkxNDEgMTYuMjg4MDg2IDkuMjExOTE0IDE2LjI4ODA4NiBRIDguNjkwOTE4IDE2LjI4ODA4NiA4LjIyOTAwNCAxNi4yMTAyMDUgUSA3Ljc2NzA5IDE2LjEzMjMyNCA3LjMzMjAzMTMgMTUuOTcxMTkxIEwgNy4zMzIwMzEzIDE1LjAwOTc2NSBRIDcuNzY3MDkgMTUuMjQ2MDk0IDguMTkxNDA2IDE1LjM1ODg4NyBRIDguNjE1NzIzIDE1LjQ3MTY4IDkuMDU2MTUyIDE1LjQ3MTY4IFEgMTAuMDI4MzIgMTUuNDcxNjggMTAuNTExNzE5IDE0Ljk2NDExMSBRIDEwLjk5NTExNyAxNC40NTY1NDMgMTAuOTk1MTE3IDEzLjQzMDY2NCBMIDEwLjk5NTExNyAxMi45NDE4OTUgUSAxMC42ODg5NjUgMTMuNDczNjMzIDEwLjIxMDkzNzUgMTMuNzM2ODE2IFEgOS43MzI5MSAxNCA5LjA2Njg5NSAxNCBRIDcuOTYwNDQ5IDE0IDcuMjgzNjkxNCAxMy4xNTY3MzggUSA2LjYwNjkzMzYgMTIuMzEzNDc3NSA2LjYwNjkzMzYgMTAuOTIyMzYzIFEgNi42MDY5MzM2IDkuNTI1ODc5IDcuMjgzNjkxNCA4LjY4MjYxNyBRIDcuOTYwNDQ5IDcuODM5MzU1NSA5LjA2Njg5NSA3LjgzOTM1NTUgUSA5LjczMjkxIDcuODM5MzU1NSAxMC4yMTA5Mzc1IDguMTAyNTM5IFEgMTAuNjg4OTY1IDguMzY1NzIzIDEwLjk5NTExNyA4Ljg5NzQ2MSBMIDEwLjk5NTExNyA3Ljk4NDM3NSBMIDExLjk4MzM5OCA3Ljk4NDM3NSBMIDExLjk4MzM5OCAxMy4yNTM0MTggWiBNIDE5LjE2NDU1IDEwLjc0NTExNyBMIDE5LjE2NDU1IDExLjIyODUxNiBMIDE0LjYyMDYwNSAxMS4yMjg1MTYgUSAxNC42ODUwNTkgMTIuMjQ5MDI0IDE1LjIzNTU5NiAxMi43ODM0NDcgUSAxNS43ODYxMzMgMTMuMzE3ODcxIDE2Ljc2OTA0MyAxMy4zMTc4NzEgUSAxNy4zMzgzNzkgMTMuMzE3ODcxIDE3Ljg3MjgwMyAxMy4xNzgyMjIgUSAxOC40MDcyMjcgMTMuMDM4NTc0IDE4LjkzMzU5NCAxMi43NTkyNzYgTCAxOC45MzM1OTQgMTMuNjkzODQ3IFEgMTguNDAxODU1IDEzLjkxOTQzMyAxNy44NDMyNjIgMTQuMDM3NTk4IFEgMTcuMjg0NjY4IDE0LjE1NTc2MiAxNi43MDk5NiAxNC4xNTU3NjIgUSAxNS4yNzA1MDggMTQuMTU1NzYyIDE0LjQyOTkzMiAxMy4zMTc4NzEgUSAxMy41ODkzNTUgMTIuNDc5OTggMTMuNTg5MzU1IDExLjA1MTI3IFEgMTMuNTg5MzU1IDkuNTc0MjE5IDE0LjM4Njk2MyA4LjcwNjc4NyBRIDE1LjE4NDU3MSA3LjgzOTM1NTUgMTYuNTM4MDg2IDcuODM5MzU1NSBRIDE3Ljc1MTk1MyA3LjgzOTM1NTUgMTguNDU4MjUyIDguNjIwODUgUSAxOS4xNjQ1NSA5LjQwMjM0NCAxOS4xNjQ1NSAxMC43NDUxMTcgWiBNIDE4LjE3NjI3IDEwLjQ1NTA3OCBRIDE4LjE2NTUyNyA5LjY0NDA0MyAxNy43MjI0MTIgOS4xNjA2NDUgUSAxNy4yNzkyOTcgOC42NzcyNDYgMTYuNTQ4ODI4IDguNjc3MjQ2IFEgMTUuNzIxNjggOC42NzcyNDYgMTUuMjI0ODUzNSA5LjE0NDUzMSBRIDE0LjcyODAyNyA5LjYxMTgxNiAxNC42NTI4MzIgMTAuNDYwNDQ5IEwgMTguMTc2MjcgMTAuNDU1MDc4IFogTSAyNS40NzAyMTUgOS4xMzkxNiBRIDI1Ljg0MDgxOCA4LjQ3MzE0NSAyNi4zNTY0NDMgOC4xNTYyNSBRIDI2Ljg3MjA2OCA3LjgzOTM1NTUgMjcuNTcwMzEzIDcuODM5MzU1NSBRIDI4LjUxMDI1NCA3LjgzOTM1NTUgMjkuMDIwNTA4IDguNDk3MzE0IFEgMjkuNTMwNzYyIDkuMTU1MjczIDI5LjUzMDc2MiAxMC4zNjkxNDEgTCAyOS41MzA3NjIgMTQgTCAyOC41MzcxMSAxNCBMIDI4LjUzNzExIDEwLjQwMTM2NyBRIDI4LjUzNzExIDkuNTM2NjIxIDI4LjIzMDk1OSA5LjExNzY3NiBRIDI3LjkyNDgwNSA4LjY5ODczIDI3LjI5NjM4NyA4LjY5ODczIFEgMjYuNTI4MzIgOC42OTg3MyAyNi4wODI1MiA5LjIwODk4NCBRIDI1LjYzNjcxOSA5LjcxOTIzOCAyNS42MzY3MTkgMTAuNjAwMDk4IEwgMjUuNjM2NzE5IDE0IEwgMjQuNjQzMDY2IDE0IEwgMjQuNjQzMDY2IDEwLjQwMTM2NyBRIDI0LjY0MzA2NiA5LjUzMTI1IDI0LjMzNjkxNCA5LjExNDk5IFEgMjQuMDMwNzYyIDguNjk4NzMgMjMuMzkxNjAyIDguNjk4NzMgUSAyMi42MzQyOCA4LjY5ODczIDIyLjE4ODQ3NyA5LjIxMTY3IFEgMjEuNzQyNjc2IDkuNzI0NjA5IDIxLjc0MjY3NiAxMC42MDAwOTggTCAyMS43NDI2NzYgMTQgTCAyMC43NDkwMjMgMTQgTCAyMC43NDkwMjMgNy45ODQzNzUgTCAyMS43NDI2NzYgNy45ODQzNzUgTCAyMS43NDI2NzYgOC45MTg5NDUgUSAyMi4wODEwNTUgOC4zNjU3MjMgMjIuNTUzNzEgOC4xMDI1MzkgUSAyMy4wMjYzNjcgNy44MzkzNTU1IDIzLjY3NjI3IDcuODM5MzU1NSBRIDI0LjMzMTU0MyA3LjgzOTM1NTUgMjQuNzkwNzcxIDguMTcyMzYzIFEgMjUuMjUgOC41MDUzNzEgMjUuNDcwMjE1IDkuMTM5MTYgWiBNIDM0LjI4OTU1IDcuOTg0Mzc1IEwgMzUuMzM2OTE0IDcuOTg0Mzc1IEwgMzcuMjE2Nzk3IDEzLjAzMzIwMyBMIDM5LjA5NjY4IDcuOTg0Mzc1IEwgNDAuMTQ0MDQzIDcuOTg0Mzc1IEwgMzcuODg4MTg0IDE0IEwgMzYuNTQ1NDEgMTQgTCAzNC4yODk1NSA3Ljk4NDM3NSBaIE0gNDYuNjUzODEgMTAuNzQ1MTE3IEwgNDYuNjUzODEgMTEuMjI4NTE2IEwgNDIuMTA5ODYzIDExLjIyODUxNiBRIDQyLjE3NDMxNiAxMi4yNDkwMjQgNDIuNzI0ODU0IDEyLjc4MzQ0NyBRIDQzLjI3NTM5IDEzLjMxNzg3MSA0NC4yNTgzIDEzLjMxNzg3MSBRIDQ0LjgyNzYzNyAxMy4zMTc4NzEgNDUuMzYyMDU3IDEzLjE3ODIyMiBRIDQ1Ljg5NjQ4NCAxMy4wMzg1NzQgNDYuNDIyODUgMTIuNzU5Mjc2IEwgNDYuNDIyODUgMTMuNjkzODQ3IFEgNDUuODkxMTEzIDEzLjkxOTQzMyA0NS4zMzI1MiAxNC4wMzc1OTggUSA0NC43NzM5MjIgMTQuMTU1NzYyIDQ0LjE5OTIyIDE0LjE1NTc2MiBRIDQyLjc1OTc2NiAxNC4xNTU3NjIgNDEuOTE5MTkgMTMuMzE3ODcxIFEgNDEuMDc4NjEzIDEyLjQ3OTk4IDQxLjA3ODYxMyAxMS4wNTEyNyBRIDQxLjA3ODYxMyA5LjU3NDIxOSA0MS44NzYyMiA4LjcwNjc4NyBRIDQyLjY3MzgzIDcuODM5MzU1NSA0NC4wMjczNDggNy44MzkzNTU1IFEgNDUuMjQxMjEgNy44MzkzNTU1IDQ1Ljk0NzUxIDguNjIwODUgUSA0Ni42NTM4MSA5LjQwMjM0NCA0Ni42NTM4MSAxMC43NDUxMTcgWiBNIDQ1LjY2NTUyNyAxMC40NTUwNzggUSA0NS42NTQ3ODUgOS42NDQwNDMgNDUuMjExNjcgOS4xNjA2NDUgUSA0NC43Njg1NTUgOC42NzcyNDYgNDQuMDM4MDg2IDguNjc3MjQ2IFEgNDMuMjEwOTM4IDguNjc3MjQ2IDQyLjcxNDExIDkuMTQ0NTMxIFEgNDIuMjE3Mjg1IDkuNjExODE2IDQyLjE0MjA5IDEwLjQ2MDQ0OSBMIDQ1LjY2NTUyNyAxMC40NTUwNzggWiBNIDUxLjc2MTcyIDguOTA4MjAzIFEgNTEuNTk1MjEgOC44MTE1MjMgNTEuMzk5MTY2IDguNzY1ODY5IFEgNTEuMjAzMTI1IDguNzIwMjE1IDUwLjk2NjggOC43MjAyMTUgUSA1MC4xMjg5MDYgOC43MjAyMTUgNDkuNjgwNDIgOS4yNjUzODEgUSA0OS4yMzE5MzQgOS44MTA1NDcgNDkuMjMxOTM0IDEwLjgzMTA1NCBMIDQ5LjIzMTkzNCAxNCBMIDQ4LjIzODI4IDE0IEwgNDguMjM4MjggNy45ODQzNzUgTCA0OS4yMzE5MzQgNy45ODQzNzUgTCA0OS4yMzE5MzQgOC45MTg5NDUgUSA0OS41NDM0NTMgOC4zNzEwOTQgNTAuMDQyOTcgOC4xMDUyMjUgUSA1MC41NDI0OCA3LjgzOTM1NTUgNTEuMjU2ODM2IDcuODM5MzU1NSBRIDUxLjM1ODg5IDcuODM5MzU1NSA1MS40ODI0MjYgNy44NTI3ODMgUSA1MS42MDU5NTMgNy44NjYyMTE0IDUxLjc1NjM0OCA3Ljg5MzA2NjQgTCA1MS43NjE3MiA4LjkwODIwMyBaIE0gNTYuNjMzMzA1IDguMTYxNjIxIEwgNTYuNjMzMzA1IDkuMDk2MTkxIFEgNTYuMjE0MzU1IDguODgxMzQ4IDU1Ljc2MzE4NCA4Ljc3MzkyNiBRIDU1LjMxMjAxIDguNjY2NTA0IDU0LjgyODYxNyA4LjY2NjUwNCBRIDU0LjA5Mjc3MyA4LjY2NjUwNCA1My43MjQ4NSA4Ljg5MjA5IFEgNTMuMzU2OTM0IDkuMTE3Njc2IDUzLjM1NjkzNCA5LjU2ODg0OCBRIDUzLjM1NjkzNCA5LjkxMjU5OCA1My42MjAxMTcgMTAuMTA4NjQzIFEgNTMuODgzMyAxMC4zMDQ2ODc1IDU0LjY3ODIyMyAxMC40ODE5MzQgTCA1NS4wMTY2IDEwLjU1NzEyOSBRIDU2LjA2OTMzNiAxMC43ODI3MTUgNTYuNTEyNDUgMTEuMTkzNjAzNSBRIDU2Ljk1NTU2NiAxMS42MDQ0OTMgNTYuOTU1NTY2IDEyLjM0MDMzMSBRIDU2Ljk1NTU2NiAxMy4xNzgyMjIgNTYuMjkyMjMzIDEzLjY2Njk5MiBRIDU1LjYyODkwNiAxNC4xNTU3NjIgNTQuNDY4NzUgMTQuMTU1NzYyIFEgNTMuOTg1MzUgMTQuMTU1NzYyIDUzLjQ2MTY2NiAxNC4wNjE3NjggUSA1Mi45Mzc5OSAxMy45Njc3NzMgNTIuMzU3OTEgMTMuNzc5Nzg1IEwgNTIuMzU3OTEgMTIuNzU5Mjc2IFEgNTIuOTA1NzY2IDEzLjA0Mzk0NSA1My40Mzc1IDEzLjE4NjI3OSBRIDUzLjk2OTI0IDEzLjMyODYxMyA1NC40OTAyMzQgMTMuMzI4NjEzIFEgNTUuMTg4NDc3IDEzLjMyODYxMyA1NS41NjQ0NTMgMTMuMDg5NiBRIDU1Ljk0MDQzIDEyLjg1MDU4NiA1NS45NDA0MyAxMi40MTU1MjcgUSA1NS45NDA0MyAxMi4wMTI2OTUgNTUuNjY5MTkzIDExLjc5Nzg1MjUgUSA1NS4zOTc5NSAxMS41ODMwMDggNTQuNDc5NDkyIDExLjM4NDI3NyBMIDU0LjEzNTc0MiAxMS4zMDM3MTEgUSA1My4yMTcyODUgMTEuMTEwMzUyIDUyLjgwOTA4MiAxMC43MTAyMDUgUSA1Mi40MDA4OCAxMC4zMTAwNTkgNTIuNDAwODggOS42MTE4MTYgUSA1Mi40MDA4OCA4Ljc2MzE4NCA1My4wMDI0NCA4LjMwMTI3IFEgNTMuNjA0MDA0IDcuODM5MzU1NSA1NC43MTA0NTMgNy44MzkzNTU1IFEgNTUuMjU4MyA3LjgzOTM1NTUgNTUuNzQxNyA3LjkxOTkyMiBRIDU2LjIyNTA5NCA4LjAwMDQ4OCA1Ni42MzMzMDUgOC4xNjE2MjEgWiBNIDU4LjUyOTI5NyA3Ljk4NDM3NSBMIDU5LjUxNzU4IDcuOTg0Mzc1IEwgNTkuNTE3NTggMTQgTCA1OC41MjkyOTcgMTQgTCA1OC41MjkyOTcgNy45ODQzNzUgWiBNIDU4LjUyOTI5NyA1LjY0MjU3OCBMIDU5LjUxNzU4IDUuNjQyNTc4IEwgNTkuNTE3NTggNi44OTQwNDMgTCA1OC41MjkyOTcgNi44OTQwNDMgTCA1OC41MjkyOTcgNS42NDI1NzggWiBNIDYzLjkxNjUwNCA4LjY3NzI0NiBRIDYzLjEyMTU4MiA4LjY3NzI0NiA2Mi42NTk2NjQgOS4yOTc2MDcgUSA2Mi4xOTc3NTQgOS45MTc5NjkgNjIuMTk3NzU0IDEwLjk5NzU1OSBRIDYyLjE5Nzc1NCAxMi4wNzcxNDggNjIuNjU2OTgyIDEyLjY5NzUxMSBRIDYzLjExNjIxIDEzLjMxNzg3MSA2My45MTY1MDQgMTMuMzE3ODcxIFEgNjQuNzA2MDU1IDEzLjMxNzg3MSA2NS4xNjc5NyAxMi42OTQ4MjMgUSA2NS42Mjk4OCAxMi4wNzE3NzcgNjUuNjI5ODggMTAuOTk3NTU5IFEgNjUuNjI5ODggOS45Mjg3MTEgNjUuMTY3OTcgOS4zMDI5Nzg1IFEgNjQuNzA2MDU1IDguNjc3MjQ2IDYzLjkxNjUwNCA4LjY3NzI0NiBaIE0gNjMuOTE2NTA0IDcuODM5MzU1NSBRIDY1LjIwNTU3IDcuODM5MzU1NSA2NS45NDE0MSA4LjY3NzI0NiBRIDY2LjY3NzI0NiA5LjUxNTEzNyA2Ni42NzcyNDYgMTAuOTk3NTU5IFEgNjYuNjc3MjQ2IDEyLjQ3NDYxIDY1Ljk0MTQxIDEzLjMxNTE4NiBRIDY1LjIwNTU3IDE0LjE1NTc2MiA2My45MTY1MDQgMTQuMTU1NzYyIFEgNjIuNjIyMDcgMTQuMTU1NzYyIDYxLjg4ODkxNiAxMy4zMTUxODYgUSA2MS4xNTU3NiAxMi40NzQ2MSA2MS4xNTU3NiAxMC45OTc1NTkgUSA2MS4xNTU3NiA5LjUxNTEzNyA2MS44ODg5MTYgOC42NzcyNDYgUSA2Mi42MjIwNyA3LjgzOTM1NTUgNjMuOTE2NTA0IDcuODM5MzU1NSBaIE0gNzMuMzE1OTIgMTAuMzY5MTQxIEwgNzMuMzE1OTIgMTQgTCA3Mi4zMjc2NCAxNCBMIDcyLjMyNzY0IDEwLjQwMTM2NyBRIDcyLjMyNzY0IDkuNTQ3MzYzIDcxLjk5NDYzIDkuMTIzMDQ3IFEgNzEuNjYxNjIgOC42OTg3MyA3MC45OTU2MDUgOC42OTg3MyBRIDcwLjE5NTMxIDguNjk4NzMgNjkuNzMzNCA5LjIwODk4NCBRIDY5LjI3MTQ4NCA5LjcxOTIzOCA2OS4yNzE0ODQgMTAuNjAwMDk4IEwgNjkuMjcxNDg0IDE0IEwgNjguMjc3ODMgMTQgTCA2OC4yNzc4MyA3Ljk4NDM3NSBMIDY5LjI3MTQ4NCA3Ljk4NDM3NSBMIDY5LjI3MTQ4NCA4LjkxODk0NSBRIDY5LjYyNTk4IDguMzc2NDY1IDcwLjEwNjY5IDguMTA3OTEgUSA3MC41ODc0IDcuODM5MzU1NSA3MS4yMTU4MiA3LjgzOTM1NTUgUSA3Mi4yNTI0NCA3LjgzOTM1NTUgNzIuNzg0MTggOC40ODEyMDEgUSA3My4zMTU5MiA5LjEyMzA0NyA3My4zMTU5MiAxMC4zNjkxNDEgWiIvPgogICAgPC9nPgogIDwvZz4KICA8Zz4KICAgIDxnCiAgICAgIGlkPSJ2QmFjayI+CiAgICAgIDxwYXRoCiAgICAgICAgZmlsbD0iIzAxMDEwMSIKICAgICAgICBmaWxsLW9wYWNpdHk9IjAuMyIKICAgICAgICBzdHJva2U9IiMwMTAxMDEiCiAgICAgICAgc3Ryb2tlLW9wYWNpdHk9IjAuMTAxOTYwNzg2IgogICAgICAgIHN0cm9rZS13aWR0aD0iMC4zIgogICAgICAgIGQ9Ik0gOTAuMTU3MjMgNy45MjYyNjk1IEwgODcuNDE3OTcgMTIuMjA3MDMxIEwgOTAuMTU3MjMgMTIuMjA3MDMxIEwgOTAuMTU3MjMgNy45MjYyNjk1IFogTSA4OS44NzI1NiA2Ljk4MDk1NyBMIDkxLjIzNjgyIDYuOTgwOTU3IEwgOTEuMjM2ODIgMTIuMjA3MDMxIEwgOTIuMzgwODYgMTIuMjA3MDMxIEwgOTIuMzgwODYgMTMuMTA5Mzc1IEwgOTEuMjM2ODIgMTMuMTA5Mzc1IEwgOTEuMjM2ODIgMTUgTCA5MC4xNTcyMyAxNSBMIDkwLjE1NzIzIDEzLjEwOTM3NSBMIDg2LjUzNzEyIDEzLjEwOTM3NSBMIDg2LjUzNzEyIDEyLjA2MjAxMiBMIDg5Ljg3MjU2IDYuOTgwOTU3IFogTSA5NC4xNzQ4MDUgMTMuNjM1NzQzIEwgOTUuMzA4MTA1IDEzLjYzNTc0MyBMIDk1LjMwODEwNSAxNSBMIDk0LjE3NDgwNSAxNSBMIDk0LjE3NDgwNSAxMy42MzU3NDMgWiBNIDk4LjYwNTk2IDE0LjA4NjkxNSBMIDEwMi4zOTI1OCAxNC4wODY5MTUgTCAxMDIuMzkyNTggMTUgTCA5Ny4zMDA3NyAxNSBMIDk3LjMwMDc3IDE0LjA4NjkxNSBRIDk3LjkxODQ2IDEzLjQ0Nzc1NCA5OC45ODQ2MiAxMi4zNzA4NSBRIDEwMC4wNTA3OCAxMS4yOTM5NDUgMTAwLjMyNDcxIDEwLjk4MjQyMiBRIDEwMC44NDU3IDEwLjM5Njk3MyAxMDEuMDUyNDkgOS45OTE0NTUgUSAxMDEuMjU5MjggOS41ODU5Mzc1IDEwMS4yNTkyOCA5LjE5Mzg0OCBRIDEwMS4yNTkyOCA4LjU1NDY4NzUgMTAwLjgxMDc5IDguMTUxODU1IFEgMTAwLjM2MjMwNSA3Ljc0OTAyMzQgOTkuNjQyNTg2IDcuNzQ5MDIzNCBRIDk5LjEzMjMyNCA3Ljc0OTAyMzQgOTguNTY1Njc0IDcuOTI2MjY5NSBRIDk3Ljk5OTAyIDguMTAzNTE2IDk3LjM1NDQ5IDguNDYzMzc5IEwgOTcuMzU0NDkgNy4zNjc2NzUzIFEgOTguMDA5NzY2IDcuMTA0NDkyIDk4LjU3OTA5NCA2Ljk3MDIxNSBRIDk5LjE0ODQ0NSA2LjgzNTkzNzUgOTkuNjIxMDg2IDYuODM1OTM3NSBRIDEwMC44NjcxOSA2LjgzNTkzNzUgMTAxLjYwODQgNy40NTg5ODQ0IFEgMTAyLjM0OTYxIDguMDgyMDMxIDEwMi4zNDk2MSA5LjEyNDAyMyBRIDEwMi4zNDk2MSA5LjYxODE2NCAxMDIuMTY0MzEgMTAuMDYxMjc5IFEgMTAxLjk3OTAwNCAxMC41MDQzOTUgMTAxLjQ5MDIzNCAxMS4xMDU5NTcgUSAxMDEuMzU1OTYgMTEuMjYxNzE5IDEwMC42MzYyMyAxMi4wMDU2MTUgUSA5OS45MTY1MDQgMTIuNzQ5NTEyIDk4LjYwNTk2IDE0LjA4NjkxNSBaIE0gMTA3Ljk1NzAzIDEwLjY3NjI3IFEgMTA4LjczNTg0IDEwLjg0Mjc3MyAxMDkuMTczNTg0IDExLjM2OTE0MSBRIDEwOS42MTEzMyAxMS44OTU1MDcgMTA5LjYxMTMzIDEyLjY2ODk0NiBRIDEwOS42MTEzMyAxMy44NTU5NTYgMTA4Ljc5NDkyIDE0LjUwNTg1OSBRIDEwNy45Nzg1MTYgMTUuMTU1NzYyIDEwNi40NzQ2MSAxNS4xNTU3NjIgUSAxMDUuOTY5NzMgMTUuMTU1NzYyIDEwNS40MzUzIDE1LjA1NjM5NjUgUSAxMDQuOTAwODcgMTQuOTU3MDMxIDEwNC4zMzE1NCAxNC43NTgzIEwgMTA0LjMzMTU0IDEzLjcxMDkzNzUgUSAxMDQuNzgyNzE1IDEzLjk3NDEyMSAxMDUuMzE5ODI0IDE0LjEwODM5OCBRIDEwNS44NTY5MyAxNC4yNDI2NzUgMTA2LjQ0MjM4IDE0LjI0MjY3NSBRIDEwNy40NjI4OSAxNC4yNDI2NzUgMTA3Ljk5NzMxNCAxMy44Mzk4NDQgUSAxMDguNTMxNzQ2IDEzLjQzNzAxMSAxMDguNTMxNzQ2IDEyLjY2ODk0NiBRIDEwOC41MzE3NDYgMTEuOTU5OTYgMTA4LjAzNDkwNCAxMS41NTk4MTQgUSAxMDcuNTM4MDg2IDExLjE1OTY2OSAxMDYuNjUxODU1IDExLjE1OTY2OSBMIDEwNS43MTcyODUgMTEuMTU5NjY5IEwgMTA1LjcxNzI4NSAxMC4yNjgwNjYgTCAxMDYuNjk0ODIgMTAuMjY4MDY2IFEgMTA3LjQ5NTEyIDEwLjI2ODA2NiAxMDcuOTE5NDMgOS45NDg0ODYgUSAxMDguMzQzNzUgOS42Mjg5MDYgMTA4LjM0Mzc1IDkuMDI3MzQ0IFEgMTA4LjM0Mzc1IDguNDA5NjY4IDEwNy45MDYwMDYgOC4wNzkzNDYgUSAxMDcuNDY4MjU0IDcuNzQ5MDIzNCAxMDYuNjUxODU1IDcuNzQ5MDIzNCBRIDEwNi4yMDYwNTUgNy43NDkwMjM0IDEwNS42OTU4MSA3Ljg0NTcwMyBRIDEwNS4xODU1NSA3Ljk0MjM4MyAxMDQuNTczMjQgOC4xNDY0ODQgTCAxMDQuNTczMjQgNy4xNzk2ODc1IFEgMTA1LjE5MDkyNiA3LjAwNzgxMjUgMTA1LjczMDcxIDYuOTIxODc1IFEgMTA2LjI3MDUxIDYuODM1OTM3NSAxMDYuNzQ4NTM1IDYuODM1OTM3NSBRIDEwNy45ODM4OCA2LjgzNTkzNzUgMTA4LjcwMzYxIDcuMzk3MjE3IFEgMTA5LjQyMzM0IDcuOTU4NDk2IDEwOS40MjMzNCA4LjkxNDU1MSBRIDEwOS40MjMzNCA5LjU4MDU2NiAxMDkuMDQxOTkgMTAuMDM5Nzk1IFEgMTA4LjY2MDY0NSAxMC40OTkwMjMgMTA3Ljk1NzAzIDEwLjY3NjI3IFogTSAxMTEuNjY4NDYgMTMuNjM1NzQzIEwgMTEyLjgwMTc2IDEzLjYzNTc0MyBMIDExMi44MDE3NiAxNSBMIDExMS42Njg0NiAxNSBMIDExMS42Njg0NiAxMy42MzU3NDMgWiBNIDExNy40ODUzNSA3LjY5NTMxMjUgUSAxMTYuNjQ3NDcgNy42OTUzMTI1IDExNi4yMjU4MyA4LjUxOTc3NSBRIDExNS44MDQyIDkuMzQ0MjM4IDExNS44MDQyIDEwLjk5ODUzNiBRIDExNS44MDQyIDEyLjY0NzQ2MSAxMTYuMjI1ODMgMTMuNDcxOTIzIFEgMTE2LjY0NzQ3IDE0LjI5NjM4NyAxMTcuNDg1MzUgMTQuMjk2Mzg3IFEgMTE4LjMyODYxIDE0LjI5NjM4NyAxMTguNzUwMjUgMTMuNDcxOTIzIFEgMTE5LjE3MTg3IDEyLjY0NzQ2MSAxMTkuMTcxODcgMTAuOTk4NTM2IFEgMTE5LjE3MTg3IDkuMzQ0MjM4IDExOC43NTAyNSA4LjUxOTc3NSBRIDExOC4zMjg2MSA3LjY5NTMxMjUgMTE3LjQ4NTM1IDcuNjk1MzEyNSBaIE0gMTE3LjQ4NTM1IDYuODM1OTM3NSBRIDExOC44MzM1IDYuODM1OTM3NSAxMTkuNTQ1MTcgNy45MDIwOTk2IFEgMTIwLjI1NjgzNiA4Ljk2ODI2MiAxMjAuMjU2ODM2IDEwLjk5ODUzNiBRIDEyMC4yNTY4MzYgMTMuMDIzNDM4IDExOS41NDUxNyAxNC4wODk2IFEgMTE4LjgzMzUgMTUuMTU1NzYyIDExNy40ODUzNSAxNS4xNTU3NjIgUSAxMTYuMTM3MjEgMTUuMTU1NzYyIDExNS40MjU1NCAxNC4wODk2IFEgMTE0LjcxMzg3IDEzLjAyMzQzOCAxMTQuNzEzODcgMTAuOTk4NTM2IFEgMTE0LjcxMzg3IDguOTY4MjYyIDExNS40MjU1NCA3LjkwMjA5OTYgUSAxMTYuMTM3MjEgNi44MzU5Mzc1IDExNy40ODUzNSA2LjgzNTkzNzUgWiIvPgogICAgPC9nPgogICAgPGcKICAgICAgaWQ9InZUZXh0Ij4KICAgICAgPHBhdGgKICAgICAgICBmaWxsPSIjZmZmZmZmIgogICAgICAgIHN0cm9rZT0iI2ZmZmZmZiIKICAgICAgICBzdHJva2Utd2lkdGg9IjAuMyIKICAgICAgICBkPSJNIDkwLjE1NzIzIDYuOTI2MjY5NSBMIDg3LjQxNzk3IDExLjIwNzAzMSBMIDkwLjE1NzIzIDExLjIwNzAzMSBMIDkwLjE1NzIzIDYuOTI2MjY5NSBaIE0gODkuODcyNTYgNS45ODA5NTcgTCA5MS4yMzY4MiA1Ljk4MDk1NyBMIDkxLjIzNjgyIDExLjIwNzAzMSBMIDkyLjM4MDg2IDExLjIwNzAzMSBMIDkyLjM4MDg2IDEyLjEwOTM3NSBMIDkxLjIzNjgyIDEyLjEwOTM3NSBMIDkxLjIzNjgyIDE0IEwgOTAuMTU3MjMgMTQgTCA5MC4xNTcyMyAxMi4xMDkzNzUgTCA4Ni41MzcxMiAxMi4xMDkzNzUgTCA4Ni41MzcxMiAxMS4wNjIwMTIgTCA4OS44NzI1NiA1Ljk4MDk1NyBaIE0gOTQuMTc0ODA1IDEyLjYzNTc0MyBMIDk1LjMwODEwNSAxMi42MzU3NDMgTCA5NS4zMDgxMDUgMTQgTCA5NC4xNzQ4MDUgMTQgTCA5NC4xNzQ4MDUgMTIuNjM1NzQzIFogTSA5OC42MDU5NiAxMy4wODY5MTUgTCAxMDIuMzkyNTggMTMuMDg2OTE1IEwgMTAyLjM5MjU4IDE0IEwgOTcuMzAwNzcgMTQgTCA5Ny4zMDA3NyAxMy4wODY5MTUgUSA5Ny45MTg0NiAxMi40NDc3NTQgOTguOTg0NjIgMTEuMzcwODUgUSAxMDAuMDUwNzggMTAuMjkzOTQ1IDEwMC4zMjQ3MSA5Ljk4MjQyMiBRIDEwMC44NDU3IDkuMzk2OTczIDEwMS4wNTI0OSA4Ljk5MTQ1NSBRIDEwMS4yNTkyOCA4LjU4NTkzNzUgMTAxLjI1OTI4IDguMTkzODQ4IFEgMTAxLjI1OTI4IDcuNTU0Njg3NSAxMDAuODEwNzkgNy4xNTE4NTU1IFEgMTAwLjM2MjMwNSA2Ljc0OTAyMzQgOTkuNjQyNTg2IDYuNzQ5MDIzNCBRIDk5LjEzMjMyNCA2Ljc0OTAyMzQgOTguNTY1Njc0IDYuOTI2MjY5NSBRIDk3Ljk5OTAyIDcuMTAzNTE1NiA5Ny4zNTQ0OSA3LjQ2MzM3OTQgTCA5Ny4zNTQ0OSA2LjM2NzY3NTMgUSA5OC4wMDk3NjYgNi4xMDQ0OTIgOTguNTc5MDk0IDUuOTcwMjE1IFEgOTkuMTQ4NDQ1IDUuODM1OTM3NSA5OS42MjEwODYgNS44MzU5Mzc1IFEgMTAwLjg2NzE5IDUuODM1OTM3NSAxMDEuNjA4NCA2LjQ1ODk4NDQgUSAxMDIuMzQ5NjEgNy4wODIwMzEzIDEwMi4zNDk2MSA4LjEyNDAyMyBRIDEwMi4zNDk2MSA4LjYxODE2NCAxMDIuMTY0MzEgOS4wNjEyNzkgUSAxMDEuOTc5MDA0IDkuNTA0Mzk1IDEwMS40OTAyMzQgMTAuMTA1OTU3IFEgMTAxLjM1NTk2IDEwLjI2MTcxOSAxMDAuNjM2MjMgMTEuMDA1NjE1IFEgOTkuOTE2NTA0IDExLjc0OTUxMiA5OC42MDU5NiAxMy4wODY5MTUgWiBNIDEwNy45NTcwMyA5LjY3NjI3IFEgMTA4LjczNTg0IDkuODQyNzczIDEwOS4xNzM1ODQgMTAuMzY5MTQxIFEgMTA5LjYxMTMzIDEwLjg5NTUwNyAxMDkuNjExMzMgMTEuNjY4OTQ2IFEgMTA5LjYxMTMzIDEyLjg1NTk1NiAxMDguNzk0OTIgMTMuNTA1ODU5IFEgMTA3Ljk3ODUxNiAxNC4xNTU3NjIgMTA2LjQ3NDYxIDE0LjE1NTc2MiBRIDEwNS45Njk3MyAxNC4xNTU3NjIgMTA1LjQzNTMgMTQuMDU2Mzk2NSBRIDEwNC45MDA4NyAxMy45NTcwMzEgMTA0LjMzMTU0IDEzLjc1ODMgTCAxMDQuMzMxNTQgMTIuNzEwOTM3NSBRIDEwNC43ODI3MTUgMTIuOTc0MTIxIDEwNS4zMTk4MjQgMTMuMTA4Mzk4IFEgMTA1Ljg1NjkzIDEzLjI0MjY3NSAxMDYuNDQyMzggMTMuMjQyNjc1IFEgMTA3LjQ2Mjg5IDEzLjI0MjY3NSAxMDcuOTk3MzE0IDEyLjgzOTg0NCBRIDEwOC41MzE3NDYgMTIuNDM3MDExIDEwOC41MzE3NDYgMTEuNjY4OTQ2IFEgMTA4LjUzMTc0NiAxMC45NTk5NiAxMDguMDM0OTA0IDEwLjU1OTgxNCBRIDEwNy41MzgwODYgMTAuMTU5NjY4IDEwNi42NTE4NTUgMTAuMTU5NjY4IEwgMTA1LjcxNzI4NSAxMC4xNTk2NjggTCAxMDUuNzE3Mjg1IDkuMjY4MDY2IEwgMTA2LjY5NDgyIDkuMjY4MDY2IFEgMTA3LjQ5NTEyIDkuMjY4MDY2IDEwNy45MTk0MyA4Ljk0ODQ4NiBRIDEwOC4zNDM3NSA4LjYyODkwNiAxMDguMzQzNzUgOC4wMjczNDQgUSAxMDguMzQzNzUgNy40MDk2NjggMTA3LjkwNjAwNiA3LjA3OTM0NTcgUSAxMDcuNDY4MjU0IDYuNzQ5MDIzNCAxMDYuNjUxODU1IDYuNzQ5MDIzNCBRIDEwNi4yMDYwNTUgNi43NDkwMjM0IDEwNS42OTU4MSA2Ljg0NTcwMyBRIDEwNS4xODU1NSA2Ljk0MjM4MyAxMDQuNTczMjQgNy4xNDY0ODQ0IEwgMTA0LjU3MzI0IDYuMTc5Njg3NSBRIDEwNS4xOTA5MjYgNi4wMDc4MTI1IDEwNS43MzA3MSA1LjkyMTg3NSBRIDEwNi4yNzA1MSA1LjgzNTkzNzUgMTA2Ljc0ODUzNSA1LjgzNTkzNzUgUSAxMDcuOTgzODggNS44MzU5Mzc1IDEwOC43MDM2MSA2LjM5NzIxNyBRIDEwOS40MjMzNCA2Ljk1ODQ5NiAxMDkuNDIzMzQgNy45MTQ1NTEzIFEgMTA5LjQyMzM0IDguNTgwNTY2IDEwOS4wNDE5OSA5LjAzOTc5NSBRIDEwOC42NjA2NDUgOS40OTkwMjMgMTA3Ljk1NzAzIDkuNjc2MjcgWiBNIDExMS42Njg0NiAxMi42MzU3NDMgTCAxMTIuODAxNzYgMTIuNjM1NzQzIEwgMTEyLjgwMTc2IDE0IEwgMTExLjY2ODQ2IDE0IEwgMTExLjY2ODQ2IDEyLjYzNTc0MyBaIE0gMTE3LjQ4NTM1IDYuNjk1MzEyNSBRIDExNi42NDc0NyA2LjY5NTMxMjUgMTE2LjIyNTgzIDcuNTE5Nzc1NCBRIDExNS44MDQyIDguMzQ0MjM4IDExNS44MDQyIDkuOTk4NTM1IFEgMTE1LjgwNDIgMTEuNjQ3NDYxIDExNi4yMjU4MyAxMi40NzE5MjMgUSAxMTYuNjQ3NDcgMTMuMjk2Mzg3IDExNy40ODUzNSAxMy4yOTYzODcgUSAxMTguMzI4NjEgMTMuMjk2Mzg3IDExOC43NTAyNSAxMi40NzE5MjMgUSAxMTkuMTcxODcgMTEuNjQ3NDYxIDExOS4xNzE4NyA5Ljk5ODUzNSBRIDExOS4xNzE4NyA4LjM0NDIzOCAxMTguNzUwMjUgNy41MTk3NzU0IFEgMTE4LjMyODYxIDYuNjk1MzEyNSAxMTcuNDg1MzUgNi42OTUzMTI1IFogTSAxMTcuNDg1MzUgNS44MzU5Mzc1IFEgMTE4LjgzMzUgNS44MzU5Mzc1IDExOS41NDUxNyA2LjkwMjA5OTYgUSAxMjAuMjU2ODM2IDcuOTY4MjYxNyAxMjAuMjU2ODM2IDkuOTk4NTM1IFEgMTIwLjI1NjgzNiAxMi4wMjM0MzggMTE5LjU0NTE3IDEzLjA4OTYgUSAxMTguODMzNSAxNC4xNTU3NjIgMTE3LjQ4NTM1IDE0LjE1NTc2MiBRIDExNi4xMzcyMSAxNC4xNTU3NjIgMTE1LjQyNTU0IDEzLjA4OTYgUSAxMTQuNzEzODcgMTIuMDIzNDM4IDExNC43MTM4NyA5Ljk5ODUzNSBRIDExNC43MTM4NyA3Ljk2ODI2MTcgMTE1LjQyNTU0IDYuOTAyMDk5NiBRIDExNi4xMzcyMSA1LjgzNTkzNzUgMTE3LjQ4NTM1IDUuODM1OTM3NSBaIi8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K" alt="Gem Version" /></a>
<a href="https://github.com/IBM/aspera-cli/actions"><img role="img" aria-label="unit tests" src="data:image/svg+xml; charset=utf-8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDEiIGhlaWdodD0iMjAiPgogIDx0aXRsZT5UZXN0IC0gcGFzc2luZzwvdGl0bGU+CiAgPGRlZnM+CiAgICA8bGluZWFyR3JhZGllbnQgaWQ9IndvcmtmbG93LWZpbGwiIHgxPSI1MCUiIHkxPSIwJSIgeDI9IjUwJSIgeTI9IjEwMCUiPgogICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjNDQ0RDU2IiBvZmZzZXQ9IjAlIj48L3N0b3A+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiMyNDI5MkUiIG9mZnNldD0iMTAwJSI+PC9zdG9wPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudCBpZD0ic3RhdGUtZmlsbCIgeDE9IjUwJSIgeTE9IjAlIiB4Mj0iNTAlIiB5Mj0iMTAwJSI+CiAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiMzNEQwNTgiIG9mZnNldD0iMCUiPjwvc3RvcD4KICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iIzI4QTc0NSIgb2Zmc2V0PSIxMDAlIj48L3N0b3A+CiAgICA8L2xpbmVhckdyYWRpZW50PgogIDwvZGVmcz4KICA8ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgPGcgZm9udC1mYW1pbHk9IiYjMzk7RGVqYVZ1IFNhbnMmIzM5OyxWZXJkYW5hLEdlbmV2YSxzYW5zLXNlcmlmIiBmb250LXNpemU9IjExIj4KICAgICAgPHBhdGggaWQ9IndvcmtmbG93LWJnIiBkPSJNMCwzIEMwLDEuMzQzMSAxLjM1NTIsMCAzLjAyNzAyNzAzLDAgTDUxLDAgTDUxLDIwIEwzLjAyNzAyNzAzLDIwIEMxLjM1NTIsMjAgMCwxOC42NTY5IDAsMTcgTDAsMyBaIiBmaWxsPSJ1cmwoI3dvcmtmbG93LWZpbGwpIiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgPHRleHQgZmlsbD0iIzAxMDEwMSIgZmlsbC1vcGFjaXR5PSIuMyI+CiAgICAgICAgPHRzcGFuIHg9IjIyLjE5ODE5ODIiIHk9IjE1IiBhcmlhLWhpZGRlbj0idHJ1ZSI+VGVzdDwvdHNwYW4+CiAgICAgIDwvdGV4dD4KICAgICAgPHRleHQgZmlsbD0iI0ZGRkZGRiI+CiAgICAgICAgPHRzcGFuIHg9IjIyLjE5ODE5ODIiIHk9IjE0Ij5UZXN0PC90c3Bhbj4KICAgICAgPC90ZXh0PgogICAgPC9nPgogICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNTEpIiBmb250LWZhbWlseT0iJiMzOTtEZWphVnUgU2FucyYjMzk7LFZlcmRhbmEsR2VuZXZhLHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiPgogICAgICA8cGF0aCBkPSJNMCAwaDQ2LjkzOUM0OC42MjkgMCA1MCAxLjM0MyA1MCAzdjE0YzAgMS42NTctMS4zNyAzLTMuMDYxIDNIMFYweiIgaWQ9InN0YXRlLWJnIiBmaWxsPSJ1cmwoI3N0YXRlLWZpbGwpIiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgPHRleHQgZmlsbD0iIzAxMDEwMSIgZmlsbC1vcGFjaXR5PSIuMyIgYXJpYS1oaWRkZW49InRydWUiPgogICAgICAgIDx0c3BhbiB4PSI0IiB5PSIxNSI+cGFzc2luZzwvdHNwYW4+CiAgICAgIDwvdGV4dD4KICAgICAgPHRleHQgZmlsbD0iI0ZGRkZGRiI+CiAgICAgICAgPHRzcGFuIHg9IjQiIHk9IjE0Ij5wYXNzaW5nPC90c3Bhbj4KICAgICAgPC90ZXh0PgogICAgPC9nPgogICAgPHBhdGggZmlsbD0iIzk1OURBNSIgZD0iTTExIDNjLTMuODY4IDAtNyAzLjEzMi03IDdhNi45OTYgNi45OTYgMCAwIDAgNC43ODYgNi42NDFjLjM1LjA2Mi40ODItLjE0OC40ODItLjMzMiAwLS4xNjYtLjAxLS43MTgtLjAxLTEuMzA0LTEuNzU4LjMyNC0yLjIxMy0uNDI5LTIuMzUzLS44MjItLjA3OS0uMjAyLS40Mi0uODIzLS43MTctLjk5LS4yNDUtLjEzLS41OTUtLjQ1NC0uMDEtLjQ2My41NTItLjAwOS45NDYuNTA4IDEuMDc3LjcxOC42MyAxLjA1OCAxLjYzNi43NiAyLjAzOS41NzcuMDYxLS40NTUuMjQ1LS43NjEuNDQ2LS45MzYtMS41NTctLjE3NS0zLjE4NS0uNzc5LTMuMTg1LTMuNDU2IDAtLjc2Mi4yNzEtMS4zOTIuNzE4LTEuODgyLS4wNy0uMTc1LS4zMTUtLjg5Mi4wNy0xLjg1NSAwIDAgLjU4Ni0uMTgzIDEuOTI1LjcxOGE2LjUgNi41IDAgMCAxIDEuNzUtLjIzNiA2LjUgNi41IDAgMCAxIDEuNzUuMjM2YzEuMzM4LS45MSAxLjkyNS0uNzE4IDEuOTI1LS43MTguMzg1Ljk2My4xNCAxLjY4LjA3IDEuODU1LjQ0Ni40OS43MTcgMS4xMTIuNzE3IDEuODgyIDAgMi42ODYtMS42MzYgMy4yOC0zLjE5NCAzLjQ1Ni4yNTQuMjE5LjQ3My42MzkuNDczIDEuMjk1IDAgLjkzNi0uMDA5IDEuNjg5LS4wMDkgMS45MjUgMCAuMTg0LjEzMS40MDIuNDgxLjMzMkE3LjAxMSA3LjAxMSAwIDAgMCAxOCAxMGMwLTMuODY3LTMuMTMzLTctNy03eiI+PC9wYXRoPgogIDwvZz4KPC9zdmc+Cgo=" alt="unit tests" /></a> <a href="https://bestpractices.coreinfrastructure.org/projects/5861"><img role="img" aria-label="CII Best Practices" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTg0IiBoZWlnaHQ9IjIwIiByb2xlPSJpbWciIGFyaWEtbGFiZWw9Im9wZW5zc2YgYmVzdCBwcmFjdGljZXM6IHBhc3NpbmciPjx0aXRsZT5vcGVuc3NmIGJlc3QgcHJhY3RpY2VzOiBwYXNzaW5nPC90aXRsZT48bGluZWFyR3JhZGllbnQgaWQ9InMiIHgyPSIwIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjYmJiIiBzdG9wLW9wYWNpdHk9Ii4xIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLW9wYWNpdHk9Ii4xIi8+PC9saW5lYXJHcmFkaWVudD48Y2xpcFBhdGggaWQ9InIiPjxyZWN0IHdpZHRoPSIxODQiIGhlaWdodD0iMjAiIHJ4PSIzIiBmaWxsPSIjZmZmIi8+PC9jbGlwUGF0aD48ZyBjbGlwLXBhdGg9InVybCgjcikiPjxyZWN0IHdpZHRoPSIxMzMiIGhlaWdodD0iMjAiIGZpbGw9IiM1NTUiLz48cmVjdCB4PSIxMzMiIHdpZHRoPSI1MSIgaGVpZ2h0PSIyMCIgZmlsbD0iIzRjMSIvPjxyZWN0IHdpZHRoPSIxODQiIGhlaWdodD0iMjAiIGZpbGw9InVybCgjcykiLz48L2c+PGcgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IlZlcmRhbmEsR2VuZXZhLERlamFWdSBTYW5zLHNhbnMtc2VyaWYiIHRleHQtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iIGZvbnQtc2l6ZT0iMTEwIj48dGV4dCBhcmlhLWhpZGRlbj0idHJ1ZSIgeD0iNjc1IiB5PSIxNTAiIGZpbGw9IiMwMTAxMDEiIGZpbGwtb3BhY2l0eT0iLjMiIHRyYW5zZm9ybT0ic2NhbGUoLjEpIiB0ZXh0TGVuZ3RoPSIxMjMwIj5vcGVuc3NmIGJlc3QgcHJhY3RpY2VzPC90ZXh0Pjx0ZXh0IHg9IjY3NSIgeT0iMTQwIiB0cmFuc2Zvcm09InNjYWxlKC4xKSIgZmlsbD0iI2ZmZiIgdGV4dExlbmd0aD0iMTIzMCI+b3BlbnNzZiBiZXN0IHByYWN0aWNlczwvdGV4dD48dGV4dCBhcmlhLWhpZGRlbj0idHJ1ZSIgeD0iMTU3NSIgeT0iMTUwIiBmaWxsPSIjMDEwMTAxIiBmaWxsLW9wYWNpdHk9Ii4zIiB0cmFuc2Zvcm09InNjYWxlKC4xKSIgdGV4dExlbmd0aD0iNDEwIj5wYXNzaW5nPC90ZXh0Pjx0ZXh0IHg9IjE1NzUiIHk9IjE0MCIgdHJhbnNmb3JtPSJzY2FsZSguMSkiIGZpbGw9IiNmZmYiIHRleHRMZW5ndGg9IjQxMCI+cGFzc2luZzwvdGV4dD48L2c+PC9zdmc+" alt="CII Best Practices" /></a></p>
<h1 data-number="1" id="introduction"><span class="header-section-number">1</span> Introduction</h1>
<p>Version : 4.24.0.pre</p>
<p>Laurent/2016-2025</p>
<p>The aspera-cli Ruby gem offers a powerful command-line interface
(CLI, <code>ascli</code>) for IBM Aspera software, facilitating seamless
interaction with Aspera APIs and enabling high-performance file
transfers. It also serves as an excellent resource for developers
seeking to explore and understand the Aspera API ecosystem.</p>
<p>Ruby Gem: <a href="https://rubygems.org/gems/aspera-cli"><span>https://rubygems.org/gems/aspera-cli</span></a></p>
<p>Ruby Doc: <a href="https://www.rubydoc.info/gems/aspera-cli"><span>https://www.rubydoc.info/gems/aspera-cli</span></a></p>
<p>Minimum required Ruby version: &gt;= 3.1.</p>
<blockquote>
<p><strong>Deprecation notice</strong>: the minimum Ruby version will be
3.2 in a future version.</p>
</blockquote>
<p><a href="https://developer.ibm.com/?size=30&amp;q=aspera&amp;DWContentType[0]=APIs&amp;sort=title_asc">Aspera
APIs on IBM developer</a> <a href="https://developer.ibm.com/apis/catalog/?search=aspera">Link
2</a></p>
<p>Release notes: see <a href="CHANGELOG.md">CHANGELOG.md</a></p>
<p>A PDF version of this documentation is available here: <a href="docs/Manual.pdf">docs/Manual.pdf</a>.</p>
<h2 data-number="1.1" id="bugs-features-contribution"><span class="header-section-number">1.1</span> BUGS, FEATURES,
CONTRIBUTION</h2>
<p>Refer to <a href="BUGS.md">BUGS.md</a> and <a href="CONTRIBUTING.md">CONTRIBUTING.md</a>.</p>
<p>This documentation does not provide exhaustive details for all
commands and options. Most commands correspond directly to REST API
calls on Aspera products. For detailed information, consult the official
Aspera API documentation. For debugging, use
<code>--log-level=debug</code> to view the underlying API calls.</p>
<h2 data-number="1.2" id="when-to-use-and-when-not-to-use"><span class="header-section-number">1.2</span> When to use and when not to
use</h2>
<p>The <code>ascli</code> tool is designed for command-line interaction
with IBM Aspera products, enabling users to execute remote commands and
perform file transfers efficiently. It supports both interactive
terminal operations (e.g., maintenance tasks on VT100-compatible
terminals) and scripting use cases (e.g., batch jobs via shell scripts
or cron).</p>
<p>Internally, <code>ascli</code> integrates several components:</p>
<ul>
<li>A configuration file (<code>config.yaml</code>) for persistent
settings</li>
<li>Advanced command-line options (see <a href="#extended-value-syntax">Extended Value Syntax</a>)</li>
<li>REST API calls, including OAuth (like <code>curl</code>)</li>
<li>Aspera’s <code>ascp</code> for high-speed file transfers</li>
</ul>
<p>For programmatic integration in languages such as C/C++, Go, Python,
NodeJS, and others, it is recommended to use the <a href="https://ibm.biz/aspera_api">Aspera APIs</a> directly. These
include:</p>
<ul>
<li>REST APIs for products like Aspera on Cloud (AoC), Faspex, and
Node</li>
<li>The Transfer Daemon with gRPC interfaces and language-specific stubs
(C/C++, Python, .NET/C#, Java, Go, Ruby, Rust, etc.)</li>
</ul>
<p>Using these APIs is generally more suitable for long-term development
and maintenance. Example implementations can be found at: <a href="https://github.com/laurent-martin/aspera-api-examples">https://github.com/laurent-martin/aspera-api-examples</a>.</p>
<p>For scripting and ad hoc command-line tasks, <code>ascli</code> is
ideal. It is developer-friendly and well-suited for quickly testing and
learning Aspera APIs (See <a href="#logging-debugging">Logging,
Debugging</a>).</p>
<p>Clarifying the CLI landscape: <code>ascp</code> is the low-level
command-line utility that implements the FASP protocol and is used for
actual data transfers. Every Aspera transfer involves an
<code>ascp</code> process on both the client and server sides. While
<code>ascp</code> can be used directly, it is limited to basic
send/receive operations and lacks features like configuration
management, automatic resume, and remote file listing.
<code>ascli</code> provides a higher-level interface that encompasses
all <code>ascp</code> capabilities and adds significant usability
improvements.</p>
<h2 data-number="1.3" id="notations-shell-examples"><span class="header-section-number">1.3</span> Notations, Shell, Examples</h2>
<p>Command line operations examples are shown using a shell such as:
<code>bash</code> or <code>zsh</code>.</p>
<p>Command line arguments beginning with <code>my_</code> in examples,
e.g. <code>my_param_value</code>, are user-provided value and not fixed
value commands.</p>
<p><code>ascli</code> is an API <strong>Client</strong> toward the
remote Aspera application <strong>Server</strong> (Faspex, HSTS,
etc...)</p>
<p>Some commands will start an Aspera transfer (e.g.
<code>upload</code>). The transfer is not directly implemented in
<code>ascli</code>, rather <code>ascli</code> uses one of the external
Aspera Transfer Clients called <strong><a href="#transfer-clients-agents">Transfer Agents</a></strong>.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>A <strong><a href="#transfer-clients-agents">Transfer
Agent</a></strong> is a client for the remote Transfer Server
(HSTS/HSTE). It can be local or remote. For example a remote Aspera
Transfer Server may be used as a transfer agent (using Node API). i.e.
using option <code>--transfer=node</code></p></div>
</div>
<h1 data-number="2" id="quick-start"><span class="header-section-number">2</span> Quick Start</h1>
<p>This section guides you from installation to first use and advanced
use.</p>
<p>First, follow section: <a href="#installation">Installation</a>
(Ruby, Gem, FASP) to start using <code>ascli</code>.</p>
<p>Once the gem is installed, <code>ascli</code> shall be
accessible:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> <span class="at">--version</span></span></code></pre></div>
<pre class="text"><code>4.24.0.pre</code></pre>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>All command line examples provided in sections named <strong>Tested
commands for <code>_plugin_name_</code></strong> are tested during
version validation.</p></div>
</div>
<h2 data-number="2.1" id="first-use"><span class="header-section-number">2.1</span> First use</h2>
<p>Once installation is completed, you can proceed to the first use with
a demo server:</p>
<p>If you want to test with Aspera on Cloud, jump to section: <a href="#configuration-using-wizard">Wizard</a>.</p>
<p>To test with Aspera demo transfer server, set up the environment and
then test:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config initdemo</span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server browse /</span></code></pre></div>
<pre class="text"><code>╭────────────┬──────┬───────────┬───────┬───────────────────────────┬───────────────────────╮
│ zmode      │ zuid │ zgid      │ size  │ mtime                     │ name                  │
╞════════════╪══════╪═══════════╪═══════╪═══════════════════════════╪═══════════════════════╡
│ dr-xr-xr-x │ xfer │ demousers │ 4096  │ 2014-11-05 16:01:56 +0100 │ aspera-test-dir-large │
│ drwxrwxr-x │ xfer │ demousers │ 94208 │ 2025-03-31 11:27:33 +0200 │ Upload                │
│ dr-xr-xr-x │ xfer │ demousers │ 4096  │ 2014-11-05 16:01:56 +0100 │ aspera-test-dir-small │
│ dr-xr-xr-x │ xfer │ demousers │ 4096  │ 2014-11-05 16:01:56 +0100 │ aspera-test-dir-tiny  │
╰────────────┴──────┴───────────┴───────┴───────────────────────────┴───────────────────────╯</code></pre>
<p>If you want to use <code>ascli</code> with another server, and in
order to make further calls more convenient, it is advised to define an
<a href="#option-preset">Option Preset</a> for the server&#39;s
authentication options. The following example will:</p>
<ul>
<li>Create an <a href="#option-preset">Option Preset</a></li>
<li>Define it as default for the <code>server</code> plugin</li>
<li>List files in a folder</li>
<li>Download a file</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset update myserver <span class="at">--url</span><span class="op">=</span>ssh://demo.asperasoft.com:33001 <span class="at">--username</span><span class="op">=</span>asperaweb <span class="at">--password</span><span class="op">=</span>my_password_here</span></code></pre></div>
<pre class="text"><code>Updated: myserver
Saving config file.</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set default server myserver</span></code></pre></div>
<pre class="text"><code>Updated: default: server &lt;- myserver
Saving config file.</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server browse /aspera-test-dir-large</span></code></pre></div>
<pre class="text"><code>╭────────────┬──────┬───────────┬─────────────┬───────────────────────────┬───────╮
│ zmode      │ zuid │ zgid      │ size        │ mtime                     │ name  │
╞════════════╪══════╪═══════════╪═════════════╪═══════════════════════════╪═══════╡
│ -rw-r--r-- │ xfer │ demousers │ 5368709120  │ 2014-11-05 16:01:56 +0100 │ 5GB   │
│ -rw-r--r-- │ xfer │ demousers │ 524288000   │ 2014-11-05 16:01:56 +0100 │ 500MB │
│ -rw-r--r-- │ xfer │ demousers │ 209715200   │ 2014-11-05 16:01:56 +0100 │ 200MB │
│ -rw-r--r-- │ xfer │ demousers │ 1048576000  │ 2014-11-05 16:01:56 +0100 │ 1GB   │
│ -rw-r--r-- │ xfer │ demousers │ 104857600   │ 2014-11-05 16:01:56 +0100 │ 100MB │
│ -rw-r--r-- │ xfer │ demousers │ 10737418240 │ 2014-11-05 16:01:56 +0100 │ 10GB  │
╰────────────┴──────┴───────────┴─────────────┴───────────────────────────┴───────╯</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server download /aspera-test-dir-large/200MB</span></code></pre></div>
<pre class="text"><code>Time: 00:00:02 ====================================== 100% 100 Mbps Time: 00:00:00
complete</code></pre>
<h2 data-number="2.2" id="going-further"><span class="header-section-number">2.2</span> Going further</h2>
<p>Get familiar with configuration, options, commands : <a href="#command-line-interface">Command Line Interface</a>.</p>
<p>Then, follow the section relative to the product you want to interact
with (Aspera on Cloud, Faspex, ...) : <a href="#plugins">Application
Plugins</a></p>
<h1 data-number="3" id="installation"><span class="header-section-number">3</span> Installation</h1>
<p>It is possible to install <strong>either</strong> directly on the
host operating system (Linux, macOS, Windows) or as a <a href="#container">container</a> (<code>docker</code>,
<code>podman</code>, <code>singularity</code>).</p>
<p>The direct installation is recommended and consists in
installing:</p>
<ul>
<li><a href="#ruby">Ruby language</a></li>
<li><a href="#ruby-gem-aspera-cli">aspera-cli</a>
<!-- markdownlint-disable-line --></li>
<li><a href="#fasp-protocol-ascp">Aspera Transfer Daemon
(<code>ascp</code>)</a></li>
</ul>
<p>Ruby version: &gt;= 3.1.</p>
<blockquote>
<p><strong>Deprecation notice</strong>: the minimum Ruby version will be
3.2 in a future version.</p>
</blockquote>
<p>The following sections provide information on the various
installation methods.</p>
<p>An internet connection is required for the installation. If you don&#39;t
have internet for the installation, refer to section <a href="#installation-in-air-gapped-environment">Installation without
internet access</a>.</p>
<h2 data-number="3.1" id="single-file-executable"><span class="header-section-number">3.1</span> Single file executable</h2>
<p>It is planned to provide <code>ascli</code> as a single
platform-dependent executable. <a href="https://ibm.biz/aspera-cli-exe">Beta releases can be found
here</a>.</p>
<div class="admonition caution">
<div class="admonition-title">Caution</div>
<div class="admonition-body"><p>This is a Beta feature. On Linux, the executable requires a minimum
GLIBC version. Installation of <code>ascp</code> is still required
separately. Refer to <a href="#installation-of-ascp-through-transferd">Install
<code>ascp</code></a>.</p>
<p>On Linux, check the minimum required GLIBC on this site: <a href="https://repology.org/project/glibc/versions">repology.org</a>, or
check your GLIBC version with <code>ldd</code>:</p></div>
</div>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ldd</span> <span class="at">--version</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n1</span></span></code></pre></div>
<pre class="text"><code>ldd (GNU libc) 2.34</code></pre>
<p>Check an executable&#39;s (e.g. <code>/bin/bash</code>,
<code>ascli</code>, <code>ascp</code>) minimum required GLIBC
version:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">objdump</span> <span class="at">-p</span> /bin/bash <span class="kw">|</span> <span class="fu">sed</span> <span class="at">-n</span> <span class="st">&#39;s/^.*GLIBC_//p&#39;</span> <span class="kw">|</span> <span class="fu">sort</span> <span class="at">-V</span> <span class="kw">|</span> <span class="fu">tail</span> <span class="at">-n1</span></span></code></pre></div>
<pre class="text"><code>2.34</code></pre>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>If <code>objdump</code> is not available, then use
<code>strings</code> or <code>grep -z &#39;GLIBC_&#39;|tr \\0 \\n</code></p></div>
</div>
<p>The required GLIBC version for <code>ascp</code> can be found in the
<a href="https://www.ibm.com/docs/en/ahts">Release Notes of HSTS</a> or
<a href="https://eudemo.asperademo.com/download/sdk.html">in this
page</a>.</p>
<h2 data-number="3.2" id="ruby"><span class="header-section-number">3.2</span> Ruby</h2>
<p>A Ruby interpreter is required to run <code>ascli</code>.</p>
<p>Required Ruby version: &gt;= 3.1.</p>
<blockquote>
<p><strong>Deprecation notice</strong>: the minimum Ruby version will be
3.2 in a future version.</p>
</blockquote>
<p><strong>Ruby can be installed using any method</strong> :
<code>rpm</code>, <code>yum</code>, <code>dnf</code>, <code>rvm</code>,
<code>rbenv</code>, <code>brew</code>, Windows installer, ...</p>
<p><strong>In priority</strong>, refer to the official Ruby
documentation:</p>
<ul>
<li><a href="https://www.ruby-lang.org/en/downloads/">Download
Ruby</a></li>
<li><a href="https://www.ruby-lang.org/en/documentation/installation/">Installation
Guide</a></li>
</ul>
<p>For convenience, you may refer to the following sections for a
proposed method for specific operating systems.</p>
<p>Latest version of <code>ascli</code> requires a Ruby version <a href="https://www.ruby-lang.org/en/downloads/branches/">at least under
maintenance support</a>. If only an older Ruby version is available due
to system constraints, then use an older version of <code>ascli</code>
that supports it.</p>
<h3 data-number="3.2.1" id="windows-installer"><span class="header-section-number">3.2.1</span> Windows: Installer</h3>
<p>Manual installation:</p>
<ul>
<li>Navigate to <a href="https://rubyinstaller.org/"><span>https://rubyinstaller.org/</span></a>
→ <strong>Downloads</strong>.</li>
<li>Download the latest Ruby installer <strong>&quot;with devkit&quot;</strong>.
(<code>Msys2</code> is needed to install some native extensions, such as
<code>grpc</code>)</li>
<li>Execute the installer which installs by default in:
<code>C:\RubyVV-x64</code> (<code>VV</code> is the version number)</li>
<li>At the end of the installation procedure, the <code>Msys2</code>
installer is automatically executed, select option 3 (<code>Msys2</code>
and <code>mingw</code>)</li>
<li>Then install the <code>aspera-cli</code> gem and Aspera Transfer
Daemon (see next sections)</li>
</ul>
<p>Automated installation, with internet access:</p>
<p>The Ruby installer supports silent installation, to see the options,
execute it with <code>/help</code>, or refer to the <a href="https://github.com/oneclick/rubyinstaller2/wiki/FAQ">Ruby
Installer FAQ</a></p>
<p>Download the Ruby installer executable from <a href="https://rubyinstaller.org/downloads/">https://rubyinstaller.org/downloads/</a>
and then install:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode bat"><code class="sourceCode dosbat"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>rubyinstaller-devkit-3.2.2-1-x64.exe <span class="at">/silent</span> <span class="at">/currentuser</span> <span class="at">/noicons</span> <span class="at">/dir</span>=C:\aspera-cli</span></code></pre></div>
<h3 data-number="3.2.2" id="macos-brew"><span class="header-section-number">3.2.2</span> macOS: <code>brew</code></h3>
<p><strong>macOS</strong> comes with Ruby 2.6. It is an old unsupported
version and <a href="https://developer.apple.com/documentation/macos-release-notes/macos-catalina-10_15-release-notes">Apple
has deprecated it</a>. It will be removed from macOS in the future. Do
not use it.</p>
<p>The recommended way is to use <a href="https://brew.sh/">Homebrew</a>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> install ruby</span></code></pre></div>
<p>This installs a recent Ruby suitable for <code>ascli</code>.</p>
<p>To add PATH to Ruby on Apple Silicon, add this in your shell
configuration file (e.g. <code>~/.bash_profile</code> or
<code>~/.zshrc</code>):</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">use_ruby()</span><span class="kw">{</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">local</span> <span class="va">version</span><span class="op">=</span><span class="va">$1</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="va">$version</span> <span class="kw">in</span> <span class="ss">list</span><span class="kw">)</span> <span class="cf">for</span> r <span class="kw">in</span> <span class="va">$(</span><span class="ex">brew</span> list <span class="at">-1</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="st">&#39;^ruby&#39;</span><span class="va">)</span><span class="kw">;</span> <span class="cf">do</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>      <span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$(</span><span class="ex">brew</span> info <span class="at">--json</span><span class="op">=</span>v1 <span class="va">$r</span> <span class="kw">|</span> <span class="ex">jq</span> <span class="at">-r</span> <span class="st">&#39;.[0].installed[0].version&#39;</span><span class="va">)</span><span class="st"> : use_ruby </span><span class="va">$r</span><span class="st">&quot;</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">done</span><span class="kw">|</span><span class="ex">gsort</span> <span class="at">-k1,1V</span><span class="kw">;</span><span class="cf">return;;</span><span class="ss">;</span> <span class="cf">esac</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>    <span class="bu">local</span> <span class="va">prefix</span><span class="op">=</span><span class="va">$(</span><span class="ex">brew</span> <span class="at">--prefix</span> ruby<span class="va">${version</span><span class="op">:+</span>@<span class="va">}$version)</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="ot">! </span><span class="bu">test</span> <span class="at">-d</span> <span class="st">&quot;</span><span class="va">$prefix</span><span class="st">&quot;</span><span class="kw">;</span><span class="cf">then</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>        <span class="bu">echo</span> <span class="st">&quot;No such ruby version: </span><span class="va">$version</span><span class="st">&quot;</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>        <span class="ex">brew</span> list<span class="kw">|</span><span class="fu">grep</span> ruby</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">fi</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    <span class="va">PATH</span><span class="op">=</span><span class="st">&quot;</span><span class="va">$prefix</span><span class="st">/bin:</span><span class="va">$(</span><span class="bu">echo</span> <span class="st">&quot;</span><span class="va">$PATH</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="fu">tr</span> <span class="st">&#39;:&#39;</span> <span class="st">&#39;\n&#39;</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-v</span> <span class="st">&#39;/ruby&#39;</span> <span class="kw">|</span> <span class="fu">paste</span> <span class="at">-sd</span> <span class="st">&#39;:&#39;</span> <span class="at">-</span><span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>    <span class="va">PATH</span><span class="op">=</span><span class="st">&quot;</span><span class="va">$(</span><span class="ex">gem</span> env gemdir<span class="va">)</span><span class="st">/bin:</span><span class="va">$PATH</span><span class="st">&quot;</span></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>    <span class="bu">export</span> <span class="va">LDFLAGS</span><span class="op">=</span><span class="st">&quot;-L</span><span class="va">$prefix</span><span class="st">/lib&quot;</span></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>    <span class="bu">export</span> <span class="va">CPPFLAGS</span><span class="op">=</span><span class="st">&quot;-I</span><span class="va">$prefix</span><span class="st">/include&quot;</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">export</span> <span class="va">PKG_CONFIG_PATH</span><span class="op">=</span><span class="st">&quot;</span><span class="va">$prefix</span><span class="st">/lib/pkgconfig&quot;</span></span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&quot;Using: </span><span class="va">$prefix</span><span class="st">&quot;</span></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>    <span class="ex">ruby</span> <span class="at">-v</span></span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a><span class="ex">use_ruby</span></span></code></pre></div>
<h3 data-number="3.2.3" id="linux-package"><span class="header-section-number">3.2.3</span> Linux: Package</h3>
<p>If your Linux distribution provides a standard Ruby package, you can
use it provided that the version supported.</p>
<p><strong>Example:</strong> RHEL 8+, Rocky Linux 8+: with extensions to
compile native gems</p>
<ul>
<li><p>Check available Ruby versions:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dnf</span> module list ruby</span></code></pre></div></li>
<li><p>If Ruby was already installed with an older version, remove
it:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dnf</span> module <span class="at">-y</span> reset ruby</span></code></pre></div></li>
<li><p>Install packages needed to build native gems:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dnf</span> install <span class="at">-y</span> make automake gcc gcc-c++ kernel-devel</span></code></pre></div></li>
<li><p>Enable the Ruby version you want:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dnf</span> module <span class="at">-y</span> enable ruby:3.1</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="ex">dnf</span> install <span class="at">-y</span> ruby-devel</span></code></pre></div></li>
</ul>
<p><strong>Example:</strong> Ubuntu</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">apt-get</span> install <span class="at">-y</span> ruby-full</span></code></pre></div>
<p><strong>Other examples:</strong></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">yum</span> install <span class="at">-y</span> ruby ruby-devel rubygems ruby-json</span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">apt</span> install <span class="at">-y</span> ruby ruby-dev rubygems ruby-json</span></code></pre></div>
<p>One can remove all installed gems, for example to start fresh:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> uninstall <span class="at">-axI</span> <span class="va">$(</span><span class="fu">ls</span> <span class="va">$(</span><span class="ex">gem</span> env gemdir<span class="va">)</span>/gems/<span class="kw">|</span><span class="fu">sed</span> <span class="at">-e</span> <span class="st">&#39;s/-[^-]*$//&#39;</span><span class="kw">|</span><span class="fu">sort</span> <span class="at">-u</span><span class="va">)</span></span></code></pre></div>
<h3 data-number="3.2.4" id="unix-like-rvm-single-user-installation-not-root"><span class="header-section-number">3.2.4</span> Unix-like: RVM: Single user
installation (not root)</h3>
<p>Install <code>rvm</code>. Follow <a href="https://rvm.io/"><span>https://rvm.io/</span></a>.</p>
<p>Execute the shell/curl command. As regular user, it installs in the
user&#39;s home: <code>~/.rvm</code>.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">\curl</span> <span class="at">-sSL</span> https://get.rvm.io <span class="kw">|</span> <span class="fu">bash</span> <span class="at">-s</span> stable</span></code></pre></div>
<p>Follow on-screen instructions to install keys, and then re-execute
the command.</p>
<p>Upon RVM installation, open a new terminal or initialize with:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> ~/.rvm/scripts/rvm</span></code></pre></div>
<p>It is advised to get one of the pre-compiled Ruby version, you can
list with:</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="ex">rvm</span> list <span class="at">--remote</span></span></code></pre></div>
<p>Install the chosen pre-compiled Ruby version:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="ex">rvm</span> install 3.2.2</span></code></pre></div>
<p>Ruby is now installed for the user, go to <a href="#ruby-gem-aspera-cli">Gem installation</a>.
<!-- markdownlint-disable-line --></p>
<p>Alternatively RVM can be installed system-wide, for this execute as
<code>root</code>. It then installs by default in
<code>/usr/local/rvm</code> for all users and creates
<code>/etc/profile.d/rvm.sh</code>. One can install in another location
with:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-sSL</span> https://get.rvm.io <span class="kw">|</span> <span class="fu">bash</span> <span class="at">-s</span> <span class="at">--</span> <span class="at">--path</span> /usr/local</span></code></pre></div>
<p>As root, make sure this will not collide with other application using
Ruby (e.g. Faspex). If so, one can rename the environment script so that
it is not loaded by default:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mv</span> /etc/profile.d/rvm.sh /etc/profile.d/rvm.sh.ok</span></code></pre></div>
<p>To activate Ruby (and ascli) later, source it:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> /etc/profile.d/rvm.sh.ok</span></code></pre></div>
<div class="sourceCode" id="cb36"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="ex">rvm</span> version</span></code></pre></div>
<p>On macOS, one way to force use of OpenSSL 3.0 is:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="va">RUBY_CONFIGURE_OPTS</span><span class="op">=</span><span class="st">&quot;--with-openssl-dir=</span><span class="va">$(</span><span class="ex">brew</span> <span class="at">--prefix</span> openssl@3.0<span class="va">)</span><span class="st">&quot;</span> <span class="ex">rvm</span> install 3.4.0</span></code></pre></div>
<h3 data-number="3.2.5" id="unix-like-rbenv"><span class="header-section-number">3.2.5</span> Unix-like:
<code>rbenv</code></h3>
<p>If you don&#39;t have root access, you can install Ruby in your home
directory using <code>rbenv</code> see <a href="https://github.com/rbenv/rbenv-installer#rbenv-installer"><code>rbenv-installer</code></a>:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-fsSL</span> https://github.com/rbenv/rbenv-installer/raw/HEAD/bin/rbenv-installer <span class="kw">|</span> <span class="fu">bash</span></span></code></pre></div>
<p>Then open a new terminal, or <code>source</code> the shell
initialization script:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> ~/.bashrc</span></code></pre></div>
<p>Then install Ruby:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="ex">rbenv</span> install 3.2.2</span></code></pre></div>
<h3 data-number="3.2.6" id="other-unixes-aix"><span class="header-section-number">3.2.6</span> Other Unixes (AIX)</h3>
<p>Ruby is sometimes made available as an installable package through
third party providers. For example for AIX, one can look at:</p>
<p><a href="https://www.ibm.com/support/pages/aix-toolbox-open-source-software-downloads-alpha#R">https://www.ibm.com/support/pages/aix-toolbox-open-source-software-downloads-alpha#R</a></p>
<p>If your Unix does not provide a pre-built Ruby, you can get it using
one of those <a href="https://www.ruby-lang.org/en/documentation/installation/">methods</a>.</p>
<p>For instance to build from source and install in
<code>/opt/ruby</code> :</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> https://cache.ruby-lang.org/pub/ruby/2.7/ruby-2.7.2.tar.gz</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="fu">gzip</span> <span class="at">-d</span> ruby-2.7.2.tar.gz</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> xvf ruby-2.7.2.tar</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> ruby-2.7.2</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a><span class="ex">./configure</span> <span class="at">--prefix</span><span class="op">=</span>/opt/ruby</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> ruby.imp</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> install</span></code></pre></div>
<h3 data-number="3.2.7" id="jruby"><span class="header-section-number">3.2.7</span> JRuby</h3>
<p><code>ascli</code> can also run with the <a href="https://www.jruby.org/">JRuby</a> interpreter. All what is needed
is a JVM (Java Virtual Machine) on your system (<code>java</code>). The
JRuby package comes pre-complied and does not require compilation of
native extensions. Use a version of JRuby compatible with Ruby version
supported by <code>ascli</code>. Refer to <a href="https://en.wikipedia.org/wiki/JRuby">the Wikipedia page</a> to
match JRuby and Ruby versions. Choose the latest version from:</p>
<p><a href="https://www.jruby.org/download">https://www.jruby.org/download</a></p>
<div class="admonition caution">
<div class="admonition-title">Caution</div>
<div class="admonition-body"><p>The startup time is slightly longer using <code>jruby</code> than the
native Ruby. Refer to the <a href="https://github.com/jruby/jruby/wiki">JRuby wiki</a> for details.
This can be reduced by using the <code>--dev</code> option. The transfer
speed is not impacted (executed by <code>ascp</code> binary).</p></div>
</div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>JRuby can be <a href="https://www.jruby.org/getting-started">installed</a> using
<code>rvm</code>.</p></div>
</div>
<p>Example: start <code>ascli</code> with JRuby and reduce startup
time:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">JRUBY_OPTS</span><span class="op">=</span>--dev</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> <span class="at">-v</span></span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="va">JRUBY_OPTS</span><span class="op">=</span>--dev <span class="ex">ascli</span> <span class="at">-v</span></span></code></pre></div>
<h3 data-number="3.2.8" id="optional-gems"><span class="header-section-number">3.2.8</span> Optional gems</h3>
<p>Some additional gems are required for some specific features. Those
are not installed as part of dependencies because they involve
compilation of native code but concern less-used features.</p>
<p>See <a href="Gemfile">Gemfile</a>:</p>
<table>
<thead>
<tr>
<th>name</th>
<th>version</th>
<th>comment</th>
</tr>
</thead>
<tbody>
<tr>
<td>grpc</td>
<td>~&gt; 1.71</td>
<td>(no jruby) for Aspera Transfer Daemon</td>
</tr>
<tr>
<td>mimemagic</td>
<td>~&gt; 0.4</td>
<td>for preview</td>
</tr>
<tr>
<td>rmagick</td>
<td>~&gt; 6.1</td>
<td>(no jruby) for terminal view</td>
</tr>
<tr>
<td>symmetric-encryption</td>
<td>~&gt; 4.6</td>
<td>for encrypted hash file secrets</td>
</tr>
<tr>
<td>bigdecimal</td>
<td>~&gt; 3.1</td>
<td>if RUBY_VERSION &gt;= &#39;3.4&#39; for symmetric-encryption ?</td>
</tr>
<tr>
<td>sqlite3</td>
<td>~&gt; 2.7</td>
<td>(no jruby) for async DB</td>
</tr>
<tr>
<td>jdbc-sqlite3</td>
<td>~&gt; 3.46</td>
<td>(jruby) for async DB</td>
</tr>
<tr>
<td>sequel</td>
<td>~&gt; 5.96</td>
<td>(jruby) for async DB</td>
</tr>
</tbody>
</table>
<p>Install like this:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> install grpc <span class="at">-v</span> <span class="st">&#39;~&gt; 1.71&#39;</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> install mimemagic <span class="at">-v</span> <span class="st">&#39;~&gt; 0.4&#39;</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> install rmagick <span class="at">-v</span> <span class="st">&#39;~&gt; 6.1&#39;</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> install symmetric-encryption <span class="at">-v</span> <span class="st">&#39;~&gt; 4.6&#39;</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> install bigdecimal <span class="at">-v</span> <span class="st">&#39;~&gt; 3.1&#39;</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> install sqlite3 <span class="at">-v</span> <span class="st">&#39;~&gt; 2.7&#39;</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> install jdbc-sqlite3 <span class="at">-v</span> <span class="st">&#39;~&gt; 3.46&#39;</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> install sequel <span class="at">-v</span> <span class="st">&#39;~&gt; 5.96&#39;</span></span></code></pre></div>
<h2 data-number="3.3" id="ruby-gem-aspera-cli"><span class="header-section-number">3.3</span> Ruby Gem:
<code>aspera-cli</code></h2>
<p>Once you have Ruby and rights to install gems, install the
<code>aspera-cli</code> gem and its dependencies:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> install aspera-cli <span class="at">--pre</span></span></code></pre></div>
<p>To upgrade to the latest version:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> update aspera-cli</span></code></pre></div>
<p>During its execution, <code>ascli</code> checks every week if a new
version is available and notifies the user in a WARN log. To deactivate
this feature, globally set the option <code>version_check_days</code> to
<code>0</code>, or specify a different period in days.</p>
<p>To check if a new version is available (independently of
<code>version_check_days</code>):</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config check_update</span></code></pre></div>
<h3 data-number="3.3.1" id="gem-installation-with-signature-verification"><span class="header-section-number">3.3.1</span> Gem installation with
signature verification</h3>
<p>The gem is signed with a private key, and the public certificate is
available in the GitHub repository
(<code>certs/aspera-cli-public-cert.pem</code>). When installing the
gem, the signature can be optionally verified.</p>
<p>For <a href="https://guides.rubygems.org/security/#using-gems">secure
installation</a>, one can install the gem with the public key:</p>
<p>Import the verification certificate:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> cert <span class="at">--add</span> <span class="op">&lt;(</span><span class="ex">curl</span> <span class="at">-Ls</span> https://raw.githubusercontent.com/IBM/aspera-cli/main/certs/aspera-cli-public-cert.pem<span class="op">)</span></span></code></pre></div>
<p>The user installs the gem with <code>HighSecurity</code> or
<code>MediumSecurity</code>: this will succeed only of the gem is
trusted:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> install <span class="at">-P</span> MediumSecurity aspera-cli</span></code></pre></div>
<h2 data-number="3.4" id="fasp-protocol-ascp"><span class="header-section-number">3.4</span> FASP Protocol:
<code>ascp</code></h2>
<p>Most file transfers will be executed using the <strong>FASP</strong>
protocol, using <code>ascp</code>. Only two additional files are
required to perform an Aspera Transfer, which are part of Aspera
Transfer Daemon:</p>
<ul>
<li><code>ascp</code></li>
<li><code>aspera-license</code> (in same folder, or
<code>../etc</code>)</li>
</ul>
<p>This can be installed either be installing an Aspera transfer
software or using an <code>ascli</code> command.</p>
<h3 data-number="3.4.1" id="installation-of-ascp-through-transferd"><span class="header-section-number">3.4.1</span> Installation of
<code>ascp</code> through <code>transferd</code></h3>
<p>The easiest option to install <code>ascp</code> is through the use of
the IBM Aspera Transfer Daemon (<code>transferd</code>). Install using
<code>ascli</code> for the current platform with:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config transferd install</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp install</span></code></pre></div>
<p>The installation of the transfer binaries follows those steps:</p>
<ul>
<li><strong>Select the SDK package to use</strong>. Check the
<code>sdk_url</code> option:
<ul>
<li>If the value is <strong>not</strong> the default value
(<code>DEF</code>), it directly specifies the archive URL to
download.</li>
<li>If the value is <code>DEF</code>, <code>ascli</code> downloads the
YAML file from the URL specified by the <code>locations_url</code>
option (default: <a href="https://ibm.biz/sdk_location">https://ibm.biz/sdk_location</a>).
<ul>
<li>This YAML file lists supported architectures (OS, CPU) and Aspera
Transfer Daemon versions with their associated package URLs.</li>
<li>If an additional positional parameter is provided, it specifies the
SDK version to use; otherwise the latest version is selected.</li>
<li>The package URL matching the current system architecture is then
used.</li>
</ul></li>
</ul></li>
<li><strong>Extract the archive</strong>
<ul>
<li>By default, the archive is extracted to
<code>$HOME/.aspera/sdk</code>.</li>
<li>The destination folder can be changed by setting the
<code>sdk_folder</code> option.</li>
</ul></li>
</ul>
<table>
<thead>
<tr>
<th>Option</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>sdk_url</code></td>
<td><code>DEF</code></td>
<td>URL to download the Aspera Transfer Daemon
archive.<br /><code>DEF</code> means: select from available
archives.</td>
</tr>
<tr>
<td><code>locations_url</code></td>
<td><code>https://ibm.biz/sdk_location</code></td>
<td>URL to get download URLs of Aspera Transfer Daemon from IBM official
repository.</td>
</tr>
<tr>
<td><code>sdk_folder</code></td>
<td><code>$HOME/.aspera/sdk</code></td>
<td>Folder where the SDK archive is extracted.</td>
</tr>
</tbody>
</table>
<p>Available Transfer Daemon versions available from
<code>locations_url</code> can be listed with:
<code>ascli config transferd list</code></p>
<p>To install a specific version, e.g. 1.1.3:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp install 1.1.3</span></code></pre></div>
<p>To get the download URL for a specific platform and version:</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config transferd list <span class="at">--select</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;platform&quot;:&quot;osx-arm64&quot;,&quot;version&quot;:&quot;1.1.3&quot;}&#39;</span> <span class="at">--fields</span><span class="op">=</span>url</span></code></pre></div>
<p>To download it, pipe to <code>config download</code>:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config transferd list <span class="at">--select</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;platform&quot;:&quot;osx-arm64&quot;,&quot;version&quot;:&quot;1.1.3&quot;}&#39;</span> <span class="at">--fields</span><span class="op">=</span>url <span class="kw">|</span> <span class="ex">ascli</span> config download @stdin:</span></code></pre></div>
<p>If installation from a local file preferred (air-gapped installation)
instead of fetching from internet: one can specify the location of the
SDK file with option <code>sdk_url</code>:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp install <span class="at">--sdk-url</span><span class="op">=</span>file:///macos-arm64-1.1.3-c6c7a2a.zip</span></code></pre></div>
<p>The format is: <code>file:///&lt;path&gt;</code>, where
<code>&lt;path&gt;</code> can be either a relative path (not starting
with <code>/</code>), or an absolute path.</p>
<p>Supported platforms are listed in the <a href="https://developer.ibm.com/apis/catalog/aspera--aspera-transfer-sdk/Release+notes">Release
Notes</a> and archives can be downloaded from <a href="https://developer.ibm.com/apis/catalog/aspera--aspera-transfer-sdk/downloads/downloads.json">Downloads</a>.</p>
<h3 data-number="3.4.2" id="installation-of-ascp-through-other-component"><span class="header-section-number">3.4.2</span> Installation of
<code>ascp</code> through other component</h3>
<p>If the embedded method is not used, the following packages are also
suitable:</p>
<ul>
<li>IBM Aspera Connect Client (Free)</li>
<li>IBM Aspera Desktop Client (Free)</li>
<li>IBM Aspera High Speed Transfer Server (Licensed)</li>
<li>IBM Aspera High Speed Transfer Endpoint (Licensed)</li>
</ul>
<p>For instance, Aspera Connect Client can be installed by visiting the
page: <a href="https://www.ibm.com/aspera/connect/"><span>https://www.ibm.com/aspera/connect/</span></a>.</p>
<p><code>ascli</code> will detect most of Aspera transfer products in
standard locations and use the first one found by default. Refer to
section <a href="#fasp-configuration">FASP</a> for details on how to
select a client or set path to the FASP protocol.</p>
<p>Several methods are provided to start a transfer. Use of a local
client (<a href="#agent-direct"><code>direct</code></a> transfer agent)
is one of them, but other methods are available. Refer to section: <a href="#transfer-clients-agents">Transfer Agents</a></p>
<h2 data-number="3.5" id="installation-in-air-gapped-environment"><span class="header-section-number">3.5</span> Installation in air gapped
environment</h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>No pre-packaged version is provided yet.</p></div>
</div>
<h3 data-number="3.5.1" id="gem-files-and-dependencies"><span class="header-section-number">3.5.1</span> Gem files and
dependencies</h3>
<p>The sample script: <a href="windows/build_package.sh">windows/build_package.sh</a> can be used
to download all necessary gems and dependencies in a
<code>tar.gz</code>.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="ex">./build_package.sh</span> aspera-cli 4.18.0</span></code></pre></div>
<pre class="text"><code>Archive: aspera-cli-4.18.0-gems.tgz</code></pre>
<h3 data-number="3.5.2" id="unix-like"><span class="header-section-number">3.5.2</span> Unix-like</h3>
<p>A method to build one is provided here:</p>
<p>The procedure:</p>
<ul>
<li><p>Follow the non-root installation procedure with RVM, including
gem</p></li>
<li><p>Archive (zip, tar) the main RVM folder (includes ascli):</p></li>
</ul>
<div class="sourceCode" id="cb58"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$HOME</span> <span class="kw">&amp;&amp;</span> <span class="fu">tar</span> zcvf rvm-ascli.tgz .rvm</span></code></pre></div>
<ul>
<li><p>Download the Transfer Daemon archive for the selected
architecture, follow <a href="#installation-of-ascp-through-transferd">Install
<code>ascp</code></a></p></li>
<li><p>Transfer those 2 files to the target system</p></li>
<li><p>On target system</p></li>
</ul>
<div class="sourceCode" id="cb59"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> <span class="va">$HOME</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tar</span> zxvf rvm-ascli.tgz</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> ~/.rvm/scripts/rvm</span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp install <span class="at">--sdk-url</span><span class="op">=</span>file:///[SDK archive file path]</span></code></pre></div>
<ul>
<li>Add those lines to shell environment (<code>.profile</code>)</li>
</ul>
<div class="sourceCode" id="cb60"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> ~/.rvm/scripts/rvm</span></code></pre></div>
<h3 data-number="3.5.3" id="windows"><span class="header-section-number">3.5.3</span> Windows</h3>
<p>Installation without network:</p>
<p>It is essentially the same procedure as installation for Windows with
internet, but instead of retrieving files from internet, copy the files
from a machine with internet access, and then install from those
archives:</p>
<ul>
<li><p>Download the Ruby installer from <a href="https://rubyinstaller.org/downloads/">https://rubyinstaller.org/downloads/</a></p>
<div class="sourceCode" id="cb61"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="va">v</span><span class="op">=</span><span class="va">$(</span><span class="ex">curl</span> <span class="at">-s</span> https://rubyinstaller.org/downloads/ <span class="kw">|</span> <span class="fu">sed</span> <span class="at">-nEe</span> <span class="st">&#39;s|.*(https://.*/releases/download/.*exe).*|\1|p&#39;</span> <span class="kw">|</span> <span class="fu">head</span> <span class="at">-n</span> 1<span class="va">)</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-o</span> <span class="va">${v</span><span class="op">##</span><span class="pp">*</span>/<span class="va">}</span> <span class="va">$v</span></span></code></pre></div></li>
<li><p>Create an archive with necessary gems like in previous
section</p></li>
<li><p>Download the Transfer Daemon following: <a href="#installation-of-ascp-through-transferd">Install
<code>ascp</code></a></p></li>
<li><p>Create a Zip with all those files and transfer to the target
system.</p></li>
</ul>
<p>Then, on the target system:</p>
<ul>
<li>Unzip the archive</li>
<li>Execute the installer:</li>
</ul>
<div class="sourceCode" id="cb62"><pre class="sourceCode bat"><code class="sourceCode dosbat"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>rubyinstaller-devkit-3.2.2-1-x64.exe <span class="at">/silent</span> <span class="at">/currentuser</span> <span class="at">/noicons</span> <span class="at">/dir</span>=C:\aspera-cli</span></code></pre></div>
<ul>
<li>Install the gems: Extract the gem archive and then:</li>
</ul>
<div class="sourceCode" id="cb63"><pre class="sourceCode bat"><code class="sourceCode dosbat"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>gem install -<span class="at">-force</span> -<span class="at">-local</span> *.gem</span></code></pre></div>
<ul>
<li>Install the Aspera Transfer Daemon SDK</li>
</ul>
<div class="sourceCode" id="cb64"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp install <span class="at">--sdk-url</span><span class="op">=</span>file:///sdk.zip</span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>An example of installation script is provided: <a href="windows/install.bat">windows/install.bat</a></p></div>
</div>
<h2 data-number="3.6" id="container"><span class="header-section-number">3.6</span> Container</h2>
<p>The container image is: <a href="https://hub.docker.com/r/docker.io/martinlaurent/ascli"><code>docker.io/martinlaurent/ascli</code></a>.
The container contains: Ruby, <code>ascli</code> and the Aspera Transfer
Daemon. To use the container, ensure that you have <code>podman</code>
(or <code>docker</code>) installed.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="ex">podman</span> <span class="at">--version</span></span></code></pre></div>
<h3 data-number="3.6.1" id="container-quick-start"><span class="header-section-number">3.6.1</span> Container: Quick start</h3>
<p><strong>Wanna start quickly ?</strong> With an interactive shell
?</p>
<p>Execute this:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="ex">podman</span> run <span class="at">--rm</span> <span class="at">--tty</span> <span class="at">--interactive</span> <span class="at">--entrypoint</span> bash docker.io/martinlaurent/ascli:latest</span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>This command changes the entry point to an interactive shell instead
of direct execution of <code>ascli</code>.</p></div>
</div>
<p>Then, execute individual <code>ascli</code> commands such as:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config init</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset overview</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp info</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server ls /</span></code></pre></div>
<p>That is simple, but there are limitations:</p>
<ul>
<li>Everything happens in the container</li>
<li>Any generated file in the container will be lost on container
(shell) exit. Including configuration files and downloaded files.</li>
<li>No possibility to upload files located on the host system</li>
</ul>
<h3 data-number="3.6.2" id="container-details"><span class="header-section-number">3.6.2</span> Container: Details</h3>
<p>The container image is built from this <a href="container/Dockerfile.tmpl.erb">Dockerfile</a>. The entry point is
<code>ascli</code> and the default command is <code>help</code>.</p>
<p>The container can be executed for individual commands like this: (add
<code>ascli</code> commands and options at the end of the command line,
e.g. <code>-v</code> to display the version)</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="ex">podman</span> run <span class="at">--rm</span> <span class="at">--tty</span> <span class="at">--interactive</span> docker.io/martinlaurent/ascli:latest</span></code></pre></div>
<p>For more convenience, you may define a shell alias:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="bu">alias</span> ascli=<span class="st">&#39;podman run --rm --tty --interactive docker.io/martinlaurent/ascli:latest&#39;</span></span></code></pre></div>
<p>Then, you can execute the container like a local command:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> <span class="at">-v</span></span></code></pre></div>
<pre class="text"><code>4.24.0.pre</code></pre>
<p>In order to keep persistency of configuration on the host, you should
specify your user&#39;s configuration folder as a volume for the container.
To enable write access, a possibility is to run as <code>root</code> in
the container (and set the default configuration folder to
<code>/home/cliuser/.aspera/ascli</code>). Add options:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--user</span> root <span class="at">--env</span> ASCLI_HOME=/home/cliuser/.aspera/ascli <span class="at">--volume</span> <span class="va">$HOME</span>/.aspera/ascli:/home/cliuser/.aspera/ascli</span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>If you are using a <code>podman machine</code>, e.g. on macOS, make
sure that the folder is also shared between the VM and the host, so that
sharing is:</p>
<p>container → VM → Host:
<code>podman machine init ... --volume=&quot;/Users:/Users&quot;</code></p></div>
</div>
<p>As shown in the quick start, if you prefer to keep a running
container with a shell and <code>ascli</code> available, you can change
the entry point, add option:</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--entrypoint</span> bash</span></code></pre></div>
<p>You may also probably want that files downloaded in the container are
directed to the host. In this case you need also to specify the shared
transfer folder as a volume:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--volume</span> <span class="va">$HOME</span>/xferdir:/xferfiles</span></code></pre></div>
<div class="admonition caution">
<div class="admonition-title">Caution</div>
<div class="admonition-body"><p><code>ascli</code> is run inside the container, so transfers are also
executed inside the container and do not have access to host storage by
default.</p></div>
</div>
<p>And if you want all the above, simply use all the options:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="bu">alias</span> asclish=<span class="st">&quot;podman run --rm --tty --interactive --user root --env ASCLI_HOME=/home/cliuser/.aspera/ascli --volume </span><span class="va">$HOME</span><span class="st">/.aspera/ascli:/home/cliuser/.aspera/ascli --volume </span><span class="va">$HOME</span><span class="st">/xferdir:/xferfiles --entrypoint bash docker.io/martinlaurent/ascli:latest&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb76"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">xferdir</span><span class="op">=</span><span class="va">$HOME</span>/xferdir</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> <span class="va">$xferdir</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> <span class="at">-R</span> 777 <span class="va">$xferdir</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> <span class="va">$HOME</span>/.aspera/ascli</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="ex">asclish</span></span></code></pre></div>
<h3 data-number="3.6.3" id="container-sample-start-script"><span class="header-section-number">3.6.3</span> Container: Sample start
script</h3>
<p>A convenience sample script is also provided: download the script <a href="../container/dascli"><code>dascli</code></a> from <a href="https://raw.githubusercontent.com/IBM/aspera-cli/main/container/dascli">the
GIT repo</a> :</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>If you have installed <code>ascli</code>, the script
<code>dascli</code> can also be found like this:</p>
<p><code>cp $(ascli config gem path)/../container/dascli ascli</code></p></div>
</div>
<p>Some environment variables can be set for this script to adapt its
behavior:</p>
<table>
<thead>
<tr>
<th>env var</th>
<th>Description</th>
<th>Default</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ASCLI_HOME</code></td>
<td>Configuration folder (persistency)</td>
<td><code>$HOME/.aspera/ascli</code></td>
<td><code>$HOME/.ascli_config</code></td>
</tr>
<tr>
<td><code>docker_args</code></td>
<td>Additional options to <code>podman</code></td>
<td>&lt;empty&gt;</td>
<td><code>--volume /Users:/Users</code></td>
</tr>
<tr>
<td><code>image</code></td>
<td>Container image name</td>
<td><code>docker.io/martinlaurent/ascli</code></td>
<td>n/a</td>
</tr>
<tr>
<td><code>version</code></td>
<td>Container image version</td>
<td>Latest</td>
<td><code>4.8.0.pre</code></td>
</tr>
</tbody>
</table>
<p>The wrapping script maps the folder <code>$ASCLI_HOME</code> on host
to <code>/home/cliuser/.aspera/ascli</code> in the container. (value
expected in the container). This allows having persistent configuration
on the host.</p>
<p>To add local storage as a volume, you can use the env var
<code>docker_args</code>:</p>
<p>Example of use:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-o</span> ascli https://raw.githubusercontent.com/IBM/aspera-cli/main/container/dascli</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> a+x ascli</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">xferdir</span><span class="op">=</span><span class="va">$HOME</span>/xferdir</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> <span class="va">$xferdir</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> <span class="at">-R</span> 777 <span class="va">$xferdir</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">docker_args</span><span class="op">=</span><span class="st">&quot;--volume </span><span class="va">$xferdir</span><span class="st">:/xferfiles&quot;</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./ascli</span> config init</span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&#39;Local file to transfer&#39;</span> <span class="op">&gt;</span> <span class="va">$xferdir</span>/samplefile.txt</span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a><span class="ex">./ascli</span> server upload /xferfiles/samplefile.txt <span class="at">--to-folder</span><span class="op">=</span>/Upload</span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The local file (<code>samplefile.txt</code>) is specified relative to
storage view from container (<code>/xferfiles</code>) mapped to the host
folder <code>$HOME/xferdir</code></p></div>
</div>
<div class="admonition caution">
<div class="admonition-title">Caution</div>
<div class="admonition-body"><p>Do not use too many volumes, as the legacy <code>aufs</code> limits
the number. (anyway, prefer to use <code>overlay2</code>)</p></div>
</div>
<h3 data-number="3.6.4" id="container-offline-installation"><span class="header-section-number">3.6.4</span> Container: Offline
installation</h3>
<ul>
<li>First create the image archive:</li>
</ul>
<div class="sourceCode" id="cb78"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="ex">podman</span> pull docker.io/martinlaurent/ascli</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="ex">podman</span> save docker.io/martinlaurent/ascli<span class="kw">|</span><span class="fu">gzip</span><span class="op">&gt;</span>ascli_image_latest.tar.gz</span></code></pre></div>
<ul>
<li>Then, on air-gapped system:</li>
</ul>
<div class="sourceCode" id="cb79"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="ex">podman</span> load <span class="at">-i</span> ascli_image_latest.tar.gz</span></code></pre></div>
<h3 data-number="3.6.5" id="container-asperaconf"><span class="header-section-number">3.6.5</span> Container:
<code>aspera.conf</code></h3>
<p><code>ascp</code>&#39;s configuration file <code>aspera.conf</code> is
located in the container at: <code>/ibm_aspera/aspera.conf</code> (see
Dockerfile). As the container is immutable, it is not recommended
modifying this file. If one wants to change the content, it is possible
to tell <code>ascp</code> to use another file using <code>ascp</code>
option <code>-f</code>, e.g. by locating it on the host folder
<code>$HOME/.aspera/ascli</code> mapped to the container folder
<code>/home/cliuser/.aspera/ascli</code>:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&#39;&lt;CONF/&gt;&#39;</span> <span class="op">&gt;</span> <span class="va">$HOME</span>/.aspera/ascli/aspera.conf</span></code></pre></div>
<p>Then, tell <code>ascp</code> to use that other configuration
file:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--transfer-info=@json:</span><span class="st">&#39;{&quot;ascp_args&quot;:[&quot;-f&quot;,&quot;/home/cliuser/.aspera/ascli/aspera.conf&quot;]}&#39;</span></span></code></pre></div>
<h3 data-number="3.6.6" id="container-singularity"><span class="header-section-number">3.6.6</span> Container: Singularity</h3>
<p>Singularity is another type of use of container.</p>
<p>On Linux install:</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dnf</span> install singularity-ce</span></code></pre></div>
<p>Build an image like this:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="ex">singularity</span> build ascli.sif docker://docker.io/martinlaurent/ascli</span></code></pre></div>
<p>Then, start <code>ascli</code> like this:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="ex">singularity</span> run ascli.sif</span></code></pre></div>
<p>Or get a shell with access to <code>ascli</code> like this:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="ex">singularity</span> shell ascli.sif</span></code></pre></div>
<h2 data-number="3.7" id="ssl-library"><span class="header-section-number">3.7</span> SSL library</h2>
<p><code>ascli</code> uses the Ruby <code>openssl</code> gem which uses
by default the system&#39;s <code>openssl</code> library and its CA
certificate bundle.</p>
<p>To display the version of <strong>OpenSSL</strong> used in
<code>ascli</code>:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @ruby:OpenSSL::OPENSSL_VERSION <span class="at">--format</span><span class="op">=</span>text</span></code></pre></div>
<p>It is possible to specify to use another SSL library or version by
executing:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> install openssl <span class="at">--</span> <span class="at">--with-openssl-dir</span><span class="op">=</span>[openssl library folder]</span></code></pre></div>
<p>Where <code>[openssl library folder]</code> is the path to the folder
containing the <code>lib</code> and <code>include</code> folders of the
<code>openssl</code> library.</p>
<p>For example, on macOS, to use the <code>openssl@3</code> library
installed with <code>brew</code>:</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> openssl version <span class="at">-e</span><span class="kw">|</span><span class="fu">sed</span> <span class="at">-n</span> <span class="st">&#39;s|ENGINESDIR: &quot;\(.*\)/lib[^/]*/.*|\1|p&#39;</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="ex">/opt/homebrew/Cellar/openssl@3/3.3.0</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a><span class="ex">$</span> gem install openssl <span class="at">--</span> <span class="at">--with-openssl-dir</span><span class="op">=</span>/opt/homebrew/Cellar/openssl@3/3.3.0</span></code></pre></div>
<h2 data-number="3.8" id="ssl-ca-certificate-bundle"><span class="header-section-number">3.8</span> SSL CA certificate bundle</h2>
<p>SSL certificates are validated using a certificate store, by default
it is the one of the system&#39;s <code>openssl</code> library.</p>
<p>To display trusted certificate store locations:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> <span class="at">--show-config</span> <span class="at">--fields</span><span class="op">=</span>cert_stores</span></code></pre></div>
<p>Certificates are checked against the <a href="https://ruby-doc.org/stdlib-3.0.3/libdoc/openssl/rdoc/OpenSSL/X509/Store.html">Ruby
default certificate store</a>
<code>OpenSSL::X509::DEFAULT_CERT_FILE</code> and
<code>OpenSSL::X509::DEFAULT_CERT_DIR</code>, which are typically the
ones of <code>openssl</code> on Unix-like systems (Linux, macOS,
etc...). Ruby&#39;s default values can be overridden using env vars:
<code>SSL_CERT_FILE</code> and <code>SSL_CERT_DIR</code>.</p>
<p>One can display those default values:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @ruby:OpenSSL::X509::DEFAULT_CERT_DIR <span class="at">--format</span><span class="op">=</span>text</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @ruby:OpenSSL::X509::DEFAULT_CERT_FILE <span class="at">--format</span><span class="op">=</span>text</span></code></pre></div>
<p>In order to get certificate validation, the CA certificate bundle
must be up-to-date. Check this repository on how to update the system&#39;s
CA certificate bundle: <a href="https://github.com/millermatt/osca"><span>https://github.com/millermatt/osca</span></a>.</p>
<p>For example on RHEL/Rocky Linux:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dnf</span> install <span class="at">-y</span> ca-certificates</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="ex">update-ca-trust</span> extract</span></code></pre></div>
<p>The SSL CA certificate bundle can be specified using the
<code>cert_stores</code> option, which accepts a list of files or
directories. By default, Ruby’s system certificate store is used.</p>
<p>When <code>cert_stores</code> is provided:</p>
<ul>
<li>It overrides the default locations, which can still be included
explicitly using the special value <code>DEF</code>.</li>
<li>The option accepts either a <code>String</code> (single path) or an
<code>Array</code> (multiple paths).</li>
<li>Each use of the option appends to the list of search paths
incrementally.</li>
<li>If a directory is specified, all files within that directory are
automatically included.</li>
</ul>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>JRuby uses its own implementation and CA bundles.</p></div>
</div>
<p>For example, on Linux to force the use the system&#39;s certificate
store:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--cert-stores=</span><span class="va">$(</span><span class="ex">openssl</span> version <span class="at">-d</span><span class="kw">|</span><span class="fu">cut</span> <span class="at">-f2</span> <span class="at">-d</span><span class="st">&#39;&quot;&#39;</span><span class="va">)</span><span class="ex">/cert.pem</span></span></code></pre></div>
<p><code>ascp</code> also needs to validate certificates when using
<strong>WSS</strong> for transfer TCP part (instead of
<strong>SSH</strong>).</p>
<p>By default,<code>ascp</code> uses a hard coded root location
<code>OPENSSLDIR</code>. Original <code>ascp</code>&#39;s hard coded
locations can be found using:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp info <span class="at">--fields</span><span class="op">=</span>openssldir</span></code></pre></div>
<p>E.g. on macOS: <code>/Library/Aspera/ssl</code>. Then trusted
certificates are taken from <code>[OPENSSLDIR]/cert.pem</code> and files
in <code>[OPENSSLDIR]/certs</code>. <code>ascli</code> overrides the
default hard coded location used by <code>ascp</code> for WSS and uses
the same locations as specified in <code>cert_stores</code> (using the
<code>-i</code> option of <code>ascp</code>).</p>
<p>To update trusted root certificates for <code>ascli</code>: Display
the trusted certificate store locations used by <code>ascli</code>.
Typically done by updating the system&#39;s root certificate store.</p>
<p>An up-to-date version of the certificate bundle can also be retrieved
with:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @uri:https://curl.haxx.se/ca/cacert.pem <span class="at">--format</span><span class="op">=</span>text</span></code></pre></div>
<p>To download that certificate store:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @uri:https://curl.haxx.se/ca/cacert.pem <span class="at">--format</span><span class="op">=</span>text <span class="at">--output</span><span class="op">=</span>/tmp/cacert.pem</span></code></pre></div>
<p>Then, use this store by setting the option <code>cert_stores</code>
(or env var <code>SSL_CERT_FILE</code>).</p>
<p>To trust a specific certificate (e.g. self-signed), <strong>provided
that the <code>CN</code> is correct</strong>, save the certificate chain
to a file:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config remote_certificate chain https://localhost:9092 <span class="at">--insecure</span><span class="op">=</span>yes <span class="at">--output</span><span class="op">=</span>myserver.pem</span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Use command <code>name</code> to display the remote common name of
the remote certificate.</p></div>
</div>
<p>Then, use this file as certificate store (e.g. here, Node API):</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @uri:https://localhost:9092/ping <span class="at">--cert-stores</span><span class="op">=</span>myserver.pem</span></code></pre></div>
<h1 data-number="4" id="command-line-interface"><span class="header-section-number">4</span> Command Line Interface</h1>
<p>The command line tool is: <code>ascli</code></p>
<p>The <code>aspera-cli</code> gem provides a command line interface
(CLI) which interacts with Aspera Products (mostly using REST APIs):</p>
<ul>
<li>IBM Aspera High Speed Transfer Server (FASP and Node)</li>
<li>IBM Aspera on Cloud (including ATS)</li>
<li>IBM Aspera Faspex</li>
<li>IBM Aspera Shares</li>
<li>IBM Aspera Console</li>
<li>IBM Aspera Orchestrator</li>
<li>And more...</li>
</ul>
<p><code>ascli</code> provides the following features:</p>
<ul>
<li>Commands to Aspera server products (on-premise and SaaS)</li>
<li>Any command line <strong>options</strong> (products URL, credentials
or any option) can be provided on command line, in configuration file,
in env var, in files, ...</li>
<li>Commands, Options, and Option values shortcuts</li>
<li>FASP <a href="#transfer-clients-agents">Transfer Agents</a> can be:
local <code>ascp</code>, or Connect Client, or any transfer node</li>
<li>Transfer parameters can be altered by modification of <a href="#transfer-specification"><strong>transfer-spec</strong></a>, this
includes requiring multi-session</li>
<li>Allows transfers from products to products, essentially at node
level (using the node transfer agent)</li>
<li>faspstream creation (using Node API)</li>
<li><strong>Watchfolder</strong> creation (using Node API)</li>
<li>Additional command plugins can be written by the user</li>
<li>Download of Faspex and Aspera on Cloud &quot;external&quot; links</li>
<li><strong>Legacy</strong> SSH based FASP transfers and remote commands
(<code>ascmd</code>)</li>
</ul>
<p>Basic usage is displayed by executing:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> <span class="at">-h</span></span></code></pre></div>
<p>Refer to sections: <a href="#usage">Usage</a>.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p><code>ascli</code> features are not fully documented here, the user
may explore commands on the command line.</p></div>
</div>
<h2 data-number="4.1" id="ascp-command-line"><span class="header-section-number">4.1</span> <code>ascp</code> command
line</h2>
<p>If you want to use <code>ascp</code> directly as a command line,
refer to IBM Aspera documentation of either <a href="https://www.ibm.com/docs/en/asdc">Desktop Client</a>, <a href="https://www.ibm.com/docs/en/ahte">Endpoint</a> or <a href="https://www.ibm.com/docs/en/ahts">Transfer Server</a> where <a href="https://www.ibm.com/docs/en/ahts/4.4?topic=linux-ascp-transferring-from-command-line">a
section on <code>ascp</code> can be found</a>.</p>
<p>Using <code>ascli</code> with plugin <code>server</code> for command
line gives advantages over <code>ascp</code>:</p>
<ul>
<li>Automatic resume on error</li>
<li>Configuration file</li>
<li>Choice of transfer agents</li>
<li>Integrated support of multi-session</li>
</ul>
<p>All <code>ascp</code> options are supported either through transfer
spec parameters (listed with <code>conf ascp spec</code>) and with the
possibility to provide <code>ascp</code> arguments directly when the
<code>direct</code> agent is used (<code>ascp_args</code> in
<code>transfer_info</code>).</p>
<h2 data-number="4.2" id="command-line-parsing-special-characters"><span class="header-section-number">4.2</span> Command line parsing, Special
Characters</h2>
<p><code>ascli</code> is typically executed in a shell, either
interactively or in a script. <code>ascli</code> receives its arguments
on the command line. The way arguments are parsed and provided to
<code>ascli</code> depend on the Operating System and shell.</p>
<h3 data-number="4.2.1" id="shell-parsing-for-unix-like-systems-linux-macos-aix"><span class="header-section-number">4.2.1</span> Shell parsing for Unix-like
systems: Linux, macOS, AIX</h3>
<p>Linux command line parsing is well-defined: It is fully documented in
the shell&#39;s documentation.</p>
<p>On Unix-like environments, this is typically a POSIX-like shell
(<code>bash</code>, <code>zsh</code>, <code>ksh</code>,
<code>sh</code>). A c-shell (<code>csh</code>, <code>tcsh</code>) or
other shell can also be used. In this environment the shell parses the
command line, possibly replacing variables, etc... See <a href="https://www.gnu.org/software/bash/manual/bash.html#Shell-Operation">bash
shell operation</a>. The shell builds the list of arguments and then
<code>fork</code>/<code>exec</code> Ruby with that list. Ruby receives a
list command line arguments from shell and gives it to
<code>ascli</code>. Special character handling (quotes, spaces, env
vars, ...) is handled by the shell for any command executed.</p>
<h3 data-number="4.2.2" id="shell-parsing-for-windows"><span class="header-section-number">4.2.2</span> Shell parsing for
Windows</h3>
<p>On Windows, command line parsing first depends on the shell used (see
next sections). MS Windows command line parsing is not like Unix-like
systems simply because Windows does not provide a list of arguments to
the executable (Ruby): it provides the whole command line as a single
string, but the shell may interpret some special characters.</p>
<p>So command line parsing is not handled by the shell
(<code>cmd.exe</code>), not handled by the operating system, but it is
handled by the executable (Ruby). Typically, Windows executables use the
<a href="https://learn.microsoft.com/en-us/cpp/cpp/main-function-command-line-args">Microsoft
library for this parsing</a>.</p>
<p>As far as <code>ascli</code> is concerned: the executable is Ruby. It
has its own parsing algorithm, close to a Linux shell parsing.</p>
<p>Thankfully, <code>ascli</code> provides a command to check the value
of an argument after parsing: <code>config echo</code>. One can also run
<code>ascli</code> with option <code>--log-level=debug</code> to display
the command line after parsing.</p>
<p>It is also possible to display arguments received by Ruby using this
command:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode bat"><code class="sourceCode dosbat"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>C:<span class="kw">&gt;</span> ruby <span class="at">-e</span> &#39;puts ARGV&#39; <span class="st">&quot;Hello World&quot;</span> 1 2</span></code></pre></div>
<pre class="text"><code>Hello World
1
2</code></pre>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Use <code>pp</code> instead of <code>puts</code> to display as Ruby
<code>Array</code>.</p></div>
</div>
<p>Once the shell has dealt with the command line &quot;special&quot; characters
for it, the shell calls Windows&#39; <code>CreateProcess</code> with just
the whole command line as a single string. (Unlike Unix-like systems
where the command line is split into arguments by the shell.)</p>
<p>It&#39;s up to the program to split arguments:</p>
<ul>
<li><a href="https://daviddeley.com/autohotkey/parameters/parameters.htm#RUBY">Windows:
How Command Line Parameters Are Parsed</a></li>
<li><a href="https://web.archive.org/web/20190316094059/http://www.windowsinspired.com/understanding-the-command-line-string-and-arguments-received-by-a-windows-program/">Understand
Quoting and Escaping of Windows Command Line Arguments</a></li>
</ul>
<p>is a Ruby program, so Ruby parses the command line (receibed with
<code>GetCommandLineW</code>) into arguments and provides them to the
Ruby code (<code>$0</code> and <code>ARGV</code>). Ruby vaguely follows
the Microsoft C/C++ parameter parsing rules. (See
<code>w32_cmdvector</code> in Ruby source <a href="https://github.com/ruby/ruby/blob/master/win32/win32.c#L1766"><code>win32.c</code></a>)
: <!--cspell:disable-line--></p>
<ul>
<li>Space characters: split arguments (space, tab, newline)</li>
<li>Backslash: <code>\</code> escape single special character</li>
<li>Globing characters: <code>*?[]{}</code> for file globing</li>
<li>Double quotes: <code>&quot;</code></li>
<li>Single quotes: <code>&#39;</code></li>
</ul>
<h3 data-number="4.2.3" id="shell-parsing-for-windows-cmdexe"><span class="header-section-number">4.2.3</span> Shell parsing for Windows:
<code>cmd.exe</code></h3>
<p>The following examples give the same result on Windows using
<code>cmd.exe</code>:</p>
<ul>
<li><p>Single quote protects the double quote</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>ascli config echo @json:&#39;{<span class="st">&quot;url&quot;</span>:<span class="st">&quot;https://...&quot;</span>}&#39;</span></code></pre></div></li>
<li><p>Triple double quotes are replaced with a single double quote</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>ascli config echo @json:{<span class="st">&quot;&quot;&quot;url&quot;&quot;&quot;</span>:<span class="st">&quot;&quot;&quot;https://...&quot;&quot;&quot;</span>}</span></code></pre></div></li>
<li><p>Double quote is escaped with backslash within double quotes</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>ascli config echo @json:<span class="st">&quot;{</span><span class="sc">\&quot;</span><span class="st">url</span><span class="sc">\&quot;</span><span class="st">:</span><span class="sc">\&quot;</span><span class="st">https://...</span><span class="sc">\&quot;</span><span class="st">}&quot;</span></span></code></pre></div></li>
</ul>
<p><code>cmd.exe</code> handles some special characters:
<code>^&quot;&lt;&gt;|%&amp;</code>. Basically it handles I/O redirection
(<code>&lt;&gt;|</code>), shell variables (<code>%</code>), multiple
commands (<code>&amp;</code>) and handles those special characters from
the command line. Eventually, all those special characters are removed
from the command line unless escaped with <code>^</code> or
<code>&quot;</code>. <code>&quot;</code> are kept and given to the program.</p>
<h3 data-number="4.2.4" id="shell-parsing-for-windows-powershell"><span class="header-section-number">4.2.4</span> Shell parsing for Windows:
Powershell</h3>
<p>For Powershell, it actually depends on the version of it (7.3+).</p>
<p>A difficulty is that Powershell parses the command line for its own
use and manages special characters, but then it passes the command line
to the program (Ruby) as a single string, possibly without the special
characters. Since we usually do not use powershell features, it is
advised to use the &quot;stop-parsing&quot; token <code>--%</code>.</p>
<p>Details can be found here:</p>
<ul>
<li><p><a href="https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_parsing#passing-arguments-that-contain-quote-characters">Passing
arguments with quotes</a></p></li>
<li><p><a href="https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_quoting_rules">quoting
rules</a></p></li>
</ul>
<p>The following examples give the same result on Windows using
Powershell:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PS</span> C<span class="op">:</span>\<span class="op">&gt;</span> <span class="fu">echo</span> <span class="va">$psversiontable</span><span class="op">.</span><span class="fu">psversion</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>Major  Minor  Build  Revision</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="op">-----</span>  <span class="op">-----</span>  <span class="op">-----</span>  <span class="op">--------</span></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>      <span class="dv">1</span>      <span class="dv">19041</span>  <span class="dv">4046</span></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a><span class="dt">PS</span> C<span class="op">:</span>\<span class="op">&gt;</span> ascli config <span class="fu">echo</span>  <span class="op">--%</span> @json<span class="op">:</span><span class="st">&#39;{&quot;k&quot;:&quot;v&quot;,&quot;x&quot;:&quot;y&quot;}&#39;</span></span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a><span class="fu">PS</span> C<span class="op">:</span>\<span class="op">&gt;</span> ascli config <span class="fu">echo</span> @json<span class="op">:</span><span class="st">&#39;{&quot;&quot;&quot;k&quot;&quot;&quot;:&quot;&quot;&quot;v&quot;&quot;&quot;,&quot;&quot;&quot;x&quot;&quot;&quot;:&quot;&quot;&quot;y&quot;&quot;&quot;}&#39;</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The special Powershell argument <code>--%</code> places Powershell in
&quot;stop-parsing&quot; mode.</p></div>
</div>
<h3 data-number="4.2.5" id="extended-values-json-ruby-"><span class="header-section-number">4.2.5</span> Extended Values (JSON, Ruby,
...)</h3>
<p>Some values provided to <code>ascli</code> (options, <strong>Command
Parameters</strong>) are expected to be <a href="#extended-value-syntax">Extended Values</a>, i.e. not a simple
<code>String</code>, but a composite structure (<code>Hash</code>,
<code>Array</code>). Typically, the <code>@json:</code> modifier is
used, it expects a <a href="https://www.json.org/">JSON</a> string. JSON
itself has some special syntax: for example <code>&quot;</code> is used to
enclose a <code>String</code>.</p>
<h3 data-number="4.2.6" id="testing-extended-values"><span class="header-section-number">4.2.6</span> Testing Extended Values</h3>
<p>In case of doubt of argument values after parsing, one can test using
command <code>config echo</code>. <code>config echo</code> takes exactly
<strong>one</strong> argument which can use the <a href="#extended-value-syntax">Extended Value</a> syntax. Unprocessed
command line arguments are shown in the error message.</p>
<p>Example: The shell parses three arguments (as <code>String</code>:
<code>1</code>, <code>2</code> and <code>3</code>), so the additional
two arguments are not processed by the <code>echo</code> command.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo 1 2 3</span></code></pre></div>
<div class="sourceCode" id="cb106"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;1&quot;</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="wa">ERROR:</span> <span class="wa">Argument:</span> unprocessed <span class="wa">values:</span> <span class="kw">[</span><span class="st">&quot;2&quot;</span>, <span class="st">&quot;3&quot;</span><span class="kw">]</span></span></code></pre></div>
<p><code>config echo</code> displays the value of the
<strong>first</strong> argument using Ruby syntax: it surrounds a string
with <code>&quot;</code> and add <code>\</code> before special
characters.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>It gets its value after shell command line parsing and
<code>ascli</code> extended value parsing.</p></div>
</div>
<p>In the following examples (using a POSIX shell, such as
<code>bash</code>), several equivalent commands are provided. For all
example, most special character handling is not specific to
<code>ascli</code>: It depends on the underlying syntax: shell, JSON,
etc... Depending on the case, a different <code>format</code> option is
used to display the actual value.</p>
<p>For example, in the simple string <code>Hello World</code>, the space
character is special for the shell, so it must be escaped so that a
single value is represented.</p>
<p>Double quotes are processed by the shell to create a single string
argument. For <strong>POSIX shells</strong>, single quotes can also be
used in this case, or protect the special character <code> </code>
(space) with a backslash. <!-- markdownlint-disable-line --></p>
<div class="sourceCode" id="cb107"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo <span class="st">&quot;Hello World&quot;</span> <span class="at">--format</span><span class="op">=</span>text</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo <span class="st">&#39;Hello World&#39;</span> <span class="at">--format</span><span class="op">=</span>text</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo Hello<span class="dt">\ </span>World <span class="at">--format</span><span class="op">=</span>text</span></code></pre></div>
<pre class="text"><code>Hello World</code></pre>
<h3 data-number="4.2.7" id="using-a-shell-variable-parsed-by-shell-in-an-extended-value"><span class="header-section-number">4.2.7</span> Using a shell variable,
parsed by shell, in an extended value</h3>
<p>To be evaluated by shell, the shell variable must not be in single
quotes. Even if the variable contains spaces it results only in one
argument for <code>ascli</code> because word parsing is made before
variable expansion by shell.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>We use a simple shell variable in this example. Note that it does not
need to be exported as an environment variable.</p></div>
</div>
<div class="sourceCode" id="cb109"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="va">MYVAR</span><span class="op">=</span><span class="st">&quot;Hello World&quot;</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @json:<span class="st">&#39;{&quot;title&quot;:&quot;&#39;</span><span class="va">$MYVAR</span><span class="st">&#39;&quot;}&#39;</span> <span class="at">--format</span><span class="op">=</span>json</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @json:{<span class="dt">\&quot;</span>title<span class="dt">\&quot;</span>:<span class="dt">\&quot;</span><span class="va">$MYVAR</span><span class="dt">\&quot;</span>} <span class="at">--format</span><span class="op">=</span>json</span></code></pre></div>
<div class="sourceCode" id="cb110"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;title&quot;</span><span class="fu">:</span><span class="st">&quot;Hello World&quot;</span><span class="fu">}</span></span></code></pre></div>
<h3 data-number="4.2.8" id="double-quote-in-strings-in-command-line"><span class="header-section-number">4.2.8</span> Double quote in strings in
command line</h3>
<p>Double quote is a shell special character. Like any shell special
character, it can be protected either by preceding with a backslash or
by enclosing in a single quote.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo <span class="dt">\&quot;</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo <span class="st">&#39;&quot;&#39;</span></span></code></pre></div>
<pre class="text"><code>&quot;</code></pre>
<p>Double quote in JSON is a little tricky because <code>&quot;</code> is
special both for the shell and JSON. Both shell and JSON syntax allow
protecting <code>&quot;</code>, but only the shell allows protection using
single quote.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @json:<span class="st">&#39;&quot;\&quot;&quot;&#39;</span> <span class="at">--format</span><span class="op">=</span>text</span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @json:<span class="dt">\&quot;\\\&quot;\&quot;</span> <span class="at">--format</span><span class="op">=</span>text</span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @ruby:<span class="dt">\&#39;\&quot;\&#39;</span> <span class="at">--format</span><span class="op">=</span>text</span></code></pre></div>
<pre class="text"><code>&quot;</code></pre>
<p>Here a single quote or a backslash protects the double quote to avoid
shell processing, and then an additional <code>\</code> is added to
protect the <code>&quot;</code> for JSON. But as <code>\</code> is also shell
special, then it is protected by another <code>\</code>.</p>
<h3 data-number="4.2.9" id="shell-and-json-or-ruby-special-characters-in-extended-value"><span class="header-section-number">4.2.9</span> Shell and JSON or Ruby
special characters in extended value</h3>
<p>Construction of values with special characters is done like this:</p>
<ul>
<li><p>First select a syntax to represent the extended value, e.g. JSON
or Ruby</p></li>
<li><p>Write the expression using this syntax, for example, using
JSON:</p></li>
</ul>
<div class="sourceCode" id="cb115"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;title&quot;</span><span class="fu">:</span><span class="st">&quot;Test </span><span class="ch">\&quot;</span><span class="st"> &#39; &amp; </span><span class="ch">\\</span><span class="st">&quot;</span><span class="fu">}</span></span></code></pre></div>
<p>or using Ruby:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="st">&quot;title&quot;</span><span class="op">=&gt;</span><span class="st">&quot;Test </span><span class="sc">\&quot;</span><span class="st"> &#39; &amp; </span><span class="sc">\\</span><span class="st">&quot;</span><span class="op">}</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span><span class="vs">&#39;title&#39;</span><span class="op">=&gt;</span><span class="ot">%q{</span><span class="vs">Test &quot; &#39; &amp; </span><span class="sc">\\</span><span class="ot">}</span><span class="op">}</span></span></code></pre></div>
<p>Both <code>&quot;</code> and <code>\</code> are special characters for
JSON and Ruby and can be protected with <code>\</code> (unless Ruby&#39;s
extended single quote notation <code>%q</code> is used).</p>
<ul>
<li>Then, since the value will be evaluated by shell, any shell special
characters must be protected, either using preceding <code>\</code> for
each character to protect, or by enclosing in single quote:</li>
</ul>
<div class="sourceCode" id="cb117"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @json:{<span class="dt">\&quot;</span>title<span class="dt">\&quot;</span>:<span class="dt">\&quot;</span>Test<span class="dt">\ \\\&quot;\ \&#39;\ \&amp;\ \\\\\&quot;</span>} <span class="at">--format</span><span class="op">=</span>json</span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @json:<span class="st">&#39;{&quot;title&quot;:&quot;Test \&quot; &#39;</span><span class="dt">\&#39;</span><span class="st">&#39; &amp; \\&quot;}&#39;</span> <span class="at">--format</span><span class="op">=</span>json</span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @ruby:<span class="st">&quot;{&#39;title&#39;=&gt;%q{Test </span><span class="dt">\&quot;</span><span class="st"> &#39; &amp; </span><span class="dt">\\\\</span><span class="st">}}&quot;</span> <span class="at">--format</span><span class="op">=</span>json</span></code></pre></div>
<div class="sourceCode" id="cb118"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;title&quot;</span><span class="fu">:</span><span class="st">&quot;Test </span><span class="ch">\&quot;</span><span class="st"> &#39; &amp; </span><span class="ch">\\</span><span class="st">&quot;</span><span class="fu">}</span></span></code></pre></div>
<h3 data-number="4.2.10" id="reading-special-characters-interactively"><span class="header-section-number">4.2.10</span> Reading special characters
interactively</h3>
<p>If <code>ascli</code> is used interactively (a user typing on
terminal), it is easy to require the user to type values:</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @ruby:<span class="st">&quot;{&#39;title&#39;=&gt;gets.chomp}&quot;</span> <span class="at">--format</span><span class="op">=</span>json</span></code></pre></div>
<p><code>gets</code> is Ruby&#39;s method of terminal input (terminated by
<code>\n</code>), and <code>chomp</code> removes the trailing
<code>\n</code>.</p>
<h3 data-number="4.2.11" id="command-line-arguments-from-a-file"><span class="header-section-number">4.2.11</span> Command line arguments from
a file</h3>
<p>If you need to provide a list of command line argument from lines
that are in a file, on Linux you can use the <code>xargs</code>
command:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xargs</span> <span class="at">-a</span> lines.txt <span class="at">-d</span> <span class="dt">\\</span>n ascli config echo</span></code></pre></div>
<p>This is equivalent to execution of:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo <span class="pp">[</span><span class="ss">line1</span><span class="pp">]</span> <span class="pp">[</span><span class="ss">line2</span><span class="pp">]</span> <span class="pp">[</span><span class="ss">line3</span><span class="pp">]</span> ...</span></code></pre></div>
<p>If there are spaces in the lines, those are not taken as separator,
as we provide option <code>-d \\n</code> to <code>xargs</code>.</p>
<h3 data-number="4.2.12" id="extended-value-using-special-characters-read-from-environmental-variables-or-files"><span class="header-section-number">4.2.12</span> Extended value using special
characters read from environmental variables or files</h3>
<p>Using a text editor or shell: create a file <code>title.txt</code>
(and env var) that contains exactly the text required:
<code>Test &quot; &#39; &amp; \</code> :</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">MYTITLE</span><span class="op">=</span><span class="st">&#39;Test &quot; &#39;</span><span class="dt">\&#39;</span><span class="st">&#39; &amp; \&#39;</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="at">-n</span> <span class="va">$MYTITLE</span> <span class="op">&gt;</span> title.txt</span></code></pre></div>
<p>Using those values will not require any escaping of characters since
values do not go through shell or JSON parsing.</p>
<p>If the value is to be assigned directly to an option of ascli, then
you can directly use the content of the file or env var using the
<code>@file:</code> or <code>@env:</code> readers:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @file:title.txt <span class="at">--format</span><span class="op">=</span>text</span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @env:MYTITLE <span class="at">--format</span><span class="op">=</span>text</span></code></pre></div>
<pre class="text"><code>Test &quot; &#39; &amp; \</code></pre>
<p>If the value to be used is in a more complex structure, then the
<code>@ruby:</code> modifier can be used: it allows any Ruby code in
expression, including reading from file or env var. In those cases,
there is no character to protect because values are not parsed by the
shell, or JSON or even Ruby.</p>
<div class="sourceCode" id="cb125"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @ruby:<span class="st">&quot;{&#39;title&#39;=&gt;File.read(&#39;title.txt&#39;)}&quot;</span> <span class="at">--format</span><span class="op">=</span>json</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @ruby:<span class="st">&quot;{&#39;title&#39;=&gt;ENV[&#39;MYTITLE&#39;]}&quot;</span> <span class="at">--format</span><span class="op">=</span>json</span></code></pre></div>
<div class="sourceCode" id="cb126"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;title&quot;</span><span class="fu">:</span><span class="st">&quot;Test </span><span class="ch">\&quot;</span><span class="st"> &#39; &amp; </span><span class="ch">\\</span><span class="st">&quot;</span><span class="fu">}</span></span></code></pre></div>
<h2 data-number="4.3" id="positional-arguments-and-options"><span class="header-section-number">4.3</span> Positional Arguments and
Options</h2>
<p>Command line arguments are the units of command line typically
separated by spaces (the <code>argv</code> of C). The tokenization of
the command line is typically done by the shell, refer to the previous
section <a href="#command-line-parsing-special-characters">Command Line
Parsing</a>.</p>
<p><code>ascli</code> handles two types of command line arguments:</p>
<ul>
<li><strong>Positional Arguments</strong> : position is significant</li>
<li><strong>Options</strong> : only order is significant, but not
absolute position</li>
</ul>
<p>For example:</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> command subcommand <span class="at">--option-name</span><span class="op">=</span>VAL1 VAL2</span></code></pre></div>
<ul>
<li>Executes <strong>Command</strong> and its <strong>Command
Parameters</strong> (<strong>Positional Arguments</strong>):
<code>command subcommand VAL2</code></li>
<li>With one <strong>Option</strong>: <code>option_name</code> and its
<strong>value</strong>: <code>VAL1</code></li>
</ul>
<p>If the value of a command, option or argument is constrained by a
fixed list of values, then it is possible to use a few of the first
letters of the value, provided that it uniquely identifies the value.
For example <code>ascli config pre ov</code> is the same as
<code>ascli config preset overview</code>.</p>
<p>The value of <strong>Options</strong> and <strong>Positional
Arguments</strong> is evaluated with the <a href="#extended-value-syntax">Extended Value Syntax</a>.</p>
<h3 data-number="4.3.1" id="positional-arguments"><span class="header-section-number">4.3.1</span> Positional Arguments</h3>
<p><strong>Positional Arguments</strong> are either:</p>
<ul>
<li><strong>Commands</strong>, typically at the beginning</li>
<li><strong>Command Parameters</strong>, mandatory arguments, e.g.
creation data or entity identifier</li>
</ul>
<p>When options are removed from the command line, the remaining
arguments are typically <strong>Positional Arguments</strong> with a
pre-defined order.</p>
<p><strong>Commands</strong> are typically entity types (e.g.
<code>users</code>) or verbs (e.g. <code>create</code>) to act on those
entities. Its value is a <code>String</code> that must belong to a fixed
list of values in a given context.</p>
<p>Example:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp info</span></code></pre></div>
<ul>
<li><code>ascli</code> is the executable executed by the shell</li>
<li><code>conf</code> is the first level command: name of the plugin to
be used</li>
<li><code>ascp</code> is the second level command: name of the component
(singleton)</li>
<li><code>info</code> is the third level command: action to be
performed</li>
</ul>
<p>Typically, <strong>Commands</strong> are located at the
<strong>beginning</strong> of the command line. Order is significant.
The provided command must match one of the supported commands in the
given context. If wrong, or no command is provided when expected, an
error message is displayed and the list of supported commands is
displayed.</p>
<p>Standard <strong>Commands</strong> are: <code>create</code>,
<code>show</code>, <code>list</code>, <code>modify</code>,
<code>delete</code>. Some entities also support additional commands.
When those additional commands are related to an entity also reachable
in another context, then those commands are located below command
<code>do</code>. For example sub-commands appear after entity selection
(identifier), e.g. <code>ascli aoc admin node do 1234 browse /</code>:
<code>browse</code> is a sub-command of <code>node</code>.</p>
<p><strong>Command Parameters</strong> are typically mandatory values
for a command, such as entity creation data or entity identifier.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>It could also have been designed as an option. But since it is
mandatory and typically these data do not need to be set in a
configuration file, it is better designed as a Command Parameter, rather
than as an additional specific option. The advantages of using a
<strong>Command Parameter</strong> instead of an option for the same are
that the command line is shorter (no option name, just the position),
the value is clearly mandatory and position clearly indicates its role.
The disadvantage is that it is not possible to define a default value in
a configuration file or environment variable using an option value.
Nevertheless, <a href="#extended-value-syntax">Extended Values</a>
syntax is supported, so it is possible to retrieve a value from the
configuration file (using <code>@preset:</code>) or environment variable
(using <code>@env:</code>).</p></div>
</div>
<p>If a <strong>Command Parameter</strong> begins with <code>-</code>,
then either use the <code>@val:</code> syntax (see <a href="#extended-value-syntax">Extended Values</a>), or use the
<code>--</code> separator (see below).</p>
<p>A few <strong>Command Parameters</strong> are optional, they are
always located at the end of the command line.</p>
<h3 data-number="4.3.2" id="options"><span class="header-section-number">4.3.2</span> Options</h3>
<p>Command-line options, such as <code>--log-level=debug</code>, follow
these conventions:</p>
<ul>
<li><strong>Prefix</strong>: All options begin with
<code>--</code>.</li>
<li><strong>Naming</strong>: Option names use lowercase letters and
hyphens (<code>-</code>) as word separators. Example:
<code>--log-level=debug</code>.</li>
<li><strong>Values</strong>: An option’s value is assigned using
<code>=</code> (e.g., <code>--log-level=debug</code>).</li>
<li><strong>Prefix Usage</strong>: Options can be abbreviated by a
unique prefix, though this is not recommended. Example:
<code>--log-l=debug</code> is equivalent to
<code>--log-level=debug</code>.</li>
<li><strong>Optionality</strong>: Most options are optional; they either
have a default value or do not require one.</li>
<li><strong>Order</strong>: Options can appear in any position on the
command line, but their order may affect processing.</li>
</ul>
<p>Exceptions and Special Cases:</p>
<ul>
<li><strong>Short Forms</strong>: Some options have short forms. For
example, <code>-Ptoto</code> is equivalent to
<code>--preset=toto</code>. Refer to the manual or <code>-h</code> for
details.</li>
<li><strong>Flags</strong>: Certain options are flags and do not require
a value (e.g., <code>-N</code>).</li>
<li><strong>Option Terminator</strong>: The special option
<code>--</code> ends option parsing. All subsequent arguments, including
those starting with <code>-</code>, are treated as positional
arguments.</li>
<li><strong>Dot Notation for Hashes</strong>: If an option name contains
a dot (<code>.</code>), it is interpreted as a <code>Hash</code>. Each
segment separated by a dot represents a key in a nested structure. For
example, <code>--a.b.c=d</code> is equivalent to
<code>--a=@json&#39;{&quot;b&quot;:{&quot;c&quot;:extended_value(d)}}&#39;</code>. This allows
specifying nested keys directly on the command line using a concise
dot-separated syntax.</li>
</ul>
<p>Example:</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo <span class="at">--</span> <span class="at">--sample</span></span></code></pre></div>
<div class="sourceCode" id="cb130"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;--sample&quot;</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Here, <code>--sample</code> is taken as an argument, and not as an
option, due to <code>--</code>.</p></div>
</div>
<p>Options may have a (hard coded) default value.</p>
<p>Options can be placed anywhere on command line and are evaluated in
order. Usually the last value evaluated overrides previous values, but
some options are cumulative, e.g. <code>ts</code>.</p>
<p>Options are typically optional: to change the default behavior. But
some are mandatory, so they can be placed in a configuration file, for
example: connection information.</p>
<p>The value for <strong>any</strong> options can come from the
following locations (in this order, last value evaluated overrides
previous value):</p>
<ul>
<li><a href="#configuration-file">Configuration file</a></li>
<li>Environment variable</li>
<li>Command line</li>
</ul>
<p>Environment variable starting with prefix: ASCLI_ are taken as option
values, e.g. <code>ASCLI_OPTION_NAME</code> is for
<code>--option-name</code>.</p>
<p>Option <code>show_config</code> dry runs the configuration, and then
returns currently set values for options.
<code>ascli --show-config</code> outputs global options only, and
<code>ascli [plugin] --show-config</code> outputs global and plugin
default options. In addition, option <code>--show-config</code> can be
added at the end of any full command line, this displays the options
that would be used for the command.</p>
<p>A command line argument is typically designed as option if:</p>
<ul>
<li>It is optional, or</li>
<li>It is a mandatory parameter with a default value that would benefit
from being set persistently (i.e. in a configuration file or environment
variable, e.g. URL and credentials).</li>
</ul>
<h2 data-number="4.4" id="interactive-input"><span class="header-section-number">4.4</span> Interactive Input</h2>
<p>Some options and <strong>Command Parameters</strong> are mandatory
and other optional. By default, <code>ascli</code> will ask for missing
mandatory options or <strong>Command Parameters</strong> for interactive
execution.</p>
<p>The behavior can be controlled with:</p>
<ul>
<li><code>--interactive=&lt;yes|no&gt;</code> (default=yes if STDIN is a
terminal, else no)
<ul>
<li>yes : missing mandatory parameters/arguments are asked to the
user</li>
<li>no : missing mandatory parameters/arguments raise an error
message</li>
</ul></li>
<li><code>--ask-options=&lt;yes|no&gt;</code> (default=no)
<ul>
<li>optional parameters/arguments are asked to user</li>
</ul></li>
</ul>
<h2 data-number="4.5" id="output"><span class="header-section-number">4.5</span> Output</h2>
<p>Command execution will result in output (terminal, stdout/stderr).
The information displayed depends on the action.</p>
<p>To redirect results to a file, use option <code>output</code>.</p>
<h3 data-number="4.5.1" id="types-of-output-data"><span class="header-section-number">4.5.1</span> Types of output data</h3>
<p>Depending on action, the output will contain:</p>
<table>
<thead>
<tr>
<th>Result Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>single_object</code></td>
<td>displayed as a 2 dimensional table: one line per field, first column
is field name, and second is field value. Nested hashes are
collapsed.</td>
</tr>
<tr>
<td><code>object_list</code></td>
<td>displayed as a 2 dimensional table: one line per item, one column
per field.</td>
</tr>
<tr>
<td><code>value_list</code></td>
<td>a table with one column.</td>
</tr>
<tr>
<td><code>empty</code></td>
<td>nothing</td>
</tr>
<tr>
<td><code>status</code></td>
<td>a message</td>
</tr>
<tr>
<td><code>other_struct</code></td>
<td>a complex structure that cannot be displayed as an array</td>
</tr>
</tbody>
</table>
<h3 data-number="4.5.2" id="option-format"><span class="header-section-number">4.5.2</span> Option:
<code>format</code></h3>
<p>The style of output can be set using the <code>format</code>
option:</p>
<table>
<thead>
<tr>
<th><code>format</code></th>
<th>Output formatting</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>table</code></td>
<td>Text table (default)</td>
</tr>
<tr>
<td><code>text</code></td>
<td>Value as <code>String</code></td>
</tr>
<tr>
<td><code>ruby</code></td>
<td>Ruby code</td>
</tr>
<tr>
<td><code>json</code></td>
<td>JSON code</td>
</tr>
<tr>
<td><code>jsonpp</code></td>
<td>JSON pretty printed</td>
</tr>
<tr>
<td><code>yaml</code></td>
<td>YAML</td>
</tr>
<tr>
<td><code>csv</code></td>
<td>Comma Separated Values</td>
</tr>
<tr>
<td><code>image</code></td>
<td>Image URL or data</td>
</tr>
<tr>
<td><code>nagios</code></td>
<td>Suitable for Nagios</td>
</tr>
</tbody>
</table>
<p>By default, result of type <code>single_object</code> and
<code>object_list</code> are displayed using format
<code>table</code>.</p>
<h3 data-number="4.5.3" id="option-table_style"><span class="header-section-number">4.5.3</span> Option:
<code>table_style</code></h3>
<p>The table style can be customized with option:
<code>table_style</code> which expects a <code>Hash</code>.</p>
<p>For <code>format=table</code>, options are the ones described in gem
<a href="https://github.com/tj/terminal-table"><code>terminal-table</code></a>.</p>
<p>For <code>format=csv</code>, options are described in gem <a href="https://ruby.github.io/csv/CSV.html#class-CSV-label-Options+for+Generating"><code>csv</code></a>.</p>
<p>For example, to display a table with thick Unicode borders:</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset over <span class="at">--table-style</span><span class="op">=</span>@ruby:<span class="st">&#39;{border: :unicode_thick_edge}&#39;</span></span></code></pre></div>
<p>For example, to display a CSV with headers and quotes:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @json:<span class="st">&#39;[{&quot;name&quot;:&quot;foo&quot;,&quot;id&quot;:1},{&quot;name&quot;:&quot;bar&quot;,&quot;id&quot;:8}]&#39;</span> <span class="at">--format</span><span class="op">=</span>csv <span class="at">--table</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;headers&quot;:true,&quot;force_quotes&quot;:true}&#39;</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Other border styles exist, not limited to: <code>:unicode</code>,
<code>:unicode_round</code>.</p></div>
</div>
<h3 data-number="4.5.4" id="option-flat_hash-single-level-hash"><span class="header-section-number">4.5.4</span> Option:
<code>flat_hash</code>: Single level <code>Hash</code></h3>
<p>This option controls how object fields are displayed for complex
objects.</p>
<p>Effective only when <code>format</code> is <code>table</code> to
display <code>single_object</code> or <code>object_list</code>.</p>
<p>If value is <code>no</code>, then object&#39;s <code>field</code> names
are only the first level keys of the <code>Hash</code> result and values
that are <code>Hash</code> are displayed as such in Ruby syntax.</p>
<p>If value is <code>yes</code> (default), then object are flattened,
i.e. deep <code>Hash</code> are transformed into 1-level
<code>Hash</code>, where keys are <code>.</code>-junction of deep keys.
In this case, it is possible to filter fields using the option
<code>fields</code> using the compound field name using <code>.</code>
(dot) as separator.</p>
<p>Example: Result of command is a list of objects with a single
object:</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @json:<span class="st">&#39;{&quot;A&quot;:&quot;a&quot;,&quot;B&quot;:[{&quot;name&quot;:&quot;B1&quot;,&quot;value&quot;:&quot;b1&quot;},{&quot;name&quot;:&quot;B2&quot;,&quot;value&quot;:&quot;b2&quot;}],&quot;C&quot;:[{&quot;C1&quot;:&quot;c1&quot;},{&quot;C2&quot;:&quot;c2&quot;}],&quot;D&quot;:{&quot;D1&quot;:&quot;d1&quot;,&quot;D2&quot;:&quot;d2&quot;}}&#39;</span></span></code></pre></div>
<pre class="text"><code>╭────────┬───────╮
│ field  │ value │
╞════════╪═══════╡
│ A      │ a     │
│ B.B1   │ b1    │
│ B.B2   │ b2    │
│ C.0.C1 │ c1    │
│ C.1.C2 │ c2    │
│ D.D1   │ d1    │
│ D.D2   │ d2    │
╰────────┴───────╯</code></pre>
<div class="sourceCode" id="cb135"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @json:<span class="st">&#39;{&quot;A&quot;:&quot;a&quot;,&quot;B&quot;:[{&quot;name&quot;:&quot;B1&quot;,&quot;value&quot;:&quot;b1&quot;},{&quot;name&quot;:&quot;B2&quot;,&quot;value&quot;:&quot;b2&quot;}],&quot;C&quot;:[{&quot;C1&quot;:&quot;c1&quot;},{&quot;C2&quot;:&quot;c2&quot;}],&quot;D&quot;:{&quot;D1&quot;:&quot;d1&quot;,&quot;D2&quot;:&quot;d2&quot;}}&#39;</span> <span class="at">-</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="ex">-flat=no</span></span></code></pre></div>
<pre class="text"><code>╭───────┬────────────────────────────────────────────────────────────────────────╮
│ field │ value                                                                  │
╞═══════╪════════════════════════════════════════════════════════════════════════╡
│ A     │ a                                                                      │
│ B     │ [{&quot;name&quot; =&gt; &quot;B1&quot;, &quot;value&quot; =&gt; &quot;b1&quot;}, {&quot;name&quot; =&gt; &quot;B2&quot;, &quot;value&quot; =&gt; &quot;b2&quot;}] │
│ C     │ [{&quot;C1&quot; =&gt; &quot;c1&quot;}, {&quot;C2&quot; =&gt; &quot;c2&quot;}]                                       │
│ D     │ {&quot;D1&quot; =&gt; &quot;d1&quot;, &quot;D2&quot; =&gt; &quot;d2&quot;}                                           │
╰───────┴────────────────────────────────────────────────────────────────────────╯</code></pre>
<h3 data-number="4.5.5" id="enhanced-display-of-special-values"><span class="header-section-number">4.5.5</span> Enhanced display of special
values</h3>
<p>Special values are highlighted as follows::</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Display</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>nil</code></td>
<td><code>&lt;null&gt;</code></td>
</tr>
<tr>
<td>empty <code>String</code></td>
<td><code>&lt;empty string&gt;</code></td>
</tr>
<tr>
<td>empty <code>Array</code></td>
<td><code>&lt;empty list&gt;</code></td>
</tr>
<tr>
<td>empty <code>Hash</code></td>
<td><code>&lt;empty dict&gt;</code></td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @json:<span class="st">&#39;{&quot;ni&quot;:null,&quot;es&quot;:&quot;&quot;,&quot;ea&quot;:[],&quot;eh&quot;:{}}&#39;</span></span></code></pre></div>
<pre class="text"><code>╭───────┬────────────────╮
│ field │ value          │
╞═══════╪════════════════╡
│ ni    │ &lt;null&gt;         │
│ es    │ &lt;empty string&gt; │
│ ea    │ &lt;empty list&gt;   │
│ eh    │ &lt;empty dict&gt;   │
╰───────┴────────────────╯</code></pre>
<h3 data-number="4.5.6" id="option-multi_single"><span class="header-section-number">4.5.6</span> Option:
<code>multi_single</code></h3>
<p>This option controls how result fields are displayed as columns or
lines, when option <code>format</code> is set to <code>table</code>.
Default is <code>no</code>. There are two types of results that are
affected by this option:</p>
<table>
<thead>
<tr>
<th>Result</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>single_object</code></td>
<td>A single item with multiple fields.</td>
</tr>
<tr>
<td><code>object_list</code></td>
<td>A list of items, each with multiple fields.</td>
</tr>
</tbody>
</table>
<p>An item (object) is displayed in one of those 2 ways:</p>
<table>
<thead>
<tr>
<th>Display</th>
<th>rows</th>
<th>columns</th>
</tr>
</thead>
<tbody>
<tr>
<td>Simple</td>
<td>Fields</td>
<td><code>field</code> and <code>value</code></td>
</tr>
<tr>
<td>Transposed</td>
<td>Items</td>
<td>Fields</td>
</tr>
</tbody>
</table>
<p>The display of result is as follows:</p>
<table>
<thead>
<tr>
<th>Result</th>
<th><code>no</code></th>
<th><code>yes</code></th>
<th><code>single</code></th>
</tr>
</thead>
<tbody>
<tr>
<td><code>single_object</code></td>
<td>Simple</td>
<td>Simple</td>
<td>Simple</td>
</tr>
<tr>
<td><code>object_list</code></td>
<td>Transposed</td>
<td>Simple<br />(Multiple objects)</td>
<td>Simple if 1 object,<br />transposed if 2+ objects</td>
</tr>
</tbody>
</table>
<p>This parameter can be set as a global default with:</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set GLOBAL multi_single single</span></code></pre></div>
<p>Examples:</p>
<p>Simulate a result by executing this command:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @json:<span class="st">&#39;&lt;json value here&gt;&#39;</span> <span class="at">--multi-single</span><span class="op">=&lt;</span>no<span class="kw">|</span><span class="fu">yes</span><span class="kw">|</span><span class="ex">single</span><span class="op">&gt;</span></span></code></pre></div>
<p>Example 1: A list of one object</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="ot">[</span><span class="fu">{</span><span class="dt">&quot;user&quot;</span><span class="fu">:{</span><span class="dt">&quot;id&quot;</span><span class="fu">:</span><span class="dv">1</span><span class="fu">,</span><span class="dt">&quot;name&quot;</span><span class="fu">:</span><span class="st">&quot;toto&quot;</span><span class="fu">},</span><span class="dt">&quot;project&quot;</span><span class="fu">:</span><span class="st">&quot;blash&quot;</span><span class="fu">}</span><span class="ot">]</span></span></code></pre></div>
<p>Display with <code>no</code> (Transposed):</p>
<pre class="text"><code>╭─────────┬───────────┬─────────╮
│ user.id │ user.name │ project │
╞═════════╪═══════════╪═════════╡
│ 1       │ toto      │ blash   │
╰─────────┴───────────┴─────────╯</code></pre>
<p>Display with <code>yes</code> and <code>single</code> (Simple):</p>
<pre class="text"><code>╭───────────┬───────╮
│ field     │ value │
╞═══════════╪═══════╡
│ user.id   │ 1     │
│ user.name │ toto  │
│ project   │ blash │
╰───────────┴───────╯</code></pre>
<p>Example 2: A list of two objects:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="ot">[</span><span class="fu">{</span><span class="dt">&quot;id&quot;</span><span class="fu">:</span><span class="dv">1</span><span class="fu">,</span><span class="dt">&quot;speed&quot;</span><span class="fu">:</span><span class="dv">111</span><span class="fu">}</span><span class="ot">,</span><span class="fu">{</span><span class="dt">&quot;id&quot;</span><span class="fu">:</span><span class="st">&quot;2&quot;</span><span class="fu">,</span><span class="dt">&quot;speed&quot;</span><span class="fu">:</span><span class="dv">222</span><span class="fu">}</span><span class="ot">]</span></span></code></pre></div>
<p>Display with <code>no</code> and <code>single</code>
(Transposed):</p>
<pre class="text"><code>╭────┬───────╮
│ id │ speed │
╞════╪═══════╡
│ 1  │ 111   │
│ 2  │ 222   │
╰────┴───────╯</code></pre>
<p>Display with <code>yes</code> (multiple Simple):</p>
<pre class="text"><code>╭───────┬───────╮
│ field │ value │
╞═══════╪═══════╡
│ id    │ 1     │
│ speed │ 111   │
╰───────┴───────╯
╭───────┬───────╮
│ field │ value │
╞═══════╪═══════╡
│ id    │ 2     │
│ speed │ 222   │
╰───────┴───────╯</code></pre>
<h3 data-number="4.5.7" id="option-display-verbosity-of-output"><span class="header-section-number">4.5.7</span> Option: <code>display</code>:
Verbosity of output</h3>
<p>Output messages are categorized in 3 types:</p>
<ul>
<li><code>info</code> output contain additional information, such as
number of elements in a table</li>
<li><code>data</code> output contain the actual output of the command
(object, or list of objects)</li>
<li><code>error</code>output contain error messages</li>
</ul>
<p>The option <code>display</code> controls the level of output:</p>
<ul>
<li><code>info</code> displays all messages: <code>info</code>,
<code>data</code>, and <code>error</code></li>
<li><code>data</code> display <code>data</code> and <code>error</code>
messages</li>
<li><code>error</code> display only error messages.</li>
</ul>
<h3 data-number="4.5.8" id="option-show_secrets-hide-or-show-secrets-in-results"><span class="header-section-number">4.5.8</span> Option:
<code>show_secrets</code>: Hide or show secrets in results</h3>
<ul>
<li>If value is <code>no</code> (default), then secrets are redacted
from command results.</li>
<li>If value is <code>yes</code>, then secrets shown in clear in
results.</li>
<li>If <code>display</code> is <code>data</code>, secrets are included
to allow piping results.</li>
</ul>
<h3 data-number="4.5.9" id="option-fields-selection-of-output-object-fields"><span class="header-section-number">4.5.9</span> Option: <code>fields</code>:
Selection of output object fields</h3>
<p>Depending on the command, results may include by default all fields,
or only some selected fields. It is possible to define specific columns
to be displayed, by setting the <code>fields</code> option.</p>
<p>The <code>fields</code> option is a list that can be either a comma
separated list or an extended value <code>Array</code>.</p>
<p>Individual elements of the list can be:</p>
<ul>
<li><strong>property</strong> : add property to the current list</li>
<li><code>-</code><strong>property</strong> : remove property from the
current list</li>
<li><code>DEF</code> : default list of fields (that&#39;s the default, when
not set)</li>
<li><code>ALL</code> : all fields</li>
<li>A Ruby <code>RegEx</code> : using <code>@ruby:&#39;/.../&#39;</code>, or
<code>@re:...</code> add those matching to the list</li>
</ul>
<p>Examples:</p>
<ul>
<li><code>a,b,c</code> : the list of attributes specified as a comma
separated list (overrides the all default)</li>
<li><code>@json:&#39;[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]&#39;</code> : <code>Array</code> extended
value: same as above</li>
<li><code>b,DEF,-a</code> : default property list, remove <code>a</code>
and add <code>b</code> in first position</li>
<li><code>@ruby:&#39;/^server/&#39;</code> : Display all fields whose name begin
with <code>server</code></li>
</ul>
<h3 data-number="4.5.10" id="option-select"><span class="header-section-number">4.5.10</span> Option:
<code>select</code></h3>
<p>Table output (<code>object_list</code>) can be filtered using option
<code>select</code>. This option is either a <code>Hash</code> or
<code>Proc</code>. The <code>Proc</code> takes as argument a line
(<code>Hash</code>) in the table and is a Ruby lambda expression that
shall return <code>true</code> to select or <code>false</code> to remove
an entry.</p>
<p>Example:</p>
<div class="sourceCode" id="cb147"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin user list <span class="at">--fields</span><span class="op">=</span>name,email,ats_admin <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;sort&quot;:&quot;name&quot;}&#39;</span> <span class="at">--select</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;ats_admin&quot;:true}&#39;</span></span></code></pre></div>
<pre class="text"><code>╭────────────────┬─────────────────────┬───────────╮
│ name           │ email               │ ats_admin │
╞════════════════╪═════════════════════╪═══════════╡
│ John Curtis    │ john@example.com    │ true      │
│ Laurent Martin │ laurent@example.com │ true      │
╰────────────────┴─────────────────────┴───────────╯</code></pre>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Option <code>select</code> filters elements from the result of
command, while the <code>query</code> option gives filtering parameters
to the API when listing elements.</p></div>
</div>
<p>In above example, the same result is obtained with option:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--select=@ruby:</span><span class="st">&#39;-&gt;(i){i[&quot;ats_admin&quot;]}&#39;</span></span></code></pre></div>
<p>Option <code>select</code> applies the filter after a possible
&quot;flattening&quot; with option: <code>flat_hash</code>.</p>
<h3 data-number="4.5.11" id="percent-selector"><span class="header-section-number">4.5.11</span> Percent selector</h3>
<p>The percent selector allows identification of an entity by another
unique identifier other than the native identifier.</p>
<p>Syntax: <code>%&lt;field&gt;:&lt;value&gt;</code></p>
<p>When a command is executed on a single entity, the entity is
identified by a unique identifier that follows the command. For example,
in the following command, <code>1234</code> is the user&#39;s
identifier:</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin user show 1234</span></code></pre></div>
<p>Some commands provide the following capability: If the entity can
also be uniquely identified by a name, then the name can be used instead
of the identifier, using the <strong>percent selector</strong>. For
example, if the name of the user is <code>john</code> and a field for
this entity named <code>name</code> has a value <code>john</code>:</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin user show %name:john</span></code></pre></div>
<h2 data-number="4.6" id="extended-value-syntax"><span class="header-section-number">4.6</span> Extended Value Syntax</h2>
<p>Most options and arguments are specified by a simple string (e.g.
<code>username</code> or <code>url</code>). Sometimes it is convenient
to read a value from a file: for example read the PEM value of a private
key, or a list of files. Some options expect a more complex value such
as <code>Hash</code> or <code>Array</code>.</p>
<p>The <strong>Extended Value</strong> Syntax allows to specify such
values and even read values from other sources than the command line
itself.</p>
<p>The syntax is:</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>0 <span class="ex">or</span> more decoders<span class="op">&gt;&lt;</span>some text value or nothing<span class="op">&gt;</span></span></code></pre></div>
<p>Decoders act like a function with its parameter on right-hand side
and are recognized by the prefix: <code>@</code> and suffix
<code>:</code></p>
<p>The following decoders are supported:</p>
<table>
<thead>
<tr>
<th>Decoder</th>
<th>Parameter</th>
<th>Returns</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>base64</code></td>
<td><code>String</code></td>
<td><code>String</code></td>
<td>Decode a base64 encoded string</td>
</tr>
<tr>
<td><code>csvt</code></td>
<td><code>String</code></td>
<td><code>Array</code></td>
<td>Decode a titled CSV value</td>
</tr>
<tr>
<td><code>env</code></td>
<td><code>String</code></td>
<td><code>String</code></td>
<td>Read from a named env var name, e.g.
<code>--password=@env:MYPASSVAR</code></td>
</tr>
<tr>
<td><code>file</code></td>
<td><code>String</code></td>
<td><code>String</code></td>
<td>Read value from specified file (prefix <code>~/</code> is replaced
with the users home folder), e.g.
<code>--key=@file:~/.ssh/mykey</code></td>
</tr>
<tr>
<td><code>json</code></td>
<td><code>String</code></td>
<td>Any</td>
<td>Decode JSON values (convenient to provide complex structures)</td>
</tr>
<tr>
<td><code>lines</code></td>
<td><code>String</code></td>
<td><code>Array</code></td>
<td>Split a string in multiple lines and return an array</td>
</tr>
<tr>
<td><code>list</code></td>
<td><code>String</code></td>
<td><code>Array</code></td>
<td>Split a string in multiple items taking first character as separator
and return an array</td>
</tr>
<tr>
<td><code>none</code></td>
<td>None</td>
<td>Nil</td>
<td>A null value</td>
</tr>
<tr>
<td><code>path</code></td>
<td><code>String</code></td>
<td><code>String</code></td>
<td>Performs path expansion on specified path (prefix <code>~/</code> is
replaced with the users home folder), e.g.
<code>--config-file=@path:~/sample_config.yml</code></td>
</tr>
<tr>
<td><code>preset</code></td>
<td><code>String</code></td>
<td><code>Hash</code></td>
<td>Get whole option preset value by name. Sub-values can also be used,
using <code>.</code> as separator. e.g. <code>foo.bar</code> is
<code>conf[foo][bar]</code></td>
</tr>
<tr>
<td><code>extend</code></td>
<td><code>String</code></td>
<td><code>String</code></td>
<td>Evaluates embedded extended value syntax in string</td>
</tr>
<tr>
<td><code>re</code></td>
<td><code>String</code></td>
<td><code>Regexp</code></td>
<td>Ruby Regular Expression (short for <code>@ruby:/.../</code>)</td>
</tr>
<tr>
<td><code>ruby</code></td>
<td><code>String</code></td>
<td>Any</td>
<td>Execute specified Ruby code</td>
</tr>
<tr>
<td><code>secret</code></td>
<td>None</td>
<td><code>String</code></td>
<td>Ask password interactively (hides input)</td>
</tr>
<tr>
<td><code>stdin</code></td>
<td>None</td>
<td><code>String</code></td>
<td>Read from stdin in text mode (no value on right)</td>
</tr>
<tr>
<td><code>stdbin</code></td>
<td>None</td>
<td><code>String</code></td>
<td>Read from stdin in binary mode (no value on right)</td>
</tr>
<tr>
<td><code>uri</code></td>
<td><code>String</code></td>
<td><code>String</code></td>
<td>Read value from specified URL, e.g.
<code>--fpac=@uri:http://serv/f.pac</code></td>
</tr>
<tr>
<td><code>val</code></td>
<td><code>String</code></td>
<td><code>String</code></td>
<td>Prevent decoders on the right to be decoded. e.g.
<code>--key=@val:@file:foo</code> sets the option <code>key</code> to
value <code>@file:foo</code>.</td>
</tr>
<tr>
<td><code>yaml</code></td>
<td><code>String</code></td>
<td>Any</td>
<td>Decode YAML</td>
</tr>
<tr>
<td><code>zlib</code></td>
<td><code>String</code></td>
<td><code>String</code></td>
<td>Decompress data using zlib</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>A few commands support a value of type <code>Proc</code> (lambda
expression). For example, the <strong>Extended Value</strong>
<code>@ruby:&#39;-&gt;(i){i[&quot;attr&quot;]}&#39;</code> is a lambda expression that
returns the value for key <code>attr</code> of the <code>Hash</code>
<code>i</code>.</p></div>
</div>
<p>To display the result of an extended value, use the
<code>config echo</code> command.</p>
<p>The <code>extend</code> decoder is useful to evaluate embedded
extended value syntax in a string. It expects a <code>@</code> to close
the embedded extended value syntax.</p>
<p>Example: Create a <code>Hash</code> value with the convenient
<code>@json:</code> decoder:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @json:<span class="st">&#39;{&quot;key1&quot;:&quot;value1&quot;,&quot;key2&quot;:&quot;value2&quot;}&#39;</span></span></code></pre></div>
<p>Example: read the content of the specified file, then, base64 decode,
then unzip:</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @zlib:@base64:@file:myfile.dat</span></code></pre></div>
<p>Example: Create a <code>Hash</code> value with one key and the value
is read from a file:</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @ruby:<span class="st">&#39;{&quot;token_verification_key&quot;=&gt;File.read(&quot;mykey.txt&quot;)}&#39;</span></span></code></pre></div>
<p>Example: read a CSV file and create an <code>Array</code> of
<code>Hash</code> for bulk provisioning:</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> test.csv</span></code></pre></div>
<div class="sourceCode" id="cb157"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="ex">name,email</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="ex">lolo,laurent@example.com</span></span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a><span class="ex">toto,titi@tutu.tata</span></span></code></pre></div>
<div class="sourceCode" id="cb158"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @csvt:@file:test.csv</span></code></pre></div>
<pre class="text"><code>+------+---------------------+
| name |        email        |
+------+---------------------+
| lolo | laurent@example.com |
| toto | titi@tutu.tata      |
+------+---------------------+</code></pre>
<p>Example: create a <code>Hash</code> with values coming from a preset
named <code>config</code></p>
<div class="sourceCode" id="cb160"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @json:@extend:<span class="st">&#39;{&quot;hello&quot;:true,&quot;version&quot;:&quot;@preset:config.version@&quot;}&#39;</span></span></code></pre></div>
<pre class="text"><code>╭─────────┬────────╮
│ field   │ value  │
╞═════════╪════════╡
│ hello   │ true   │
│ version │ 4.21.1 │
╰─────────┴────────╯</code></pre>
<p>Example: Create a <code>Hash</code> from YAML provided as shell
<strong>Here document</strong>:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @yaml:@stdin: <span class="at">--format</span><span class="op">=</span>json<span class="op">&lt;&lt;EOF</span></span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a><span class="st">key1: value1</span></span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a><span class="st">key2:</span></span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true" tabindex="-1"></a><span class="st">- item1</span></span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true" tabindex="-1"></a><span class="st">- item2</span></span>
<span id="cb162-6"><a href="#cb162-6" aria-hidden="true" tabindex="-1"></a><span class="st">key3:</span></span>
<span id="cb162-7"><a href="#cb162-7" aria-hidden="true" tabindex="-1"></a><span class="st">  key4: value4</span></span>
<span id="cb162-8"><a href="#cb162-8" aria-hidden="true" tabindex="-1"></a><span class="st">  key5: value5</span></span>
<span id="cb162-9"><a href="#cb162-9" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span></code></pre></div>
<div class="sourceCode" id="cb163"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;key1&quot;</span><span class="fu">:</span><span class="st">&quot;value1&quot;</span><span class="fu">,</span><span class="dt">&quot;key2&quot;</span><span class="fu">:</span><span class="ot">[</span><span class="st">&quot;item1&quot;</span><span class="ot">,</span><span class="st">&quot;item2&quot;</span><span class="ot">]</span><span class="fu">,</span><span class="dt">&quot;key3&quot;</span><span class="fu">:{</span><span class="dt">&quot;key4&quot;</span><span class="fu">:</span><span class="st">&quot;value4&quot;</span><span class="fu">,</span><span class="dt">&quot;key5&quot;</span><span class="fu">:</span><span class="st">&quot;value5&quot;</span><span class="fu">}}</span></span></code></pre></div>
<h2 data-number="4.7" id="configuration-and-persistency-folder"><span class="header-section-number">4.7</span> Configuration and Persistency
Folder</h2>
<p><code>ascli</code> configuration and persistency files (token cache,
file lists, persistency files) are stored by default in
<code>[User&#39;s home folder]/.aspera/ascli</code>.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p><code>[User&#39;s home folder]</code> is found using Ruby&#39;s
<code>Dir.home</code> (<code>rb_w32_home_dir</code>). It uses the
<code>HOME</code> env var primarily, and on MS Windows it also looks at
<code>%HOMEDRIVE%%HOMEPATH%</code> and <code>%USERPROFILE%</code>.
<code>ascli</code> sets the env var <code>%HOME%</code> to the value of
<code>%USERPROFILE%</code> if set and exists. So, on Windows
<code>%USERPROFILE%</code> is used as it is more reliable than
<code>%HOMEDRIVE%%HOMEPATH%</code>.</p></div>
</div>
<p>The configuration folder can be displayed using :</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config folder</span></code></pre></div>
<div class="sourceCode" id="cb165"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/Users/kenji/.aspera/ascli</span></span></code></pre></div>
<p>It can be overridden using option <code>home</code>.</p>
<p>Example (Windows):</p>
<pre class="text"><code>set ASCLI_HOME=C:\Users\Kenji\.aspera\ascli

ascli config folder

C:\Users\Kenji\.aspera\ascli</code></pre>
<p>When OAuth is used (AoC, Faspex5) <code>ascli</code> keeps a cache of
generated bearer tokens in folder <code>persist_store</code> in
configuration folder by default. Option <code>cache_tokens</code>
(<strong>yes</strong>/no) allows controlling if OAuth tokens are cached
on file system, or generated for each request. The command
<code>config tokens flush</code> clears that cache. Tokens are kept on
disk for a maximum of 30 minutes (<code>TOKEN_CACHE_EXPIRY_SEC</code>)
and garbage collected after that. When a token has expired, then a new
token is generated, either using a refresh_token if it is available, or
by the default method.</p>
<h2 data-number="4.8" id="invalid-filename-characters"><span class="header-section-number">4.8</span> Invalid Filename
Characters</h2>
<p>Some commands of <code>ascli</code> may create files or folders based
on input that may contain invalid characters for the local file system.
The option <code>invalid_characters</code> allows specifying a
replacement character for a list of characters that are invalid in
filenames on the local file system and replaces them with the specified
character.</p>
<p>The first character specifies the replacement character, and the
following characters are the invalid ones. This is used when a folder or
file is created from a value that potentially contains invalid
characters. For example, using the option <code>package_folder</code>.
The default value is <code>_&lt;&gt;:&quot;/\|?*</code>, corresponding to
replacement character <code>_</code> and characters not allowed on
Windows.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>This option is different from the <code>replace_illegal_chars</code>
parameter in <code>aspera.conf</code>, which applies to transfers
only.</p></div>
</div>
<h2 data-number="4.9" id="temporary-files"><span class="header-section-number">4.9</span> Temporary files</h2>
<p>Some temporary files may be needed during runtime. The temporary
folder may be specified with option: <code>temp_folder</code>. Temporary
files are deleted at the end of execution unless option:
<code>clean_temp</code> is set to <code>no</code>.</p>
<h2 data-number="4.10" id="configuration-file"><span class="header-section-number">4.10</span> Configuration file</h2>
<p>On the first execution of <code>ascli</code>, an empty configuration
file is created in the configuration folder
(<code>ascli config folder</code>). There is no mandatory information
required in this file. The use of it is optional as any option can be
provided on the command line.</p>
<p>Although the file is a standard <code>YAML</code> file,
<code>ascli</code> provides commands to read and modify it using the
<code>config</code> command.</p>
<p>All options for <code>ascli</code> can be set on command line, or by
env vars, or using <a href="#option-preset">Option Preset</a> in the
configuration file.</p>
<p>A configuration file provides a way to define default values,
especially for authentication options, thus avoiding to always having to
specify those options on the command line.</p>
<p>The default configuration file is:
<code>$HOME/.aspera/ascli/config.yaml</code> (this can be overridden
with option <code>--config-file=path</code> or its env var).</p>
<p>The configuration file is a catalog of named lists of options,
called: <a href="#option-preset">Option Preset</a>. Then, instead of
specifying some common options on the command line (e.g. address,
credentials), it is possible to invoke the ones of an <a href="#option-preset">Option Preset</a> (e.g. <code>mypreset</code>)
using the option <code>preset</code>: <code>--preset=mypreset</code> or
its shortcut: <code>-Pmypreset</code>.</p>
<h3 data-number="4.10.1" id="option-preset"><span class="header-section-number">4.10.1</span> Option Preset</h3>
<p>An <a href="#option-preset">Option Preset</a> is a collection of
options and their associated values in a named section in the
configuration file.</p>
<p>A named <a href="#option-preset">Option Preset</a> can be modified
directly using <code>ascli</code>, which will update the configuration
file :</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set<span class="kw">|</span><span class="ex">delete</span><span class="kw">|</span><span class="ex">show</span><span class="kw">|</span><span class="ex">initialize</span><span class="kw">|</span><span class="ex">update</span> <span class="op">&lt;</span>option preset<span class="op">&gt;</span></span></code></pre></div>
<p>The command <code>update</code> allows the easy creation of <a href="#option-preset">Option Preset</a> by simply providing the options
in their command line format, e.g. :</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset update demo_server <span class="at">--url</span><span class="op">=</span>ssh://demo.asperasoft.com:33001 <span class="at">--username</span><span class="op">=</span>asperaweb <span class="at">--password</span><span class="op">=</span>my_password_here <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;precalculate_job_size&quot;:true}&#39;</span></span></code></pre></div>
<ul>
<li>This creates an <a href="#option-preset">Option Preset</a>
<code>demo_server</code> with all provided options.</li>
</ul>
<p>The command <code>set</code> allows setting individual options in an
<a href="#option-preset">Option Preset</a>.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set demo_server password my_password_here</span></code></pre></div>
<p>The command <code>initialize</code>, like <code>update</code> allows
to set several options at once, but it deletes an existing configuration
instead of updating it, and expects a <a href="#extended-value-syntax"><code>Hash</code> Extended Value</a>.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset initialize demo_server @json:<span class="st">&#39;{&quot;url&quot;:&quot;ssh://demo.asperasoft.com:33001&quot;,&quot;username&quot;:&quot;asperaweb&quot;,&quot;password&quot;:&quot;my_pass_here&quot;,&quot;ts&quot;:{&quot;precalculate_job_size&quot;:true}}&#39;</span></span></code></pre></div>
<p>A full terminal based overview of the configuration can be displayed
using:</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset over</span></code></pre></div>
<p>A list of <a href="#option-preset">Option Preset</a> can be displayed
using:</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset list</span></code></pre></div>
<p>A good practice is to not manually edit the configuration file and
use modification commands instead. If necessary, the configuration file
can be opened in a text editor with:</p>
<div class="sourceCode" id="cb173"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config open</span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>This starts the editor specified by env var <code>EDITOR</code> if
defined.</p></div>
</div>
<p>The former format for commands is still supported:</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set<span class="kw">|</span><span class="ex">delete</span><span class="kw">|</span><span class="ex">show</span><span class="kw">|</span><span class="ex">initialize</span><span class="kw">|</span><span class="ex">update</span> <span class="op">&lt;</span>name<span class="op">&gt;</span></span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset over</span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset list</span></code></pre></div>
<p>It is possible to load an <a href="#option-preset">Option Preset</a>
from within another <a href="#option-preset">Option Preset</a> using the
<code>preset</code> option. For example if <code>pcommon</code> is a
preset with common options, and <code>pspecific</code> is a preset with
specific options, then <code>pspecific</code> can load
<code>pcommon</code> using:</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set pspecific preset pcommon</span></code></pre></div>
<p>When <code>pspecific</code> is loaded, then cumulative option
<code>preset</code> will be set, and it will also load
<code>pcommon</code>.</p>
<h3 data-number="4.10.2" id="special-option-preset-config"><span class="header-section-number">4.10.2</span> Special Option Preset:
<code>config</code></h3>
<p>This preset name is reserved and contains a single key:
<code>version</code>. This is the version of <code>ascli</code> which
created the file.</p>
<h3 data-number="4.10.3" id="special-option-preset-default"><span class="header-section-number">4.10.3</span> Special Option Preset:
<code>default</code></h3>
<p>This preset name is reserved and contains an array of key-value,
where the key is the name of a plugin, and the value is the name of
another preset.</p>
<p>When a plugin is invoked, the preset associated with the name of the
plugin is loaded, unless the option <code>--no-default</code> (or
<code>-N</code>) is used.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Special plugin name: <code>config</code> can be associated with a
preset that is loaded initially, typically used for default values.</p></div>
</div>
<p>Operations on this preset are done using regular <code>config</code>
operations:</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set default _plugin_name_ _default_preset_for_plugin_</span></code></pre></div>
<div class="sourceCode" id="cb177"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset get default _plugin_name_</span></code></pre></div>
<div class="sourceCode" id="cb178"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;_default_preset_for_plugin_&quot;</span></span></code></pre></div>
<h3 data-number="4.10.4" id="plugin-config-configuration"><span class="header-section-number">4.10.4</span> Plugin: <code>config</code>:
Configuration</h3>
<p>Plugin <code>config</code> provides general commands for
<code>ascli</code>:</p>
<ul>
<li>Option Preset operations (configuration file)</li>
<li><code>wizard</code></li>
<li><code>vault</code></li>
<li><code>ascp</code></li>
<li><code>transferd</code></li>
</ul>
<p>The default preset for <code>config</code> is read for any plugin
invocation, this allows setting global options, such as
<code>--log-level</code> or <code>--interactive</code>. When
<code>ascli</code> starts, it looks for the <code>default</code> Option
Preset and checks the value for <code>config</code>. If set, it loads
the options independently of the plugin used.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>If no global default is set by the user, <code>ascli</code> will use
<code>global_common_defaults</code> when setting global options (e.g.
<code>config ascp use</code>)</p></div>
</div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>If you don&#39;t know the name of the global preset, you can use
<code>GLOBAL</code> to refer to it.</p></div>
</div>
<p>Show current default (global) Option Preset (<code>config</code>
plugin):</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset get default config</span></code></pre></div>
<pre class="text"><code>global_common_defaults</code></pre>
<p>Set a global parameter:</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set GLOBAL version_check_days 0</span></code></pre></div>
<p>If the default global Option Preset is not set, and you want to use a
different name:</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set GLOBAL version_check_days 0</span></code></pre></div>
<div class="sourceCode" id="cb183"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set default config my_common_defaults</span></code></pre></div>
<h2 data-number="4.11" id="tested-commands-for-config"><span class="header-section-number">4.11</span> Tested commands for
<code>config</code></h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Add <code>ascli config</code> in front of the following commands:</p></div>
</div>
<div class="sourceCode" id="cb184"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascp</span> connect info <span class="st">&#39;Aspera Connect for Windows&#39;</span></span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascp</span> connect list</span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ascp</span> connect version <span class="st">&#39;Aspera Connect for Windows&#39;</span> download <span class="st">&#39;Windows Installer&#39;</span> <span class="at">--to-folder</span><span class="op">=</span>.</span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a><span class="ex">ascp</span> connect version <span class="st">&#39;Aspera Connect for Windows&#39;</span> list</span>
<span id="cb184-5"><a href="#cb184-5" aria-hidden="true" tabindex="-1"></a><span class="ex">ascp</span> connect version <span class="st">&#39;Aspera Connect for Windows&#39;</span> open documentation</span>
<span id="cb184-6"><a href="#cb184-6" aria-hidden="true" tabindex="-1"></a><span class="ex">ascp</span> errors</span>
<span id="cb184-7"><a href="#cb184-7" aria-hidden="true" tabindex="-1"></a><span class="ex">ascp</span> info <span class="at">--sdk-folder</span><span class="op">=</span>sdk_test_dir</span>
<span id="cb184-8"><a href="#cb184-8" aria-hidden="true" tabindex="-1"></a><span class="ex">ascp</span> install</span>
<span id="cb184-9"><a href="#cb184-9" aria-hidden="true" tabindex="-1"></a><span class="ex">ascp</span> install <span class="at">--sdk-folder</span><span class="op">=</span>sdk_test_dir</span>
<span id="cb184-10"><a href="#cb184-10" aria-hidden="true" tabindex="-1"></a><span class="ex">ascp</span> install 1.1.3</span>
<span id="cb184-11"><a href="#cb184-11" aria-hidden="true" tabindex="-1"></a><span class="ex">ascp</span> products list</span>
<span id="cb184-12"><a href="#cb184-12" aria-hidden="true" tabindex="-1"></a><span class="ex">ascp</span> products use <span class="st">&#39;IBM Aspera Connect&#39;</span></span>
<span id="cb184-13"><a href="#cb184-13" aria-hidden="true" tabindex="-1"></a><span class="ex">ascp</span> schema <span class="at">--format</span><span class="op">=</span>jsonpp</span>
<span id="cb184-14"><a href="#cb184-14" aria-hidden="true" tabindex="-1"></a><span class="ex">ascp</span> show</span>
<span id="cb184-15"><a href="#cb184-15" aria-hidden="true" tabindex="-1"></a><span class="ex">ascp</span> spec</span>
<span id="cb184-16"><a href="#cb184-16" aria-hidden="true" tabindex="-1"></a><span class="ex">check_update</span></span>
<span id="cb184-17"><a href="#cb184-17" aria-hidden="true" tabindex="-1"></a><span class="ex">coffee</span></span>
<span id="cb184-18"><a href="#cb184-18" aria-hidden="true" tabindex="-1"></a><span class="ex">coffee</span> <span class="at">--ui</span><span class="op">=</span>text</span>
<span id="cb184-19"><a href="#cb184-19" aria-hidden="true" tabindex="-1"></a><span class="ex">coffee</span> <span class="at">--ui</span><span class="op">=</span>text <span class="at">--image</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;text&quot;:true,&quot;double&quot;:false}&#39;</span></span>
<span id="cb184-20"><a href="#cb184-20" aria-hidden="true" tabindex="-1"></a><span class="ex">coffee</span> <span class="at">--ui</span><span class="op">=</span>text <span class="at">--image</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;text&quot;:true}&#39;</span></span>
<span id="cb184-21"><a href="#cb184-21" aria-hidden="true" tabindex="-1"></a><span class="ex">detect</span> https://faspex5.example.com/path</span>
<span id="cb184-22"><a href="#cb184-22" aria-hidden="true" tabindex="-1"></a><span class="ex">detect</span> https://node.example.com/path</span>
<span id="cb184-23"><a href="#cb184-23" aria-hidden="true" tabindex="-1"></a><span class="ex">detect</span> https://shares.example.com/path shares</span>
<span id="cb184-24"><a href="#cb184-24" aria-hidden="true" tabindex="-1"></a><span class="ex">detect</span> https://tst.example.com/path faspio</span>
<span id="cb184-25"><a href="#cb184-25" aria-hidden="true" tabindex="-1"></a><span class="ex">detect</span> https://tst.example.com/path httpgw</span>
<span id="cb184-26"><a href="#cb184-26" aria-hidden="true" tabindex="-1"></a><span class="ex">detect</span> my_org aoc</span>
<span id="cb184-27"><a href="#cb184-27" aria-hidden="true" tabindex="-1"></a><span class="ex">doc</span></span>
<span id="cb184-28"><a href="#cb184-28" aria-hidden="true" tabindex="-1"></a><span class="ex">doc</span> transfer-parameters</span>
<span id="cb184-29"><a href="#cb184-29" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&#39;&lt;svg viewBox=&quot;0 0 100 100&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;&gt;&lt;circle cx=&quot;50&quot; cy=&quot;50&quot; r=&quot;50&quot; fill=&quot;#006699&quot;/&gt;&lt;/svg&gt;&#39;</span> <span class="at">--format</span><span class="op">=</span>image</span>
<span id="cb184-30"><a href="#cb184-30" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="at">--</span> <span class="at">--special-string</span></span>
<span id="cb184-31"><a href="#cb184-31" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> @base64:SGVsbG8gV29ybGQK</span>
<span id="cb184-32"><a href="#cb184-32" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> @csvt:@stdin:</span>
<span id="cb184-33"><a href="#cb184-33" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> @env:USER</span>
<span id="cb184-34"><a href="#cb184-34" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> @json:<span class="st">&#39;[{&quot;user&quot;:{&quot;id&quot;:1,&quot;name&quot;:&quot;foo&quot;},&quot;project&quot;:&quot;bar&quot;}]&#39;</span> <span class="at">--multi-single</span><span class="op">=</span>single</span>
<span id="cb184-35"><a href="#cb184-35" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> @json:<span class="st">&#39;[{&quot;user&quot;:{&quot;id&quot;:1,&quot;name&quot;:&quot;foo&quot;},&quot;project&quot;:&quot;bar&quot;}]&#39;</span> <span class="at">--multi-single</span><span class="op">=</span>yes</span>
<span id="cb184-36"><a href="#cb184-36" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> @lines:@stdin:</span>
<span id="cb184-37"><a href="#cb184-37" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> @list:,1,2,3</span>
<span id="cb184-38"><a href="#cb184-38" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> @secret:</span>
<span id="cb184-39"><a href="#cb184-39" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> @uri:/etc/hosts</span>
<span id="cb184-40"><a href="#cb184-40" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> @uri:file:/etc/hosts</span>
<span id="cb184-41"><a href="#cb184-41" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> @uri:http://ifconfig.me</span>
<span id="cb184-42"><a href="#cb184-42" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> @uri:https://ifconfig.me</span>
<span id="cb184-43"><a href="#cb184-43" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> @vault:my_preset.password</span>
<span id="cb184-44"><a href="#cb184-44" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> @zlib:@stdin:</span>
<span id="cb184-45"><a href="#cb184-45" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> hello</span>
<span id="cb184-46"><a href="#cb184-46" aria-hidden="true" tabindex="-1"></a><span class="ex">email_test</span> <span class="at">--notify-to</span><span class="op">=</span>my_email_external</span>
<span id="cb184-47"><a href="#cb184-47" aria-hidden="true" tabindex="-1"></a><span class="fu">file</span></span>
<span id="cb184-48"><a href="#cb184-48" aria-hidden="true" tabindex="-1"></a><span class="fu">file</span> <span class="at">--logger</span><span class="op">=</span>syslog <span class="at">--log-level</span><span class="op">=</span>debug</span>
<span id="cb184-49"><a href="#cb184-49" aria-hidden="true" tabindex="-1"></a><span class="ex">folder</span></span>
<span id="cb184-50"><a href="#cb184-50" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> name</span>
<span id="cb184-51"><a href="#cb184-51" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> path</span>
<span id="cb184-52"><a href="#cb184-52" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> version</span>
<span id="cb184-53"><a href="#cb184-53" aria-hidden="true" tabindex="-1"></a><span class="ex">genkey</span> my_key</span>
<span id="cb184-54"><a href="#cb184-54" aria-hidden="true" tabindex="-1"></a><span class="ex">genkey</span> my_key 4096</span>
<span id="cb184-55"><a href="#cb184-55" aria-hidden="true" tabindex="-1"></a><span class="ex">image</span> https://eudemo.asperademo.com/wallpaper.jpg</span>
<span id="cb184-56"><a href="#cb184-56" aria-hidden="true" tabindex="-1"></a><span class="ex">initdemo</span></span>
<span id="cb184-57"><a href="#cb184-57" aria-hidden="true" tabindex="-1"></a><span class="ex">open</span></span>
<span id="cb184-58"><a href="#cb184-58" aria-hidden="true" tabindex="-1"></a><span class="ex">plugins</span> create my_command</span>
<span id="cb184-59"><a href="#cb184-59" aria-hidden="true" tabindex="-1"></a><span class="ex">plugins</span> list</span>
<span id="cb184-60"><a href="#cb184-60" aria-hidden="true" tabindex="-1"></a><span class="ex">preset</span> delete conf_name</span>
<span id="cb184-61"><a href="#cb184-61" aria-hidden="true" tabindex="-1"></a><span class="ex">preset</span> initialize conf_name @json:<span class="st">&#39;{&quot;p1&quot;:&quot;v1&quot;,&quot;p2&quot;:&quot;v2&quot;}&#39;</span></span>
<span id="cb184-62"><a href="#cb184-62" aria-hidden="true" tabindex="-1"></a><span class="ex">preset</span> list</span>
<span id="cb184-63"><a href="#cb184-63" aria-hidden="true" tabindex="-1"></a><span class="ex">preset</span> overview</span>
<span id="cb184-64"><a href="#cb184-64" aria-hidden="true" tabindex="-1"></a><span class="ex">preset</span> set GLOBAL version_check_days 0</span>
<span id="cb184-65"><a href="#cb184-65" aria-hidden="true" tabindex="-1"></a><span class="ex">preset</span> set conf_name param value</span>
<span id="cb184-66"><a href="#cb184-66" aria-hidden="true" tabindex="-1"></a><span class="ex">preset</span> set default shares conf_name</span>
<span id="cb184-67"><a href="#cb184-67" aria-hidden="true" tabindex="-1"></a><span class="ex">preset</span> show conf_name</span>
<span id="cb184-68"><a href="#cb184-68" aria-hidden="true" tabindex="-1"></a><span class="ex">preset</span> unset conf_name param</span>
<span id="cb184-69"><a href="#cb184-69" aria-hidden="true" tabindex="-1"></a><span class="ex">preset</span> update conf_name <span class="at">--p1</span><span class="op">=</span>v1 <span class="at">--p2</span><span class="op">=</span>v2</span>
<span id="cb184-70"><a href="#cb184-70" aria-hidden="true" tabindex="-1"></a><span class="ex">proxy_check</span> <span class="at">--fpac</span><span class="op">=</span>@file:proxy.pac https://eudemo.asperademo.com <span class="at">--proxy-credentials</span><span class="op">=</span>@list:,user,pass</span>
<span id="cb184-71"><a href="#cb184-71" aria-hidden="true" tabindex="-1"></a><span class="ex">pubkey</span> @file:my_key</span>
<span id="cb184-72"><a href="#cb184-72" aria-hidden="true" tabindex="-1"></a><span class="ex">remote_certificate</span> chain https://node.example.com/path</span>
<span id="cb184-73"><a href="#cb184-73" aria-hidden="true" tabindex="-1"></a><span class="ex">remote_certificate</span> name https://node.example.com/path</span>
<span id="cb184-74"><a href="#cb184-74" aria-hidden="true" tabindex="-1"></a><span class="ex">remote_certificate</span> only https://node.example.com/path</span>
<span id="cb184-75"><a href="#cb184-75" aria-hidden="true" tabindex="-1"></a><span class="ex">smtp_settings</span></span>
<span id="cb184-76"><a href="#cb184-76" aria-hidden="true" tabindex="-1"></a><span class="ex">tokens</span> flush</span>
<span id="cb184-77"><a href="#cb184-77" aria-hidden="true" tabindex="-1"></a><span class="ex">tokens</span> list</span>
<span id="cb184-78"><a href="#cb184-78" aria-hidden="true" tabindex="-1"></a><span class="ex">tokens</span> show foobar</span>
<span id="cb184-79"><a href="#cb184-79" aria-hidden="true" tabindex="-1"></a><span class="ex">transferd</span> install</span>
<span id="cb184-80"><a href="#cb184-80" aria-hidden="true" tabindex="-1"></a><span class="ex">transferd</span> list</span>
<span id="cb184-81"><a href="#cb184-81" aria-hidden="true" tabindex="-1"></a><span class="ex">vault</span> create @json:<span class="st">&#39;{&quot;label&quot;:&quot;my_label&quot;,&quot;password&quot;:&quot;my_password_here&quot;,&quot;description&quot;:&quot;my secret&quot;}&#39;</span></span>
<span id="cb184-82"><a href="#cb184-82" aria-hidden="true" tabindex="-1"></a><span class="ex">vault</span> delete my_label</span>
<span id="cb184-83"><a href="#cb184-83" aria-hidden="true" tabindex="-1"></a><span class="ex">vault</span> info</span>
<span id="cb184-84"><a href="#cb184-84" aria-hidden="true" tabindex="-1"></a><span class="ex">vault</span> list</span>
<span id="cb184-85"><a href="#cb184-85" aria-hidden="true" tabindex="-1"></a><span class="ex">vault</span> show my_label</span>
<span id="cb184-86"><a href="#cb184-86" aria-hidden="true" tabindex="-1"></a><span class="ex">wizard</span> https://console.example.com/path console</span>
<span id="cb184-87"><a href="#cb184-87" aria-hidden="true" tabindex="-1"></a><span class="ex">wizard</span> https://faspex4.example.com/path faspex <span class="at">--username</span><span class="op">=</span>test <span class="at">--password</span><span class="op">=</span>test</span>
<span id="cb184-88"><a href="#cb184-88" aria-hidden="true" tabindex="-1"></a><span class="ex">wizard</span> https://faspex5.example.com/path faspex5 <span class="at">--key-path</span><span class="op">=</span>my_private_key</span>
<span id="cb184-89"><a href="#cb184-89" aria-hidden="true" tabindex="-1"></a><span class="ex">wizard</span> https://node.example.com/path node <span class="at">--username</span><span class="op">=</span>test <span class="at">--password</span><span class="op">=</span>test</span>
<span id="cb184-90"><a href="#cb184-90" aria-hidden="true" tabindex="-1"></a><span class="ex">wizard</span> https://orch.example.com/path orchestrator <span class="at">--username</span><span class="op">=</span>test <span class="at">--password</span><span class="op">=</span>test</span>
<span id="cb184-91"><a href="#cb184-91" aria-hidden="true" tabindex="-1"></a><span class="ex">wizard</span> https://shares.example.com/path shares <span class="at">--username</span><span class="op">=</span>test <span class="at">--password</span><span class="op">=</span>test</span>
<span id="cb184-92"><a href="#cb184-92" aria-hidden="true" tabindex="-1"></a><span class="ex">wizard</span> my_org aoc <span class="at">--key-path</span><span class="op">=</span>my_private_key <span class="at">--username</span><span class="op">=</span>my_user_email</span>
<span id="cb184-93"><a href="#cb184-93" aria-hidden="true" tabindex="-1"></a><span class="ex">wizard</span> my_org aoc <span class="at">--key-path</span><span class="op">=</span>my_private_key <span class="at">--username</span><span class="op">=</span>my_user_email <span class="at">--use-generic-client</span><span class="op">=</span>yes</span></code></pre></div>
<h3 data-number="4.11.1" id="format-of-file"><span class="header-section-number">4.11.1</span> Format of file</h3>
<p>The configuration file is a <code>Hash</code> in a YAML file.
Example:</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="fu">config</span><span class="kw">:</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">version</span><span class="kw">:</span><span class="at"> </span><span class="fl">0.3.7</span></span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a><span class="fu">default</span><span class="kw">:</span></span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">config</span><span class="kw">:</span><span class="at"> cli_default</span></span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">server</span><span class="kw">:</span><span class="at"> demo_server</span></span>
<span id="cb185-6"><a href="#cb185-6" aria-hidden="true" tabindex="-1"></a><span class="fu">cli_default</span><span class="kw">:</span></span>
<span id="cb185-7"><a href="#cb185-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">interactive</span><span class="kw">:</span><span class="at"> </span><span class="ch">no</span></span>
<span id="cb185-8"><a href="#cb185-8" aria-hidden="true" tabindex="-1"></a><span class="fu">demo_server</span><span class="kw">:</span></span>
<span id="cb185-9"><a href="#cb185-9" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">url</span><span class="kw">:</span><span class="at"> ssh://demo.asperasoft.com:33001</span></span>
<span id="cb185-10"><a href="#cb185-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">username</span><span class="kw">:</span><span class="at"> asperaweb</span></span>
<span id="cb185-11"><a href="#cb185-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">password</span><span class="kw">:</span><span class="at"> my_password_here</span></span></code></pre></div>
<p>We can see here:</p>
<ul>
<li>The configuration was created with <code>ascli</code> version
0.3.7</li>
<li>The default <a href="#option-preset">Option Preset</a> to load for
<code>server</code> plugin is : <code>demo_server</code></li>
<li>The <a href="#option-preset">Option Preset</a>
<code>demo_server</code> defines some options: the URL and
credentials</li>
<li>The default <a href="#option-preset">Option Preset</a> to load in
any case is : <code>cli_default</code></li>
</ul>
<p>Two <a href="#option-preset">Option Presets</a> are reserved:</p>
<ul>
<li><code>config</code> contains a single value: <code>version</code>
showing the version used to create the configuration file. It is used to
check compatibility.</li>
<li><code>default</code> is reserved to define the default <a href="#option-preset">Option Preset</a> name used for known
plugins.</li>
</ul>
<p>The user may create as many <a href="#option-preset">Option
Preset</a> as needed. For instance, a particular <a href="#option-preset">Option Preset</a> can be created for a particular
application instance and contain URL and credentials.</p>
<p>Values in the configuration also follow the <a href="#extended-value-syntax">Extended Value Syntax</a>.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>If the user wants to use the <a href="#extended-value-syntax">Extended Value Syntax</a> inside the
configuration file, using the <code>config preset update</code> command,
the user shall use the <code>@val:</code> prefix.</p></div>
</div>
<p>Example:</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set my_aoc_org private_key @val:@file:<span class="st">&quot;</span><span class="va">$HOME</span><span class="st">/.aspera/ascli/my_private_key&quot;</span></span></code></pre></div>
<p>This creates the <a href="#option-preset">Option Preset</a>:</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_aoc_org</span><span class="kw">:</span></span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">private_key</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;@file:/Users/laurent/.aspera/ascli/my_private_key&quot;</span></span></code></pre></div>
<p>So, the key file will be read only at execution time, but not be
embedded in the configuration file.</p>
<h3 data-number="4.11.2" id="evaluation-order-of-options"><span class="header-section-number">4.11.2</span> Evaluation order of
options</h3>
<p>Some options are global, some options are available only for some
plugins. (the plugin is the first level command).</p>
<p>Options are loaded using this algorithm:</p>
<ul>
<li>If option <code>--no-default</code> (or <code>-N</code>) is
specified, then no default value is loaded for the plugin</li>
<li>Else it looks for the name of the plugin as key in section
<code>default</code>, the value is the name of the default <a href="#option-preset">Option Preset</a> for it, and loads it.</li>
<li>If option <code>--preset=&lt;name or extended value hash&gt;</code>
is specified (or <code>-Pxxxx</code>), this reads the <a href="#option-preset">Option Preset</a> specified from the configuration
file, or if the value is a <code>Hash</code>, it uses it as options
values.</li>
<li>Environment variables are evaluated</li>
<li>Command line options are evaluated</li>
</ul>
<p>Options are evaluated in the order of command line.</p>
<p>To avoid loading the default <a href="#option-preset">Option
Preset</a> for a plugin, use: <code>-N</code></p>
<p>On command line, words in option names are separated by a dash
(<code>-</code>). In configuration file, separator is an underscore.
E.g. <code>--xxx-yyy</code> on command line gives <code>xxx_yyy</code>
in configuration file.</p>
<p>The main plugin name is <code>config</code>, so it is possible to
define a default <a href="#option-preset">Option Preset</a> for the main
plugin with:</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set cli_default interactive no</span></code></pre></div>
<div class="sourceCode" id="cb189"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set default config cli_default</span></code></pre></div>
<p>An <a href="#option-preset">Option Preset</a> value can be removed
with <code>unset</code>:</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset unset cli_default interactive</span></code></pre></div>
<p>Example: Define options using command line:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> <span class="at">-N</span> <span class="at">--url</span><span class="op">=</span>_url_here_ <span class="at">--password</span><span class="op">=</span>my_password_here <span class="at">--username</span><span class="op">=</span>_name_here_ node <span class="at">--show-config</span></span></code></pre></div>
<p>Example: Define options using a <code>Hash</code>:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> <span class="at">-N</span> <span class="at">--preset</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;url&quot;:&quot;_url_here_&quot;,&quot;password&quot;:&quot;my_password_here&quot;,&quot;username&quot;:&quot;_name_here_&quot;}&#39;</span> node <span class="at">--show-config</span></span></code></pre></div>
<h3 data-number="4.11.3" id="wizard"><span class="header-section-number">4.11.3</span> Wizard</h3>
<p>The wizard is a command that asks the user for information and
creates an <a href="#option-preset">Option Preset</a> with the provided
information for a given application.</p>
<p>It takes three optional arguments:</p>
<ul>
<li>The URL of the application, else it will ask for it;</li>
<li>The plugin name: it limits detection to a given plugin, else it will
try to detect known plugins from the URL</li>
<li>The preset name: it will create a new <a href="#option-preset">Option Preset</a> with this name, else it will use
specific information to generate a unique preset name.</li>
</ul>
<p>Special options are also available to the wizard:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>default</code></td>
<td>[yes]/no</td>
<td>Set as default configuration for specified plugin.</td>
</tr>
<tr>
<td><code>override</code></td>
<td>yes/[no]</td>
<td>Override existing default preset name for the plugin, if it
exists.</td>
</tr>
<tr>
<td><code>key-path</code></td>
<td>path</td>
<td>Path to private key for JWT.</td>
</tr>
<tr>
<td><code>test-mode</code></td>
<td>yes/[no]</td>
<td>Skip private key check step.</td>
</tr>
</tbody>
</table>
<p>Other options can be provided to the wizard, such as
<code>--username</code>, etc... They will be added to the <a href="#option-preset">Option Preset</a> created by the wizard.</p>
<p>The simplest invocation is:</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config wizard</span></code></pre></div>
<h3 data-number="4.11.4" id="example-of-configuration-for-a-plugin"><span class="header-section-number">4.11.4</span> Example of configuration for
a plugin</h3>
<p>For Faspex, Shares, Node (including ATS, Aspera Transfer Service),
Console, only username/password and URL are required (either on command
line, or from configuration file). Those can be usually provided on the
command line:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> shares repo browse / <span class="at">--url</span><span class="op">=</span>https://10.25.0.6 <span class="at">--username</span><span class="op">=</span>john <span class="at">--password</span><span class="op">=</span>my_password_here</span></code></pre></div>
<p>This can also be provisioned in a configuration file:</p>
<ul>
<li>Build <a href="#option-preset">Option Preset</a></li>
</ul>
<div class="sourceCode" id="cb195"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set shares06 url https://10.25.0.6</span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set shares06 username john</span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set shares06 password my_password_here</span></code></pre></div>
<p>This can also be done with one single command:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset init shares06 @json:<span class="st">&#39;{&quot;url&quot;:&quot;https://10.25.0.6&quot;,&quot;username&quot;:&quot;john&quot;,&quot;password&quot;:&quot;my_password_here&quot;}&#39;</span></span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset update shares06 <span class="at">--url</span><span class="op">=</span>https://10.25.0.6 <span class="at">--username</span><span class="op">=</span>john <span class="at">--password</span><span class="op">=</span>my_password_here</span></code></pre></div>
<ul>
<li>Define this <a href="#option-preset">Option Preset</a> as the
default <a href="#option-preset">Option Preset</a> for the specified
plugin (<code>shares</code>)</li>
</ul>
<div class="sourceCode" id="cb198"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set default shares shares06</span></code></pre></div>
<ul>
<li>Display the content of configuration file in table format</li>
</ul>
<div class="sourceCode" id="cb199"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset overview</span></code></pre></div>
<ul>
<li>Execute a command on the <strong>Shares</strong> application using
default options</li>
</ul>
<div class="sourceCode" id="cb200"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> shares repo browse /</span></code></pre></div>
<h2 data-number="4.12" id="secret-vault"><span class="header-section-number">4.12</span> Secret Vault</h2>
<p>Secrets, e.g. passwords, keys, are needed when connecting to
applications. Those secrets are usually provided as command options, on
command line, env vars, files etc.</p>
<p>For security reasons, those secrets shall not be exposed in clear,
either:</p>
<ul>
<li>On terminal during input</li>
<li>In logs</li>
<li>In command output</li>
</ul>
<p>Instead, they shall be hidden (logs, output) or encrypted
(configuration).</p>
<p>Terminal output (command result) secret removal is controlled by
option <code>show_secrets</code> (default: <code>no</code>). Log secret
removal is controlled by option <code>log_secrets</code> (default:
<code>no</code>). Mandatory command line options can be requested
interactively (e.g. password) using option <code>interactive</code>. It
is possible to use extended value <code>@secret:[name]</code> to ask for
a secret interactively. It is also possible to enter an option as an
environment variable, e.g. <code>ASCLI_PASSWORD</code> for option
<code>password</code> and read the env var like this:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="bu">read</span> <span class="at">-s</span> <span class="va">ASCLI_PASSWORD</span></span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">ASCLI_PASSWORD</span></span></code></pre></div>
<p>Another possibility is to retrieve values from a secret vault.</p>
<p>The vault is used with options <code>vault</code> and
<code>vault_password</code>.</p>
<p><code>vault</code> shall be a <code>Hash</code> describing the
vault:</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;type&quot;</span><span class="fu">:</span><span class="st">&quot;system&quot;</span><span class="fu">,</span><span class="dt">&quot;name&quot;</span><span class="fu">:</span><span class="st">&quot;ascli&quot;</span><span class="fu">}</span></span></code></pre></div>
<p><code>vault_password</code> specifies the password for the vault.</p>
<p>Although it can be specified on command line, for security reason you
should avoid exposing the secret. For example, it can be securely
specified on command line like this:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="bu">read</span> <span class="at">-s</span> <span class="va">ASCLI_VAULT_PASSWORD</span></span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">ASCLI_VAULT_PASSWORD</span></span></code></pre></div>
<h3 data-number="4.12.1" id="vault-ibm-hashicorp-vault"><span class="header-section-number">4.12.1</span> Vault: IBM HashiCorp
Vault</h3>
<p><a href="https://developer.hashicorp.com/vault">https://developer.hashicorp.com/vault</a></p>
<p>Quick start macOS:</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> tap hashicorp/tap</span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> install hashicorp/tap/vault</span>
<span id="cb204-3"><a href="#cb204-3" aria-hidden="true" tabindex="-1"></a><span class="ex">vault</span> server <span class="at">-dev</span> <span class="at">-dev-root-token-id</span><span class="op">=</span>dev-only-token</span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>type</code></td>
<td><code>vault</code></td>
<td>The type of the vault</td>
</tr>
<tr>
<td><code>url</code></td>
<td><code>http://127.0.0.1:8200</code></td>
<td>The URL of the vault</td>
</tr>
<tr>
<td><code>token</code></td>
<td><code>dev-only-token</code></td>
<td>The token for the vault, by default uses parameter
<code>vault_password</code></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb205"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--vault=@json:</span><span class="st">&#39;{&quot;type&quot;:&quot;vault&quot;,&quot;url&quot;:&quot;http://127.0.0.1:8200&quot;}&#39;</span> <span class="at">--vault_password</span><span class="op">=</span>dev-only-token</span></code></pre></div>
<h3 data-number="4.12.2" id="vault-system-keychain"><span class="header-section-number">4.12.2</span> Vault: System keychain</h3>
<div class="admonition caution">
<div class="admonition-title">Caution</div>
<div class="admonition-body"><p><strong>macOS only</strong></p></div>
</div>
<p>It is possible to manage secrets in macOS keychain (only read
supported currently).</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>type</code></td>
<td><code>system</code></td>
<td>The type of the vault</td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>ascli</code></td>
<td>The name of the keychain to use</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb206"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--vault=@json:</span><span class="st">&#39;{&quot;type&quot;:&quot;system&quot;,&quot;name&quot;:&quot;ascli&quot;}&#39;</span></span></code></pre></div>
<h3 data-number="4.12.3" id="vault-encrypted-file"><span class="header-section-number">4.12.3</span> Vault: Encrypted file</h3>
<p>It is possible to store and use secrets encrypted in a file using
option <code>vault</code> set to:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;type&quot;</span><span class="fu">:</span><span class="st">&quot;file&quot;</span><span class="fu">,</span><span class="dt">&quot;name&quot;</span><span class="fu">:</span><span class="st">&quot;vault.bin&quot;</span><span class="fu">}</span></span></code></pre></div>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>type</code></td>
<td><code>file</code></td>
<td>The type of the vault</td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>vault.bin</code></td>
<td>File path, absolute, or relative to the configuration folder
<code>ASCLI_HOME</code></td>
</tr>
</tbody>
</table>
<h3 data-number="4.12.4" id="vault-operations"><span class="header-section-number">4.12.4</span> Vault: Operations</h3>
<p>For this use the <code>config vault</code> command.</p>
<p>Then secrets can be manipulated using commands:</p>
<ul>
<li><code>create</code></li>
<li><code>show</code></li>
<li><code>list</code></li>
<li><code>delete</code></li>
</ul>
<div class="sourceCode" id="cb208"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config vault create @json:<span class="st">&#39;{&quot;label&quot;:&quot;mylabel&quot;,&quot;password&quot;:&quot;my_password_here&quot;,&quot;description&quot;:&quot;for this account&quot;}&#39;</span></span></code></pre></div>
<h3 data-number="4.12.5" id="configuration-finder"><span class="header-section-number">4.12.5</span> Configuration Finder</h3>
<p>When a secret is needed by a sub command, the command can search for
existing configurations in the configuration file.</p>
<p>The lookup is done by comparing the service URL and username (or
access key).</p>
<h3 data-number="4.12.6" id="securing-passwords-and-secrets"><span class="header-section-number">4.12.6</span> Securing passwords and
secrets</h3>
<p>A password can be saved in clear in an <a href="#option-preset">Option Preset</a> together with other account
information (URL, username, etc...). Example:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset update myconf <span class="at">--url</span><span class="op">=</span>... <span class="at">--username</span><span class="op">=</span>... <span class="at">--password</span><span class="op">=</span>...</span></code></pre></div>
<p>For a more secure storage one can do:</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset update myconf <span class="at">--url</span><span class="op">=</span>... <span class="at">--username</span><span class="op">=</span>... <span class="at">--password</span><span class="op">=</span>@val:@vault:myconf.password</span></code></pre></div>
<div class="sourceCode" id="cb211"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config vault create @json:<span class="st">&#39;{&quot;label&quot;:&quot;myconf&quot;,&quot;password&quot;:&quot;my_password_here&quot;}&#39;</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Use <code>@val:</code> in front of <code>@vault:</code> so that the
extended value is not evaluated.</p></div>
</div>
<h2 data-number="4.13" id="private-key"><span class="header-section-number">4.13</span> Private Key</h2>
<p>Some Aspera applications allow the user to be authenticated using <a href="https://en.wikipedia.org/wiki/Public-key_cryptography">Public Key
Cryptography</a>:</p>
<ul>
<li>for SSH: Server</li>
<li>for OAuth JWT: AoC, Faspex5, Faspex, Shares</li>
</ul>
<p>It consists in using a pair of associated keys: a private key and a
public key. The same pair can be used for multiple applications. The
file containing the private key (key pair) can optionally be protected
by a passphrase. If the key is protected by a passphrase, then it will
be prompted when used. (some plugins support option
<code>passphrase</code>)</p>
<p>The following sample commands use the shell variable
<code>KEY_PAIR_PATH</code>. Set it to the desired safe location of the
private key. Typically, located in folder <code>$HOME/.ssh</code> or
<code>$HOME/.aspera/ascli</code>. For example:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="va">KEY_PAIR_PATH</span><span class="op">=</span>~/.aspera/ascli/my_private_key</span></code></pre></div>
<p>Several methods can be used to generate a key pair.</p>
<p>The format expected for keys is <a href="https://en.wikipedia.org/wiki/Privacy-Enhanced_Mail">PEM</a>.</p>
<p>If another format is used, such as <code>DER</code>, it can be
converted to <code>PEM</code>, e.g. using <code>openssl</code>.</p>
<h3 data-number="4.13.1" id="ascli-for-key-generation"><span class="header-section-number">4.13.1</span> <code>ascli</code> for key
generation</h3>
<p>The generated key is of type <code>RSA</code>, by default:
<strong>4096</strong> bit. For convenience, the public key is also
extracted with extension <code>.pub</code>. The key is not passphrase
protected.</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config genkey <span class="va">${KEY_PAIR_PATH}</span> 4096</span></code></pre></div>
<p>To display the public key of a private key:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config pubkey @file:<span class="va">${KEY_PAIR_PATH}</span></span></code></pre></div>
<h3 data-number="4.13.2" id="ssh-keygen"><span class="header-section-number">4.13.2</span> <code>ssh-keygen</code></h3>
<p>Both private and public keys are generated, option <code>-N</code> is
for passphrase.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh-keygen</span> <span class="at">-t</span> rsa <span class="at">-b</span> 4096 <span class="at">-m</span> PEM <span class="at">-N</span> <span class="st">&#39;&#39;</span> <span class="at">-f</span> <span class="va">${KEY_PAIR_PATH}</span></span></code></pre></div>
<h3 data-number="4.13.3" id="openssl"><span class="header-section-number">4.13.3</span> <code>openssl</code></h3>
<p>To generate a key pair with a passphrase the following can be used on
any system:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="ex">openssl</span> genrsa <span class="at">-passout</span> pass:_passphrase_here_ <span class="at">-out</span> <span class="va">${KEY_PAIR_PATH}</span> 4096</span>
<span id="cb216-2"><a href="#cb216-2" aria-hidden="true" tabindex="-1"></a><span class="ex">openssl</span> rsa <span class="at">-pubout</span> <span class="at">-in</span> <span class="va">${KEY_PAIR_PATH}</span> <span class="at">-out</span> <span class="va">${KEY_PAIR_PATH}</span>.pub</span></code></pre></div>
<p><code>openssl</code> is sometimes compiled to support option
<code>-nodes</code> (no DES, i.e. no passphrase, e.g. on macOS). In that
case, add option <code>-nodes</code> instead of
<code>-passout pass:_passphrase_here_</code> to generate a key without
passphrase.</p>
<p>If option <code>-nodes</code> is not available, the passphrase can be
removed using this method:</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="ex">openssl</span> rsa <span class="at">-passin</span> pass:_passphrase_here_ <span class="at">-in</span> <span class="va">${KEY_PAIR_PATH}</span> <span class="at">-out</span> <span class="va">${KEY_PAIR_PATH}</span>.no_des</span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mv</span> <span class="va">${KEY_PAIR_PATH}</span>.no_des <span class="va">${KEY_PAIR_PATH}</span></span></code></pre></div>
<p>To change (or add) the passphrase for a key do:</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="ex">openssl</span> rsa <span class="at">-des3</span> <span class="at">-in</span> <span class="va">${KEY_PAIR_PATH}</span> <span class="at">-out</span> <span class="va">${KEY_PAIR_PATH}</span>.with_des</span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mv</span> <span class="va">${KEY_PAIR_PATH}</span>.with_des <span class="va">${KEY_PAIR_PATH}</span></span></code></pre></div>
<h3 data-number="4.13.4" id="using-an-application-to-generate-a-key-pair"><span class="header-section-number">4.13.4</span> Using an application to
generate a key pair</h3>
<p>Many applications are available, including on internet, to generate
key pairs. For example: <a href="https://cryptotools.net/rsagen">https://cryptotools.net/rsagen</a></p>
<div class="admonition caution">
<div class="admonition-title">Caution</div>
<div class="admonition-body"><p>Be careful that private keys are sensitive information, and shall be
kept secret (like a password), so using online tools is risky.</p></div>
</div>
<h2 data-number="4.14" id="web-service"><span class="header-section-number">4.14</span> Web service</h2>
<p>Some plugins start a local web server. This server can server HTTP or
HTTPS (with certificate):</p>
<p>The following parameters are supported:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>String</code></td>
<td><code>http://localhost:8080</code></td>
<td>Base URL on which requests are listened, a path can be
provided.</td>
</tr>
<tr>
<td><code>cert</code></td>
<td><code>String</code></td>
<td>-</td>
<td>(HTTPS) Path to certificate file (with ext. <code>.pfx</code> or
<code>.p12</code> for PKCS12)</td>
</tr>
<tr>
<td><code>key</code></td>
<td><code>String</code></td>
<td>-</td>
<td>(HTTPS) Path to private key file (PEM), or passphrase for
PKCS12</td>
</tr>
<tr>
<td><code>chain</code></td>
<td><code>String</code></td>
<td>-</td>
<td>(HTTPS) Path to certificate chain (PEM only)</td>
</tr>
</tbody>
</table>
<p>Parameter <code>url</code> (base URL) defines:</p>
<ul>
<li>If <code>http</code> or <code>https</code> is used</li>
<li>The local port number (default 443 for HTTPS, 80 for HTTP)</li>
<li>The <strong>base path</strong>, i.e. the path under which requests
are received, if a reverse proxy is used this can be used to route.</li>
</ul>
<h2 data-number="4.15" id="image-and-video-thumbnails"><span class="header-section-number">4.15</span> Image and video
thumbnails</h2>
<p><code>ascli</code> can display thumbnails for images and videos in
the terminal. This is available:</p>
<ul>
<li>In the <code>thumbnail</code> command of <code>node</code> when
using <strong>gen4/access key</strong> API.</li>
<li>When using the <code>show</code> command of <code>preview</code>
plugin.</li>
<li><code>coffee</code> and <code>image</code> commands of
<code>config</code> plugin.</li>
<li>Any displayed value which is a URL to image can be displayed with
option <code>format</code> set to <code>image</code></li>
</ul>
<p>The following options can be specified in the option
<code>image</code>:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>reserve</td>
<td><code>Integer</code></td>
<td>Lines reserved to display a status</td>
</tr>
<tr>
<td>text</td>
<td><code>Bool</code></td>
<td>Display text instead of image</td>
</tr>
<tr>
<td>double</td>
<td><code>Bool</code></td>
<td>Display double text resolution (half characters)</td>
</tr>
<tr>
<td>font_ratio</td>
<td><code>Float</code></td>
<td>Font height/width ratio in terminal</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb219"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config image https://eudemo.asperademo.com/wallpaper.jpg <span class="at">--ui</span><span class="op">=</span>text <span class="at">--image</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;text&quot;:true}&#39;</span></span></code></pre></div>
<div class="sourceCode" id="cb220"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-so</span> <span class="at">-</span> https://eudemo.asperademo.com/wallpaper.jpg <span class="kw">|</span> <span class="ex">ascli</span> config image @stdbin:</span></code></pre></div>
<div class="sourceCode" id="cb221"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="at">-n</span> https://eudemo.asperademo.com/wallpaper.jpg <span class="kw">|</span> <span class="ex">ascli</span> config image @uri:@stdin:</span></code></pre></div>
<h2 data-number="4.16" id="graphical-interactions-browser-and-text-editor"><span class="header-section-number">4.16</span> Graphical Interactions:
Browser and Text Editor</h2>
<p>Some actions may require the use of a graphical tool:</p>
<ul>
<li>A browser for Aspera on Cloud authentication (web auth method)</li>
<li>A text editor for configuration file edition</li>
</ul>
<p>By default, <code>ascli</code> assumes that a graphical environment
is available on Windows, and on other systems, rely on the presence of
the <code>DISPLAY</code> environment variable. It is also possible to
force the graphical mode with option <code>--ui</code> :</p>
<ul>
<li><code>--ui=graphical</code> forces a graphical environment, a
browser will be opened for URLs or a text editor for file edition.</li>
<li><code>--ui=text</code> forces a text environment, the URL or file
path to open is displayed on terminal.</li>
</ul>
<h2 data-number="4.17" id="logging-debugging"><span class="header-section-number">4.17</span> Logging, Debugging</h2>
<p>The gem is equipped with traces, mainly for debugging and learning
APIs.</p>
<p>To increase debug level, use option <code>log_level</code> (e.g.
using command line <code>--log-level=xx</code>, env var
<code>ASCLI_LOG_LEVEL</code>, or an <a href="#option-preset">Option
Preset</a>).</p>
<p>By default, passwords and secrets are redacted from logs. Set option
<code>log_secrets</code> to <code>yes</code> to include secrets in
logs.</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Values</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>logger</code></td>
<td><code>stdout</code><br /><code>stderr</code><br /><code>syslog</code></td>
<td>Type of output.<br />Default: <code>stderr</code></td>
</tr>
<tr>
<td><code>log_level</code></td>
<td><code>trace2</code><br /><code>trace1</code><br /><code>debug</code><br /><code>info</code><br /><code>warn</code><br /><code>error</code></td>
<td>Minimum level displayed.<br />Default: <code>warn</code></td>
</tr>
<tr>
<td><code>log_secrets</code></td>
<td><code>yes</code><br /><code>no</code></td>
<td>Show or hide secrets in logs.<br />Default: <code>no</code>
(Hide)</td>
</tr>
<tr>
<td><code>log_format</code></td>
<td><code>Proc</code></td>
<td>A lambda function that formats the log.<br />Default:
<code>-&gt;(s, _d, _p, m){&quot;#{s[0]} #{m}\n&quot;}</code><br /><code>Aspera::Log::DEFAULT_FORMATTER</code>
: see above.<br /><code>Aspera::Log::STANDARD_FORMATTER</code> : Standard
Ruby formatter.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>When using the <code>direct</code> agent (<code>ascp</code>),
additional transfer logs can be activated using <code>ascp</code>
options and <code>ascp_args</code>, see <a href="#agent-direct"><code>direct</code></a>.</p></div>
</div>
<p>Option <code>log_format</code> is typically set using
<code>@ruby:</code>. It is a lambda that takes 4 arguments, see: <a href="https://github.com/ruby/logger/blob/master/lib/logger/formatter.rb">Ruby
Formatter</a> : <code>severity</code>, <code>time</code>,
<code>progname</code>, <code>msg</code>.</p>
<p>Examples:</p>
<ul>
<li>Display debugging log on <code>stdout</code>:</li>
</ul>
<div class="sourceCode" id="cb222"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config pre over <span class="at">--log-level</span><span class="op">=</span>debug <span class="at">--logger</span><span class="op">=</span>stdout</span></code></pre></div>
<ul>
<li>Log errors to <code>syslog</code>:</li>
</ul>
<div class="sourceCode" id="cb223"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config pre over <span class="at">--log-level</span><span class="op">=</span>error <span class="at">--logger</span><span class="op">=</span>syslog</span></code></pre></div>
<p>When <code>ascli</code> is used interactively in a shell, the shell
itself will usually log executed commands in the history file.</p>
<h2 data-number="4.18" id="learning-aspera-product-apis-rest"><span class="header-section-number">4.18</span> Learning Aspera Product APIs
(REST)</h2>
<p><code>ascli</code> uses mainly REST APIs to interact with Aspera
applications.</p>
<p>To get traces of execution, with dump of API calls, use argument :
<code>--log-level=debug</code>.</p>
<p>To display HTTP/S traffic set option <code>log_level</code> to
<code>trace2</code>: <code>--log-level=trace2</code>. It will display
the exact content of HTTP requests and responses.</p>
<h2 data-number="4.19" id="http-socket-parameters"><span class="header-section-number">4.19</span> HTTP socket parameters</h2>
<p>To ignore SSL certificate for <strong>any</strong> address/port, use
option: <code>insecure</code>, i.e. <code>--insecure=yes</code>. To
ignore SSL certificate for a list of specific address/port, use option
<code>ignore_certificate</code>, set to an <code>Array</code> of URL for
which certificate will be ignored (only the address and port are
matched), e.g.
<code>--ignore-certificate=@list:,https://127.0.0.1:9092</code></p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Ignoring certificate also applies to <code>ascp</code> WSS.</p></div>
</div>
<p>Ignoring a certificate is <strong>not recommended</strong>. It is
preferable to add the certificate to the trusted store. When certificate
validation is skipped, a warning is displayed. To disable this warning,
set the option <code>warn_insecure</code> to <code>no</code>.</p>
<p>HTTP connection parameters (not <code>ascp</code> WSS) can be
adjusted using option <code>http_options</code>:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Handler</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>read_timeout</code></td>
<td><code>Integer</code></td>
<td><code>60</code></td>
<td>Ruby</td>
</tr>
<tr>
<td><code>write_timeout</code></td>
<td><code>Integer</code></td>
<td><code>60</code></td>
<td>Ruby</td>
</tr>
<tr>
<td><code>open_timeout</code></td>
<td><code>Integer</code></td>
<td><code>60</code></td>
<td>Ruby</td>
</tr>
<tr>
<td><code>keep_alive_timeout</code></td>
<td><code>Integer</code></td>
<td><code>2</code></td>
<td>Ruby</td>
</tr>
<tr>
<td><code>ssl_options</code></td>
<td><code>Array</code></td>
<td>See below</td>
<td>Ruby</td>
</tr>
<tr>
<td><code>user_agent</code></td>
<td><code>Integer</code></td>
<td><code>ascli</code></td>
<td><code>ascli</code></td>
</tr>
<tr>
<td><code>download_partial_suffix</code></td>
<td><code>Integer</code></td>
<td><code>.http_partial</code></td>
<td><code>ascli</code></td>
</tr>
<tr>
<td><code>retry_on_error</code></td>
<td><code>Bool</code></td>
<td><code>false</code></td>
<td><code>ascli</code></td>
</tr>
<tr>
<td><code>retry_on_timeout</code></td>
<td><code>Bool</code></td>
<td><code>true</code></td>
<td><code>ascli</code></td>
</tr>
<tr>
<td><code>retry_on_unavailable</code></td>
<td><code>Bool</code></td>
<td><code>true</code></td>
<td><code>ascli</code></td>
</tr>
<tr>
<td><code>retry_max</code></td>
<td><code>Integer</code></td>
<td><code>1</code></td>
<td><code>ascli</code></td>
</tr>
<tr>
<td><code>retry_sleep</code></td>
<td><code>Integer</code></td>
<td><code>4</code></td>
<td><code>ascli</code></td>
</tr>
</tbody>
</table>
<p>Time values are in set <strong>seconds</strong> and can be of type
either <code>Integer</code> or <code>Float</code>. Default values are
the ones of Ruby: For a full list, refer to the Ruby library: <a href="https://github.com/ruby/net-http/blob/master/lib/net/http.rb"><code>Net::HTTP</code></a>.</p>
<p>Like any other option, those can be set either on command line, or in
configuration file, either in a global preset or server-specific
one.</p>
<p>Example:</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin package list <span class="at">--http-options</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;read_timeout&quot;:10.0}&#39;</span></span></code></pre></div>
<p><code>ssl_options</code> corresponds to a list of options as listed
in <code>man SSL_CTX_set_options</code>. The default initial value is
the default of Ruby as specified in <code>openssl/ssl.rb</code>. Each
option can be specified as a <code>String</code> with the same name as
in the OpenSSL library by removing the prefix: <code>SSL_OP_</code>, or
an <code>Integer</code> (e.g. <code>0</code> resets to no option). If
the name appears in the list, the option is set. If the name appears in
the list prefixed with a hyphen (<code>-</code>), the option is unset.
For example to enable option
<code>SSL_OP_CIPHER_SERVER_PREFERENCE</code>, add it to the list as
<code>CIPHER_SERVER_PREFERENCE</code>. To disable option
<code>SSL_OP_SAFARI_ECDHE_ECDSA_BUG</code>, add it as
<code>-SAFARI_ECDHE_ECDSA_BUG</code>.</p>
<p>Example:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;ssl_options&quot;</span><span class="fu">:</span><span class="ot">[</span><span class="st">&quot;CIPHER_SERVER_PREFERENCE&quot;</span><span class="ot">,</span><span class="st">&quot;-SAFARI_ECDHE_ECDSA_BUG&quot;</span><span class="ot">]</span><span class="fu">}</span></span></code></pre></div>
<h2 data-number="4.20" id="proxy"><span class="header-section-number">4.20</span> Proxy</h2>
<p>There are several types of network connections, each of them use a
different mechanism to define a (forward) <strong>proxy</strong>:</p>
<ul>
<li>REST calls (APIs) and HTTP Gateway</li>
<li><code>ascp</code> WSS and Legacy Aspera HTTP/S Fallback</li>
<li><code>ascp</code> SSH and UDP (Aspera FASP)</li>
</ul>
<p>Refer to the following sections.</p>
<h3 data-number="4.20.1" id="proxy-for-rest-and-http-gateway"><span class="header-section-number">4.20.1</span> Proxy for REST and HTTP
Gateway</h3>
<p>REST API calls and transfers based on HTTP Gateway both use Ruby&#39;s
<code>Net::HTTP</code> class. Refer to <a href="https://rubyapi.org/3.0/o/uri/generic#method-i-find_proxy">Ruby
find proxy</a>.</p>
<p>When Ruby HTTP is used, there are two possibilities to define an HTTP
proxy to be used.</p>
<p>The <code>http_proxy</code> environment variable (<strong>lower
case</strong>) can be set to the <strong>URL</strong> of the proxy (with
optional credentials). Syntax is:
<code>(http|https)://[user:password@]host:port</code>. E.g.
<code>http://myproxy.org.net:3128</code>.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Ruby expects a URL and <code>myproxy.org.net:3128</code> alone is
<strong>not</strong> valid.</p></div>
</div>
<p>Credentials for proxy are optional but can also be specified:</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">http_proxy</span><span class="op">=</span>http://my_user_here:my_pass_here@proxy.example.com:3128</span></code></pre></div>
<p>Option <code>http_proxy</code> does the same (set env var) but on
command line:</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> <span class="at">--http-proxy</span><span class="op">=</span>http://my_user_here:my_pass_here@host:port ...</span></code></pre></div>
<p>Alternatively, the <code>fpac</code> option (function for proxy auto
config) can be set to a <a href="https://en.wikipedia.org/wiki/Proxy_auto-config">Proxy Auto
Configuration (PAC)</a> JavaScript value.</p>
<p>Note that proxy credentials are not supported in PAC files.</p>
<p>To read the script from a URL (<code>http:</code>,
<code>https:</code> and <code>file:</code>), use prefix:
<code>@uri:</code>. A minimal script can be specified to define the use
of a local proxy:</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> <span class="at">--fpac</span><span class="op">=</span><span class="st">&#39;function FindProxyForURL(url, host){return &quot;PROXY localhost:3128&quot;}&#39;</span> ...</span></code></pre></div>
<p>The result of a PAC file can be tested with command:
<code>config proxy_check</code>. Example, using command line option:</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config proxy_check <span class="at">--fpac</span><span class="op">=</span><span class="st">&#39;function FindProxyForURL(url, host) {return &quot;PROXY proxy.example.com:3128;DIRECT&quot;;}&#39;</span> http://example.com</span></code></pre></div>
<pre class="text"><code>PROXY proxy.example.com:1234;DIRECT</code></pre>
<div class="sourceCode" id="cb231"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config proxy_check <span class="at">--fpac</span><span class="op">=</span>@file:./proxy.pac http://www.example.com</span></code></pre></div>
<pre class="text"><code>PROXY proxy.example.com:8080</code></pre>
<div class="sourceCode" id="cb233"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config proxy_check <span class="at">--fpac</span><span class="op">=</span>@uri:http://server/proxy.pac http://www.example.com</span></code></pre></div>
<pre class="text"><code>PROXY proxy.example.com:8080</code></pre>
<p>If the proxy found with the PAC requires credentials, then use option
<code>proxy_credentials</code> with username and password provided as an
<code>Array</code>:</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> <span class="at">--proxy-credentials</span><span class="op">=</span>@json:<span class="st">&#39;[&quot;__username_here__&quot;,&quot;__password_here__&quot;]&#39;</span> ...</span></code></pre></div>
<div class="sourceCode" id="cb236"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> <span class="at">--proxy-credentials</span><span class="op">=</span>@list::__username_here__:__password_here__ ...</span></code></pre></div>
<h3 data-number="4.20.2" id="proxy-for-legacy-aspera-https-fallback"><span class="header-section-number">4.20.2</span> Proxy for Legacy Aspera
HTTP/S Fallback</h3>
<p>Only supported with the <code>direct</code> agent: To specify a proxy
for legacy HTTP fallback, use <code>ascp</code> native option
<code>-x</code> and <code>ascp_args</code>:
<code>--transfer-info=@json:&#39;{&quot;ascp_args&quot;:[&quot;-x&quot;,&quot;url_here&quot;]}&#39;</code>.</p>
<h3 data-number="4.20.3" id="fasp-proxy-forward-for-transfers"><span class="header-section-number">4.20.3</span> FASP proxy (forward) for
transfers</h3>
<p>To specify a FASP proxy (forward), set the <a href="#transfer-specification"><strong>transfer-spec</strong></a>
parameter: <code>proxy</code> (only supported with the
<code>direct</code> agent).</p>
<p>For example, for an Aspera forward proxy not encrypted (HTTP) without
authentication running on port 9091, the option would be:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--ts=@json:</span><span class="st">&#39;{&quot;proxy&quot;:&quot;dnat://proxy.example.org:9091&quot;}&#39;</span></span></code></pre></div>
<p>Or, alternatively, (prefer transfer spec like above, generally):</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--transfer-info=@json:</span><span class="st">&#39;{&quot;ascp_args&quot;:[&quot;--proxy&quot;,&quot;dnat://proxy.example.org:9091&quot;]}&#39;</span></span></code></pre></div>
<h2 data-number="4.21" id="fasp-configuration"><span class="header-section-number">4.21</span> FASP configuration</h2>
<p><code>ascli</code> uses one of the transfer agents to execute
transfers.</p>
<p>By default, it uses the <code>direct</code> agent, which is basically
a local <code>ascp</code>. Nevertheless, <code>ascli</code> does not
come with <code>ascp</code> installed. This is the reason why it is
advised to install the Aspera Transfer Daemon during installation
(<code>ascli config ascp install</code>).</p>
<p>By default, <code>ascli</code> uses the <code>ascp</code> binary
found in <strong>well known locations</strong>, i.e. typical Aspera
product installation paths.</p>
<p>The way to specify the location of <code>ascp</code> is to use either
options:</p>
<ul>
<li><code>ascp_path</code></li>
<li><code>use_product</code></li>
</ul>
<p>The <code>config</code> plugin allows finding and specifying the
location of <code>ascp</code>. It provides the following commands for
<code>ascp</code> sub-command:</p>
<ul>
<li><code>show</code> : shows the path of <code>ascp</code> used</li>
<li><code>use</code> : specify the <code>ascp</code> path to use</li>
<li><code>products</code> : list Aspera transfer products available
locally</li>
<li><code>connect</code> : list and download connect client versions
available on internet</li>
</ul>
<h3 data-number="4.21.1" id="show-path-of-currently-used-ascp"><span class="header-section-number">4.21.1</span> Show path of currently used
<code>ascp</code></h3>
<div class="sourceCode" id="cb239"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp show</span></code></pre></div>
<pre class="text"><code>/Users/laurent/.aspera/ascli/sdk/ascp</code></pre>
<div class="sourceCode" id="cb241"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp info</span></code></pre></div>
<pre class="text"><code>╭─────────┬──────────────────────────────────────────────────╮
│ field   │ value                                            │
╞═════════╪══════════════════════════════════════════════════╡
│ ascp    │ /Users/john/.aspera/sdk/ascp                     │
...
╰─────────┴──────────────────────────────────────────────────╯</code></pre>
<h3 data-number="4.21.2" id="selection-of-ascp-location-for-direct-agent"><span class="header-section-number">4.21.2</span> Selection of
<code>ascp</code> location for <a href="#agent-direct"><code>direct</code></a> agent</h3>
<p>By default, <code>ascli</code> uses any found local product with
<code>ascp</code>, including Transfer Daemon.</p>
<p>To override and use an alternate <code>ascp</code> path use option
<code>ascp_path</code> (<code>--ascp-path=</code>)</p>
<p>For a permanent change, the command <code>config ascp use</code> sets
the same option for the global default.</p>
<p>Using a POSIX shell:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp use @path:<span class="st">&#39;~/Applications/Aspera CLI/bin/ascp&#39;</span></span></code></pre></div>
<pre class="text"><code>ascp version: 4.0.0.182279
Updated: global_common_defaults: ascp_path &lt;- /Users/laurent/Applications/Aspera CLI/bin/ascp
Saved to default global preset global_common_defaults</code></pre>
<p>Windows:</p>
<pre class="text"><code>ascli config ascp use C:\Users\admin\.aspera\ascli\sdk\ascp.exe</code></pre>
<pre class="text"><code>ascp version: 4.0.0.182279
Updated: global_common_defaults: ascp_path &lt;- C:\Users\admin\.aspera\ascli\sdk\ascp.exe
Saved to default global preset global_common_defaults</code></pre>
<p>If the path has spaces, read section: <a href="#command-line-parsing-special-characters">Shell and Command line
parsing</a>.</p>
<p>If option <code>ascp_path</code> is not set, then the product
identified with option <code>use_product</code> is used.</p>
<p>If <code>use_product</code> is not set, then the first product found
is used, this is equivalent to using option:
<code>--use-product=FIRST</code>.</p>
<p>Locally installed Aspera products can be listed with:</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp products list</span></code></pre></div>
<pre class="text"><code>+---------------------------------------+----------------------------------------+
| name                                  | app_root                               |
+---------------------------------------+----------------------------------------+
| IBM Aspera SDK                        | /Users/laurent/.aspera/ascli/sdk       |
| Aspera Connect                        | /Applications/Aspera Connect.app       |
| IBM Aspera CLI                        | /Users/laurent/Applications/Aspera CLI |
| IBM Aspera High-Speed Transfer Server | /Library/Aspera                        |
+---------------------------------------+----------------------------------------+</code></pre>
<p>Using the option <code>use_product</code> finds the <code>ascp</code>
binary of the selected product.</p>
<p>To permanently use the <code>ascp</code> of a product:</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp products use <span class="st">&#39;Aspera Connect&#39;</span></span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true" tabindex="-1"></a><span class="ex">saved</span> to default global preset /Users/laurent/Applications/Aspera Connect.app/Contents/Resources/ascp</span></code></pre></div>
<h3 data-number="4.21.3" id="installation-of-connect-client-on-command-line"><span class="header-section-number">4.21.3</span> Installation of Connect
Client on command line</h3>
<div class="sourceCode" id="cb250"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp connect list</span></code></pre></div>
<pre class="text"><code>+-----------------------------------------------+--------------------------------------+-----------+
| id                                            | title                                | version   |
+-----------------------------------------------+--------------------------------------+-----------+
| urn:uuid:589F9EE5-0489-4F73-9982-A612FAC70C4E | Aspera Connect for Windows           | 3.11.2.63 |
| urn:uuid:A3820D20-083E-11E2-892E-0800200C9A66 | Aspera Connect for Windows 64-bit    | 3.11.2.63 |
| urn:uuid:589F9EE5-0489-4F73-9982-A612FAC70C4E | Aspera Connect for Windows XP        | 3.11.2.63 |
| urn:uuid:55425020-083E-11E2-892E-0800200C9A66 | Aspera Connect for Windows XP 64-bit | 3.11.2.63 |
| urn:uuid:D8629AD2-6898-4811-A46F-2AF386531BFF | Aspera Connect for Mac Intel         | 3.11.2.63 |
| urn:uuid:97F94DF0-22B1-11E2-81C1-0800200C9A66 | Aspera Connect for Linux 64          | 3.11.2.63 |
+-----------------------------------------------+--------------------------------------+-----------+</code></pre>
<div class="sourceCode" id="cb252"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp connect version <span class="st">&#39;Aspera Connect for Mac Intel&#39;</span> list</span></code></pre></div>
<pre class="text"><code>+-------------------------------------------+--------------------------+-----------------------------------------------------------------------------------------+----------+---------------------+
| title                                     | type                     | href                                                                                    | hreflang | rel                 |
+-------------------------------------------+--------------------------+-----------------------------------------------------------------------------------------+----------+---------------------+
| Mac Intel Installer                       | application/octet-stream | bin/IBMAsperaConnectInstaller-3.11.2.63.dmg                                             | en       | enclosure           |
| Mac Intel Installer                       | application/octet-stream | bin/IBMAsperaConnectInstallerOneClick-3.11.2.63.dmg                                     | en       | enclosure-one-click |
| Aspera Connect for Mac HTML Documentation | text/html                | https://www.ibm.com/docs/en/aspera-connect/3.11?topic=aspera-connect-user-guide-macos   | en       | documentation       |
| Aspera Connect for Mac Release Notes      | text/html                | https://www.ibm.com/docs/en/aspera-connect/3.11?topic=notes-release-aspera-connect-3112 | en       | release-notes       |
+-------------------------------------------+--------------------------+-----------------------------------------------------------------------------------------+----------+---------------------+</code></pre>
<div class="sourceCode" id="cb254"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp connect version <span class="st">&#39;Aspera Connect for Mac Intel&#39;</span> download enclosure <span class="at">--to-folder</span><span class="op">=</span>.</span></code></pre></div>
<pre class="text"><code>Time: 00:00:02 ============================================= 100% 27766 KB/sec Time: 00:00:02
Downloaded: IBMAsperaConnectInstaller-3.11.2.63.dmg</code></pre>
<h2 data-number="4.22" id="transfer-clients-agents"><span class="header-section-number">4.22</span> Transfer Clients: Agents</h2>
<p>Some actions on Aspera Applications lead to file transfers (upload
and download) using the FASP protocol (<code>ascp</code>). Transfers
will be executed by a transfer client, here called <strong>Transfer
Agent</strong>.</p>
<p>The following agents are supported and selected with option
<code>transfer</code>:</p>
<table>
<thead>
<tr>
<th><code>transfer</code></th>
<th>location</th>
<th>Description of agent</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#agent-direct"><code>direct</code></a></td>
<td>local</td>
<td>direct execution of <code>ascp</code></td>
</tr>
<tr>
<td><a href="#agent-transfer-daemon"><code>transferd</code></a></td>
<td>local</td>
<td>Aspera Transfer Daemon</td>
</tr>
<tr>
<td><a href="#agent-connect-client"><code>connect</code></a></td>
<td>local</td>
<td>Aspera Connect Client</td>
</tr>
<tr>
<td><a href="#agent-desktop-client"><code>desktop</code></a></td>
<td>local</td>
<td>Aspera for Desktop</td>
</tr>
<tr>
<td><a href="#agent-node-api"><code>node</code></a></td>
<td>remote</td>
<td>Aspera Transfer Node</td>
</tr>
<tr>
<td><a href="#agent-http-gateway"><code>httpgw</code></a></td>
<td>remote</td>
<td>Aspera HTTP Gateway</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>All transfer operations are seen from the point of view of the agent.
For example, an agent executing an <strong>upload</strong>, or
<strong>package send</strong> operation will effectively push files to
the related server from the system where the agent runs.</p></div>
</div>
<p>All above agents (including <code>direct</code>) receive transfer
parameters as a <a href="#transfer-specification"><strong>transfer-spec</strong></a>.
Parameters in transfer-spec can be modified with option
<code>ts</code>.</p>
<p><strong>Specific</strong> options for agents are provided with option
<code>transfer_info</code>.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Parameters in <code>transfer_info</code> are specific for each agent
type and are described in the agents respective sections.</p></div>
</div>
<h3 data-number="4.22.1" id="agent-direct"><span class="header-section-number">4.22.1</span> Agent: Direct</h3>
<p>The <code>direct</code> agent directly executes a local
<code>ascp</code> in <code>ascli</code>. This is the default agent for
<code>ascli</code> (option <code>--transfer=direct</code>).
<code>ascli</code> will locally search installed Aspera products,
including SDK, and use <code>ascp</code> from that component. Refer to
section <a href="#fasp-configuration">FASP</a>.</p>
<p>The <code>transfer_info</code> option accepts the following optional
parameters to control multi-session, Web Socket Session, Resume policy
and add any argument to <code>ascp</code>:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>wss</code></td>
<td><code>Bool</code></td>
<td>Web Socket Session<br />Enable use of web socket session in case it
is available<br />Default: <code>true</code></td>
</tr>
<tr>
<td><code>quiet</code></td>
<td><code>Bool</code></td>
<td>If <code>true</code>, then <code>ascp</code> progress bar is not
shown.<br />Default: <code>false</code></td>
</tr>
<tr>
<td><code>trusted_certs</code></td>
<td><code>Array</code></td>
<td>List of repositories for trusted certificates.</td>
</tr>
<tr>
<td><code>client_ssh_key</code></td>
<td><code>String</code></td>
<td>SSH Keys to use for token-based transfers.<br />One of:
<code>dsa_rsa</code>, <code>rsa</code>,
<code>per_client</code>.<br />Default: <code>rsa</code></td>
</tr>
<tr>
<td><code>ascp_args</code></td>
<td><code>Array</code></td>
<td><code>Array</code> of strings with native <code>ascp</code>
arguments.<br />Default: <code>[]</code></td>
</tr>
<tr>
<td><code>spawn_timeout_sec</code></td>
<td><code>Float</code></td>
<td>Multi session<br />Verification time that <code>ascp</code> is
running<br />Default: <code>3</code></td>
</tr>
<tr>
<td><code>spawn_delay_sec</code></td>
<td><code>Float</code></td>
<td>Multi session<br />Delay between startup of sessions<br />Default:
<code>2</code></td>
</tr>
<tr>
<td><code>multi_incr_udp</code></td>
<td><code>Bool</code></td>
<td>Multi Session<br />Increment UDP port on multi-session<br />If
<code>true</code>, each session will have a different UDP port starting
at <code>fasp_port</code> (or default 33001)<br />Else, each session will
use <code>fasp_port</code> (or <code>ascp</code> default)<br />Default:
<code>true</code> on Windows, else <code>false</code></td>
</tr>
<tr>
<td><code>resume</code></td>
<td><code>Hash</code></td>
<td>Resume parameters. See below.</td>
</tr>
<tr>
<td><code>resume.iter_max</code></td>
<td><code>Integer</code></td>
<td>Max number of retry on error<br />Default: <code>7</code></td>
</tr>
<tr>
<td><code>resume.sleep_initial</code></td>
<td><code>Integer</code></td>
<td>First Sleep before retry<br />Default: <code>2</code></td>
</tr>
<tr>
<td><code>resume.sleep_factor</code></td>
<td><code>Integer</code></td>
<td>Multiplier of sleep period between attempts<br />Default:
<code>2</code></td>
</tr>
<tr>
<td><code>resume.sleep_max</code></td>
<td><code>Integer</code></td>
<td>Default: <code>60</code></td>
</tr>
<tr>
<td><code>monitor</code></td>
<td><code>Bool</code></td>
<td>Use management port.<br />Default: <code>true</code></td>
</tr>
</tbody>
</table>
<p>In case of transfer interruption, the agent will
<strong>resume</strong> a transfer up to <code>iter_max</code> time.
Sleep between iterations is given by the following formula where
<code>iter_index</code> is the current iteration index, starting at
0:</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="ex">max</span><span class="er">(</span> <span class="ex">sleep_max,</span> sleep_initial <span class="pp">*</span> sleep_factor ^ iter_index <span class="kw">)</span></span></code></pre></div>
<p>To display the native progress bar of <code>ascp</code>, use
<code>--progress-bar=no --transfer-info=@json:&#39;{&quot;quiet&quot;:false}&#39;</code>.</p>
<p>To skip usage of management port (which disables custom progress
bar), set option <code>monitor</code> to <code>false</code>. In that,
use the native progress bar:
<code>--transfer-info=@json:&#39;{&quot;monitor&quot;:false,&quot;quiet&quot;:false}&#39;</code></p>
<p>By default, Ruby&#39;s root CA store is used to validate any HTTPS
endpoint used by <code>ascp</code> (e.g. WSS). In order to use a custom
certificate store, use the <code>trusted_certs</code> option of direct
agent&#39;s option <code>transfer_info</code>. To use <code>ascp</code>&#39;s
default, use option:
<code>--transfer-info=@json:&#39;{&quot;trusted_certs&quot;:null}&#39;</code>.</p>
<p>Some transfer errors are considered <strong>retry-able</strong> (e.g.
timeout) and some other not (e.g. wrong password). The list of known
protocol errors and retry level can be listed:</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp errors</span></code></pre></div>
<p>Examples:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> ... <span class="at">--transfer-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;wss&quot;:true,&quot;resume&quot;:{&quot;iter_max&quot;:20}}&#39;</span></span>
<span id="cb258-2"><a href="#cb258-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> ... <span class="at">--transfer-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;spawn_delay_sec&quot;:2.5,&quot;multi_incr_udp&quot;:false}&#39;</span></span></code></pre></div>
<p>This can be useful to activate logging using option <code>-L</code>
of <code>ascp</code>. For example, to activate debug level 2 for
<code>ascp</code> (<code>DD</code>), and display those logs on the
terminal (<code>-</code>):</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--transfer-info=@json:</span><span class="st">&#39;{&quot;ascp_args&quot;:[&quot;-DDL-&quot;]}&#39;</span></span></code></pre></div>
<p>This is useful to debug if a transfer fails.</p>
<p>To store <code>ascp</code> logs in file
<code>aspera-scp-transfer.log</code> in a folder, use
<code>--transfer-info=@json:&#39;{&quot;ascp_args&quot;:[&quot;-L&quot;,&quot;/path/to/folder&quot;]}&#39;</code>.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>When transfer agent <a href="#agent-direct"><code>direct</code></a>
is used, the list of files to transfer is provided to <code>ascp</code>
using either <code>--file-list</code> or <code>--file-pair-list</code>
and a file list (or pair) file generated in a temporary folder. (unless
<code>--file-list</code> or <code>--file-pair-list</code> is provided
using <code>transfer_info</code> parameter <code>ascp_args</code>).</p></div>
</div>
<p>In addition to standard methods described in section <a href="#list-of-files-for-transfers">File List</a>, it is possible to
specify the list of file using those additional methods:</p>
<ul>
<li>Using option <code>transfer_info</code> parameter
<code>ascp_args</code></li>
</ul>
<div class="sourceCode" id="cb260"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--sources=@ts</span> <span class="at">--transfer-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;ascp_args&quot;:[&quot;--file-list&quot;,&quot;myfilelist&quot;]}&#39;</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>File lists is shown here, there are also similar options for file
pair lists.</p></div>
</div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Those 2 additional methods avoid the creation of a copy of the file
list: if the standard options
<code>--sources=@lines:@file:... --src-type=...</code> are used, then
the file is list read and parsed, and a new file list is created in a
temporary folder.</p></div>
</div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Those methods have limitations: they apply <strong>only</strong> to
the <a href="#agent-direct"><code>direct</code></a> transfer agent (i.e.
local <code>ascp</code>) and not for Aspera on Cloud.</p></div>
</div>
<h4 data-number="4.22.1.1" id="agent-direct-asperaconf-virtual-links"><span class="header-section-number">4.22.1.1</span> Agent: Direct:
<code>aspera.conf</code>: Virtual Links</h4>
<p>This agent supports a local configuration file:
<code>aspera.conf</code> where Virtual links can be configured:</p>
<p>On a server (HSTS), the following commands can be used to set a
global virtual link:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="ex">asconfigurator</span> <span class="at">-x</span> <span class="st">&#39;set_trunk_data;id,1;trunk_name,in;trunk_capacity,45000;trunk_on,true&#39;</span></span>
<span id="cb261-2"><a href="#cb261-2" aria-hidden="true" tabindex="-1"></a><span class="ex">asconfigurator</span> <span class="at">-x</span> <span class="st">&#39;set_trunk_data;id,2;trunk_name,out;trunk_capacity,45000;trunk_on,true&#39;</span></span>
<span id="cb261-3"><a href="#cb261-3" aria-hidden="true" tabindex="-1"></a><span class="ex">asconfigurator</span> <span class="at">-x</span> <span class="st">&#39;set_node_data;transfer_in_bandwidth_aggregate_trunk_id,1&#39;</span></span>
<span id="cb261-4"><a href="#cb261-4" aria-hidden="true" tabindex="-1"></a><span class="ex">asconfigurator</span> <span class="at">-x</span> <span class="st">&#39;set_node_data;transfer_out_bandwidth_aggregate_trunk_id,2&#39;</span></span></code></pre></div>
<p>But this command is not available on clients, so edit the file
<code>aspera.conf</code>, you can find the location with:
<code>ascli config ascp info --fields=aspera_conf</code> and modify the
sections <code>default</code> and <code>trunks</code> like this for a
global 100 Mbps virtual link:</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="fu">&lt;?xml</span> <span class="ot">version=</span><span class="st">&#39;1.0&#39;</span> <span class="ot">encoding=</span><span class="st">&#39;UTF-8&#39;</span><span class="fu">?&gt;</span></span>
<span id="cb262-2"><a href="#cb262-2" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">CONF</span> <span class="ot">version=</span><span class="st">&quot;2&quot;</span>&gt;</span>
<span id="cb262-3"><a href="#cb262-3" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">default</span>&gt;</span>
<span id="cb262-4"><a href="#cb262-4" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">transfer</span>&gt;</span>
<span id="cb262-5"><a href="#cb262-5" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">in</span>&gt;</span>
<span id="cb262-6"><a href="#cb262-6" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">bandwidth</span>&gt;</span>
<span id="cb262-7"><a href="#cb262-7" aria-hidden="true" tabindex="-1"></a>                    &lt;<span class="kw">aggregate</span>&gt;</span>
<span id="cb262-8"><a href="#cb262-8" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">trunk_id</span>&gt;1&lt;/<span class="kw">trunk_id</span>&gt;</span>
<span id="cb262-9"><a href="#cb262-9" aria-hidden="true" tabindex="-1"></a>                    &lt;/<span class="kw">aggregate</span>&gt;</span>
<span id="cb262-10"><a href="#cb262-10" aria-hidden="true" tabindex="-1"></a>                &lt;/<span class="kw">bandwidth</span>&gt;</span>
<span id="cb262-11"><a href="#cb262-11" aria-hidden="true" tabindex="-1"></a>            &lt;/<span class="kw">in</span>&gt;</span>
<span id="cb262-12"><a href="#cb262-12" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">out</span>&gt;</span>
<span id="cb262-13"><a href="#cb262-13" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">bandwidth</span>&gt;</span>
<span id="cb262-14"><a href="#cb262-14" aria-hidden="true" tabindex="-1"></a>                    &lt;<span class="kw">aggregate</span>&gt;</span>
<span id="cb262-15"><a href="#cb262-15" aria-hidden="true" tabindex="-1"></a>                        &lt;<span class="kw">trunk_id</span>&gt;2&lt;/<span class="kw">trunk_id</span>&gt;</span>
<span id="cb262-16"><a href="#cb262-16" aria-hidden="true" tabindex="-1"></a>                    &lt;/<span class="kw">aggregate</span>&gt;</span>
<span id="cb262-17"><a href="#cb262-17" aria-hidden="true" tabindex="-1"></a>                &lt;/<span class="kw">bandwidth</span>&gt;</span>
<span id="cb262-18"><a href="#cb262-18" aria-hidden="true" tabindex="-1"></a>            &lt;/<span class="kw">out</span>&gt;</span>
<span id="cb262-19"><a href="#cb262-19" aria-hidden="true" tabindex="-1"></a>        &lt;/<span class="kw">transfer</span>&gt;</span>
<span id="cb262-20"><a href="#cb262-20" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">default</span>&gt;</span>
<span id="cb262-21"><a href="#cb262-21" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">trunks</span>&gt;</span>
<span id="cb262-22"><a href="#cb262-22" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">trunk</span>&gt;</span>
<span id="cb262-23"><a href="#cb262-23" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">id</span>&gt;1&lt;/<span class="kw">id</span>&gt;</span>
<span id="cb262-24"><a href="#cb262-24" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">name</span>&gt;in&lt;/<span class="kw">name</span>&gt;</span>
<span id="cb262-25"><a href="#cb262-25" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">on</span>&gt;true&lt;/<span class="kw">on</span>&gt;</span>
<span id="cb262-26"><a href="#cb262-26" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">capacity</span>&gt;</span>
<span id="cb262-27"><a href="#cb262-27" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">schedule</span> <span class="ot">format=</span><span class="st">&quot;ranges&quot;</span>&gt;1000000&lt;/<span class="kw">schedule</span>&gt;</span>
<span id="cb262-28"><a href="#cb262-28" aria-hidden="true" tabindex="-1"></a>            &lt;/<span class="kw">capacity</span>&gt;</span>
<span id="cb262-29"><a href="#cb262-29" aria-hidden="true" tabindex="-1"></a>        &lt;/<span class="kw">trunk</span>&gt;</span>
<span id="cb262-30"><a href="#cb262-30" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">trunk</span>&gt;</span>
<span id="cb262-31"><a href="#cb262-31" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">id</span>&gt;2&lt;/<span class="kw">id</span>&gt;</span>
<span id="cb262-32"><a href="#cb262-32" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">name</span>&gt;out&lt;/<span class="kw">name</span>&gt;</span>
<span id="cb262-33"><a href="#cb262-33" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">capacity</span>&gt;</span>
<span id="cb262-34"><a href="#cb262-34" aria-hidden="true" tabindex="-1"></a>                &lt;<span class="kw">schedule</span> <span class="ot">format=</span><span class="st">&quot;ranges&quot;</span>&gt;1000000&lt;/<span class="kw">schedule</span>&gt;</span>
<span id="cb262-35"><a href="#cb262-35" aria-hidden="true" tabindex="-1"></a>            &lt;/<span class="kw">capacity</span>&gt;</span>
<span id="cb262-36"><a href="#cb262-36" aria-hidden="true" tabindex="-1"></a>            &lt;<span class="kw">on</span>&gt;true&lt;/<span class="kw">on</span>&gt;</span>
<span id="cb262-37"><a href="#cb262-37" aria-hidden="true" tabindex="-1"></a>        &lt;/<span class="kw">trunk</span>&gt;</span>
<span id="cb262-38"><a href="#cb262-38" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">trunks</span>&gt;</span>
<span id="cb262-39"><a href="#cb262-39" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">CONF</span>&gt;</span></code></pre></div>
<p>It is also possible to set a schedule with different time and days,
for example for the value of <code>schedule</code>:</p>
<pre class="text"><code>start=08 end=19 days=mon,tue,wed,thu capacity=900000;1000000</code></pre>
<h4 data-number="4.22.1.2" id="agent-direct-asperaconf-file-name-with-special-characters"><span class="header-section-number">4.22.1.2</span> Agent: Direct:
<code>aspera.conf</code>: File name with special characters</h4>
<p>By default, <code>ascp</code> replaces file system disallowed
characters in transferred file names with <code>_</code>. On Windows, it
concerns: <code>* : | &lt; &gt; &quot; &#39; ?</code>.</p>
<p>Replacing illegal characters in transferred file names is a built-in
feature of Aspera transfers. This behavior can be customized with the
<code>aspera.conf</code> configuration file. For example, let&#39;s assume
we want to replace illegal character: <code>|</code> with an underscore
<code>_</code>.</p>
<ol type="1">
<li>First, locate the configuration file with:</li>
</ol>
<div class="sourceCode" id="cb264"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> conf ascp info <span class="at">--fields</span><span class="op">=</span>aspera_conf</span></code></pre></div>
<p>Typically, it is located at <code>$HOME/sdk/aspera.conf</code></p>
<ol type="1">
<li>Edit this file, and add the following line inside the XML section
<code>CONF.default.file_system</code>:</li>
</ol>
<div class="sourceCode" id="cb265"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">replace_illegal_chars</span>&gt;_|&lt;/<span class="kw">replace_illegal_chars</span>&gt;</span></code></pre></div>
<p>The result should look like this:</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="fu">&lt;?xml</span> <span class="ot">version=</span><span class="st">&#39;1.0&#39;</span> <span class="ot">encoding=</span><span class="st">&#39;UTF-8&#39;</span><span class="fu">?&gt;</span></span>
<span id="cb266-2"><a href="#cb266-2" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">CONF</span> <span class="ot">version=</span><span class="st">&quot;2&quot;</span>&gt;</span>
<span id="cb266-3"><a href="#cb266-3" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">default</span>&gt;</span>
<span id="cb266-4"><a href="#cb266-4" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">file_system</span>&gt;</span>
<span id="cb266-5"><a href="#cb266-5" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">resume_suffix</span>&gt;.aspera-ckpt&lt;/<span class="kw">resume_suffix</span>&gt;</span>
<span id="cb266-6"><a href="#cb266-6" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">partial_file_suffix</span>&gt;.partial&lt;/<span class="kw">partial_file_suffix</span>&gt;</span>
<span id="cb266-7"><a href="#cb266-7" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">replace_illegal_chars</span>&gt;_|&lt;/<span class="kw">replace_illegal_chars</span>&gt;</span>
<span id="cb266-8"><a href="#cb266-8" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">file_system</span>&gt;</span>
<span id="cb266-9"><a href="#cb266-9" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">default</span>&gt;</span>
<span id="cb266-10"><a href="#cb266-10" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">CONF</span>&gt;</span></code></pre></div>
<ol type="1">
<li>According to the <a href="https://www.ibm.com/docs/en/ahts/4.4.x?topic=reference-user-group-default-configurations">documentation</a></li>
</ol>
<p>The parameter works as follows:</p>
<ul>
<li>The first character in the value is the replacement character.</li>
<li>All other characters listed after it are the
<strong>illegal</strong> ones to be replaced.</li>
</ul>
<p>So in this example: <code>|</code> will be replaced with
<code>_</code>.</p>
<p>If the mounted target file system is <strong>Windows</strong> but
<code>ascli</code> runs on Linux, there are several additional illegal
characters you need to handle. In that case, you can set the parameter
like this (note that XML special characters such as <code>&lt;</code>,
<code>&gt;</code>, <code>&quot;</code> and <code>&#39;</code> must be escaped
properly):</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb267-1"><a href="#cb267-1" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">replace_illegal_chars</span>&gt;_*:|<span class="dv">&amp;lt;&amp;gt;&amp;quot;&amp;apos;</span>?&lt;/<span class="kw">replace_illegal_chars</span>&gt;</span></code></pre></div>
<p>In this example:</p>
<ul>
<li><code>_</code> is the replacement character.</li>
<li>The list of characters that will be replaced is:
<code>*:|&lt;&gt;&quot;&#39;?</code></li>
</ul>
<p>So, for example:</p>
<ul>
<li><code>report|final?.txt</code> → <code>report_final_.txt</code></li>
<li><code>data*backup&quot;2025&quot;.csv</code> →
<code>data_backup_2025_.csv</code></li>
</ul>
<h3 data-number="4.22.2" id="agent-connect-client"><span class="header-section-number">4.22.2</span> Agent: Connect Client</h3>
<p>By specifying option: <code>--transfer=connect</code>,
<code>ascli</code> will start transfers using the locally installed
<strong>IBM Aspera Connect Client</strong>. There are no option for
<code>transfer_info</code>.</p>
<h3 data-number="4.22.3" id="agent-desktop-client"><span class="header-section-number">4.22.3</span> Agent: Desktop Client</h3>
<p>By specifying option: <code>--transfer=desktop</code>,
<code>ascli</code> will start transfers using the locally installed
<strong>IBM Aspera Desktop Client</strong>. There are no option for
<code>transfer_info</code>.</p>
<h3 data-number="4.22.4" id="agent-node-api"><span class="header-section-number">4.22.4</span> Agent: Node API</h3>
<p>By specifying option: <code>--transfer=node</code>,
<code>ascli</code> starts transfers in an Aspera Transfer Server using
the Node API, either on a local or remote node. This is especially
useful for direct node-to-node transfers.</p>
<p>Parameters provided in option <code>transfer_info</code> are:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>String</code></td>
<td>URL of the Node API<br />Mandatory</td>
</tr>
<tr>
<td><code>username</code></td>
<td><code>String</code></td>
<td>Node API user or access key<br />Mandatory</td>
</tr>
<tr>
<td><code>password</code></td>
<td><code>String</code></td>
<td>Password, secret or bearer token<br />Mandatory</td>
</tr>
<tr>
<td><code>root_id</code></td>
<td><code>String</code></td>
<td>Root file ID<br />Mandatory only for bearer token</td>
</tr>
</tbody>
</table>
<p>Like any other option, <code>transfer_info</code> can get its value
from a pre-configured <a href="#option-preset">Option Preset</a> :</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--transfer-info=@preset:_name_here_</span></span></code></pre></div>
<p>or be specified using the extended value syntax :</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb269-1"><a href="#cb269-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--transfer-info=@json:</span><span class="st">&#39;{&quot;url&quot;:&quot;https://...&quot;,&quot;username&quot;:&quot;_user_here_&quot;,&quot;password&quot;:&quot;my_password_here&quot;}&#39;</span></span></code></pre></div>
<p>If <code>transfer_info</code> is not specified and a default node has
been configured (name in <code>node</code> for section
<code>default</code>) then this node is used by default.</p>
<p>If the <code>password</code> value begins with <code>Bearer</code>
then the <code>username</code> is expected to be an access key and the
parameter <code>root_id</code> is mandatory and specifies the file ID of
the top folder to use on the node using this access key. It can be
either the access key&#39;s root file ID, or any authorized file ID
underneath it.</p>
<h3 data-number="4.22.5" id="agent-http-gateway"><span class="header-section-number">4.22.5</span> Agent: HTTP Gateway</h3>
<p>The Aspera HTTP Gateway is a service that allows to send and receive
files using HTTPS.</p>
<p>By specifying option: <code>--transfer=httpgw</code>,
<code>ascli</code> will start transfers using the Aspera HTTP
Gateway.</p>
<p>Parameters provided in option <code>transfer_info</code> are:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>String</code></td>
<td>URL of the HTTP GW<br />Mandatory</td>
</tr>
<tr>
<td><code>upload_chunk_size</code></td>
<td><code>Integer</code></td>
<td>Size in bytes of chunks for upload<br />Default:
<code>64000</code></td>
</tr>
<tr>
<td><code>api_version</code></td>
<td><code>String</code></td>
<td>Force use of version (<code>v1</code>, <code>v2</code>)<br />Default:
<code>v2</code></td>
</tr>
<tr>
<td><code>synchronous</code></td>
<td><code>Bool</code></td>
<td>Wait for each message acknowledgment<br />Default:
<code>false</code></td>
</tr>
</tbody>
</table>
<p>Example:</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex package recv 323 <span class="at">--transfer</span><span class="op">=</span>httpgw <span class="at">--transfer-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;url&quot;:&quot;https://asperagw.example.com:9443/aspera/http-gwy&quot;}&#39;</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The gateway only supports transfers authorized with a token.</p></div>
</div>
<p>If the application, e.g. AoC or Faspex 5, is configured to use the
HTTP Gateway, then <code>ascli</code> will automatically use the gateway
URL if <code>--transfer=httpgw</code> is specified, so
<code>transfer_info</code> becomes optional.</p>
<h3 data-number="4.22.6" id="agent-transfer-daemon"><span class="header-section-number">4.22.6</span> Agent: Transfer Daemon</h3>
<p>Another possibility is to use the Transfer Daemon
(<code>transferd</code>). Set option <code>transfer</code> to
<code>transferd</code>.</p>
<p>Options for <code>transfer_info</code> are:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>String</code></td>
<td>IP address and port listened by the
daemon<br />Mandatory<br />Default: <code>:0</code></td>
</tr>
<tr>
<td><code>start</code></td>
<td><code>Bool</code></td>
<td>Start a new daemon.<br />Default: <code>true</code></td>
</tr>
<tr>
<td><code>stop</code></td>
<td><code>Bool</code></td>
<td>Stop daemon when exiting <code>ascli</code><br />Default:
<code>true</code></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>If port zero is specified in the URL, then the daemon will listen on
a random available port. If no address is specified, then
<code>127.0.0.1</code> is used.</p></div>
</div>
<p>For example, to use an external, already running
<code>transferd</code>, use option:</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--transfer-info=@json:</span><span class="st">&#39;{&quot;url&quot;:&quot;:55002&quot;,&quot;start&quot;:false,&quot;stop&quot;:false}&#39;</span></span></code></pre></div>
<p>The gem <code>grpc</code> is not part of default dependencies, as it
requires compilation of a native part. So, to use the Transfer Daemon
you should install this gem:</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> install grpc</span></code></pre></div>
<p>If the execution complains about incompatible libraries, then force
recompilation of the native part:</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> uninstall grpc</span>
<span id="cb273-2"><a href="#cb273-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb273-3"><a href="#cb273-3" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> install grpc <span class="at">--platform</span> ruby</span></code></pre></div>
<p>On Windows the compilation may fail for various reasons (3.1.1):</p>
<!-- spellchecker: disable -->

<ul>
<li><p><code>cannot find -lx64-ucrt-ruby310</code></p>
<p>→ copy the file
<code>[Ruby main dir]\lib\libx64-ucrt-ruby310.dll.a</code> to
<code>[Ruby main dir]\lib\libx64-ucrt-ruby310.a</code> (remove the
<code>dll</code> extension)</p></li>
<li><p><code>conflicting types for &#39;gettimeofday&#39;</code></p>
<p>→ edit the file
<code>[Ruby main dir]/include/ruby-[version]/ruby/win32.h</code> and
change the signature of <code>gettimeofday</code> to
<code>gettimeofday(struct timeval *, void *)</code>, i.e. change
<code>struct timezone</code> to <code>void</code></p></li>
</ul>
<!-- spellchecker: enable -->

<h2 data-number="4.23" id="transfer-specification"><span class="header-section-number">4.23</span> Transfer Specification</h2>
<p>Some commands lead to file transfer (upload/download). All parameters
necessary for this transfer are described in a <a href="#transfer-specification"><strong>transfer-spec</strong></a>
(Transfer Specification), such as:</p>
<ul>
<li>Server address</li>
<li>Transfer username</li>
<li>Credentials</li>
<li>File list</li>
<li>Etc...</li>
</ul>
<p><code>ascli</code> builds the <a href="#transfer-specification"><strong>transfer-spec</strong></a>
internally as a <code>Hash</code>. It is not necessary to provide
additional parameters on the command line for a transfer.</p>
<p>It is possible to modify or add any of the supported <a href="#transfer-specification"><strong>transfer-spec</strong></a>
parameter using the <code>ts</code> option. The <code>ts</code> option
accepts a <a href="#extended-value-syntax"><code>Hash</code> Extended
Value</a> containing one or several <a href="#transfer-specification"><strong>transfer-spec</strong></a>
parameters. Multiple <code>ts</code> options on command line are
cumulative, and the <code>Hash</code> value is deeply merged. To remove
a (deep) key from transfer spec, set the value to <code>null</code>.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Default transfer spec values can be displayed with command:</p></div>
</div>
<div class="sourceCode" id="cb274"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp info <span class="at">--fields</span><span class="op">=</span>ts <span class="at">--flat-hash</span><span class="op">=</span>no</span></code></pre></div>
<p>It is possible to specify <code>ascp</code> options when the
<code>transfer</code> option is set to <a href="#agent-direct"><code>direct</code></a> using
<code>transfer_info</code> option parameter: <code>ascp_args</code>.
Example:
<code>--transfer-info=@json:&#39;{&quot;ascp_args&quot;:[&quot;-l&quot;,&quot;100m&quot;]}&#39;</code>. This
is especially useful for <code>ascp</code> command line parameters not
supported in the transfer spec.</p>
<p>The use of a <a href="#transfer-specification"><strong>transfer-spec</strong></a>
instead of <code>ascp</code> command line arguments has the advantage
of:</p>
<ul>
<li>Common to all <a href="#transfer-clients-agents">Transfer
Agent</a></li>
<li>Not dependent on command line limitations (special
characters...)</li>
</ul>
<h2 data-number="4.24" id="transfer-parameters"><span class="header-section-number">4.24</span> Transfer Parameters</h2>
<p>All standard <a href="#transfer-specification"><strong>transfer-spec</strong></a>
parameters can be specified. A <a href="#transfer-specification"><strong>transfer-spec</strong></a> can
also be saved/overridden in the configuration file.</p>
<p>References:</p>
<ul>
<li><a href="https://developer.ibm.com/apis/catalog?search=%22aspera%20node%20api%22">Aspera
Node API Documentation</a> → /opt/transfers</li>
<li><a href="https://developer.ibm.com/apis/catalog?search=%22aspera%20transfer%20sdk%22">Aspera
Transfer Daemon Documentation</a> → Guides → API Ref → Transfer Spec
V1</li>
<li><a href="https://d3gcli72yxqn2z.cloudfront.net/connect/v4/asperaweb-4.js">Aspera
Connect SDK</a> → search
<code>The parameters for starting a transfer.</code></li>
</ul>
<p>Parameters can be displayed with commands:</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp spec</span>
<span id="cb275-2"><a href="#cb275-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp spec <span class="at">--select</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;d&quot;:&quot;Y&quot;}&#39;</span> <span class="at">--fields</span><span class="op">=</span>-d,n,c</span></code></pre></div>
<p>A JSON Schema can be generated with command:</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb276-1"><a href="#cb276-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp schema <span class="at">--format</span><span class="op">=</span>jsonpp</span></code></pre></div>
<p>An optional parameter can be specified to display the schema for a
specific transfer agent:</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp schema transferd <span class="at">--format</span><span class="op">=</span>jsonpp</span></code></pre></div>
<p><code>ascp</code> argument or environment variable is provided in
description.</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Name</th>
</tr>
</thead>
<tbody>
<tr>
<td>A</td>
<td>Direct</td>
</tr>
<tr>
<td>C</td>
<td>Connect</td>
</tr>
<tr>
<td>D</td>
<td>Desktop</td>
</tr>
<tr>
<td>H</td>
<td>Httpgw</td>
</tr>
<tr>
<td>N</td>
<td>Node</td>
</tr>
<tr>
<td>T</td>
<td>Transferd</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>A</th>
<th>C</th>
<th>D</th>
<th>H</th>
<th>N</th>
<th>T</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>apply_local_docroot</td>
<td>boolean</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Apply local docroot to source
paths.<br />(<code>--apply-local-docroot</code>)</td>
</tr>
<tr>
<td>authentication</td>
<td>string</td>
<td> </td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Set to <code>token</code> for SSH bypass keys, else password asked
if not provided.</td>
</tr>
<tr>
<td>cipher</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>In transit encryption algorithms.<br />Allowed values:
<code>none</code>, <code>aes-128</code>, <code>aes-192</code>,
<code>aes-256</code>, <code>aes-128-cfb</code>,
<code>aes-192-cfb</code>, <code>aes-256-cfb</code>,
<code>aes-128-gcm</code>, <code>aes-192-gcm</code>,
<code>aes-256-gcm</code><br />(<code>-c (conversion){enum}</code>)</td>
</tr>
<tr>
<td>cipher_allowed</td>
<td>string</td>
<td> </td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Returned by node API. Valid literals include <code>aes-128</code>
and <code>none</code>.</td>
</tr>
<tr>
<td>compression</td>
<td>integer</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>ascp4 only, 0 / 1?</td>
</tr>
<tr>
<td>content_protection</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Enable client-side encryption at rest (CSEAR). (content
protection)<br />Allowed values: <code>encrypt</code>,
<code>decrypt</code><br />(<code>--file-crypt={enum}</code>)</td>
</tr>
<tr>
<td>content_protection_password</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Specifies CSEAR password. (content
protection)<br />(env:<code>ASPERA_SCP_FILEPASS</code>)</td>
</tr>
<tr>
<td>cookie</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Metadata for transfer specified by
application.<br />(env:<code>ASPERA_SCP_COOKIE</code>)</td>
</tr>
<tr>
<td>create_dir</td>
<td>boolean</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Specifies whether to create new
directories.<br />(<code>-d</code>)</td>
</tr>
<tr>
<td>delete_before_transfer</td>
<td>boolean</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Before transfer, delete files that exist at the destination but not
at the source.<br />The source and destination arguments must be
directories that have matching names.<br />Objects on the destination
that have the same name but different type or size as objects on the
source are not deleted.<br />(<code>--delete-before-transfer</code>)</td>
</tr>
<tr>
<td>delete_source</td>
<td>boolean</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Y</td>
<td>Remove transfered source files after transfer success. TODO
equivalent to <code>remove_after_transfer</code> +
<code>remove_empty_directories</code> +
<code>remove_empty_source_directory</code><br />(<code>--remove-after-transfer</code>)</td>
</tr>
<tr>
<td>destination_root</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Destination root directory.</td>
</tr>
<tr>
<td>destination_root_id</td>
<td>string</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>The file ID of the destination root directory.<br />Required when
using Bearer token auth for the destination node.</td>
</tr>
<tr>
<td>dgram_size</td>
<td>integer</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>UDP datagram size in bytes.<br />(<code>-Z {integer}</code>)</td>
</tr>
<tr>
<td>direction</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Direction of transfer (on client side).<br />Allowed values:
<code>send</code>,
<code>receive</code><br />(<code>--mode=(conversion){enum}</code>)</td>
</tr>
<tr>
<td>exclude_newer_than</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Exclude files, but not directories, from the transfer if they are
newer than the specified number of seconds added to the source
computer&#39;s epoch.<br />e.g. <code>-86400</code> for newer than a day
back.<br />(<code>--exclude-newer-than={string}</code>)</td>
</tr>
<tr>
<td>exclude_older_than</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Exclude files, but not directories, from the transfer if they are
older than the specified number of seconds added to the source
computer&#39;s epoch.<br />e.g. <code>-86400</code> for older than a day
back.<br />(<code>--exclude-older-than={string}</code>)</td>
</tr>
<tr>
<td>fail_bad_filepass</td>
<td>boolean</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Fail on bad file decryption
passphrase.<br />(<code>--fail-bad-filepass</code>)</td>
</tr>
<tr>
<td>fasp_port</td>
<td>integer</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Specifies fasp (UDP) port.<br />(<code>-O {integer}</code>)</td>
</tr>
<tr>
<td>fasp_proxy</td>
<td>object</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Proxy for communications between the remote server and the (local)
client.</td>
</tr>
<tr>
<td>fasp_url</td>
<td>string</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Only used in Faspex.</td>
</tr>
<tr>
<td>file_checksum</td>
<td>string</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td> </td>
<td>Enable checksum reporting for transferred files by specifying the
hash to use.<br />Allowed values: <code>sha-512</code>,
<code>sha-384</code>, <code>sha-256</code>, <code>sha1</code>,
<code>md5</code>,
<code>none</code><br />(<code>--file-checksum={enum}</code>)</td>
</tr>
<tr>
<td>http_fallback</td>
<td>boolean<br />string</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>When true(1), attempts to perform an HTTP transfer if a FASP
transfer cannot be
performed.<br />(<code>-y (conversion){boolean|string}</code>)</td>
</tr>
<tr>
<td>http_fallback_port</td>
<td>integer</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Specifies HTTP port when no cipher is
used.<br />(<code>-t {integer}</code>)</td>
</tr>
<tr>
<td>https_fallback_port</td>
<td>integer</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Specifies HTTPS port when cipher is
used.<br />(<code>-t {integer}</code>)</td>
</tr>
<tr>
<td>icos</td>
<td>object</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Configuration parameters for IBM Cloud Object Storage (ICOS).</td>
</tr>
<tr>
<td>keepalive</td>
<td>boolean</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>The session is running in persistent session
mode.<br />(<code>--keepalive</code>)</td>
</tr>
<tr>
<td>lock_min_rate</td>
<td>boolean</td>
<td> </td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>TODO: remove ?</td>
</tr>
<tr>
<td>lock_min_rate_kbps</td>
<td>boolean</td>
<td> </td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>If <code>true</code>, lock the minimum transfer rate to the value
set for min_rate_kbps.<br />If <code>false</code>, users can adjust the
transfer rate up to the value set for target_rate_cap_kbps.</td>
</tr>
<tr>
<td>lock_rate_policy</td>
<td>boolean</td>
<td> </td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>If <code>true</code>, lock the rate policy to the default
value.</td>
</tr>
<tr>
<td>lock_target_rate</td>
<td>boolean</td>
<td> </td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>TODO: remove ?</td>
</tr>
<tr>
<td>lock_target_rate_kbps</td>
<td>boolean</td>
<td> </td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>If <code>true</code>, lock the target transfer rate to the default
value set for target_rate_kbps.<br />If <code>false</code>, users can
adjust the transfer rate up to the value set for
target_rate_cap_kbps.</td>
</tr>
<tr>
<td>min_rate_cap_kbps</td>
<td>integer</td>
<td> </td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>The highest minimum rate that an incoming transfer can request, in
kilobits per second.<br />Client minimum rate requests that exceed the
minimum rate cap are ignored.<br />The default value of unlimited applies
no cap to the minimum rate. (Default: 0)</td>
</tr>
<tr>
<td>min_rate_kbps</td>
<td>integer</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Set the minimum transfer rate in kilobits per
second.<br />(<code>-m {integer}</code>)</td>
</tr>
<tr>
<td>move_after_transfer</td>
<td>string</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Y</td>
<td>Move source files to the specified <code>archive-dir</code>
directory after they are transferred correctly.<br />Available as of
3.8.0. Details in ascp manual.<br />Requires write permissions on the
source.<br />If <code>src_base</code> is specified, files are moved to
<code>archive-dir</code>/<code>path-relative-to-srcbase</code>.<br /><code>archive-dir</code>
must be in the same file system (or cloud storage account) as the source
files being transferred.<br /><code>archive-dir</code> is subject to the
same docroot restrictions as source
files.<br /><code>move_after_transfer</code> and
<code>remove_after_transfer</code> are mutually exclusive
options.<br />After files have been moved to the archive, the original
source directory structure is left in place. Empty directories are not
saved to <code>archive-dir</code>. To remove empty source directories
after a successful move operation, also set
<code>remove_empty_directories</code> to <code>true</code>. When using
<code>remove_empty_directories</code>, empty directory removal
examination starts at the <code>srcbase</code> and proceeds down any
subdirectories. If no <code>srcbase</code> is used and a file path (as
opposed to a directory path) is specified, then only the immediate
parent directory is examined and removed if it is empty following the
move of the source
file.<br />(<code>--move-after-transfer={string}</code>)</td>
</tr>
<tr>
<td>multi_session</td>
<td>integer</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Use multi-session transfer. max 128.<br />Each participant on one
host needs an independent UDP (-O) port.<br />Large files are split
between sessions only when transferring with
<code>resume_policy</code>=<code>none</code>.</td>
</tr>
<tr>
<td>multi_session_threshold</td>
<td>integer</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Y</td>
<td>Split files across multiple ascp sessions if their size in bytes is
greater than or equal to the specified value.<br />(0=no file is
split)<br />(<code>--multi-session-threshold={integer}</code>)</td>
</tr>
<tr>
<td>obfuscate_file_names</td>
<td>boolean</td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td> </td>
<td> </td>
<td>HTTP Gateway obfuscates file names when set to
<code>true</code>.</td>
</tr>
<tr>
<td>overwrite</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Overwrite files at the destination with source files of the same
name based on the policy:<br />- <code>always</code> : Always overwrite
the file.<br />- <code>never</code> : Never overwrite the file. If the
destination contains partial files that are older or the same as the
source files and resume is enabled, the partial files resume transfer.
Partial files with checksums or sizes that differ from the source files
are not overwritten.<br />- <code>diff</code> : (default) Overwrite the
file if it is different from the source, depending on the compare method
(default is size). If the destination is object storage,
<code>diff</code> has the same effect as always. If resume is not
enabled, partial files are overwritten if they are different from the
source, otherwise they are skipped. If resume is enabled, only partial
files with different sizes or checksums from the source are overwritten;
otherwise, files resume.<br />- <code>diff+older</code> : Overwrite the
file if it is older and different from the source, depending on the
compare method (default is size). If resume is not enabled, partial
files are overwritten if they are older and different from the source,
otherwise they are skipped. If resume is enabled, only partial files
that are different and older than the source are overwritten, otherwise
they are resumed.<br />- <code>older</code> : Overwrite the file if its
timestamp is older than the source timestamp.<br />If you set an
overwrite policy of <code>diff</code> or <code>diff+older</code>,
difference is determined by the value set for
<code>resume_policy</code>:<br /><code>none</code> : The source and
destination files are always considered different and the destination
file is always overwritten<br /><code>attributes</code> : The source and
destination files are compared based on file attributes
<br /><code>sparse_checksum</code> : The source and destination files are
compared based on sparse checksums, (currently file
size)<br /><code>full_checksum</code> : The source and destination files
are compared based on full checksums<br />Allowed values:
<code>never</code>, <code>always</code>, <code>diff</code>,
<code>older</code>,
<code>diff+older</code><br />(<code>--overwrite={enum}</code>)</td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td> </td>
<td>Password for local Windows user when transfer user associated with
node API user is not the same as the one running
<code>asperanoded</code>.<br />Allows impersonating the transfer user and
have access to resources (e.g. network shares).<br />Windows only, node
API only.</td>
</tr>
<tr>
<td>paths</td>
<td>array</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Array of path to the source (required) and a path to the destination
(optional).</td>
</tr>
<tr>
<td>precalculate_job_size</td>
<td>boolean</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Specifies whether to precalculate the job
size.<br />(<code>--precalculate-job-size</code>)</td>
</tr>
<tr>
<td>preserve_access_time</td>
<td>boolean</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Preserve the source-file access timestamps at the
destination.<br />Because source access times are updated by the transfer
operation, the timestamp that is preserved is the one just before to the
transfer.<br />(<code>--preserve-access-time</code>)</td>
</tr>
<tr>
<td>preserve_acls</td>
<td>string</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Preserve access control lists.<br />Allowed values:
<code>none</code>, <code>native</code>,
<code>metafile</code><br />(<code>--preserve-acls={enum}</code>)</td>
</tr>
<tr>
<td>preserve_creation_time</td>
<td>boolean</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Preserve source-file creation timestamps at the
destination.<br />Only Windows systems retain information about creation
time. If the destination is not a Windows computer, this option is
ignored.<br />(<code>--preserve-creation-time</code>)</td>
</tr>
<tr>
<td>preserve_extended_attrs</td>
<td>string</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Preserve the extended attributes.<br />Allowed values:
<code>none</code>, <code>native</code>,
<code>metafile</code><br />(<code>--preserve-xattrs={enum}</code>)</td>
</tr>
<tr>
<td>preserve_file_owner_gid</td>
<td>boolean</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Preserve the group ID for a file
owner.<br />(<code>--preserve-file-owner-gid</code>)</td>
</tr>
<tr>
<td>preserve_file_owner_uid</td>
<td>boolean</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Preserve the user ID for a file
owner.<br />(<code>--preserve-file-owner-uid</code>)</td>
</tr>
<tr>
<td>preserve_modification_time</td>
<td>boolean</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Set the modification time, the last time a file or directory was
modified (written), of a transferred file to the modification of the
source file or directory.<br />Preserve source-file modification
timestamps at the
destination.<br />(<code>--preserve-modification-time</code>)</td>
</tr>
<tr>
<td>preserve_remote_acls</td>
<td>string</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Preserve remote access control lists.<br />Allowed values:
<code>none</code>, <code>native</code>,
<code>metafile</code><br />(<code>--remote-preserve-acls={enum}</code>)</td>
</tr>
<tr>
<td>preserve_remote_extended_attrs</td>
<td>string</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Preserve remote extended attributes.<br />Allowed values:
<code>none</code>, <code>native</code>,
<code>metafile</code><br />(<code>--remote-preserve-xattrs={enum}</code>)</td>
</tr>
<tr>
<td>preserve_source_access_time</td>
<td>boolean</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Preserve the time logged for when the source file was
accessed.<br />(<code>--preserve-source-access-time</code>)</td>
</tr>
<tr>
<td>preserve_times</td>
<td>boolean</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Y</td>
<td>Preserve file timestamps.<br />(<code>-p {boolean}</code>)</td>
</tr>
<tr>
<td>proxy</td>
<td>string</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Specify the address of the Aspera high-speed proxy
server.<br /><code>dnat(s)://[user[:password]@]server:port</code><br />Default
ports for DNAT and DNATS protocols are 9091 and 9092.<br />Password, if
specified here, overrides the value of environment variable
<code>ASPERA_PROXY_PASS</code>.<br />(<code>--proxy={string}</code>)</td>
</tr>
<tr>
<td>rate_policy</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>The transfer rate policy to use when sharing bandwidth. Allowable
values:<br />- <code>high</code> : When sharing bandwidth, transfer at
twice the rate of a transfer using a fair policy.<br />-
<code>fair</code> : (Default) Share bandwidth equally with other
traffic.<br />- <code>low</code> : Use only unused bandwidth.<br />-
<code>fixed</code> : Transfer at the target rate, regardless of the
actual network capacity. Do not share bandwidth. Aspera recommends that
you do not use this setting except under special circumstances,
otherwise the destination storage can be damaged.<br />Allowed values:
<code>low</code>, <code>fair</code>, <code>high</code>,
<code>fixed</code><br />(<code>--policy={enum}</code>)</td>
</tr>
<tr>
<td>rate_policy_allowed</td>
<td>string</td>
<td> </td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Specifies most aggressive rate policy that is allowed. Returned by
node API.<br />Allowed values: <code>low</code>, <code>fair</code>,
<code>high</code>, <code>fixed</code></td>
</tr>
<tr>
<td>read_threads</td>
<td>integer</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>ascp4 only</td>
</tr>
<tr>
<td>remote_access_key</td>
<td>string</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>The access key ID of the access key that was used to construct the
bearer token that is used to authenticate to the remote node.</td>
</tr>
<tr>
<td>remote_host</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>IP or fully qualified domain name (FQDN) of the remote
server.<br />(<code>--host={string}</code>)</td>
</tr>
<tr>
<td>remote_password</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>SSH session password.<br />(env:<code>ASPERA_SCP_PASS</code>)</td>
</tr>
<tr>
<td>remote_user</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Remote user. Default value is <code>xfer</code> on node or
connect.<br />(<code>--user={string}</code>)</td>
</tr>
<tr>
<td>remove_after_transfer</td>
<td>boolean</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Y</td>
<td>Remove SRC files after transfer
success.<br />(<code>--remove-after-transfer</code>)</td>
</tr>
<tr>
<td>remove_empty_directories</td>
<td>boolean</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Y</td>
<td>Specifies whether to remove empty
directories.<br />(<code>--remove-empty-directories</code>)</td>
</tr>
<tr>
<td>remove_empty_source_dir</td>
<td>boolean</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Remove empty source subdirectories and remove the source directory
itself, if empty.</td>
</tr>
<tr>
<td>remove_empty_source_directory</td>
<td>boolean</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Remove empty source subdirectories and remove the source directory
itself, if
empty.<br />(<code>--remove-empty-source-directory</code>)</td>
</tr>
<tr>
<td>remove_skipped</td>
<td>boolean</td>
<td>Y</td>
<td>Y</td>
<td> </td>
<td> </td>
<td>Y</td>
<td> </td>
<td>Must also have <code>remove_after_transfer</code> set to
<code>true</code>. Defaults to <code>false</code>. If <code>true</code>,
skipped files will be removed as
well.<br />(<code>--remove-skipped</code>)</td>
</tr>
<tr>
<td>resume_policy</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>If a transfer is interrupted or fails to finish, this policy directs
the transfer to resume without retransferring the files. Allowable
values:<br />- <code>none</code> : Always re-transfer the entire
file.<br />- <code>attrs</code> : Compare file attributes and resume if
they match, and re-transfer if they do not.<br />-
<code>sparse_csum</code> : Compare file attributes and the sparse file
checksums; resume if they match, and re-transfer if they do not.<br />-
<code>full_csum</code> : Compare file attributes and the full file
checksums; resume if they match, and re-transfer if they do
not.<br />Note: transferd uses values: <code>attributes</code>,
<code>sparse_checksum</code>, <code>full_checksum</code>.<br />Allowed
values: <code>none</code>, <code>attrs</code>, <code>sparse_csum</code>,
<code>full_csum</code><br />(<code>-k (conversion){enum}</code>)</td>
</tr>
<tr>
<td>retry_duration</td>
<td>integer<br />string</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Specifies how long to wait before retrying transfer (e.g.
<code>5min</code>).</td>
</tr>
<tr>
<td>save_before_overwrite</td>
<td>boolean</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Y</td>
<td>If a transfer would result in an existing file <filename>.<ext>
being overwritten, move that file to
<filename>.yyyy.mm.dd.hh.mm.ss.index.<ext> (where index is set to 1 at
the beginning of each new second and incremented for each file saved in
this manner during the same second) in the same directory before writing
the new file.<br />File attributes are maintained in the renamed
file.<br />(<code>--save-before-overwrite</code>)</td>
</tr>
<tr>
<td>skip_duplicate_check</td>
<td>boolean</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Don&#39;t check for duplicate files at the
destination.<br />(<code>--skip-dir-traversal-dupes</code>)</td>
</tr>
<tr>
<td>skip_special_files</td>
<td>boolean</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>All assets other than files, directories and symbolic links are
considered special. A transfer will fail if the user attempts to
transfer special assets. If <code>true</code>, <code>ascp</code> skips
special assets and proceeds with the transfer of all other
assets.<br />(<code>--skip-special-files</code>)</td>
</tr>
<tr>
<td>source_root</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Path to be prepended to each source path.<br />This is either a
conventional path or it can be a URI but only if there is no root
defined.<br />(<code>--source-prefix64=(conversion){string}</code>)</td>
</tr>
<tr>
<td>source_root_id</td>
<td>string</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Y</td>
<td>The file ID of the source root directory. Required when using Bearer
token auth for the source node.</td>
</tr>
<tr>
<td>src_base</td>
<td>string</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Y</td>
<td>Specify the prefix to be stripped off from each source
object.<br />The remaining portion of the source path is kept intact at
the destination.<br />Special care must be taken when used with cloud
storage.<br />(<code>--src-base64=(conversion){string}</code>)</td>
</tr>
<tr>
<td>src_base64</td>
<td>string</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>The folder name below which the directory structure is preserved
(base64 encoded).<br />(<code>--src-base64={string}</code>)</td>
</tr>
<tr>
<td>ssh_args</td>
<td>array</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Array of arguments to pass to SSH. Use with
caution.<br />(<code>--ssh-args={array}</code>)</td>
</tr>
<tr>
<td>ssh_port</td>
<td>integer</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Specifies SSH (TCP) port.<br />(<code>-P {integer}</code>)</td>
</tr>
<tr>
<td>ssh_private_key</td>
<td>string</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Private key used for SSH authentication.<br />Shall look like:
-----BEGIN RSA PRIV4TE KEY-----\nMII...<br />Note the JSON encoding: \n
for newlines.<br />(env:<code>ASPERA_SCP_KEY</code>)</td>
</tr>
<tr>
<td>ssh_private_key_passphrase</td>
<td>string</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>The passphrase associated with the transfer user&#39;s SSH private key.
Available as of 3.7.2.<br />(env:<code>ASPERA_SCP_PASS</code>)</td>
</tr>
<tr>
<td>ssh_private_key_path</td>
<td>string</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Path to private key for SSH.<br />(<code>-i {string}</code>)</td>
</tr>
<tr>
<td>sshfp</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Check it against server SSH host key
fingerprint.<br />(<code>--check-sshfp={string}</code>)</td>
</tr>
<tr>
<td>symlink_policy</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Handle source side symbolic links.<br />Allowed values:
<code>follow</code>, <code>copy</code>, <code>copy+force</code>,
<code>skip</code><br />(<code>--symbolic-links={enum}</code>)</td>
</tr>
<tr>
<td>tags</td>
<td>object</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Metadata for transfer as JSON. Key <code>aspera</code> is reserved.
Key <code>aspera.xfer_retry</code> specifies a retry timeout for node
API initiated
transfers.<br />(<code>--tags64=(conversion){object}</code>)</td>
</tr>
<tr>
<td>tags64</td>
<td>string</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Metadata for transfer as JSON. Key <code>aspera</code> is reserved.
Key <code>aspera.xfer_retry</code> specifies a retry timeout for node
API initiated transfers.<br />(<code>--tags64={string}</code>)</td>
</tr>
<tr>
<td>target_rate_cap_kbps</td>
<td>integer</td>
<td> </td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Maximum target rate for incoming transfers, in kilobits per second.
Returned by upload/download_setup node API.</td>
</tr>
<tr>
<td>target_rate_kbps</td>
<td>integer</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Specifies desired speed for the
transfer.<br />(<code>-l {integer}</code>)</td>
</tr>
<tr>
<td>target_rate_percentage</td>
<td>string</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>TODO: remove ?</td>
</tr>
<tr>
<td>title</td>
<td>string</td>
<td> </td>
<td>Y</td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Y</td>
<td>Title of the transfer.</td>
</tr>
<tr>
<td>token</td>
<td>string</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Authorization token. Type: Bearer, Basic or ATM. (Also arg
-W)<br />(env:<code>ASPERA_SCP_TOKEN</code>)</td>
</tr>
<tr>
<td>use_ascp4</td>
<td>boolean</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>Y</td>
<td>Specify version of protocol. Do not use ascp4.</td>
</tr>
<tr>
<td>use_system_ssh</td>
<td>string</td>
<td>Y</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td>TODO, comment...<br />(<code>-SSH {string}</code>)</td>
</tr>
<tr>
<td>write_threads</td>
<td>integer</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>ascp4 only</td>
</tr>
<tr>
<td>wss_enabled</td>
<td>boolean</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Server has Web Socket service enabled.</td>
</tr>
<tr>
<td>wss_port</td>
<td>integer</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>TCP port used for websocket service feed.</td>
</tr>
<tr>
<td>xfer_max_retries</td>
<td>integer</td>
<td> </td>
<td> </td>
<td> </td>
<td> </td>
<td>Y</td>
<td> </td>
<td>Maximum number of retries, for node API initiated transfers. Shall
not exceed aspera.conf <code>transfer_manager_max_retries</code>
(default 5).</td>
</tr>
</tbody>
</table>
<h3 data-number="4.24.1" id="destination-folder-for-transfers"><span class="header-section-number">4.24.1</span> Destination folder for
transfers</h3>
<p>The destination folder is set by <code>ascli</code> by default
to:</p>
<ul>
<li><code>.</code> for downloads</li>
<li><code>/</code> for uploads</li>
</ul>
<p>It is specified by the <a href="#transfer-specification"><strong>transfer-spec</strong></a>
parameter <code>destination_root</code>. As such, it can be modified
with option:
<code>--ts=@json:&#39;{&quot;destination_root&quot;:&quot;&lt;path&gt;&quot;}&#39;</code>. The
option <code>to_folder</code> provides an equivalent and convenient way
to change this parameter: <code>--to-folder=&lt;path&gt;</code>.</p>
<h3 data-number="4.24.2" id="list-of-files-for-transfers"><span class="header-section-number">4.24.2</span> List of files for
transfers</h3>
<p>When uploading, downloading or sending files, the user must specify
the list of files to transfer.</p>
<p>By default, the list of files to transfer is simply provided on the
command line.</p>
<p>The list of (source) files to transfer is specified by (extended
value) option <code>sources</code> (default: <code>@args</code>). The
list is either simply the list of source files, or a combined
source/destination list (see below) depending on value of option
<code>src_type</code> (default: <code>list</code>).</p>
<p>In <code>ascli</code>, all transfer parameters, including file list,
are provided to the transfer agent in a <a href="#transfer-specification"><strong>transfer-spec</strong></a> so
that execution of a transfer is independent of the transfer agent
(direct, connect, node, transfer daemon...). So, eventually, the list of
files to transfer is provided to the transfer agent using the <a href="#transfer-specification"><strong>transfer-spec</strong></a> field:
<code>&quot;paths&quot;</code> which is a list (array) of pairs of
<code>&quot;source&quot;</code> (mandatory) and <code>&quot;destination&quot;</code>
(optional). The <code>sources</code> and <code>src_type</code> options
provide convenient ways to populate the transfer spec with the source
file list.</p>
<p>Possible values for option <code>sources</code> are:</p>
<ul>
<li><p><code>@args</code> : (default) the list of files (or file pair)
is directly provided on the command line (after commands): unused
arguments (not starting with <code>-</code>) are considered as source
files. So, by default, the list of files to transfer will be simply
specified on the command line. Example:</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb278-1"><a href="#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server upload ~/first.file secondfile</span></code></pre></div>
<p>This is the same as (with default values):</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server upload <span class="at">--sources</span><span class="op">=</span>@args <span class="at">--src-type</span><span class="op">=</span>list ~/mysample.file secondfile</span></code></pre></div></li>
<li><p>An <a href="#extended-value-syntax">Extended Value</a> with type
<strong>Array of String</strong></p></li>
</ul>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Extended values can be tested with the command
<code>config echo</code></p></div>
</div>
<p>Examples:</p>
<ul>
<li><p>Using extended value</p>
<p>Create the file list:</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb280-1"><a href="#cb280-1" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> ~/mysample.file <span class="op">&gt;</span> myfilelist.txt</span>
<span id="cb280-2"><a href="#cb280-2" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> secondfile <span class="op">&gt;&gt;</span> myfilelist.txt</span></code></pre></div>
<p>Use the file list: one path per line:</p>
<div class="sourceCode" id="cb281"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="op">--</span>sources<span class="op">=</span><span class="ot">@lines</span><span class="wa">:@file</span><span class="op">:</span>myfilelist<span class="at">.txt</span></span></code></pre></div></li>
<li><p>Using JSON array</p>
<div class="sourceCode" id="cb282"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb282-1"><a href="#cb282-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--sources=@json:</span><span class="st">&#39;[&quot;file1&quot;,&quot;file2&quot;]&#39;</span></span></code></pre></div></li>
<li><p>Using STDIN, one path per line</p>
<div class="sourceCode" id="cb283"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb283-1"><a href="#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--sources=@lines:@stdin:</span></span></code></pre></div></li>
<li><p>Using Ruby code (one path per line in file)</p>
<div class="sourceCode" id="cb284"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb284-1"><a href="#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="op">--</span>sources<span class="op">=</span><span class="ot">@ruby</span><span class="wa">:</span><span class="vs">&#39;File.read(&quot;myfilelist.txt&quot;).split(&quot;\n&quot;)&#39;</span></span></code></pre></div></li>
<li><p><code>@ts</code> : the user provides the list of files directly
in the <code>paths</code> field of transfer spec (option
<code>ts</code>). Examples:</p>
<ul>
<li>Using transfer spec</li>
</ul>
<div class="sourceCode" id="cb285"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb285-1"><a href="#cb285-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--sources=@ts</span> <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;paths&quot;:[{&quot;source&quot;:&quot;file1&quot;},{&quot;source&quot;:&quot;file2&quot;}]}&#39;</span></span></code></pre></div></li>
</ul>
<p>The option <code>src_type</code> allows specifying if the list
specified in option <code>sources</code> is a simple file list or if it
is a file pair list.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Option <code>src_type</code> is not used if option
<code>sources</code> is set to <code>@ts</code></p></div>
</div>
<p>Supported values for <code>src_type</code> are:</p>
<ul>
<li><code>list</code> : (default) the path of destination is the same as
source and each entry is a source file path</li>
<li><code>pair</code> : the first element is the first source, the
second element is the first destination, and so on.</li>
</ul>
<p>Example: Source file <code>200KB.1</code> is renamed
<code>sample1</code> on destination:</p>
<div class="sourceCode" id="cb286"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb286-1"><a href="#cb286-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server upload <span class="at">--src-type</span><span class="op">=</span>pair ~/Documents/Samples/200KB.1 /Upload/sample1</span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>There are some specific rules to specify a file list when using
<strong>Aspera on Cloud</strong>, refer to the AoC plugin section.</p></div>
</div>
<h3 data-number="4.24.3" id="source-directory-structure-on-destination"><span class="header-section-number">4.24.3</span> Source directory structure
on destination</h3>
<p>This section is not specific to <code>ascli</code> it is
<code>ascp</code> behavior.</p>
<p>The transfer destination is normally expected to designate a
destination folder.</p>
<p>But there is one exception: The destination specifies the new item
name when the following are met:</p>
<ul>
<li>There is a single source item (file or folder)</li>
<li>Transfer spec <code>create_dir</code> is not set to
<code>true</code> (<code>ascp</code> option <code>-d</code> not
provided)</li>
<li>Destination is not an existing folder</li>
<li>The <code>dirname</code> of destination is an existing folder</li>
</ul>
<p>For this reason it is recommended to set <code>create_dir</code> to
<code>true</code> for consistent behavior between single and multiple
items transfer, this is the default in <code>ascli</code>.</p>
<p>If a simple source file list is provided (no <code>destination</code>
in <code>paths</code>, i.e. no <code>file_pair_list</code> provided),
the destination folder is used as destination folder for each source
file, and source file folder names are not preserved.</p>
<p>The inner structure of source items that are folder is preserved on
destination.</p>
<p>A leading <code>/</code> on destination is ignored (relative to
docroot) unless docroot is not set (relative to home).</p>
<p>In the following table source folder <code>d3</code> contains 2
files: <code>f1</code> and <code>d4/f2</code>.</p>
<table>
<thead>
<tr>
<th>Source files</th>
<th>Destination</th>
<th>Folders on Dest.</th>
<th><code>create_dir</code></th>
<th>Destination Files</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>f1</code></td>
<td><code>d/f</code></td>
<td>-</td>
<td>false</td>
<td>Error: <code>d</code> does not exist.</td>
</tr>
<tr>
<td><code>f1</code></td>
<td><code>d/f</code></td>
<td><code>d</code></td>
<td>false</td>
<td><code>d/f</code> (renamed)</td>
</tr>
<tr>
<td><code>f1</code></td>
<td><code>d/f/.</code></td>
<td><code>d</code></td>
<td>false</td>
<td><code>d/f</code> (renamed)</td>
</tr>
<tr>
<td><code>f1</code></td>
<td><code>d/f</code></td>
<td><code>d/f</code></td>
<td>false</td>
<td><code>d/f/f1</code></td>
</tr>
<tr>
<td><code>f1</code> <code>f2</code></td>
<td><code>d</code></td>
<td><code>d</code></td>
<td>false</td>
<td><code>d/f1</code> <code>d/f2</code></td>
</tr>
<tr>
<td><code>d3</code></td>
<td><code>d</code></td>
<td>-</td>
<td>false</td>
<td><code>d/f1</code> <code>d/f2</code> (renamed)</td>
</tr>
<tr>
<td><code>f1</code></td>
<td><code>d</code></td>
<td>-</td>
<td>true</td>
<td><code>d/f1</code></td>
</tr>
<tr>
<td><code>f1</code> <code>f2</code></td>
<td><code>d</code></td>
<td>-</td>
<td>true</td>
<td><code>d/f1</code> <code>d/f2</code></td>
</tr>
<tr>
<td><code>d1/f1</code> <code>d2/f2</code></td>
<td><code>d</code></td>
<td>-</td>
<td>true</td>
<td><code>d/f1</code> <code>d/f2</code></td>
</tr>
<tr>
<td><code>d3</code></td>
<td><code>d</code></td>
<td>-</td>
<td>true</td>
<td><code>d/d3/f1</code> <code>d/d3/d4/f2</code></td>
</tr>
</tbody>
</table>
<p>If a file par list is provided then it is possible to rename or
specify a different destination folder for each source (relative to the
destination).</p>
<p>If transfer spec has a <code>src_base</code>, it has the side effect
that the simple source file list is considered as a file pair list, and
so the lower structure of source folders is preserved on
destination.</p>
<table>
<thead>
<tr>
<th>Source files</th>
<th>Destination</th>
<th><code>src_base</code></th>
<th>Destination Files</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>d1/d2/f2</code> <code>d1/d3/f3</code></td>
<td><code>d</code></td>
<td><code>d1</code></td>
<td><code>d/d2/f2</code> <code>d/d3/f3</code></td>
</tr>
</tbody>
</table>
<p>Advanced Example: Send files <code>./file1</code> and
<code>./folder2/files2</code> to server (e.g. <code>/Upload</code>) and
keep the original file names and folders, i.e. send <code>file1</code>
to <code>/Upload/file1</code> and <code>files2</code> to
<code>/Upload/folder2/files2</code>.</p>
<ul>
<li><p>If files are specified as
<code>./file1 ./folder2/files2</code>,</p>
<p>then destination will be:
<code>/Upload/file1 /Upload/files2</code></p></li>
<li><p>One possibility is to specify a file pair list:
<code>--src-type=pair file1 file1 folder2/files2 folder2/files2</code></p></li>
<li><p>Another possibility is to specify a source base:
<code>--src-base=$PWD $PWD/file1 $PWD/folder2/files2</code></p>
<p>(note that <code>.</code> cannot be used as source base)</p></li>
<li><p>Similarly, create a temporary soft link (Linux):
<code>ln -s . tmp_base</code> and use
<code>--src-base=tmp_base tmp_base/file1 tmp_base/folder2/files2</code></p></li>
<li><p>One can also similarly use <code>--sources=@ts</code> and specify
the list of files in the <code>paths</code> field of transfer spec with
both <code>source</code> and <code>destination</code> for each
file.</p></li>
</ul>
<h3 data-number="4.24.4" id="multi-session-transfer"><span class="header-section-number">4.24.4</span> Multi-session transfer</h3>
<p>Multi session, i.e. starting a transfer of a file set using multiple
sessions (one <code>ascp</code> process per session) is supported on
<code>direct</code> and <code>node</code> agents, not yet on
connect.</p>
<ul>
<li><code>--transfer=node</code></li>
</ul>
<div class="sourceCode" id="cb287"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb287-1"><a href="#cb287-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--ts=@json:</span><span class="st">&#39;{&quot;multi_session&quot;:10,&quot;multi_session_threshold&quot;:1}&#39;</span></span></code></pre></div>
<p>Multi-session is directly supported by the node daemon.</p>
<ul>
<li><code>--transfer=direct</code></li>
</ul>
<div class="sourceCode" id="cb288"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb288-1"><a href="#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--ts=@json:</span><span class="st">&#39;{&quot;multi_session&quot;:5,&quot;multi_session_threshold&quot;:1,&quot;resume_policy&quot;:&quot;none&quot;}&#39;</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p><code>resume_policy</code> set to <code>attr</code> may cause
problems: <code>none</code> or <code>sparse_csum</code> shall be
preferred.</p></div>
</div>
<p><code>ascli</code> starts multiple <code>ascp</code> for
Multi-session using <code>direct</code> agent.</p>
<p>When multi-session is used, one separate UDP port is used per session
(refer to <code>ascp</code> manual page).</p>
<h3 data-number="4.24.5" id="content-protection"><span class="header-section-number">4.24.5</span> Content protection</h3>
<p>Also known as Client-side encryption at rest (CSEAR), content
protection allows a client to send files to a server which will store
them encrypted (upload), and decrypt files as they are being downloaded
from a server, both using a passphrase, only known by users sharing
files. Files stay encrypted on server side.</p>
<p>Activating CSEAR consists in using transfer spec parameters:</p>
<ul>
<li><code>content_protection</code> : activate encryption
(<code>encrypt</code> for upload) or decryption (<code>decrypt</code>
for download)</li>
<li><code>content_protection_password</code> : the passphrase to be
used.</li>
</ul>
<p>Example: parameter to download a Faspex package and decrypt on the
fly</p>
<div class="sourceCode" id="cb289"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--ts=@json:</span><span class="st">&#39;{&quot;content_protection&quot;:&quot;decrypt&quot;,&quot;content_protection_password&quot;:&quot;my_password_here&quot;}&#39;</span></span></code></pre></div>
<h3 data-number="4.24.6" id="transfer-spec-examples"><span class="header-section-number">4.24.6</span> Transfer Spec Examples</h3>
<ul>
<li>Change target rate</li>
</ul>
<div class="sourceCode" id="cb290"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb290-1"><a href="#cb290-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--ts=@json:</span><span class="st">&#39;{&quot;target_rate_kbps&quot;:500000}&#39;</span></span></code></pre></div>
<ul>
<li>Override the FASP SSH port to a specific TCP port:</li>
</ul>
<div class="sourceCode" id="cb291"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb291-1"><a href="#cb291-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--ts=@json:</span><span class="st">&#39;{&quot;ssh_port&quot;:33002}&#39;</span></span></code></pre></div>
<ul>
<li>Force HTTP fallback mode:</li>
</ul>
<div class="sourceCode" id="cb292"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb292-1"><a href="#cb292-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--ts=@json:</span><span class="st">&#39;{&quot;http_fallback&quot;:&quot;force&quot;}&#39;</span></span></code></pre></div>
<ul>
<li>Activate progress when not activated by default on server</li>
</ul>
<div class="sourceCode" id="cb293"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb293-1"><a href="#cb293-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--ts=@json:</span><span class="st">&#39;{&quot;precalculate_job_size&quot;:true}&#39;</span></span></code></pre></div>
<h2 data-number="4.25" id="transfer-progress-bar"><span class="header-section-number">4.25</span> Transfer progress bar</h2>
<p>File transfer operations are monitored, and a progress bar is
displayed on the terminal if option <code>progress_bar</code>
(<code>Bool</code>) is set to <code>yes</code> (default if the output is
a terminal).</p>
<p>The same progress bar is used for any type of transfer, using
<code>ascp</code>, server to server, using HTTPS, etc...</p>
<h2 data-number="4.26" id="scheduler"><span class="header-section-number">4.26</span> Scheduler</h2>
<p>It is useful to configure automated scheduled execution.
<code>ascli</code> does not provide an internal scheduler. Instead, use
the service provided by the Operating system:</p>
<h3 data-number="4.26.1" id="windows-scheduler"><span class="header-section-number">4.26.1</span> Windows Scheduler</h3>
<p>Windows provides the <a href="https://docs.microsoft.com/en-us/windows/win32/taskschd/task-scheduler-start-page">Task
Scheduler</a>. It can be configured:</p>
<ul>
<li><p>Using utility <a href="https://learn.microsoft.com/fr-fr/windows-server/administration/windows-commands/schtasks-create"><code>schtasks.exe</code></a></p></li>
<li><p>Using Powershell function <a href="https://learn.microsoft.com/en-us/powershell/module/scheduledtasks"><code>scheduletasks</code></a></p></li>
<li><p>Using <code>taskschd.msc</code> (UI)</p></li>
</ul>
<h3 data-number="4.26.2" id="unix-like-scheduler"><span class="header-section-number">4.26.2</span> Unix-like Scheduler</h3>
<p>Unix-like systems (Linux, ...) provide <code>cron</code>, configured
using a <a href="https://www.man7.org/linux/man-pages/man5/crontab.5.html"><code>crontab</code></a></p>
<p>Linux also provides <code>anacron</code>, if tasks are hourly or
daily.</p>
<p>For example, on Linux it is convenient to create a wrapping script,
e.g. <code>cron_ascli</code> that will set up the environment (e.g.
Ruby) to properly start <code>ascli</code>:</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb294-1"><a href="#cb294-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb294-2"><a href="#cb294-2" aria-hidden="true" tabindex="-1"></a><span class="co"># load the Ruby environment</span></span>
<span id="cb294-3"><a href="#cb294-3" aria-hidden="true" tabindex="-1"></a><span class="bu">.</span> /etc/profile.d/rvm.sh</span>
<span id="cb294-4"><a href="#cb294-4" aria-hidden="true" tabindex="-1"></a><span class="ex">rvm</span> use 2.6 <span class="at">--quiet</span></span>
<span id="cb294-5"><a href="#cb294-5" aria-hidden="true" tabindex="-1"></a><span class="co"># set a timeout protection, just in case ascli is frozen </span></span>
<span id="cb294-6"><a href="#cb294-6" aria-hidden="true" tabindex="-1"></a><span class="va">tmout</span><span class="op">=</span>30m</span>
<span id="cb294-7"><a href="#cb294-7" aria-hidden="true" tabindex="-1"></a><span class="co"># forward arguments to ascli</span></span>
<span id="cb294-8"><a href="#cb294-8" aria-hidden="true" tabindex="-1"></a><span class="bu">exec</span> timeout <span class="va">${tmout}</span> ascli <span class="st">&quot;</span><span class="va">${@}</span><span class="st">&quot;</span></span></code></pre></div>
<p>Example of cronjob created for user <code>xfer</code>.</p>
<div class="sourceCode" id="cb295"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb295-1"><a href="#cb295-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crontab</span><span class="op">&lt;&lt;EOF</span></span>
<span id="cb295-2"><a href="#cb295-2" aria-hidden="true" tabindex="-1"></a><span class="st">0    * * * *  /home/xfer/cron_ascli preview scan --logger=syslog --display=error</span></span>
<span id="cb295-3"><a href="#cb295-3" aria-hidden="true" tabindex="-1"></a><span class="st">2-59 * * * *  /home/xfer/cron_ascli preview trev --logger=syslog --display=error</span></span>
<span id="cb295-4"><a href="#cb295-4" aria-hidden="true" tabindex="-1"></a><span class="op">EOF</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Logging options are kept here in the <code>cron</code> file instead
of configuration file to allow execution on command line with output on
command line.</p></div>
</div>
<h2 data-number="4.27" id="running-as-service"><span class="header-section-number">4.27</span> Running as service</h2>
<p>Some commands result in <code>ascli</code> running as a server,
listening on a port. In this case, it is usually desirable to run
<code>ascli</code> as a service. On Linux, typically, <a href="https://systemd.io/"><code>systemd</code></a> is used.</p>
<p>A convenient way is to write a startup script, and run this script as
a service.</p>
<p>Let&#39;s give a base name for our service: <code>my_ascli_svc</code></p>
<p>The startup script can be simply the <code>ascli</code> command line,
for example: <code>/usr/local/bin/start_my_ascli_svc.sh</code>:</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb296-1"><a href="#cb296-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb296-2"><a href="#cb296-2" aria-hidden="true" tabindex="-1"></a><span class="bu">set</span> <span class="at">-e</span></span>
<span id="cb296-3"><a href="#cb296-3" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Starting my_ascli_svc at </span><span class="va">$(</span><span class="fu">date</span><span class="va">)</span><span class="st">&quot;</span></span>
<span id="cb296-4"><a href="#cb296-4" aria-hidden="true" tabindex="-1"></a><span class="co"># set PATH to find ascli, and other environment setup</span></span>
<span id="cb296-5"><a href="#cb296-5" aria-hidden="true" tabindex="-1"></a><span class="bu">exec</span> ascli .....</span></code></pre></div>
<p>And make this script executable:</p>
<div class="sourceCode" id="cb297"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb297-1"><a href="#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> a+x /usr/local/bin/start_my_ascli_svc.sh</span></code></pre></div>
<p>Create a startup file:
<code>/etc/systemd/system/my_ascli_svc.service</code> :</p>
<div class="sourceCode" id="cb298"><pre class="sourceCode ini"><code class="sourceCode ini"><span id="cb298-1"><a href="#cb298-1" aria-hidden="true" tabindex="-1"></a><span class="kw">[Unit]</span></span>
<span id="cb298-2"><a href="#cb298-2" aria-hidden="true" tabindex="-1"></a><span class="dt">Description</span><span class="ot">=</span><span class="st">My ascli daemon</span></span>
<span id="cb298-3"><a href="#cb298-3" aria-hidden="true" tabindex="-1"></a><span class="dt">After</span><span class="ot">=</span><span class="st">network.target</span></span>
<span id="cb298-4"><a href="#cb298-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-5"><a href="#cb298-5" aria-hidden="true" tabindex="-1"></a><span class="kw">[Service]</span></span>
<span id="cb298-6"><a href="#cb298-6" aria-hidden="true" tabindex="-1"></a><span class="dt">ExecStart</span><span class="ot">=</span><span class="st">/usr/local/bin/start_my_ascli_svc.sh</span></span>
<span id="cb298-7"><a href="#cb298-7" aria-hidden="true" tabindex="-1"></a><span class="dt">Restart</span><span class="ot">=</span><span class="st">on-failure</span></span>
<span id="cb298-8"><a href="#cb298-8" aria-hidden="true" tabindex="-1"></a><span class="dt">RestartSec</span><span class="ot">=</span><span class="dv">15</span></span>
<span id="cb298-9"><a href="#cb298-9" aria-hidden="true" tabindex="-1"></a><span class="dt">User</span><span class="ot">=</span><span class="st">xfer</span></span>
<span id="cb298-10"><a href="#cb298-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Optional, specify a working directory</span></span>
<span id="cb298-11"><a href="#cb298-11" aria-hidden="true" tabindex="-1"></a><span class="co"># WorkingDirectory=/path/to/working/dir</span></span>
<span id="cb298-12"><a href="#cb298-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Optional, redirect output</span></span>
<span id="cb298-13"><a href="#cb298-13" aria-hidden="true" tabindex="-1"></a><span class="dt">StandardOutput</span><span class="ot">=</span><span class="st">journal</span></span>
<span id="cb298-14"><a href="#cb298-14" aria-hidden="true" tabindex="-1"></a><span class="dt">StandardError</span><span class="ot">=</span><span class="st">journal</span></span>
<span id="cb298-15"><a href="#cb298-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb298-16"><a href="#cb298-16" aria-hidden="true" tabindex="-1"></a><span class="kw">[Install]</span></span>
<span id="cb298-17"><a href="#cb298-17" aria-hidden="true" tabindex="-1"></a><span class="dt">WantedBy</span><span class="ot">=</span><span class="st">multi-user.target</span></span></code></pre></div>
<p>Then enable and start with:</p>
<div class="sourceCode" id="cb299"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb299-1"><a href="#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl daemon-reload</span>
<span id="cb299-2"><a href="#cb299-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> systemctl enable <span class="at">--now</span> my_ascli_svc.service</span>
<span id="cb299-3"><a href="#cb299-3" aria-hidden="true" tabindex="-1"></a><span class="ex">systemctl</span> status my_ascli_svc.service</span>
<span id="cb299-4"><a href="#cb299-4" aria-hidden="true" tabindex="-1"></a><span class="ex">journalctl</span> <span class="at">-u</span> my_ascli_svc.service</span></code></pre></div>
<h2 data-number="4.28" id="locking-for-exclusive-execution"><span class="header-section-number">4.28</span> Locking for exclusive
execution</h2>
<p>In some cases one needs to ensure that <code>ascli</code> is not
executed several times in parallel.</p>
<p>When <code>ascli</code> is executed automatically on a schedule
basis, one generally desires that a new execution is not started if a
previous execution is still running because an ongoing operation may
last longer than the scheduling period:</p>
<ul>
<li>Executing instances may pile-up and kill the system</li>
<li>The same file may be transferred by multiple instances at the same
time.</li>
<li><code>preview</code> may generate the same files in multiple
instances.</li>
</ul>
<p>Usually the OS native scheduler already provides some sort of
protection against parallel execution:</p>
<ul>
<li>The Windows scheduler does this by default</li>
<li>Linux <code>cron</code> can leverage the utility <a href="https://man.cx/flock%281%29"><code>flock</code></a> to do the
same:</li>
</ul>
<div class="sourceCode" id="cb300"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb300-1"><a href="#cb300-1" aria-hidden="true" tabindex="-1"></a><span class="ex">/usr/bin/flock</span> <span class="at">-w</span> 0 /var/cron.lock ascli ...</span></code></pre></div>
<p><code>ascli</code> natively supports a locking mechanism with option
<code>lock_port</code>. Technically, this opens a local TCP server port,
and fails if this port is already used, providing a local lock. Lock is
released when process exits. When using <code>ascli</code> in a
container, this does not work with other containers, as each container
have its own network.</p>
<p>Testing <code>ascli</code> locking:</p>
<p>Run this same command in two separate terminals within less than 30
seconds:</p>
<div class="sourceCode" id="cb301"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb301-1"><a href="#cb301-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config echo @ruby:<span class="st">&#39;sleep(30)&#39;</span> <span class="at">--lock-port</span><span class="op">=</span>12345</span></code></pre></div>
<p>The first instance will sleep 30 seconds, the second one will
immediately exit like this:</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb302-1"><a href="#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="ex">WARN</span> <span class="at">--</span> : Another instance is already running <span class="er">(</span><span class="ex">Address</span> already in use <span class="at">-</span> bind<span class="er">(</span><span class="ex">2</span><span class="kw">)</span> <span class="cf">for</span> <span class="st">&quot;127.0.0.1&quot;</span> port 12345<span class="kw">)</span><span class="bu">.</span></span></code></pre></div>
<h2 data-number="4.29" id="provençal"><span class="header-section-number">4.29</span> &quot;Provençal&quot;</h2>
<p><code>ascp</code>, the underlying executable implementing Aspera file
transfer using FASP, has a capability to not only access the local file
system (using system&#39;s
<code>open</code>,<code>read</code>,<code>write</code>,<code>close</code>
primitives), but also to do the same operations on other data storage
such as S3, Hadoop and others. This mechanism is called
<strong>PVCL</strong> (from <strong>Provençal</strong>, a restaurant
located in Sophia Antipolis). Several <strong>PVCL</strong> adapters are
available, one is embedded in <code>ascp</code>, the others are provided
in shared libraries and must be activated.</p>
<p>The list of supported <strong>PVCL</strong> adapters can be retrieved
with command:</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb303-1"><a href="#cb303-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config ascp info <span class="at">--fields</span><span class="op">=</span>@re:<span class="st">&#39;^pvcl&#39;</span></span></code></pre></div>
<pre class="text"><code>process v1
shares v1
noded v1
faux v1
file v1
stdio v1
stdio-tar v1</code></pre>
<p>Here we can see the adapters: <code>process</code>,
<code>shares</code>, <code>noded</code>, <code>faux</code>,
<code>file</code>, <code>stdio</code>, <code>stdio-tar</code>.</p>
<p>Those adapters can be used wherever a file path is used in
<code>ascp</code> including configuration. They act as a <strong>pseudo
drive</strong>.</p>
<p>The simplified format is:</p>
<div class="sourceCode" id="cb305"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb305-1"><a href="#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;</span>adapter<span class="op">&gt;</span>:///<span class="op">&lt;</span>sub <span class="fu">file</span> path<span class="op">&gt;</span><span class="pp">?</span><span class="op">&lt;</span>arg1<span class="op">&gt;</span>=<span class="op">&lt;</span>val1<span class="op">&gt;&amp;</span>...</span></code></pre></div>
<p>One of the adapters, used in this manual, for testing, is
<code>faux</code>. It is a pseudo file system allowing generation of
file data without actual storage (on source or destination).</p>
<h2 data-number="4.30" id="faux-for-testing"><span class="header-section-number">4.30</span> <code>faux:</code> for
testing</h2>
<p>This adapter can be used to simulate a file or a directory. This is a
feature of <code>ascp</code>, not <code>ascli</code>. The following is
an extract of the man page of <code>ascp</code>.</p>
<p>To discard data at the destination, the destination argument is set
to <code>faux://</code>.</p>
<p>To send uninitialized data in place of an actual source file, the
source file is replaced with an argument of the form:</p>
<div class="sourceCode" id="cb306"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb306-1"><a href="#cb306-1" aria-hidden="true" tabindex="-1"></a><span class="ex">faux:///filename?filesize</span></span></code></pre></div>
<p>where:</p>
<ul>
<li><code>filename</code> is the name that will be assigned to the file
on the destination</li>
<li><code>filesize</code> is the number of bytes that will be sent (in
decimal).</li>
</ul>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Characters <code>?</code> and <code>&amp;</code> are shell special
characters (wildcard and background), so <code>faux</code> file
specification on command line should be protected (using quotes or
<code>\</code>). If not, the shell may give error:
<code>no matches found</code> or equivalent.</p></div>
</div>
<p>For all sizes, a suffix can be added (case-insensitive) to the size:
k, m, g, t, p, e (values are power of 2, e.g. 1M is 2<sup>20</sup>, i.e.
1 mebibyte, not megabyte). The maximum allowed value is
8*2<sup>60</sup>. Very large <code>faux</code> file sizes (petabyte
range and above) will likely fail due to lack of destination storage
unless destination is <code>faux://</code>.</p>
<p>To send uninitialized data in place of a source directory, the source
argument is replaced with an argument of the form:</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb307-1"><a href="#cb307-1" aria-hidden="true" tabindex="-1"></a><span class="ex">faux:///dirname?</span><span class="op">&lt;</span>arg1<span class="op">&gt;</span>=<span class="op">&lt;</span>val1<span class="op">&gt;&amp;</span>...</span></code></pre></div>
<p>where:</p>
<ul>
<li><code>dirname</code> is the folder name and can contain
<code>/</code> to specify a subfolder.</li>
<li>Supported arguments are:</li>
</ul>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>count</td>
<td>int</td>
<td>Number of files<br />Mandatory</td>
</tr>
<tr>
<td>file</td>
<td>string</td>
<td>Basename for files<br />Default: <code>file</code></td>
</tr>
<tr>
<td>size</td>
<td>int</td>
<td>Size of first file.<br />Default: 0</td>
</tr>
<tr>
<td>inc</td>
<td>int</td>
<td>Increment applied to determine next file size<br />Default: 0</td>
</tr>
<tr>
<td>seq</td>
<td>enum</td>
<td>Sequence in determining next file size<br />Values:
<code>random</code>, <code>sequential</code><br />Default:
<code>sequential</code></td>
</tr>
<tr>
<td>buf_init</td>
<td>enum</td>
<td>How source data is initialized<br />Option <code>none</code> is not
allowed for downloads.<br />Values:<code>none</code>, <code>zero</code>,
<code>random</code><br />Default:<code>zero</code></td>
</tr>
</tbody>
</table>
<p>The sequence parameter is applied as follows:</p>
<ul>
<li><p>If <code>seq</code> is <code>random</code> then each file size
is:</p>
<ul>
<li><code>size +/- (inc * rand())</code></li>
<li>Where rand is a random number between 0 and 1</li>
<li>Note that file size must not be negative, inc will be set to size if
it is greater than size</li>
<li>Similarly, overall file size must be less than 8*2<sup>60</sup>. If
size + inc is greater, inc will be reduced to limit size + inc to
7*2<sup>60</sup>.</li>
</ul></li>
<li><p>If <code>seq</code> is <code>sequential</code> then each file
size is:</p>
<ul>
<li><code>size + ((file_index - 1) * inc)</code></li>
<li>Where first file is index 1</li>
<li>So file1 is <code>size</code> bytes, file2 is
<code>size + inc</code> bytes, file3 is <code>size + inc * 2</code>
bytes, etc.</li>
<li>As with <code>random</code>, <code>inc</code> will be adjusted if
<code>size + (count * inc)</code> is not less than
8*2<sup>60</sup>.</li>
</ul></li>
</ul>
<p>Filenames generated are of the form:
<code>&lt;file&gt;_&lt;00000 ... count&gt;_&lt;filesize&gt;</code></p>
<p>Examples:</p>
<ul>
<li>Upload 20 gibibyte of random data to file <code>myfile</code> to
directory /Upload</li>
</ul>
<div class="sourceCode" id="cb308"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb308-1"><a href="#cb308-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server upload faux:///myfile\?20g <span class="at">--to-folder</span><span class="op">=</span>/Upload</span></code></pre></div>
<ul>
<li>Upload a file /tmp/sample but do not save results to disk (no
docroot on destination)</li>
</ul>
<div class="sourceCode" id="cb309"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb309-1"><a href="#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server upload /tmp/sample <span class="at">--to-folder</span><span class="op">=</span>faux://</span></code></pre></div>
<ul>
<li>Upload a faux directory <code>mydir</code> containing 1 million
files, sequentially with sizes ranging from 0 to 2 Mebibyte - 2 bytes,
with the base name of each file being <code>testfile</code> to
/Upload</li>
</ul>
<div class="sourceCode" id="cb310"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb310-1"><a href="#cb310-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server upload <span class="st">&quot;faux:///mydir?file=testfile&amp;count=1m&amp;size=0&amp;inc=2&amp;seq=sequential&quot;</span> <span class="at">--to-folder</span><span class="op">=</span>/Upload</span></code></pre></div>
<ul>
<li>Upload a faux directory <code>mydir</code> containing 1000 files, of
size 1 byte, with the base name of each file being <code>testfile</code>
to /Upload</li>
</ul>
<div class="sourceCode" id="cb311"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb311-1"><a href="#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server upload <span class="st">&quot;faux:///mydir?file=testfile&amp;count=1000&amp;size=1&quot;</span> <span class="at">--to-folder</span><span class="op">=</span>/Upload</span></code></pre></div>
<h2 data-number="4.31" id="usage"><span class="header-section-number">4.31</span> Usage</h2>
<pre class="text"><code>ascli -h
NAME
        ascli -- a command line tool for Aspera Applications (v4.24.0.pre)

SYNOPSIS
        ascli COMMANDS [OPTIONS] [ARGS]

DESCRIPTION
        Use Aspera application to perform operations on command line.
        Documentation and examples: https://rubygems.org/gems/aspera-cli
        execute: ascli conf doc
        or visit: https://www.rubydoc.info/gems/aspera-cli
        source repo: https://github.com/IBM/aspera-cli

ENVIRONMENT VARIABLES
        Any option can be set as an environment variable, refer to the manual

COMMANDS
        To list first level commands, execute: ascli
        Note that commands can be written shortened (provided it is unique).

OPTIONS
        Options begin with a &#39;-&#39; (minus), and value is provided on command line.
        Special values are supported beginning with special prefix @pfx:, where pfx is one of:
        val, base64, csvt, env, file, uri, json, lines, list, none, path, re, ruby, secret, stdin, stdbin, yaml, zlib, extend, preset, vault
        Dates format is &#39;DD-MM-YY HH:MM:SS&#39;, or &#39;now&#39; or &#39;-&lt;num&gt;h&#39;

ARGS
        Some commands require mandatory arguments, e.g. a path.

OPTIONS: global
        --interactive=ENUM           Use interactive input of missing params: [no], yes
        --ask-options=ENUM           Ask even optional options: [no], yes
        --struct-parser=ENUM         Default parser when expected value is a struct: json, ruby
        --format=ENUM                Output format: text, nagios, ruby, json, jsonpp, yaml, [table], csv, image
        --output=VALUE               Destination for results (String)
        --display=ENUM               Output only some information: [info], data, error
        --fields=VALUE               Comma separated list of: fields, or ALL, or DEF (String, Array, Regexp, Proc)
        --select=VALUE               Select only some items in lists: column, value (Hash, Proc)
        --table-style=VALUE          (Table) Display style (Hash)
        --flat-hash=ENUM             (Table) Display deep values as additional keys: no, [yes]
        --multi-single=ENUM          (Table) Control how object list is displayed as single table, or multiple objects: [no], yes, single
        --show-secrets=ENUM          Show secrets on command output: [no], yes
        --image=VALUE                Options for image display (Hash)
    -h, --help                       Show this message
        --bash-comp                  Generate bash completion for command
        --show-config                Display parameters used for the provided action
    -v, --version                    Display version
        --ui=ENUM                    Method to start browser: text, [graphical]
        --invalid-characters=VALUE   Replacement character and invalid filename characters
        --log-level=ENUM             Log level: trace2, trace1, debug, info, [warn], error, fatal, unknown
        --log-format=VALUE           Log formatter (Proc, Logger::Formatter)
        --logger=ENUM                Logging method: [stderr], stdout, syslog
        --lock-port=VALUE            Prevent dual execution of a command, e.g. in cron (Integer)
        --once-only=ENUM             Process only new items (some commands): [no], yes
        --log-secrets=ENUM           Show passwords in logs: [no], yes
        --clean-temp=ENUM            Cleanup temporary files on exit: no, [yes]
        --pid-file=VALUE             Write process identifier to file, delete on exit (String)
        --home=VALUE                 Home folder for tool (String)
        --config-file=VALUE          Path to YAML file with preset configuration
        --secret=VALUE               Secret for access keys
        --vault=VALUE                Vault for secrets (Hash)
        --vault-password=VALUE       Vault password
        --query=VALUE                Additional filter for for some commands (list/delete) (Hash, Array)
        --property=VALUE             Name of property to set (modify operation)
        --bulk=ENUM                  Bulk operation (only some): [no], yes
        --bfail=ENUM                 Bulk operation error handling: no, [yes]
    -N, --no-default                 Do not load default configuration for plugin
    -P, --presetVALUE                Load the named option preset from current config file
        --version-check-days=VALUE   Period in days to check new version (zero to disable)
        --plugin-folder=VALUE        Folder where to find additional plugins
        --override=ENUM              Wizard: override existing value: [no], yes
        --default=ENUM               Wizard: set as default configuration for specified plugin (also: update): no, [yes]
        --test-mode=ENUM             Wizard: skip private key check step: [no], yes
        --key-path=VALUE             Wizard: path to private key for JWT
        --ascp-path=VALUE            Ascp: Path to ascp
        --use-product=VALUE          Ascp: Use ascp from specified product
        --sdk-url=VALUE              Ascp: URL to get Aspera Transfer Executables
        --locations-url=VALUE        Ascp: URL to get locations of Aspera Transfer Daemon
        --sdk-folder=VALUE           Ascp: SDK folder path
        --progress-bar=ENUM          Display progress bar: [no], yes
        --smtp=VALUE                 Email: SMTP configuration (Hash)
        --notify-to=VALUE            Email: Recipient for notification of transfers
        --notify-template=VALUE      Email: ERB template for notification of transfers
        --insecure=ENUM              HTTP/S: Do not validate any certificate: [no], yes
        --ignore-certificate=VALUE   HTTP/S: Do not validate certificate for these URLs (Array)
        --warn-insecure=ENUM         HTTP/S: Issue a warning if certificate is ignored: no, [yes]
        --cert-stores=VALUE          HTTP/S: List of folder with trusted certificates (Array, String)
        --http-options=VALUE         HTTP/S: Options for HTTP/S socket (Hash)
        --http-proxy=VALUE           HTTP/S: URL for proxy with optional credentials (String)
        --cache-tokens=ENUM          Save and reuse OAuth tokens: no, [yes]
        --fpac=VALUE                 Proxy auto configuration script
        --proxy-credentials=VALUE    HTTP proxy credentials for fpac: user, password (Array)
        --ts=VALUE                   Override transfer spec values (Hash)
        --to-folder=VALUE            Destination folder for transferred files
        --sources=VALUE              How list of transferred files is provided (@args,@ts,Array)
        --src-type=ENUM              Type of file list: [list], pair
        --transfer=ENUM              Type of transfer agent: desktop, node, [direct], transferd, httpgw, connect
        --transfer-info=VALUE        Parameters for transfer agent (Hash)

COMMAND: config
SUBCOMMANDS: ascp check_update coffee detect documentation download echo email_test file folder gem genkey image initdemo open platform plugins preset proxy_check pubkey remote_certificate smtp_settings test tokens transferd vault wizard


COMMAND: shares
SUBCOMMANDS: admin files health
OPTIONS:
        --url=VALUE                  URL of application, e.g. https://faspex.example.com/aspera/faspex
        --username=VALUE             User&#39;s name to log in
        --password=VALUE             User&#39;s password


COMMAND: node
SUBCOMMANDS: access_keys api_details asperabrowser async basic_token bearer_token browse cat central delete download events health info license mkdir mkfile mklink rename search service simulator slash space ssync stream sync telemetry transfer transport upload watch_folder
OPTIONS:
        --url=VALUE                  URL of application, e.g. https://faspex.example.com/aspera/faspex
        --username=VALUE             User&#39;s name to log in
        --password=VALUE             User&#39;s password
        --validator=VALUE            Identifier of validator (optional for central)
        --asperabrowserurl=VALUE     URL for simple aspera web ui
        --default-ports=ENUM         Gen4: Use standard FASP ports (true) or get from node API (false): no, [yes]
        --node-cache=ENUM            Gen4: Set to no to force actual file system read: no, [yes]
        --root-id=VALUE              Gen4: File id of top folder when using access key (override AK root id)
        --dynamic-key=VALUE          Private key PEM to use for dynamic key auth


COMMAND: faspio
SUBCOMMANDS: bridges health
OPTIONS:
        --url=VALUE                  URL of application, e.g. https://faspex.example.com/aspera/faspex
        --username=VALUE             User&#39;s name to log in
        --password=VALUE             User&#39;s password
        --auth=ENUM                  OAuth type of authentication: jwt, basic
        --client-id=VALUE            OAuth client identifier
        --private-key=VALUE          OAuth JWT RSA private key PEM value (prefix file path with @file:)
        --passphrase=VALUE           OAuth JWT RSA private key passphrase


COMMAND: orchestrator
SUBCOMMANDS: health info plugins processes workflow
OPTIONS:
        --url=VALUE                  URL of application, e.g. https://faspex.example.com/aspera/faspex
        --username=VALUE             User&#39;s name to log in
        --password=VALUE             User&#39;s password
        --result=VALUE               Specify result value as: &#39;work_step:parameter&#39;
        --synchronous=ENUM           Wait for completion: [no], yes
        --ret-style=ENUM             How return type is requested in api: header, [arg], ext
        --auth-style=ENUM            Authentication type: arg_pass, [head_basic], apikey


COMMAND: alee
SUBCOMMANDS: entitlement health
OPTIONS:
        --url=VALUE                  URL of application, e.g. https://faspex.example.com/aspera/faspex
        --username=VALUE             User&#39;s name to log in
        --password=VALUE             User&#39;s password


COMMAND: ats
SUBCOMMANDS: access_key api_key aws_trust_policy cluster
OPTIONS:
        --ibm-api-key=VALUE          IBM API key, see https://cloud.ibm.com/iam/apikeys
        --instance=VALUE             ATS instance in ibm cloud
        --ats-key=VALUE              ATS key identifier (ats_xxx)
        --ats-secret=VALUE           ATS key secret
        --params=VALUE               Parameters access key creation (@json:)
        --cloud=VALUE                Cloud provider
        --region=VALUE               Cloud region


COMMAND: faspex5
SUBCOMMANDS: admin bearer_token gateway health invitations packages postprocessing shared_folders user version
OPTIONS:
        --url=VALUE                  URL of application, e.g. https://faspex.example.com/aspera/faspex
        --username=VALUE             User&#39;s name to log in
        --password=VALUE             User&#39;s password
        --client-id=VALUE            OAuth client identifier
        --client-secret=VALUE        OAuth client secret
        --redirect-uri=VALUE         OAuth redirect URI for web authentication
        --auth=ENUM                  OAuth type of authentication: web, [jwt], boot
        --private-key=VALUE          OAuth JWT RSA private key PEM value (prefix file path with @file:)
        --passphrase=VALUE           OAuth JWT RSA private key passphrase
        --box=VALUE                  Package inbox, either shared inbox name or one of: inbox, inbox_history, inbox_all, inbox_all_history, outbox, outbox_history, pending, pending_history, all or ALL
        --shared-folder=VALUE        Send package with files from shared folder
        --group-type=ENUM            Type of shared box: [shared_inboxes], workgroups


COMMAND: cos
SUBCOMMANDS: node
OPTIONS:
        --bucket=VALUE               Bucket name
        --endpoint=VALUE             Storage endpoint (URL)
        --apikey=VALUE               Storage API key
        --crn=VALUE                  Resource instance id (CRN)
        --service-credentials=VALUE  IBM Cloud service credentials (Hash)
        --region=VALUE               Storage region
        --identity=VALUE             Authentication URL (https://iam.cloud.ibm.com/identity)


COMMAND: httpgw
SUBCOMMANDS: health info
OPTIONS:
        --url=VALUE                  URL of application, e.g. https://app.example.com/aspera/app


COMMAND: faspex
SUBCOMMANDS: address_book dropbox health login_methods me package source v4
OPTIONS:
        --url=VALUE                  URL of application, e.g. https://faspex.example.com/aspera/faspex
        --username=VALUE             User&#39;s name to log in
        --password=VALUE             User&#39;s password
        --link=VALUE                 Public link for specific operation
        --delivery-info=VALUE        Package delivery information (Hash)
        --remote-source=VALUE        Remote source for package send (id or %name:)
        --storage=VALUE              Faspex local storage definition (for browsing source)
        --recipient=VALUE            Use if recipient is a dropbox (with *)
        --box=ENUM                   Package box: [inbox], archive, sent


COMMAND: preview
SUBCOMMANDS: check events scan show test trevents
OPTIONS:
        --url=VALUE                  URL of application, e.g. https://faspex.example.com/aspera/faspex
        --username=VALUE             User&#39;s name to log in
        --password=VALUE             User&#39;s password
        --skip-format=ENUM           Skip this preview format (multiple possible): png, mp4
        --folder-reset-cache=ENUM    Force detection of generated preview by refresh cache: [no], header, read
        --skip-types=VALUE           Skip types in comma separated list
        --previews-folder=VALUE      Preview folder in storage root
        --temp-folder=VALUE          Path to temp folder
        --skip-folders=VALUE         List of folder to skip
        --base=VALUE                 Basename of output for for test
        --scan-path=VALUE            Subpath in folder id to start scan in (default=/)
        --scan-id=VALUE              Folder id in storage to start scan in, default is access key main folder id
        --mimemagic=ENUM             Use Mime type detection of gem mimemagic: [no], yes
        --overwrite=ENUM             When to overwrite result file: always, never, [mtime]
        --file-access=ENUM           How to read and write files in repository: [local], remote
        --max-size=VALUE             Maximum size (in bytes) of preview file
        --thumb-vid-scale=VALUE      Png: video: size (ffmpeg scale argument)
        --thumb-vid-fraction=VALUE   Png: video: time percent position of snapshot
        --thumb-img-size=VALUE       Png: non-video: height (and width)
        --thumb-text-font=VALUE      Png: plaintext: font for text rendering: `magick identify -list font`
        --video-conversion=ENUM      Mp4: method for preview generation: [reencode], blend, clips
        --video-png-conv=ENUM        Mp4: method for thumbnail generation: [fixed], animated
        --video-scale=VALUE          Mp4: all: video scale (ffmpeg scale argument)
        --video-start-sec=VALUE      Mp4: all: start offset (seconds) of video preview
        --reencode-ffmpeg=VALUE      Mp4: reencode: options to ffmpeg
        --blend-keyframes=VALUE      Mp4: blend: # key frames
        --blend-pauseframes=VALUE    Mp4: blend: # pause frames
        --blend-transframes=VALUE    Mp4: blend: # transition blend frames
        --blend-fps=VALUE            Mp4: blend: frame per second
        --clips-count=VALUE          Mp4: clips: number of clips
        --clips-length=VALUE         Mp4: clips: length in seconds of each clips


COMMAND: aoc
SUBCOMMANDS: admin automation bearer_token files gateway organization packages reminder servers tier_restrictions user
OPTIONS:
        --url=VALUE                  URL of application, e.g. https://faspex.example.com/aspera/faspex
        --username=VALUE             User&#39;s name to log in
        --password=VALUE             User&#39;s password
        --auth=ENUM                  OAuth type of authentication: web, [jwt]
        --client-id=VALUE            OAuth API client identifier
        --client-secret=VALUE        OAuth API client secret
        --scope=VALUE                OAuth scope for AoC API calls
        --redirect-uri=VALUE         OAuth API client redirect URI
        --private-key=VALUE          OAuth JWT RSA private key PEM value (prefix file path with @file:)
        --passphrase=VALUE           RSA private key passphrase (String)
        --workspace=VALUE            Name of workspace (String, NilClass)
        --new-user-option=VALUE      New user creation option for unknown package recipients (Hash)
        --validate-metadata=ENUM     Validate shared inbox metadata: no, [yes]
        --package-folder=VALUE       Field of package to use as folder name, or @none: (String, NilClass)


COMMAND: server
SUBCOMMANDS: browse cp delete df download du health info ls md5sum mkdir mv rename rm sync upload
OPTIONS:
        --url=VALUE                  URL of application, e.g. https://faspex.example.com/aspera/faspex
        --username=VALUE             User&#39;s name to log in
        --password=VALUE             User&#39;s password
        --ssh-keys=VALUE             SSH key path list (Array or single)
        --passphrase=VALUE           SSH private key passphrase
        --ssh-options=VALUE          SSH options (Hash)


COMMAND: console
SUBCOMMANDS: health transfer
OPTIONS:
        --url=VALUE                  URL of application, e.g. https://faspex.example.com/aspera/faspex
        --username=VALUE             User&#39;s name to log in
        --password=VALUE             User&#39;s password

</code></pre>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Commands and parameter values can be written in short form.</p></div>
</div>
<h2 data-number="4.32" id="bulk-creation-and-deletion-of-resources"><span class="header-section-number">4.32</span> Bulk creation and deletion of
resources</h2>
<p>Bulk creation and deletion of resources are possible using option
<code>bulk</code> (<code>yes</code>,<code>no</code>(default)). In that
case, the operation expects an <code>Array</code> of <code>Hash</code>
instead of a simple <code>Hash</code> using the <a href="#extended-value-syntax">Extended Value Syntax</a>. This option is
available only for some resources: if you need it: try and see if the
entities you try to create or delete support this option.</p>
<h2 data-number="4.33" id="option-query"><span class="header-section-number">4.33</span> Option:
<code>query</code></h2>
<p>The <code>query</code> option can generally be used to add URL
parameters to commands that list resources. It takes either a
<code>Hash</code> or an <code>Array</code>, corresponding to key/value
pairs that appear in the query part of request.</p>
<p>For example: <code>--query=@json:&#39;{&quot;p1&quot;:&quot;v1&quot;,&quot;p2&quot;:&quot;v2&quot;}&#39;</code> leads
to query: <code>?p1=v1&amp;p2=v2</code>.</p>
<p>If the same parameter needs to be provided several times, then it&#39;s
possible as well to provide an <code>Array</code> or 2-element
<code>Array</code>:
<code>--query=@json:&#39;[[&quot;p1&quot;:,&quot;v1&quot;],[&quot;p2&quot;:&quot;v2&quot;]]&#39;</code> leads to the
same result as previously.</p>
<p>If PHP&#39;s style array is used, then one can use either:</p>
<ul>
<li><code>--query=@json:&#39;{&quot;a&quot;:[&quot;[]&quot;,&quot;v1&quot;,&quot;v2&quot;]}&#39;</code></li>
<li><code>--query=@json:&#39;[[&quot;a[]&quot;,&quot;v1&quot;],[&quot;a[]&quot;,&quot;v2&quot;]]&#39;</code></li>
</ul>
<p>Both result in: <code>?a[]=v1&amp;a[]=v2</code>.</p>
<h2 data-number="4.34" id="plugins"><span class="header-section-number">4.34</span> Plugins</h2>
<p><code>ascli</code> uses a plugin mechanism. The first level command
(just after <code>ascli</code> on the command line) is the name of the
concerned plugin which will execute the command. Each plugin usually
represents commands sent to a specific application. For instance, the
plugin <code>faspex</code> allows operations on <strong>Aspera
Faspex</strong>.</p>
<p>Available plugins can be found using command:</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb313-1"><a href="#cb313-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config plugin list</span></code></pre></div>
<pre class="text"><code>+--------------+--------+--------+-------------------------------------------------------+
| plugin       | detect | wizard | path                                                  |
+--------------+--------+--------+-------------------------------------------------------+
| shares       | Y      | Y      | .../aspera-cli/lib/aspera/cli/plugins/shares.rb       |
| node         | Y      | Y      | .../aspera-cli/lib/aspera/cli/plugins/node.rb         |
...
+--------------+--------+--------+-------------------------------------------------------+</code></pre>
<p>Most plugins will take the URL option: <code>url</code> to identify
their location.</p>
<p>REST APIs of Aspera legacy applications (Aspera Node, Faspex 4,
Shares, Console, Orchestrator) use simple username/password
authentication: HTTP Basic Authentication using options:
<code>username</code> and <code>password</code>.</p>
<p>Aspera on Cloud and Faspex 5 rely on OAuth.</p>
<p>By default, plugins are looked-up in folders specified by
(multi-value) option <code>plugin_folder</code>:</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb315-1"><a href="#cb315-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> <span class="at">--show-config</span> <span class="at">--fields</span><span class="op">=</span>plugin_folder</span></code></pre></div>
<p>You can create the skeleton of a new plugin like this:</p>
<div class="sourceCode" id="cb316"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb316-1"><a href="#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config plugin create foo .</span></code></pre></div>
<pre class="text"><code>Created ./foo.rb</code></pre>
<div class="sourceCode" id="cb318"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb318-1"><a href="#cb318-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> <span class="at">--plugin-folder</span><span class="op">=</span>. foo</span></code></pre></div>
<h2 data-number="4.35" id="plugins-vs-transfer-agents"><span class="header-section-number">4.35</span> Plugins vs Transfer
Agents</h2>
<p>Plugins typically represent a specific remote application on which
<code>ascli</code> can operate, while transfer agents are the underlying
components that handle the actual data transfer.</p>
<p>A given remote application can sometimes be both a plugin and a
transfer agent. For example: <code>node</code> and <code>httpgw</code>
are both plugins and transfer agents.</p>
<p>A plugin is invoked as the first positional argument in a command
line. A Transfer Agent is used by setting the option
<code>transfer</code> (e.g. <code>--transfer=node</code>).</p>
<h1 data-number="5" id="plugin-aoc-ibm-aspera-on-cloud"><span class="header-section-number">5</span> Plugin: <code>aoc</code>: IBM
Aspera on Cloud</h1>
<p>Aspera on Cloud API requires the use of OAuth v2 mechanism for
authentication (HTTP Basic authentication is not supported).</p>
<p>It is recommended to use the wizard to set it up, although manual
configuration is also possible.</p>
<h2 data-number="5.1" id="configuration-using-wizard"><span class="header-section-number">5.1</span> Configuration: Using
Wizard</h2>
<p><code>ascli</code> provides a configuration <a href="#wizard">wizard</a>.</p>
<p>The wizard guides you through the steps to create a new configuration
preset for Aspera on Cloud.</p>
<p>The first optional argument is the URL of your Aspera on Cloud
instance, e.g. <code>https://_your_instance_.ibmaspera.com</code> or
simply the organization name, and a second optional argument can also be
provided to specify the plugin name, e.g. <code>aoc</code> for Aspera on
Cloud. If optional arguments are not provided, the wizard will ask
interactively and try to detect the application.</p>
<p>Here is a sample invocation :</p>
<pre class="text"><code>ascli config wizard
option: url&gt; https://_your_instance_.ibmaspera.com
Detected: Aspera on Cloud
Preparing preset: aoc_myorg
Please provide path to your private RSA key, or empty to generate one:
option: key_path&gt;
using existing key:
/Users/myself/.aspera/ascli/aspera_aoc_key
Using global client_id.
option: username&gt; john@example.com
Updating profile with new key
creating new config preset: aoc_myorg
Setting config preset as default for aspera
saving configuration file
Done.
You can test with:
ascli aoc user profile show</code></pre>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>In above example, replace
<code>https://_your_instance_.ibmaspera.com</code> with your actual AoC
URL.</p></div>
</div>
<p>Optionally, it is possible to create a new organization-specific
integration, i.e. client application identification. For this, specify
the option: <code>--use-generic-client=no</code>.</p>
<p>If you already know the application, and want to limit the detection
to it, provide URL and plugin name:</p>
<div class="sourceCode" id="cb320"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb320-1"><a href="#cb320-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config wizard _your_instance_ aoc</span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>In above example, replace <code>_your_instance_</code> with the first
part of your actual AoC URL:
<code>https://_your_instance_.ibmaspera.com</code>.</p></div>
</div>
<p>After successful completion of the wizard, a new configuration preset
is created, and set as default for the <code>aoc</code> plugin. This can
be verified with command:</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb321-1"><a href="#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset over</span></code></pre></div>
<h2 data-number="5.2" id="configuration-using-manual-setup"><span class="header-section-number">5.2</span> Configuration: Using manual
setup</h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>If you used the wizard (recommended): skip this section.</p></div>
</div>
<h3 data-number="5.2.1" id="configuration-details"><span class="header-section-number">5.2.1</span> Configuration details</h3>
<p>Several types of OAuth authentication are supported:</p>
<ul>
<li>JSON Web Token (JWT) : authentication is secured by a private key
(recommended)</li>
<li>Web based authentication : authentication is made by user using a
browser</li>
<li>URL Token : external user&#39;s authentication with URL tokens (public
links)</li>
</ul>
<p>The authentication method is controlled by option
<code>auth</code>.</p>
<p>For a <strong>quick start</strong>, follow the mandatory and
sufficient section: <a href="#api-client-registration">API Client
Registration</a> (auth=web) as well as [<a href="#option-preset">Option
Preset</a> for Aspera on Cloud](#configuration-for-aspera-on-cloud).</p>
<p>For a more convenient, browser-less, experience follow the <a href="#authentication-with-private-key">JWT</a> section
(<code>auth=jwt</code>) in addition to Client Registration.</p>
<p>In OAuth, a <strong>Bearer</strong> token is generated to
authenticate REST calls. Bearer tokens are valid for a period of time
defined (by the AoC app, configurable by admin) at its creation.
<code>ascli</code> saves generated tokens in its configuration folder,
tries to re-use them or regenerates them when they have expired.</p>
<h3 data-number="5.2.2" id="api-client-registration"><span class="header-section-number">5.2.2</span> API Client Registration</h3>
<blockquote>
<p><strong>Optional</strong></p>
</blockquote>
<p>If you use the built-in <code>client_id</code> and
<code>client_secret</code>, skip this and do not set them in next
section.</p>
<p>Else you can use a specific OAuth API <code>client_id</code>, the
first step is to declare <code>ascli</code> in Aspera on Cloud using the
admin interface.</p>
<p>(<a href="https://ibmaspera.com/help/admin/organization/registering_an_api_client">AoC
documentation: Registering an API Client</a>).</p>
<p>Let&#39;s start by a registration with web based authentication
(auth=web):</p>
<ul>
<li>Open a web browser, log to your instance: e.g.
<code>https://_your_instance_.ibmaspera.com/</code> (use your actual AoC
instance URL)</li>
<li>Go to Apps → Admin → Organization → Integrations</li>
<li>Click <strong>Create New</strong>
<ul>
<li><strong>Client Name</strong>: <code>ascli</code></li>
<li><strong>Redirect URIs</strong>:
<code>http://localhost:12345</code></li>
<li><strong>Origins</strong>: <code>localhost</code></li>
<li>uncheck <strong>Prompt users to allow client to access</strong></li>
<li>leave the JWT part for now</li>
</ul></li>
<li><strong>Save</strong></li>
</ul>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>For web based authentication, <code>ascli</code> listens on a local
port (e.g. specified by the redirect_uri, in this example: 12345), and
the browser will provide the OAuth code there. For <code>ascli</code>,
HTTP is required, and 12345 is the default port.</p></div>
</div>
<p>Once the client is registered, a <strong>Client ID</strong> and
<strong>Secret</strong> are created, these values will be used in the
next step.</p>
<h3 data-number="5.2.3" id="configuration-for-aspera-on-cloud"><span class="header-section-number">5.2.3</span> Configuration for Aspera on
Cloud</h3>
<p>If you did not use the wizard, you can also manually create an <a href="#option-preset">Option Preset</a> for <code>ascli</code> in its
configuration file.</p>
<p>Let&#39;s create an <a href="#option-preset">Option Preset</a> called:
<code>my_aoc_org</code> using <code>ask</code> for interactive input
(client info from previous step):</p>
<div class="sourceCode" id="cb322"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb322-1"><a href="#cb322-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset ask my_aoc_org url client_id client_secret</span>
<span id="cb322-2"><a href="#cb322-2" aria-hidden="true" tabindex="-1"></a><span class="ex">option:</span> url<span class="op">&gt;</span> https://_your_instance_.ibmaspera.com/</span>
<span id="cb322-3"><a href="#cb322-3" aria-hidden="true" tabindex="-1"></a><span class="ex">option:</span> client_id<span class="op">&gt;</span> my_client_id_here</span>
<span id="cb322-4"><a href="#cb322-4" aria-hidden="true" tabindex="-1"></a><span class="ex">option:</span> client_secret<span class="op">&gt;</span> my_client_secret_here</span>
<span id="cb322-5"><a href="#cb322-5" aria-hidden="true" tabindex="-1"></a><span class="ex">updated:</span> my_aoc_org</span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>In above example, replace
<code>https://_your_instance_.ibmaspera.com</code> with your actual AoC
URL.</p></div>
</div>
<p>(This can also be done in one line using the command
<code>config preset update my_aoc_org --url=...</code>)</p>
<p>Define this <a href="#option-preset">Option Preset</a> as default
configuration for the <code>aspera</code> plugin:</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb323-1"><a href="#cb323-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set default aoc my_aoc_org</span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Default <code>auth</code> method is <code>web</code> and default
<code>redirect_uri</code> is <code>http://localhost:12345</code>. Leave
those default values.</p></div>
</div>
<h3 data-number="5.2.4" id="authentication-with-private-key"><span class="header-section-number">5.2.4</span> Authentication with private
key</h3>
<p>For a Browser-less, Private Key-based authentication, use the
following steps.</p>
<p>In order to use JSON Web Token (JWT) for Aspera on Cloud API client
authentication, a <a href="#private-key">private/public key pair</a>
must be used.</p>
<h4 data-number="5.2.4.1" id="api-client-jwt-activation"><span class="header-section-number">5.2.4.1</span> API Client JWT
activation</h4>
<p>If you are not using the built-in client_id and secret, JWT needs to
be authorized in Aspera on Cloud. This can be done in two manners:</p>
<ul>
<li><p>Graphically</p>
<ul>
<li>Open a web browser, log to your instance:
<code>https://_your_instance_.ibmaspera.com/</code> (Use your actual AoC
instance URL)</li>
<li>Go to Apps → Admin → Organization → Integrations</li>
<li>Click on the previously created application</li>
<li>select tab : <strong>JSON Web Token Auth</strong></li>
<li>Modify options if necessary, for instance: activate both options in
section <strong>Settings</strong></li>
<li><strong>Save</strong></li>
</ul></li>
<li><p>Using command line</p></li>
</ul>
<div class="sourceCode" id="cb324"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb324-1"><a href="#cb324-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin client list</span></code></pre></div>
<pre class="text"><code>Items: 4/4
╭────────────┬─────────────────────╮
│ id         │ name                │
╞════════════╪═════════════════════╡
│ oXPUyJ7JpQ │ PRI Sydney          │
│ TaoAmAG8Rg │ ascli_test_web      │
│ TDNl2bLZqw │ ascli_web           │
│ VTh92i5OfQ │ shannon             │
╰────────────┴─────────────────────╯</code></pre>
<div class="sourceCode" id="cb326"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb326-1"><a href="#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin client modify my_BJbQiFw @json:<span class="st">&#39;{&quot;jwt_grant_enabled&quot;:true,&quot;explicit_authorization_required&quot;:false}&#39;</span></span></code></pre></div>
<pre class="text"><code>modified</code></pre>
<h3 data-number="5.2.5" id="user-key-registration"><span class="header-section-number">5.2.5</span> User key registration</h3>
<p>The public key must be assigned to your user. This can be done in two
manners:</p>
<h4 data-number="5.2.5.1" id="graphically"><span class="header-section-number">5.2.5.1</span> Graphically</h4>
<p>Open the previously generated public key located here:
<code>$HOME/.aspera/ascli/my_private_key.pub</code></p>
<ul>
<li>Open a web browser, log to your instance:
<code>https://_your_instance_.ibmaspera.com/</code> (Use your actual AoC
instance URL)</li>
<li>Click on the user&#39;s icon (top right)</li>
<li>Select <strong>Account Settings</strong></li>
<li>Paste the Public Key PEM value in the <strong>Public Key</strong>
section</li>
<li>Click on <strong>Submit</strong></li>
</ul>
<h4 data-number="5.2.5.2" id="using-command-line"><span class="header-section-number">5.2.5.2</span> Using command line</h4>
<div class="sourceCode" id="cb328"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb328-1"><a href="#cb328-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin user list</span></code></pre></div>
<pre class="text"><code>╭─────────┬────────────────┬────────────────────╮
│ id      │ name           │ email              │
╞═════════╪════════════════╪════════════════════╡
│ 1234567 │ John Doe       │ john@example.com   │
│ 7654321 │ Alice Saprich  │ alice@example.com  │
│ 1234321 │ Sponge Bob     │ bob@example.com    │
╰─────────┴────────────────┴────────────────────╯</code></pre>
<div class="sourceCode" id="cb330"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb330-1"><a href="#cb330-1" aria-hidden="true" tabindex="-1"></a>ascli aoc user profile modify <span class="ot">@ruby</span><span class="op">:</span><span class="vs">&#39;{&quot;public_key&quot;=&gt;File.read(File.expand_path(&quot;~/.aspera/ascli/my_private_key.pub&quot;))}&#39;</span></span></code></pre></div>
<pre class="text"><code>modified</code></pre>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The <code>aspera user info show</code> command can be used to verify
modifications.</p></div>
</div>
<h3 data-number="5.2.6" id="option-preset-modification-for-jwt"><span class="header-section-number">5.2.6</span> <a href="#option-preset">Option Preset</a> modification for JWT</h3>
<p>To activate default use of JWT authentication for <code>ascli</code>
using the <a href="#option-preset">Option Preset</a>, do the
following:</p>
<ul>
<li>Change auth method to JWT</li>
<li>Provide location of private key</li>
<li>Provide username to login as (OAuth <strong>subject</strong>)</li>
</ul>
<p>Execute:</p>
<div class="sourceCode" id="cb332"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb332-1"><a href="#cb332-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset update my_aoc_org <span class="at">--auth</span><span class="op">=</span>jwt <span class="at">--private-key</span><span class="op">=</span>@val:@file:~/.aspera/ascli/my_private_key <span class="at">--username</span><span class="op">=</span>someuser@example.com</span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The private key argument represents the actual PEM string. In order
to read the content from a file, use the <code>@file:</code> prefix. But
if the <code>@file:</code> argument is used as is, it will read the file
and set in the configuration file. So, to keep the <code>@file:</code>
tag in the configuration file, the <code>@val:</code> prefix is
added.</p></div>
</div>
<p>After this last step, commands do not require web login anymore.</p>
<h3 data-number="5.2.7" id="public-and-private-links"><span class="header-section-number">5.2.7</span> Public and private links</h3>
<p>AoC gives the possibility to generate public links for both the
<code>Files</code> and <code>Packages</code> modules. Public links embed
the authorization of access. Provide the public link using option
<code>url</code> alone.</p>
<p>In addition, the <code>Files</code> application supports private
links. Private links require the user to authenticate. So, provide the
same options as for regular authentication, and provide the private link
using option <code>url</code>.</p>
<p>A user may not be part of any workspace, but still have access to
shared folders (using private links). In that case, it is possible to
list those shared folder by using a value for option
<code>workspace</code> equal to <code>@none:</code> or
<code>@json:null</code> or <code>@ruby:nil</code>.</p>
<h3 data-number="5.2.8" id="aoc-first-use"><span class="header-section-number">5.2.8</span> AoC: First Use</h3>
<p>Once client has been registered and <a href="#option-preset">Option
Preset</a> created: <code>ascli</code> can be used:</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb333-1"><a href="#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc files br /</span></code></pre></div>
<pre class="text"><code>Current Workspace: Default Workspace (default)
empty</code></pre>
<h2 data-number="5.3" id="calling-aoc-apis-from-command-line"><span class="header-section-number">5.3</span> Calling AoC APIs from command
line</h2>
<p>The command <code>ascli aoc bearer</code> can be used to generate an
OAuth token suitable to call any AoC API (use the <code>scope</code>
option to change the scope, default is <code>user:all</code>). This can
be useful when a command is not yet available.</p>
<p>Example:</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb335-1"><a href="#cb335-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-s</span> <span class="at">-H</span> <span class="st">&quot;Authorization: </span><span class="va">$(</span><span class="ex">ascli</span> aoc bearer_token<span class="va">)</span><span class="st">&quot;</span> <span class="st">&#39;https://api.ibmaspera.com/api/v1/group_memberships?embed[]=dropbox&amp;embed[]=workspace&#39;</span><span class="kw">|</span><span class="ex">jq</span> <span class="at">-r</span> <span class="st">&#39;.[]|(.workspace.name + &quot; -&gt; &quot; + .dropbox.name)&#39;</span></span></code></pre></div>
<p>It is also possible to get the bearer token for node, as user or as
admin using:</p>
<div class="sourceCode" id="cb336"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb336-1"><a href="#cb336-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc files bearer_token_node /</span></code></pre></div>
<div class="sourceCode" id="cb337"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb337-1"><a href="#cb337-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin node v4 1234 <span class="at">--secret</span><span class="op">=</span>_ak_secret_here_ bearer_token_node /</span></code></pre></div>
<h2 data-number="5.4" id="administration"><span class="header-section-number">5.4</span> Administration</h2>
<p>The <code>admin</code> command allows several administrative tasks
(and require admin privilege).</p>
<p>It allows actions (create, update, delete) on
<strong>resources</strong>: users, group, nodes, workspace, etc... with
the <code>admin resource</code> command.</p>
<h3 data-number="5.4.1" id="listing-resources"><span class="header-section-number">5.4.1</span> Listing resources</h3>
<p>The command <code>aoc admin &lt;type&gt; list</code> lists all
entities of given type. It uses paging and multiple requests if
necessary.</p>
<p>The option <code>query</code> can be optionally used. It expects a
<code>Hash</code> using <a href="#extended-value-syntax">Extended Value
Syntax</a>, generally provided using: <code>--query=@json:{...}</code>.
Values are directly sent to the API call and used as a filter on server
side.</p>
<p>The following parameters are supported:</p>
<ul>
<li><code>q</code> : a filter on name of resource (case-insensitive,
matches if value is contained in name)</li>
<li><code>sort</code>: name of fields to sort results, prefix with
<code>-</code> for reverse order.</li>
<li><code>max</code> : maximum number of items to retrieve (stop pages
when the maximum is passed)</li>
<li><code>pmax</code> : maximum number of pages to request (stop pages
when the maximum is passed)</li>
<li><code>page</code> : native API parameter, in general do not use
(added by <code>ascli</code>)</li>
<li><code>per_page</code> : native API parameter, number of items par
API call, in general do not use</li>
<li>Other specific parameters depending on resource type.</li>
</ul>
<p>Both <code>max</code> and <code>pmax</code> are processed internally
in <code>ascli</code>, not included in actual API call and limit the
number of successive pages requested to API. <code>ascli</code> will
return all values using paging if not provided.</p>
<p>Other parameters are directly sent as parameters to the GET request
on API.</p>
<p><code>page</code> and <code>per_page</code> are normally added by
<code>ascli</code> to build successive API calls to get all values if
there are more than 1000. (AoC allows a maximum page size of 1000).</p>
<p><code>q</code> and <code>sort</code> are available on most resource
types.</p>
<p>Other parameters depend on the type of entity (refer to AoC API).</p>
<p>Examples:</p>
<ul>
<li>List users with <code>laurent</code> in name:</li>
</ul>
<div class="sourceCode" id="cb338"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb338-1"><a href="#cb338-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin user list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;q&quot;:&quot;laurent&quot;}&#39;</span></span></code></pre></div>
<ul>
<li>List users who logged-in before a date:</li>
</ul>
<div class="sourceCode" id="cb339"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb339-1"><a href="#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin user list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;q&quot;:&quot;last_login_at:&lt;2018-05-28&quot;}&#39;</span></span></code></pre></div>
<ul>
<li>List external users and sort in reverse alphabetical order using
name:</li>
</ul>
<div class="sourceCode" id="cb340"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb340-1"><a href="#cb340-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin user list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;member_of_any_workspace&quot;:false,&quot;sort&quot;:&quot;-name&quot;}&#39;</span></span></code></pre></div>
<p>Refer to the AoC API for full list of query parameters, or use the
browser in developer mode with the web UI.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The option <code>select</code> can also be used to further refine
selection, refer to <a href="#option-select">section earlier</a>.</p></div>
</div>
<h3 data-number="5.4.2" id="selecting-a-resource"><span class="header-section-number">5.4.2</span> Selecting a resource</h3>
<p>Resources are identified by a unique <code>id</code>, as well as a
unique <code>name</code> (case-insensitive).</p>
<p>To execute an action on a specific resource, select it using one of
those methods:</p>
<ul>
<li><strong>recommended</strong>: give ID directly on command line
<strong>after the action</strong>:
<code>aoc admin node show 123</code></li>
<li>Give name on command line <strong>after the action</strong>:
<code>aoc admin node show name abc</code></li>
<li>Provide option <code>id</code> :
<code>aoc admin node show 123</code></li>
<li>Provide option <code>name</code> :
<code>aoc admin node show --name=abc</code></li>
</ul>
<h3 data-number="5.4.3" id="creating-a-resource"><span class="header-section-number">5.4.3</span> Creating a resource</h3>
<p>New resources (users, groups, workspaces, etc...) can be created
using a command like:</p>
<div class="sourceCode" id="cb341"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb341-1"><a href="#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin create <span class="op">&lt;</span>resource type<span class="op">&gt;</span> @json:<span class="st">&#39;{&lt;...parameters...&gt;}&#39;</span></span></code></pre></div>
<p>Some API endpoints are described in <a href="https://developer.ibm.com/apis/catalog?search=%22aspera%20on%20cloud%20api%22">IBM
API Hub</a>. Sadly, not all.</p>
<p>Nevertheless, it is possible to guess the structure of the creation
value by simply dumping an existing resource, and use the same
parameters for the creation.</p>
<div class="sourceCode" id="cb342"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb342-1"><a href="#cb342-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin group show 12345 <span class="at">--format</span><span class="op">=</span>json</span></code></pre></div>
<div class="sourceCode" id="cb343"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb343-1"><a href="#cb343-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;created_at&quot;</span><span class="fu">:</span><span class="st">&quot;2018-07-24T21:46:39.000Z&quot;</span><span class="fu">,</span><span class="dt">&quot;description&quot;</span><span class="fu">:</span><span class="kw">null</span><span class="fu">,</span><span class="dt">&quot;id&quot;</span><span class="fu">:</span><span class="st">&quot;12345&quot;</span><span class="fu">,</span><span class="dt">&quot;manager&quot;</span><span class="fu">:</span><span class="kw">false</span><span class="fu">,</span><span class="dt">&quot;name&quot;</span><span class="fu">:</span><span class="st">&quot;A8Demo WS1&quot;</span><span class="fu">,</span><span class="dt">&quot;owner&quot;</span><span class="fu">:</span><span class="kw">false</span><span class="fu">,</span><span class="dt">&quot;queued_operation_count&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">,</span><span class="dt">&quot;running_operation_count&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">,</span><span class="dt">&quot;stopped_operation_count&quot;</span><span class="fu">:</span><span class="dv">0</span><span class="fu">,</span><span class="dt">&quot;updated_at&quot;</span><span class="fu">:</span><span class="st">&quot;2018-07-24T21:46:39.000Z&quot;</span><span class="fu">,</span><span class="dt">&quot;saml_group&quot;</span><span class="fu">:</span><span class="kw">false</span><span class="fu">,</span><span class="dt">&quot;saml_group_dn&quot;</span><span class="fu">:</span><span class="kw">null</span><span class="fu">,</span><span class="dt">&quot;system_group&quot;</span><span class="fu">:</span><span class="kw">true</span><span class="fu">,</span><span class="dt">&quot;system_group_type&quot;</span><span class="fu">:</span><span class="st">&quot;workspace_members&quot;</span><span class="fu">}</span></span></code></pre></div>
<p>Remove the parameters that are either obviously added by the system:
<code>id</code>, <code>created_at</code>, <code>updated_at</code> or
optional.</p>
<p>And then craft your command:</p>
<div class="sourceCode" id="cb344"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb344-1"><a href="#cb344-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin group create @json:<span class="st">&#39;{&quot;wrong&quot;:&quot;param&quot;}&#39;</span></span></code></pre></div>
<p>If the command returns an error, example:</p>
<pre class="text"><code>ERROR: Rest: found unpermitted parameter: :wrong
code: unpermitted_parameters
request_id: 2a487dbc-bc5c-41ab-86c8-3b9972dfd4c4
api.ibmaspera.com 422 Unprocessable Entity</code></pre>
<p>Well, remove the offending parameters and try again.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Some properties that are shown in the web UI, such as membership, are
not listed directly in the resource, but instead another resource is
created to link a user and its group: <code>group_membership</code></p></div>
</div>
<h3 data-number="5.4.4" id="access-key-secrets"><span class="header-section-number">5.4.4</span> Access Key secrets</h3>
<p>In order to access some administrative actions on
<strong>nodes</strong> (in fact, access keys), the associated secret is
required. The secret is provided using the <code>secret</code> option.
For example in a command like:</p>
<div class="sourceCode" id="cb346"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb346-1"><a href="#cb346-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin node 123 <span class="at">--secret</span><span class="op">=</span><span class="st">&quot;my_secret_here&quot;</span> v3 info</span></code></pre></div>
<p>It is also possible to store secrets in the <a href="#secret-vault">secret vault</a> and then automatically find the
related secret using the <a href="#configuration-finder">config
finder</a>.</p>
<h3 data-number="5.4.5" id="activity"><span class="header-section-number">5.4.5</span> Activity</h3>
<p>The activity app can be queried with:</p>
<div class="sourceCode" id="cb347"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb347-1"><a href="#cb347-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin analytics transfers</span></code></pre></div>
<p>It can also support filters and send notification using option
<code>notify_to</code>. A template is defined using option
<code>notify_template</code> :</p>
<p><code>mytemplate.erb</code>:</p>
<div class="sourceCode" id="cb348"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb348-1"><a href="#cb348-1" aria-hidden="true" tabindex="-1"></a><span class="fu">From</span><span class="kw">:</span><span class="at"> &lt;%=from_name%&gt; &lt;&lt;%=from_email%&gt;&gt;</span></span>
<span id="cb348-2"><a href="#cb348-2" aria-hidden="true" tabindex="-1"></a><span class="fu">To</span><span class="kw">:</span><span class="at"> &lt;&lt;%=ev[&#39;user_email&#39;]%&gt;&gt;</span></span>
<span id="cb348-3"><a href="#cb348-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Subject</span><span class="kw">:</span><span class="at"> &lt;%=ev[&#39;files_completed&#39;]%&gt; files received</span></span>
<span id="cb348-4"><a href="#cb348-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-5"><a href="#cb348-5" aria-hidden="true" tabindex="-1"></a><span class="at">Dear &lt;%=ev[:user_email.to_s]%&gt;,</span></span>
<span id="cb348-6"><a href="#cb348-6" aria-hidden="true" tabindex="-1"></a><span class="fu">We received &lt;%=ev[&#39;files_completed&#39;]%&gt; files for a total of &lt;%=ev[&#39;transferred_bytes&#39;]%&gt; bytes, starting with file</span><span class="kw">:</span></span>
<span id="cb348-7"><a href="#cb348-7" aria-hidden="true" tabindex="-1"></a><span class="at">&lt;%=ev[&#39;content&#39;]%&gt;</span></span>
<span id="cb348-8"><a href="#cb348-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-9"><a href="#cb348-9" aria-hidden="true" tabindex="-1"></a><span class="at">Thank you.</span></span></code></pre></div>
<p>The environment provided contains the following additional
variable:</p>
<ul>
<li><code>ev</code> : all details on the transfer event</li>
</ul>
<p>Example:</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb349-1"><a href="#cb349-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin analytics transfers <span class="at">--once-only</span><span class="op">=</span>yes <span class="at">--lock-port</span><span class="op">=</span>12345 <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;status&quot;:&quot;completed&quot;,&quot;direction&quot;:&quot;receive&quot;}&#39;</span> <span class="at">--notify-to</span><span class="op">=</span>active <span class="at">--notify-template</span><span class="op">=</span>@file:mytemplate.erb</span></code></pre></div>
<p>Options:</p>
<ul>
<li><code>once_only</code> keep track of last date it was called, so
next call will get only new events</li>
<li><code>query</code> filter (on API call)</li>
<li><code>notify</code> send an email as specified by template, this
could be places in a file with the <code>@file</code> modifier.</li>
</ul>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>This must not be executed in less than 5 minutes because the
analytics interface accepts only a period of time between 5 minutes and
6 months. The period is
<code>[date of previous execution]..[now]</code>.</p></div>
</div>
<h3 data-number="5.4.6" id="transfer-using-specific-transfer-ports"><span class="header-section-number">5.4.6</span> Transfer: Using specific
transfer ports</h3>
<p>By default, transfer nodes are expected to use ports TCP/UDP 33001.
The web UI enforces that. The option <code>default_ports</code>
([yes]/no) allows <code>ascli</code> to retrieve the server ports from
an API call (download_setup) which reads the information from
<code>aspera.conf</code> on the server.</p>
<h3 data-number="5.4.7" id="using-ats"><span class="header-section-number">5.4.7</span> Using ATS</h3>
<p>Refer to section <strong>Examples</strong> of <a href="#plugin-ats-ibm-aspera-transfer-service">ATS</a> and substitute
command <code>ats</code> with <code>aoc admin ats</code>.</p>
<h3 data-number="5.4.8" id="files-with-type-link"><span class="header-section-number">5.4.8</span> Files with type
<code>link</code></h3>
<p>Aspera on Cloud Shared folders are implemented through a special type
of file: <code>link</code>. A <code>link</code> is the equivalent of a
symbolic link on a file system: it points to another folder (not
file).</p>
<p>Listing a link (in terminal position of path) will information on the
link itself, not the content of the folder it points to. To list the
target folder content, add a <code>/</code> at the end of the path.</p>
<p>Example:</p>
<div class="sourceCode" id="cb350"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb350-1"><a href="#cb350-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc files br the_link</span></code></pre></div>
<pre class="text"><code>Current Workspace: Default (default)
+------------+------+----------------+------+----------------------+--------------+
| name       | type | recursive_size | size | modified_time        | access_level |
+------------+------+----------------+------+----------------------+--------------+
| the_link   | link |                |      | 2021-04-28T09:17:14Z | edit         |
+------------+------+----------------+------+----------------------+--------------+</code></pre>
<div class="sourceCode" id="cb352"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb352-1"><a href="#cb352-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc files br the_link/</span></code></pre></div>
<pre class="text"><code>Current Workspace: Default (default)
+-------------+------+----------------+------+----------------------+--------------+
| name        | type | recursive_size | size | modified_time        | access_level |
+-------------+------+----------------+------+----------------------+--------------+
| file_inside | file |                |      | 2021-04-26T09:00:00Z | edit         |
+-------------+------+----------------+------+----------------------+--------------+</code></pre>
<h3 data-number="5.4.9" id="example-bulk-creation-of-users"><span class="header-section-number">5.4.9</span> Example: Bulk creation of
users</h3>
<div class="sourceCode" id="cb354"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb354-1"><a href="#cb354-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin user create <span class="at">--bulk</span><span class="op">=</span>yes @json:<span class="st">&#39;[{&quot;email&quot;:&quot;dummyuser1@example.com&quot;},{&quot;email&quot;:&quot;dummyuser2@example.com&quot;}]&#39;</span></span></code></pre></div>
<pre class="text"><code>+-------+---------+
|  id   | status  |
+-------+---------+
| 98398 | created |
| 98399 | created |
+-------+---------+</code></pre>
<h3 data-number="5.4.10" id="example-find-with-filter-and-delete"><span class="header-section-number">5.4.10</span> Example: Find with filter
and delete</h3>
<div class="sourceCode" id="cb356"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb356-1"><a href="#cb356-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin user list <span class="at">--query</span><span class="op">=</span><span class="st">&#39;@json:{&quot;q&quot;:&quot;dummyuser&quot;}&#39;</span> <span class="at">--fields</span><span class="op">=</span>id,email</span></code></pre></div>
<pre class="text"><code>+-------+------------------------+
|  id   |         email          |
+-------+------------------------+
| 98398 | dummyuser1@example.com |
| 98399 | dummyuser2@example.com |
+-------+------------------------+</code></pre>
<div class="sourceCode" id="cb358"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb358-1"><a href="#cb358-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin user list <span class="at">--query</span><span class="op">=</span><span class="st">&#39;@json:{&quot;q&quot;:&quot;dummyuser&quot;}&#39;</span> <span class="at">--fields</span><span class="op">=</span>id <span class="at">--display</span><span class="op">=</span>data <span class="at">--format</span><span class="op">=</span>csv <span class="kw">|</span> <span class="ex">ascli</span> aoc admin user delete @lines:@stdin: <span class="at">--bulk</span><span class="op">=</span>yes</span></code></pre></div>
<pre class="text"><code>+-------+---------+
|  id   | status  |
+-------+---------+
| 98398 | deleted |
| 98399 | deleted |
+-------+---------+</code></pre>
<h3 data-number="5.4.11" id="example-find-deactivated-users-since-more-than-2-years"><span class="header-section-number">5.4.11</span> Example: Find deactivated
users since more than 2 years</h3>
<div class="sourceCode" id="cb360"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb360-1"><a href="#cb360-1" aria-hidden="true" tabindex="-1"></a>ascli aoc admin user list <span class="op">--</span>query<span class="op">=</span><span class="ot">@ruby</span><span class="wa">:</span><span class="vs">&#39;{&quot;deactivated&quot;=&gt;true,&quot;q&quot;=&gt;&quot;last_login_at:&lt;#{(DateTime.now.to_time.utc-2*365*86400).iso8601}&quot;}&#39;</span></span></code></pre></div>
<p>To delete them use the same method as before</p>
<h3 data-number="5.4.12" id="example-display-current-users-workspaces"><span class="header-section-number">5.4.12</span> Example: Display current
user&#39;s workspaces</h3>
<div class="sourceCode" id="cb361"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb361-1"><a href="#cb361-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc user workspaces list</span></code></pre></div>
<pre class="text"><code>+------+----------------------------+
|  id  |            name            |
+------+----------------------------+
| 16   | Engineering                |
| 17   | Marketing                  |
| 18   | Sales                      |
+------+----------------------------+</code></pre>
<h3 data-number="5.4.13" id="example-create-a-sub-access-key-in-a-node"><span class="header-section-number">5.4.13</span> Example: Create a sub access
key in a <code>node</code></h3>
<p>Creation of a sub-access key is like creation of access key with the
following difference: authentication to Node API is made with access key
(master access key) and only the path parameter is provided: it is
relative to the storage root of the master key. (id and secret are
optional)</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb363-1"><a href="#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin resource node <span class="at">--name</span><span class="op">=</span>_node_name_ <span class="at">--secret</span><span class="op">=</span>_secret_ v4 access_key create @json:<span class="st">&#39;{&quot;storage&quot;:{&quot;path&quot;:&quot;/folder1&quot;}}&#39;</span></span></code></pre></div>
<h3 data-number="5.4.14" id="example-display-transfer-events-opstransfer"><span class="header-section-number">5.4.14</span> Example: Display transfer
events (ops/transfer)</h3>
<div class="sourceCode" id="cb364"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb364-1"><a href="#cb364-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin node <span class="at">--secret</span><span class="op">=</span>_secret_ v3 transfer list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;[[&quot;q&quot;,&quot;*&quot;],[&quot;count&quot;,5]]&#39;</span></span></code></pre></div>
<p>Examples of query:</p>
<div class="sourceCode" id="cb365"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb365-1"><a href="#cb365-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;q&quot;</span><span class="fu">:</span><span class="st">&quot;type(file_upload OR file_delete OR file_download OR file_rename OR folder_create OR folder_delete OR folder_share OR folder_share_via_public_link)&quot;</span><span class="fu">,</span><span class="dt">&quot;sort&quot;</span><span class="fu">:</span><span class="st">&quot;-date&quot;</span><span class="fu">}</span></span></code></pre></div>
<div class="sourceCode" id="cb366"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb366-1"><a href="#cb366-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;tag&quot;</span><span class="fu">:</span><span class="st">&quot;aspera.files.package_id=LA8OU3p8w&quot;</span><span class="fu">}</span></span></code></pre></div>
<h3 data-number="5.4.15" id="example-display-node-events-events"><span class="header-section-number">5.4.15</span> Example: Display node events
(events)</h3>
<div class="sourceCode" id="cb367"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb367-1"><a href="#cb367-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin node <span class="at">--secret</span><span class="op">=</span>_secret_ v3 events</span></code></pre></div>
<h3 data-number="5.4.16" id="example-display-members-of-a-workspace"><span class="header-section-number">5.4.16</span> Example: Display members of
a workspace</h3>
<div class="sourceCode" id="cb368"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb368-1"><a href="#cb368-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin workspace_membership list <span class="at">--fields</span><span class="op">=</span>member_type,manager,member.email <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;embed&quot;:&quot;member&quot;,&quot;inherited&quot;:false,&quot;workspace_id&quot;:11363,&quot;sort&quot;:&quot;name&quot;}&#39;</span></span></code></pre></div>
<pre class="text"><code>+-------------+---------+----------------------------------+
| member_type | manager |           member.email           |
+-------------+---------+----------------------------------+
| user        | true    | john.curtis@email.com            |
| user        | false   | someuser@example.com             |
| user        | false   | jean.dupont@me.com               |
| user        | false   | another.user@example.com         |
| group       | false   |                                  |
| user        | false   | aspera.user@gmail.com            |
+-------------+---------+----------------------------------+</code></pre>
<p>Other query parameters:</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb370-1"><a href="#cb370-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;workspace_membership_through&quot;</span><span class="fu">:</span><span class="kw">true</span><span class="fu">,</span><span class="dt">&quot;include_indirect&quot;</span><span class="fu">:</span><span class="kw">true</span><span class="fu">}</span></span></code></pre></div>
<h3 data-number="5.4.17" id="example-add-all-members-of-a-workspace-to-another-workspace"><span class="header-section-number">5.4.17</span> Example: Add all members of
a workspace to another workspace</h3>
<p>a- Get ID of first workspace</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb371-1"><a href="#cb371-1" aria-hidden="true" tabindex="-1"></a><span class="va">WS1</span><span class="op">=</span><span class="st">&#39;First Workspace&#39;</span></span>
<span id="cb371-2"><a href="#cb371-2" aria-hidden="true" tabindex="-1"></a><span class="va">WS1ID</span><span class="op">=</span><span class="va">$(</span><span class="ex">ascli</span> aoc admin workspace list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;q&quot;:&quot;&#39;&quot;</span><span class="va">$WS1</span><span class="st">&quot;&#39;&quot;}&#39;</span> <span class="at">--select</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;name&quot;:&quot;&#39;&quot;</span><span class="va">$WS1</span><span class="st">&quot;&#39;&quot;}&#39;</span> <span class="at">--fields</span><span class="op">=</span>id <span class="at">--format</span><span class="op">=</span>csv<span class="va">)</span></span></code></pre></div>
<p>b- Get ID of second workspace</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb372-1"><a href="#cb372-1" aria-hidden="true" tabindex="-1"></a><span class="va">WS2</span><span class="op">=</span><span class="st">&#39;Second Workspace&#39;</span></span>
<span id="cb372-2"><a href="#cb372-2" aria-hidden="true" tabindex="-1"></a><span class="va">WS2ID</span><span class="op">=</span><span class="va">$(</span><span class="ex">ascli</span> aoc admin workspace list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;q&quot;:&quot;&#39;&quot;</span><span class="va">$WS2</span><span class="st">&quot;&#39;&quot;}&#39;</span> <span class="at">--select</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;name&quot;:&quot;&#39;&quot;</span><span class="va">$WS2</span><span class="st">&quot;&#39;&quot;}&#39;</span> <span class="at">--fields</span><span class="op">=</span>id <span class="at">--format</span><span class="op">=</span>csv<span class="va">)</span></span></code></pre></div>
<p>c- Extract membership information</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb373-1"><a href="#cb373-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin workspace_membership list <span class="at">--fields</span><span class="op">=</span>manager,member_id,member_type,workspace_id <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;workspace_id&quot;:&#39;&quot;</span><span class="va">$WS1ID</span><span class="st">&quot;&#39;}&#39;</span> <span class="at">--format</span><span class="op">=</span>jsonpp <span class="at">--output</span><span class="op">=</span>ws1_members.json</span></code></pre></div>
<p>d- Convert to creation data for second workspace:</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb374-1"><a href="#cb374-1" aria-hidden="true" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-Eve</span> <span class="st">&#39;(direct|effective_manager|_count|storage|&quot;id&quot;)&#39;</span> ws1_members.json<span class="kw">|</span><span class="fu">sed</span> <span class="st">&#39;/workspace_id/ s/&quot;&#39;&quot;</span><span class="va">$WS1ID</span><span class="st">&quot;&#39;&quot;/&quot;&#39;&quot;</span><span class="va">$WS2ID</span><span class="st">&quot;&#39;&quot;/g&#39;</span> <span class="op">&gt;</span> ws2_members.json</span></code></pre></div>
<p>or, using <code>jq</code>:</p>
<div class="sourceCode" id="cb375"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb375-1"><a href="#cb375-1" aria-hidden="true" tabindex="-1"></a><span class="ex">jq</span> <span class="st">&#39;[.[] | {member_type,member_id,workspace_id,manager,workspace_id:&quot;&#39;&quot;</span><span class="va">$WS2ID</span><span class="st">&quot;&#39;&quot;}]&#39;</span> ws1_members.json <span class="op">&gt;</span> ws2_members.json</span></code></pre></div>
<p>e- Add members to second workspace</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb376-1"><a href="#cb376-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin workspace_membership create <span class="at">--bulk</span><span class="op">=</span>yes @json:@file:ws2_members.json</span></code></pre></div>
<h3 data-number="5.4.18" id="example-get-users-who-did-not-log-since-a-date"><span class="header-section-number">5.4.18</span> Example: Get users who did
not log since a date</h3>
<div class="sourceCode" id="cb377"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb377-1"><a href="#cb377-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin user list <span class="at">--fields</span><span class="op">=</span>email <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;q&quot;:&quot;last_login_at:&lt;2018-05-28&quot;}&#39;</span></span></code></pre></div>
<pre class="text"><code>+-------------------------------+
|             email             |
+-------------------------------+
| John.curtis@acme.com          |
| Jean.Dupont@tropfort.com      |
+-------------------------------+</code></pre>
<h3 data-number="5.4.19" id="example-list-limited-users"><span class="header-section-number">5.4.19</span> Example: List
<strong>Limited</strong> users</h3>
<div class="sourceCode" id="cb379"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb379-1"><a href="#cb379-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin user list <span class="at">--fields</span><span class="op">=</span>email <span class="at">--select</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;member_of_any_workspace&quot;:false}&#39;</span></span></code></pre></div>
<h3 data-number="5.4.20" id="example-create-a-group-add-to-workspace-and-add-user-to-group"><span class="header-section-number">5.4.20</span> Example: Create a group, add
to workspace and add user to group</h3>
<ul>
<li>Create the group and take note of <code>id</code></li>
</ul>
<div class="sourceCode" id="cb380"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb380-1"><a href="#cb380-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin group create @json:<span class="st">&#39;{&quot;name&quot;:&quot;group 1&quot;,&quot;description&quot;:&quot;my super group&quot;}&#39;</span></span></code></pre></div>
<p>Group: <code>11111</code></p>
<ul>
<li>Get the workspace ID</li>
</ul>
<div class="sourceCode" id="cb381"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb381-1"><a href="#cb381-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin workspace list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;q&quot;:&quot;myworkspace&quot;}&#39;</span> <span class="at">--fields</span><span class="op">=</span>id <span class="at">--format</span><span class="op">=</span>csv <span class="at">--display</span><span class="op">=</span>data</span></code></pre></div>
<p>Workspace: 22222</p>
<ul>
<li>Add group to workspace</li>
</ul>
<div class="sourceCode" id="cb382"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb382-1"><a href="#cb382-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin workspace_membership create @json:<span class="st">&#39;{&quot;workspace_id&quot;:22222,&quot;member_type&quot;:&quot;user&quot;,&quot;member_id&quot;:11111}&#39;</span></span></code></pre></div>
<ul>
<li>Get a user&#39;s ID</li>
</ul>
<div class="sourceCode" id="cb383"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb383-1"><a href="#cb383-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin user list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;q&quot;:&quot;manu.macron@example.com&quot;}&#39;</span> <span class="at">--fields</span><span class="op">=</span>id <span class="at">--format</span><span class="op">=</span>csv <span class="at">--display</span><span class="op">=</span>data</span></code></pre></div>
<p>User: 33333</p>
<ul>
<li>Add user to group</li>
</ul>
<div class="sourceCode" id="cb384"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb384-1"><a href="#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin group_membership create @json:<span class="st">&#39;{&quot;group_id&quot;:11111,&quot;member_type&quot;:&quot;user&quot;,&quot;member_id&quot;:33333}&#39;</span></span></code></pre></div>
<h3 data-number="5.4.21" id="example-perform-a-multi-gbps-transfer-between-two-remote-shared-folders"><span class="header-section-number">5.4.21</span> Example: Perform a multi
Gbps transfer between two remote shared folders</h3>
<p>In this example, a user has access to a workspace where two shared
folders are located on different sites, e.g. different cloud
regions.</p>
<p>First, set up the environment (skip if already done)</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb385-1"><a href="#cb385-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config wizard <span class="at">--url</span><span class="op">=</span>https://sedemo.ibmaspera.com <span class="at">--username</span><span class="op">=</span>someuser@example.com</span></code></pre></div>
<pre class="text"><code>Detected: Aspera on Cloud
Preparing preset: aoc_sedemo
Using existing key:
/Users/laurent/.aspera/ascli/aspera_aoc_key
Using global client_id.
Please Login to your Aspera on Cloud instance.
Navigate to your &quot;Account Settings&quot;
Check or update the value of &quot;Public Key&quot; to be:
-----BEGIN PUBLIC KEY-----
SOME PUBLIC KEY PEM DATA HERE
-----END PUBLIC KEY-----
Once updated or validated, press enter.

creating new config preset: aoc_sedemo
Setting config preset as default for aspera
saving configuration file
Done.
You can test with:
ascli aoc user profile show</code></pre>
<p>This creates the option preset <code>aoc_[org name]</code> to allow
seamless command line access and sets it as default for Aspera on
Cloud.</p>
<p>Then, create two shared folders located in two regions, in your files
home, in a workspace.</p>
<p>Then, transfer between those:</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb387-1"><a href="#cb387-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> <span class="at">-Paoc_show</span> aoc files transfer <span class="at">--from-folder</span><span class="op">=</span><span class="st">&#39;IBM Cloud SJ&#39;</span> <span class="at">--to-folder</span><span class="op">=</span><span class="st">&#39;AWS Singapore&#39;</span> 100GB.file <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;target_rate_kbps&quot;:&quot;1000000&quot;,&quot;multi_session&quot;:10,&quot;multi_session_threshold&quot;:1}&#39;</span></span></code></pre></div>
<h3 data-number="5.4.22" id="example-create-registration-key-to-register-a-tethered-node"><span class="header-section-number">5.4.22</span> Example: Create registration
key to register a tethered node</h3>
<p>The following command will create and display a secret token to
register a self-managed Aspera Transfer Server:</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb388-1"><a href="#cb388-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin client_registration_token create @json:<span class="st">&#39;{&quot;data&quot;:{&quot;name&quot;:&quot;laurentnode&quot;,&quot;client_subject_scopes&quot;:[&quot;alee&quot;,&quot;aejd&quot;],&quot;client_subject_enabled&quot;:true}}&#39;</span> <span class="at">--fields</span><span class="op">=</span>token <span class="at">--show-secrets</span><span class="op">=</span>yes</span></code></pre></div>
<h3 data-number="5.4.23" id="example-delete-all-registration-keys"><span class="header-section-number">5.4.23</span> Example: Delete all
registration keys</h3>
<div class="sourceCode" id="cb389"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb389-1"><a href="#cb389-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin client_registration_token list <span class="at">--fields</span><span class="op">=</span>id <span class="at">--format</span><span class="op">=</span>csv<span class="kw">|</span><span class="ex">ascli</span> aoc admin client_registration_token delete @lines:@stdin: <span class="at">--bulk</span><span class="op">=</span>yes</span></code></pre></div>
<pre class="text"><code>+-----+---------+
| id  | status  |
+-----+---------+
| 99  | deleted |
| 100 | deleted |
| 101 | deleted |
| 102 | deleted |
+-----+---------+</code></pre>
<h3 data-number="5.4.24" id="example-create-a-node"><span class="header-section-number">5.4.24</span> Example: Create a Node</h3>
<p>AoC nodes as actually composed with two related entities:</p>
<ul>
<li>An access key created on the Transfer Server (HSTS/ATS)</li>
<li>A <code>node</code> resource in the AoC application.</li>
</ul>
<p>The web UI allows creation of both entities in one shot. For more
flexibility, <code>ascli</code> allows this in two separate steps.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>When selecting <strong>Use existing access key</strong> in the web
UI, this actually skips access key creation (first step).</p></div>
</div>
<p>So, for example, the creation of a node using ATS in IBM Cloud looks
like (see other example in this manual):</p>
<ul>
<li><p>Create the access key on ATS</p>
<p>The creation options are the ones of ATS API, refer to the <a href="#ats-access-key-creation-parameters">section on ATS</a> for more
details and examples.</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb391-1"><a href="#cb391-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin ats access_key create <span class="at">--cloud</span><span class="op">=</span>softlayer <span class="at">--region</span><span class="op">=</span>eu-de <span class="at">--params</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;storage&quot;:{&quot;type&quot;:&quot;ibm-s3&quot;,&quot;bucket&quot;:&quot;mybucket&quot;,&quot;credentials&quot;:{&quot;access_key_id&quot;:&quot;mykey&quot;,&quot;secret_access_key&quot;:&quot;mysecret&quot;},&quot;path&quot;:&quot;/&quot;}}&#39;</span></span></code></pre></div>
<p>Once executed, the access key <code>id</code> and
<code>secret</code>, randomly generated by the Node API, is
displayed.</p></li>
</ul>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Once returned by the API, the secret will not be available anymore,
so store this preciously. ATS secrets can only be reset by asking IBM
support.</p></div>
</div>
<ul>
<li><p>Create the AoC node entity</p>
<p>First, Retrieve the ATS node address</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb392-1"><a href="#cb392-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin ats cluster show <span class="at">--cloud</span><span class="op">=</span>softlayer <span class="at">--region</span><span class="op">=</span>eu-de <span class="at">--fields</span><span class="op">=</span>transfer_setup_url <span class="at">--format</span><span class="op">=</span>csv</span></code></pre></div>
<p>Then use the returned address for the <code>url</code> key to
actually create the AoC Node entity:</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb393-1"><a href="#cb393-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin node create @json:<span class="st">&#39;{&quot;name&quot;:&quot;myname&quot;,&quot;access_key&quot;:&quot;myaccesskeyid&quot;,&quot;ats_access_key&quot;:true,&quot;ats_storage_type&quot;:&quot;ibm-s3&quot;,&quot;url&quot;:&quot;https://ats-sl-fra-all.aspera.io&quot;}&#39;</span></span></code></pre></div></li>
</ul>
<p>Creation of a node with a self-managed node is similar, but the
command <code>aoc admin ats access_key create</code> is replaced with
<code>node access_key create</code> on the private node itself.</p>
<h2 data-number="5.5" id="list-of-files-to-transfer"><span class="header-section-number">5.5</span> List of files to transfer</h2>
<p>Source files are provided as a list with the <code>sources</code>
option. By default, simply the list of files on the command line. Refer
to section <a href="#list-of-files-for-transfers">File list</a>.</p>
<h2 data-number="5.6" id="packages-app"><span class="header-section-number">5.6</span> Packages app</h2>
<p>The web-mail-like application.</p>
<h3 data-number="5.6.1" id="send-a-package"><span class="header-section-number">5.6.1</span> Send a Package</h3>
<p>General syntax:</p>
<div class="sourceCode" id="cb394"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb394-1"><a href="#cb394-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc packages send [package extended value] [other parameters such as options and file list]</span></code></pre></div>
<p>Package creation parameter are sent as <strong>Command
Parameter</strong>. Refer to the AoC package creation API, or display an
existing package in JSON to list attributes.</p>
<p>List allowed shared inbox destinations with:</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb395-1"><a href="#cb395-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc packages shared_inboxes list</span></code></pre></div>
<p>Use fields: <code>recipients</code> and/or
<code>bcc_recipients</code> to provide the list of recipients:
<strong>user</strong> or <strong>shared inbox</strong>:</p>
<ul>
<li>Provide either IDs as expected by API:
<code>&quot;recipients&quot;:[{&quot;type&quot;:&quot;dropbox&quot;,&quot;id&quot;:&quot;1234&quot;}]</code></li>
<li>or just names: <code>&quot;recipients&quot;:[{&quot;The Dest&quot;}]</code>.</li>
</ul>
<p>ascli will resolve the list of email addresses and dropbox names to
the expected type/ID list, based on case-insensitive partial match.</p>
<p>If a user recipient (email) is not already registered and the
workspace allows external users, then the package is sent to an external
user, and:</p>
<ul>
<li>if the option <code>new_user_option</code> is
<code>@json:{&quot;package_contact&quot;:true}</code> (default), then a public
link is sent and the external user does not need to create an
account</li>
<li>if the option <code>new_user_option</code> is <code>@json:{}</code>,
then external users are invited to join the workspace</li>
</ul>
<h4 data-number="5.6.1.1" id="example-send-a-package-with-one-file-to-two-users-using-their-email"><span class="header-section-number">5.6.1.1</span> Example: Send a package
with one file to two users, using their email</h4>
<div class="sourceCode" id="cb396"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb396-1"><a href="#cb396-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc packages send @json:<span class="st">&#39;{&quot;name&quot;:&quot;my title&quot;,&quot;note&quot;:&quot;my note&quot;,&quot;recipients&quot;:[&quot;someuser@example.com&quot;,&quot;other@example.com&quot;]}&#39;</span> my_file.dat</span></code></pre></div>
<h4 data-number="5.6.1.2" id="example-send-a-package-to-a-shared-inbox-with-metadata"><span class="header-section-number">5.6.1.2</span> Example: Send a package to
a shared inbox with metadata</h4>
<div class="sourceCode" id="cb397"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb397-1"><a href="#cb397-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc packages send <span class="at">--workspace</span><span class="op">=</span><span class="st">&quot;my ws&quot;</span> @json:<span class="st">&#39;{&quot;name&quot;:&quot;my pack title&quot;,&quot;recipients&quot;:[&quot;Shared Inbox With Meta&quot;],&quot;metadata&quot;:{&quot;Project Id&quot;:&quot;123&quot;,&quot;Type&quot;:&quot;Opt2&quot;,&quot;CheckThose&quot;:[&quot;Check1&quot;,&quot;Check2&quot;],&quot;Optional Date&quot;:&quot;2021-01-13T15:02:00.000Z&quot;}}&#39;</span> ~/Documents/Samples/200KB.1</span></code></pre></div>
<p>It is also possible to use identifiers and API parameters:</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb398-1"><a href="#cb398-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc packages send <span class="at">--workspace</span><span class="op">=</span><span class="st">&quot;my ws&quot;</span> @json:<span class="st">&#39;{&quot;name&quot;:&quot;my pack title&quot;,&quot;recipients&quot;:[{&quot;type&quot;:&quot;dropbox&quot;,&quot;id&quot;:&quot;12345&quot;}],&quot;metadata&quot;:[{&quot;input_type&quot;:&quot;single-text&quot;,&quot;name&quot;:&quot;Project Id&quot;,&quot;values&quot;:[&quot;123&quot;]},{&quot;input_type&quot;:&quot;single-dropdown&quot;,&quot;name&quot;:&quot;Type&quot;,&quot;values&quot;:[&quot;Opt2&quot;]},{&quot;input_type&quot;:&quot;multiple-checkbox&quot;,&quot;name&quot;:&quot;CheckThose&quot;,&quot;values&quot;:[&quot;Check1&quot;,&quot;Check2&quot;]},{&quot;input_type&quot;:&quot;date&quot;,&quot;name&quot;:&quot;Optional Date&quot;,&quot;values&quot;:[&quot;2021-01-13T15:02:00.000Z&quot;]}]}&#39;</span> ~/Documents/Samples/200KB.1</span></code></pre></div>
<h4 data-number="5.6.1.3" id="example-send-a-package-with-files-from-the-files-app"><span class="header-section-number">5.6.1.3</span> Example: Send a package
with files from the Files app</h4>
<p>Find files in Files app:</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb399-1"><a href="#cb399-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc files browse /src_folder</span></code></pre></div>
<pre class="text"><code>+---------------+--------+----------------+--------------+----------------------+--------------+
| name          | type   | recursive_size | size         | modified_time        | access_level |
+---------------+--------+----------------+--------------+----------------------+--------------+
| sample_video  | link   |                |              | 2020-11-29T22:49:09Z | edit         |
| 100G          | file   |                | 107374182400 | 2021-04-21T18:19:25Z | edit         |
| 10M.dat       | file   |                | 10485760     | 2021-05-18T08:22:39Z | edit         |
| Test.pdf      | file   |                | 1265103      | 2022-06-16T12:49:55Z | edit         |
+---------------+--------+----------------+--------------+----------------------+--------------+</code></pre>
<p>Let&#39;s send a package with the file <code>10M.dat</code> from
subfolder /src_folder in a package:</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb401-1"><a href="#cb401-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc files node_info /src_folder <span class="at">--format</span><span class="op">=</span>json <span class="at">--display</span><span class="op">=</span>data <span class="kw">|</span> <span class="ex">ascli</span> aoc packages send @json:<span class="st">&#39;{&quot;name&quot;:&quot;test&quot;,&quot;recipients&quot;:[&quot;someuser@example.com&quot;]}&#39;</span> 10M.dat <span class="at">--transfer</span><span class="op">=</span>node <span class="at">--transfer-info</span><span class="op">=</span>@json:@stdin:</span></code></pre></div>
<h3 data-number="5.6.2" id="receive-packages"><span class="header-section-number">5.6.2</span> Receive packages</h3>
<p>The command to receive one or multiple packages is:</p>
<div class="sourceCode" id="cb402"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb402-1"><a href="#cb402-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc packages recv <span class="op">&lt;</span>package id<span class="op">&gt;</span> [<span class="op">&lt;</span>file<span class="op">&gt;</span> ...]</span></code></pre></div>
<p>Where <code>&lt;package id&gt;</code> is the identifier of the
package to receive or <code>ALL</code> to receive all packages matching
the query. Option <code>once_only</code> is supported, see below.</p>
<p>To download only some files from the package, just add the path of
the files on the command line: <code>[&lt;file&gt; ...]</code>, see
option <code>sources</code>. By default, all files in the package are
downloaded, i.e. <code>.</code> is used as the file list.</p>
<p>Option <code>package_folder</code> defines the attribute of folder
used as destination sub folder in the <code>to_folder</code> path (see
description earlier). The following syntax is supported</p>
<table>
<thead>
<tr>
<th>Syntax</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>@none:</code></td>
<td>No subfolder is created, files are downloaded directly into the
specified <code>to_folder</code>.</td>
</tr>
<tr>
<td><code>&lt;field&gt;</code></td>
<td>A subfolder named after the package&#39;s specified field is created
inside <code>to_folder</code>.</td>
</tr>
<tr>
<td><code>&lt;field1&gt;+&lt;field2&gt;</code></td>
<td>A subfolder named after the combination of two package fields with a
<code>.</code> is created inside <code>to_folder</code>.</td>
</tr>
<tr>
<td><code>&lt;field1&gt;+&lt;field2&gt;?</code></td>
<td>A subfolder named after the package&#39;s specified field1 is created,
unless it already exists. Else it falls back to the combination of both
fields with <code>.</code>.</td>
</tr>
</tbody>
</table>
<p>The special value <code>seq</code> for <code>&lt;field2&gt;</code>
will append an incrementing number to the folder name starting at
<code>1</code>. If <code>?</code> is used, then the sequence number is
used only if the folder already exists.</p>
<p>Examples:</p>
<ul>
<li><code>id</code> : subfolder named after package ID. If the same
package is downloaded several times, it will always be placed in the
same folder.</li>
<li><code>name</code> : subfolder named after package name. If two
packages with the same name are downloaded, they will be combined in the
same folder.</li>
<li><code>name+id</code> : subfolder named after the combination of
package name and ID.</li>
<li><code>name+id?</code> : subfolder named after the package&#39;s name is
created, unless it already exists. Else it falls back to the combination
of both fields with <code>.</code>.</li>
<li><code>name+seq?</code> : subfolder named after the package&#39;s name is
created, unless it already exists. Else it falls back to the combination
of name and sequence number.</li>
</ul>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>When <code>&lt;field1&gt;+&lt;field2&gt;?</code> is used, if two
packages are downloaded and have the same fields, they will be
downloaded in the same folder. If <code>name+seq?</code> is used, if the
same package is downloaded multiple times, it will be placed in
different folders with a sequence number.</p></div>
</div>
<h4 data-number="5.6.2.1" id="example-receive-all-packages-from-a-given-shared-inbox"><span class="header-section-number">5.6.2.1</span> Example: Receive all
packages from a given shared inbox</h4>
<div class="sourceCode" id="cb403"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb403-1"><a href="#cb403-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc packages recv ALL <span class="at">--workspace</span><span class="op">=</span>_workspace_ <span class="at">--once-only</span><span class="op">=</span>yes <span class="at">--lock-port</span><span class="op">=</span>12345 <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;dropbox_name&quot;:&quot;_shared_inbox_name_&quot;,&quot;archived&quot;:false,&quot;received&quot;:true,&quot;has_content&quot;:true,&quot;exclude_dropbox_packages&quot;:false,&quot;include_draft&quot;:false}&#39;</span> <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;resume_policy&quot;:&quot;sparse_csum&quot;,&quot;target_rate_kbps&quot;:50000}&#39;</span></span></code></pre></div>
<p>To list packages that would be downloaded, without actually
downloading them, replace <code>recv ALL</code> with <code>list</code>
(keep options <code>once_only</code> and <code>query</code>)</p>
<h4 data-number="5.6.2.2" id="receive-new-packages-only-cargo"><span class="header-section-number">5.6.2.2</span> Receive new packages only
(Cargo)</h4>
<p>It is possible to automatically download new packages, like using
Aspera Cargo:</p>
<div class="sourceCode" id="cb404"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb404-1"><a href="#cb404-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc packages recv ALL <span class="at">--once-only</span><span class="op">=</span>yes <span class="at">--lock-port</span><span class="op">=</span>12345</span></code></pre></div>
<ul>
<li><code>ALL</code> (case-sensitive) will download all packages</li>
<li><code>--once-only=yes</code> keeps memory of any downloaded package
in persistency files located in the configuration folder</li>
<li><code>--lock-port=12345</code> ensures that only one instance is
started at the same time, to avoid running two downloads in
parallel</li>
</ul>
<p>Typically, one would execute this command on a regular basis, using
the method of your choice: see <a href="#scheduler">Scheduler</a>.</p>
<h4 data-number="5.6.2.3" id="example-content-of-a-received-package"><span class="header-section-number">5.6.2.3</span> Example: Content of a
received Package</h4>
<p>Some <code>node</code> operations are available for a package, such
as <code>browse</code> and <code>find</code>.</p>
<p>To list the content of a package, use command
<code>packages browse &lt;package id&gt; &lt;folder&gt;</code>:</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb405-1"><a href="#cb405-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc package browse my5CnbeWng /</span></code></pre></div>
<p>Use command <code>find</code> to list recursively.</p>
<p>For advanced users, it&#39;s also possible to pipe node information for
the package and use node operations:</p>
<div class="sourceCode" id="cb406"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb406-1"><a href="#cb406-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc package node_info <span class="op">&lt;</span>package ID here<span class="op">&gt;</span> / <span class="at">--format</span><span class="op">=</span>json <span class="at">--show-secrets</span><span class="op">=</span>yes <span class="at">--display</span><span class="op">=</span>data <span class="kw">|</span> <span class="ex">ascli</span> node <span class="at">-N</span> <span class="at">--preset</span><span class="op">=</span>@json:@stdin: access_key do self browse /</span></code></pre></div>
<h3 data-number="5.6.3" id="list-packages"><span class="header-section-number">5.6.3</span> List packages</h3>
<p>By default, when using <code>aoc packages list</code> or
<code>aoc packages receive ALL</code>, the following <code>query</code>
is performed:</p>
<table>
<thead>
<tr>
<th>Query parameter</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>archived</code></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>has_content</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>received</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>completed</code></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>workspace_id</code></td>
<td>Set based on current workspace.</td>
</tr>
<tr>
<td><code>dropbox_id</code></td>
<td>Set according to <code>dropbox_name</code>, if provided.</td>
</tr>
<tr>
<td><code>exclude_dropbox_packages</code></td>
<td><code>true</code> unless <code>dropbox_id</code> is provided.</td>
</tr>
</tbody>
</table>
<p>Parameters provided using option <code>query</code> override this
query. To remove a parameter, set it to <code>null</code>.</p>
<h4 data-number="5.6.3.1" id="example-list-packages-in-a-given-shared-inbox"><span class="header-section-number">5.6.3.1</span> Example: List packages in a
given shared inbox</h4>
<p>When user packages are listed, the following query is used:</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb407-1"><a href="#cb407-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;archived&quot;</span><span class="fu">:</span><span class="kw">false</span><span class="fu">,</span><span class="dt">&quot;exclude_dropbox_packages&quot;</span><span class="fu">:</span><span class="kw">true</span><span class="fu">,</span><span class="dt">&quot;has_content&quot;</span><span class="fu">:</span><span class="kw">true</span><span class="fu">,</span><span class="dt">&quot;received&quot;</span><span class="fu">:</span><span class="kw">true</span><span class="fu">}</span></span></code></pre></div>
<p>To list packages in a shared inbox, the query has to be specified
with the shared inbox by name or its identifier. Additional parameters
can be specified, as supported by the API (to find out available
filters, consult the API definition, or use the web interface in
developer mode). The current workspace is added unless specified in the
query.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>By default, <code>exclude_dropbox_packages</code> is set to
<code>true</code> for user packages, and to false for shared inbox
packages. This can be overridden in the query.</p></div>
</div>
<p>Using shared inbox name:</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb408-1"><a href="#cb408-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc packages list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;dropbox_name&quot;:&quot;My Shared Inbox&quot;,&quot;archived&quot;:false,&quot;received&quot;:true,&quot;has_content&quot;:true,&quot;exclude_dropbox_packages&quot;:false,&quot;include_draft&quot;:false,&quot;sort&quot;:&quot;-received_at&quot;}&#39;</span></span></code></pre></div>
<p>Using shared inbox identifier: first retrieve the ID of the shared
inbox, and then list packages with the appropriate filter.</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb409-1"><a href="#cb409-1" aria-hidden="true" tabindex="-1"></a><span class="va">shared_box_id</span><span class="op">=</span><span class="va">$(</span><span class="ex">ascli</span> aoc packages shared_inboxes show <span class="at">--name</span><span class="op">=</span><span class="st">&#39;My Shared Inbox&#39;</span> <span class="at">--format</span><span class="op">=</span>csv <span class="at">--display</span><span class="op">=</span>data <span class="at">--fields</span><span class="op">=</span>id<span class="va">)</span></span></code></pre></div>
<div class="sourceCode" id="cb410"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb410-1"><a href="#cb410-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc packages list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;dropbox_id&quot;:&quot;&#39;</span><span class="va">$shared_box_id</span><span class="st">&#39;&quot;,&quot;archived&quot;:false,&quot;received&quot;:true,&quot;has_content&quot;:true,&quot;exclude_dropbox_packages&quot;:false,&quot;include_draft&quot;:false,&quot;sort&quot;:&quot;-received_at&quot;}&#39;</span></span></code></pre></div>
<h2 data-number="5.7" id="files-app"><span class="header-section-number">5.7</span> Files app</h2>
<p>The Files application presents a <strong>Home</strong> folder to
users in a given workspace. Files located here are either user&#39;s files,
or shared folders.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>All commands under <code>files</code> are the same as under
<code>access_keys do self</code> for plugin <code>node</code>, i.e.
<strong>gen4/access key</strong> operations.</p></div>
</div>
<h3 data-number="5.7.1" id="download-files"><span class="header-section-number">5.7.1</span> Download Files</h3>
<p>The general download command is:</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb411-1"><a href="#cb411-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc files download <span class="op">&lt;</span>source folder path<span class="op">&gt;</span> <span class="op">&lt;</span>source filename <span class="dv">1</span><span class="op">&gt;</span> ...</span></code></pre></div>
<p>I.e. the first argument is the source folder, and the following
arguments are the source file names in this folder.</p>
<p>If a single file or folder is to be downloaded, then a single
argument can be provided.</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb412-1"><a href="#cb412-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc files download <span class="op">&lt;</span>single file path<span class="op">&gt;</span></span></code></pre></div>
<h3 data-number="5.7.2" id="shared-folders"><span class="header-section-number">5.7.2</span> Shared folders</h3>
<p>Like in AoC web UI, &quot;Shared Folders&quot; can be created and shared with
either <strong>Private</strong> or <strong>Public</strong> links.
<strong>Private</strong> links require the collaborator to log in to
access the shared folder. <strong>Public</strong> links include a
passcode that enables the user to access the shared folder without
login-in.</p>
<p>Shared folders can be created either:</p>
<ul>
<li>by users in a workspace: they can share personal folders with other
users in the same workspace: <code>aoc files perm</code></li>
<li>by administrators: they can share a folder with users in any
workspace: <code>aoc admin node do &lt;node ID&gt; perm</code></li>
</ul>
<p>Technically (API), shared folder are managed through <a href="https://developer.ibm.com/apis/catalog/aspera--aspera-node-api/Introduction">permissions</a>
on node and an event is sent to AoC to create a <strong>link</strong> in
the user&#39;s home folder to the shared folder. In both cases, it is
necessary to specify a workspace.</p>
<p>The basic payload to create a permission, i.e. a Shared Folder (last
argument at creation usually specified with <code>@json:</code>) is:</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb413-1"><a href="#cb413-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb413-2"><a href="#cb413-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;file_id&quot;</span><span class="fu">:</span> <span class="st">&quot;50&quot;</span><span class="fu">,</span></span>
<span id="cb413-3"><a href="#cb413-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;access_levels&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;list&quot;</span><span class="ot">,</span><span class="st">&quot;read&quot;</span><span class="ot">,</span><span class="st">&quot;write&quot;</span><span class="ot">,</span><span class="st">&quot;delete&quot;</span><span class="ot">,</span><span class="st">&quot;mkdir&quot;</span><span class="ot">,</span><span class="st">&quot;rename&quot;</span><span class="ot">,</span><span class="st">&quot;preview&quot;</span><span class="ot">]</span><span class="fu">,</span></span>
<span id="cb413-4"><a href="#cb413-4" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;access_type&quot;</span><span class="fu">:</span> <span class="st">&quot;user&quot;</span><span class="fu">,</span></span>
<span id="cb413-5"><a href="#cb413-5" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;access_id&quot;</span><span class="fu">:</span> <span class="st">&quot;john@example.com&quot;</span><span class="fu">,</span></span>
<span id="cb413-6"><a href="#cb413-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;tags&quot;</span><span class="fu">:</span> <span class="fu">{</span><span class="er">...</span><span class="fu">},</span></span>
<span id="cb413-7"><a href="#cb413-7" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p><code>ascli</code> expects the same payload for creation.
<code>ascli</code> automatically populates some payload fields and
provides convenient additional fields that generate native fields:</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>file_id</code></td>
<td>Native<br />Auto</td>
<td>ID of the folder to share, as specified in the command line by
path.</td>
</tr>
<tr>
<td><code>access_levels</code></td>
<td>Native<br />Optional</td>
<td>List of access levels to set for the shared folder. Defaults to full
access.</td>
</tr>
<tr>
<td><code>tags</code></td>
<td>Native<br />Auto</td>
<td>Set with expected values for AoC: username who creates, and
workspace in which the shared folder is created.</td>
</tr>
<tr>
<td><code>access_type</code></td>
<td>Native<br />Required</td>
<td>Type of access, such as <code>user</code>, <code>group</code>, or
<code>workspace</code>. Can be set with parameter
<code>with</code>.</td>
</tr>
<tr>
<td><code>access_id</code></td>
<td>Native<br />Required</td>
<td>ID of the user, group, or workspace (see <code>with</code>)</td>
</tr>
<tr>
<td><code>with</code></td>
<td><code>ascli</code></td>
<td>Recipient of shared folder. Can be a username, a group name, or a
workspace name. <code>ascli</code> will resolve the name to the proper
type and ID in fields <code>access_type</code> and
<code>access_id</code>. If the value is the empty string, then it
declares the shared folder in the workspace (first action to do, see
below).</td>
</tr>
<tr>
<td><code>link_name</code></td>
<td><code>ascli</code></td>
<td>Name of the link file created in the user&#39;s home folder for private
links.</td>
</tr>
<tr>
<td><code>as</code></td>
<td><code>ascli</code></td>
<td>Name of the link file created in the user&#39;s home folder for admin
shared folders.</td>
</tr>
</tbody>
</table>
<p>In order to declare/create the shared folder in the workspace, a
special value for <code>access_id</code> is used:
<code>ASPERA_ACCESS_KEY_ADMIN_WS_[workspace ID]]</code>. This is
conveniently set by <code>ascli</code> using an empty string for field
<code>with</code>. In order to share a folder with a different, special
tags are set, but this is conveniently done by <code>ascli</code> using
the <code>as</code> field.</p>
<h4 data-number="5.7.2.1" id="user-shared-folders"><span class="header-section-number">5.7.2.1</span> User Shared Folders</h4>
<p>Personal shared folders, created by users in a workspace follow the
syntax:</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb414-1"><a href="#cb414-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc files permission <span class="at">--workspace</span><span class="op">=&lt;</span>workspace name<span class="op">&gt;</span> <span class="op">&lt;</span>path to folder<span class="op">&gt;</span> ...</span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The workspace is identified by name, and folder by path, relative to
the user&#39;s home. To use an identifier instead, one can use the percent
selector, like <code>%id:1234</code></p></div>
</div>
<h4 data-number="5.7.2.2" id="admin-shared-folders"><span class="header-section-number">5.7.2.2</span> Admin Shared Folders</h4>
<p>Admin shared folders, created by administrators in a workspace follow
the syntax:</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb415-1"><a href="#cb415-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin node do <span class="op">&lt;</span>node ID<span class="op">&gt;</span> permission <span class="at">--workspace</span><span class="op">=&lt;</span>workspace name<span class="op">&gt;</span> <span class="op">&lt;</span>path to folder<span class="op">&gt;</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The node is identified by identifier. To use an name instead, one can
use the percent selector, like <code>%name:&quot;my node&quot;</code></p></div>
</div>
<h4 data-number="5.7.2.3" id="example-list-permissions-on-a-shared-folder"><span class="header-section-number">5.7.2.3</span> Example: List permissions
on a shared folder</h4>
<div class="sourceCode" id="cb416"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb416-1"><a href="#cb416-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc files permission /shared_folder_test1 list</span></code></pre></div>
<h4 data-number="5.7.2.4" id="example-share-a-personal-folder-with-other-users"><span class="header-section-number">5.7.2.4</span> Example: Share a personal
folder with other users</h4>
<div class="sourceCode" id="cb417"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb417-1"><a href="#cb417-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc files permission /shared_folder_test1 create @json:<span class="st">&#39;{&quot;with&quot;:&quot;laurent&quot;}&#39;</span></span></code></pre></div>
<h4 data-number="5.7.2.5" id="example-revoke-shared-access"><span class="header-section-number">5.7.2.5</span> Example: Revoke shared
access</h4>
<div class="sourceCode" id="cb418"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb418-1"><a href="#cb418-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc files permission /shared_folder_test1 delete 6161</span></code></pre></div>
<h4 data-number="5.7.2.6" id="example-public-and-private-short-links"><span class="header-section-number">5.7.2.6</span> Example: Public and Private
short links</h4>
<p>They can be managed with commands:</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb419-1"><a href="#cb419-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc files short_link <span class="op">&lt;</span>path to folder<span class="op">&gt;</span> private create</span>
<span id="cb419-2"><a href="#cb419-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc files short_link <span class="op">&lt;</span>path to folder<span class="op">&gt;</span> private list</span>
<span id="cb419-3"><a href="#cb419-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc files short_link <span class="op">&lt;</span>path to folder<span class="op">&gt;</span> public list</span>
<span id="cb419-4"><a href="#cb419-4" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc files short_link public delete <span class="op">&lt;</span>id<span class="op">&gt;</span></span>
<span id="cb419-5"><a href="#cb419-5" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc files short_link public modify <span class="op">&lt;</span>id<span class="op">&gt;</span> @json:<span class="st">&#39;{...}&#39;</span></span></code></pre></div>
<p>Only <code>public</code> short links can be modified. An optional
payload can be provided at creation, for example to protect with a
password, or set an expiry date. A password can be provided on
<code>create</code> and <code>modify</code> for <code>public</code>
links:</p>
<div class="sourceCode" id="cb420"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb420-1"><a href="#cb420-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;password&quot;</span><span class="fu">:</span><span class="st">&quot;my_password_here&quot;</span><span class="fu">}</span></span></code></pre></div>
<p>To remove a password:</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb421-1"><a href="#cb421-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;password_enabled&quot;</span><span class="fu">:</span><span class="kw">false</span><span class="fu">}</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Access level cannot be customized in this version.</p></div>
</div>
<p>An expiration date can be set with parameter <code>expires_at</code>,
using ISO 8601 format. E.g. <code>2025-08-29T08:10:31.000Z</code>. If
only a date is provided, it will be set to midnight UTC of that
date.</p>
<h4 data-number="5.7.2.7" id="example-create-a-workspace-admin-shared-folder"><span class="header-section-number">5.7.2.7</span> Example: Create a workspace
admin shared folder</h4>
<p>First, identify the node ID where the shared folder will be
created.</p>
<p>To get the node ID of the default node for workspace
<code>my ws</code>, use the command:</p>
<div class="sourceCode" id="cb422"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb422-1"><a href="#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin workspace show %name:<span class="st">&#39;my ws&#39;</span> <span class="at">--fields</span><span class="op">=</span>node_id</span></code></pre></div>
<p>Alternatively (longer):</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb423-1"><a href="#cb423-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin workspace list <span class="at">--select</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;name&quot;:&quot;my ws&quot;}&#39;</span> <span class="at">--fields</span><span class="op">=</span>node_id</span></code></pre></div>
<p>Or select a node identifier manually from the list of nodes:</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb424-1"><a href="#cb424-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin node list <span class="at">--fields</span><span class="op">=</span>id,name</span></code></pre></div>
<p>In the following commands, replace:</p>
<ul>
<li><code>1234</code> with the node ID</li>
<li><code>my ws</code> with the workspace name</li>
<li><code>/folder_on_node</code> with the name of the folder on the
node: it can also be a folder deeper than level 1.</li>
</ul>
<p>The node can also be conveniently identified using the
<strong>percent selector</strong> instead of numerical ID:
<code>%name:&quot;my node&quot;</code>.</p>
<p>If the shared folder does not exist, then create it:</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb425-1"><a href="#cb425-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin node do 1234 mkdir /folder_on_node</span></code></pre></div>
<p>Create the shared folder in workspace <code>my ws</code> (set
<code>with</code> to empty string, or do not specify it). Optionally use
<code>as</code> to set the name of the shared folder if different from
the folder name on the node. For other options, refer to the previous
section on shared folders.</p>
<div class="sourceCode" id="cb426"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb426-1"><a href="#cb426-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin node do 1234 permission /folder_on_node create @json:<span class="st">&#39;{&quot;with&quot;:&quot;&quot;,&quot;as&quot;:&quot;folder_for_users&quot;}&#39;</span> <span class="at">--workspace</span><span class="op">=</span><span class="st">&quot;my ws&quot;</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The previous command only declares the shared folder in the
workspace, but does not share it with anybody.</p></div>
</div>
<p>To share with a user, group, or workspace, use the <code>with</code>
parameter with the name of a entity to share with (non-empty value). The
<code>&quot;with&quot;</code> parameter will perform a lookup, and set fields
<code>access_type</code> and <code>access_id</code> accordingly. The
native fields <code>access_type</code> and <code>access_id</code> can
also be used, instead of <code>with</code>.</p>
<div class="sourceCode" id="cb427"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb427-1"><a href="#cb427-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin node do 1234 permission /folder_on_node create @json:<span class="st">&#39;{&quot;with&quot;:&quot;john@example.com&quot;,&quot;as&quot;:&quot;folder_for_one_user&quot;}&#39;</span> <span class="at">--workspace</span><span class="op">=</span><span class="st">&quot;my ws&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb428"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb428-1"><a href="#cb428-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin node do 1234 permission /folder_on_node create @json:<span class="st">&#39;{&quot;with&quot;:&quot;group 1&quot;,&quot;as&quot;:&quot;folder_for_a_group&quot;}&#39;</span> <span class="at">--workspace</span><span class="op">=</span><span class="st">&quot;my ws&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb429"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb429-1"><a href="#cb429-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin node do 1234 permission /folder_on_node create @json:<span class="st">&#39;{&quot;with&quot;:&quot;my ws&quot;,&quot;as&quot;:&quot;folder_for_all_workspace&quot;}&#39;</span> <span class="at">--workspace</span><span class="op">=</span><span class="st">&quot;my ws&quot;</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>In the previous commands, field <code>as</code> is optional.</p></div>
</div>
<h3 data-number="5.7.3" id="cross-organization-transfers"><span class="header-section-number">5.7.3</span> Cross Organization
transfers</h3>
<p>It is possible to transfer files directly between organizations
without having to first download locally and then upload...</p>
<p>Although optional, the creation of <a href="#option-preset">Option
Preset</a> is recommended to avoid placing all parameters in the command
line.</p>
<p>Procedure to send a file from org1 to org2:</p>
<ul>
<li>Get access to Organization 1 and create an <a href="#option-preset">Option Preset</a>: e.g. <code>org1</code>, for
instance, use the <a href="#configuration-using-wizard">Wizard</a></li>
<li>Check that access works and locate the source file e.g.
<code>mysourcefile</code>, e.g. using command
<code>files browse</code></li>
<li>Get access to Organization 2 and create an <a href="#option-preset">Option Preset</a>: e.g. <code>org2</code></li>
<li>Check that access works and locate the destination folder
<code>mydestfolder</code></li>
<li>Execute the following:</li>
</ul>
<div class="sourceCode" id="cb430"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb430-1"><a href="#cb430-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> <span class="at">-Porg1</span> aoc files node_info /mydestfolder <span class="at">--format</span><span class="op">=</span>json <span class="at">--display</span><span class="op">=</span>data <span class="kw">|</span> <span class="ex">ascli</span> <span class="at">-Porg2</span> aoc files upload mysourcefile <span class="at">--transfer</span><span class="op">=</span>node <span class="at">--transfer-info</span><span class="op">=</span>@json:@stdin:</span></code></pre></div>
<p>Explanation:</p>
<ul>
<li><code>ascli</code> is the command to execute by the shell</li>
<li><code>-Porg1</code> load options for preset <code>org1</code> (url
and credentials)</li>
<li><code>aoc</code> use Aspera on Cloud plugin</li>
<li><code>files node_info /mydestfolder</code> generate transfer
information including Node API credential and root ID, suitable for the
next command</li>
<li><code>--format=json</code> format the output in JSON (instead of
default text table)</li>
<li><code>--display=data</code> display only the result, and remove
other information, such as workspace name</li>
<li><code>|</code> the standard output of the first command is fed into
the second one</li>
<li><code>-Porg2 aoc</code> use Aspera on Cloud plugin and load
credentials for <code>org2</code></li>
<li><code>files upload mysourcefile</code> upload the file named
<code>mysourcefile</code> (located in <code>org2</code>) to
<code>org1</code></li>
<li><code>--transfer=node</code> use transfer agent type
<code>node</code> instead of default <a href="#agent-direct"><code>direct</code></a></li>
<li><code>--transfer-info=@json:@stdin:</code> provide <code>node</code>
transfer agent information, i.e. Node API credentials, those are
expected in JSON format and read from standard input</li>
</ul>
<h3 data-number="5.7.4" id="find-files"><span class="header-section-number">5.7.4</span> Find Files</h3>
<p>The command <code>aoc files find</code> allows searching for files in
a given workspace.</p>
<p>It works also on <code>node</code> resource using the <code>v4</code>
command:</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb431-1"><a href="#cb431-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc admin node <span class="at">--name</span><span class="op">=</span><span class="st">&#39;my node name&#39;</span> <span class="at">--secret</span><span class="op">=</span><span class="st">&#39;my_secret_here&#39;</span> v4 find ...</span></code></pre></div>
<p>For instructions, refer to section <code>find</code> for plugin
<code>node</code>.</p>
<h2 data-number="5.8" id="tested-commands-for-aoc"><span class="header-section-number">5.8</span> Tested commands for
<code>aoc</code></h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Add <code>ascli aoc</code> in front of the following commands:</p></div>
</div>
<div class="sourceCode" id="cb432"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb432-1"><a href="#cb432-1" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> analytics transfers nodes</span>
<span id="cb432-2"><a href="#cb432-2" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> analytics transfers organization <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;status&quot;:&quot;completed&quot;,&quot;direction&quot;:&quot;receive&quot;,&quot;limit&quot;:2}&#39;</span> <span class="at">--notify-to</span><span class="op">=</span>my_email_external <span class="at">--notify-template</span><span class="op">=</span>@ruby:<span class="st">&#39;%Q{From: &lt;%=from_name%&gt; &lt;&lt;%=from_email%&gt;&gt;\nTo: &lt;&lt;%=to%&gt;&gt;\nSubject: &lt;%=ev[&quot;files_completed&quot;]%&gt; files received\n\n&lt;%=ev.to_yaml%&gt;}&#39;</span></span>
<span id="cb432-3"><a href="#cb432-3" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> analytics transfers users <span class="at">--once-only</span><span class="op">=</span>yes</span>
<span id="cb432-4"><a href="#cb432-4" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> application list</span>
<span id="cb432-5"><a href="#cb432-5" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> ats access_key create <span class="at">--cloud</span><span class="op">=</span>aws <span class="at">--region</span><span class="op">=</span>my_region <span class="at">--params</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;id&quot;:&quot;ak_aws&quot;,&quot;name&quot;:&quot;my test key AWS&quot;,&quot;storage&quot;:{&quot;type&quot;:&quot;aws_s3&quot;,&quot;bucket&quot;:&quot;my_bucket&quot;,&quot;credentials&quot;:{&quot;access_key_id&quot;:&quot;my_access_key&quot;,&quot;secret_access_key&quot;:&quot;my_secret_key&quot;},&quot;path&quot;:&quot;/&quot;}}&#39;</span></span>
<span id="cb432-6"><a href="#cb432-6" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> ats access_key create <span class="at">--cloud</span><span class="op">=</span>softlayer <span class="at">--region</span><span class="op">=</span>my_region <span class="at">--params</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;id&quot;:&quot;ak1ibmcloud&quot;,&quot;secret&quot;:&quot;my_secret_here&quot;,&quot;name&quot;:&quot;my test key&quot;,&quot;storage&quot;:{&quot;type&quot;:&quot;ibm-s3&quot;,&quot;bucket&quot;:&quot;my_bucket&quot;,&quot;credentials&quot;:{&quot;access_key_id&quot;:&quot;my_access_key&quot;,&quot;secret_access_key&quot;:&quot;my_secret_key&quot;},&quot;path&quot;:&quot;/&quot;}}&#39;</span></span>
<span id="cb432-7"><a href="#cb432-7" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> ats access_key delete ak1ibmcloud</span>
<span id="cb432-8"><a href="#cb432-8" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> ats access_key list <span class="at">--fields</span><span class="op">=</span>name,id</span>
<span id="cb432-9"><a href="#cb432-9" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> ats access_key node ak1ibmcloud <span class="at">--secret</span><span class="op">=</span>my_secret_here browse /</span>
<span id="cb432-10"><a href="#cb432-10" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> ats cluster clouds</span>
<span id="cb432-11"><a href="#cb432-11" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> ats cluster list</span>
<span id="cb432-12"><a href="#cb432-12" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> ats cluster show <span class="at">--cloud</span><span class="op">=</span>aws <span class="at">--region</span><span class="op">=</span>eu-west-1</span>
<span id="cb432-13"><a href="#cb432-13" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> ats cluster show 1f412ae7-869a-445c-9c05-02ad16813be2</span>
<span id="cb432-14"><a href="#cb432-14" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> auth_providers list</span>
<span id="cb432-15"><a href="#cb432-15" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> client list</span>
<span id="cb432-16"><a href="#cb432-16" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> client_access_key list</span>
<span id="cb432-17"><a href="#cb432-17" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> client_registration_token create @json:<span class="st">&#39;{&quot;data&quot;:{&quot;name&quot;:&quot;test_client_reg1&quot;,&quot;client_subject_scopes&quot;:[&quot;alee&quot;,&quot;aejd&quot;],&quot;client_subject_enabled&quot;:true}}&#39;</span></span>
<span id="cb432-18"><a href="#cb432-18" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> client_registration_token delete client_reg_id</span>
<span id="cb432-19"><a href="#cb432-19" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> client_registration_token list</span>
<span id="cb432-20"><a href="#cb432-20" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> contact list</span>
<span id="cb432-21"><a href="#cb432-21" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> dropbox list</span>
<span id="cb432-22"><a href="#cb432-22" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> dropbox_membership list</span>
<span id="cb432-23"><a href="#cb432-23" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> group list</span>
<span id="cb432-24"><a href="#cb432-24" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> kms_profile list</span>
<span id="cb432-25"><a href="#cb432-25" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node do %name:my_node_name <span class="at">--secret</span><span class="op">=</span>my_ak_secret browse /</span>
<span id="cb432-26"><a href="#cb432-26" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node do %name:my_node_name <span class="at">--secret</span><span class="op">=</span>my_ak_secret browse /folder_sub <span class="at">--node-cache</span><span class="op">=</span>no</span>
<span id="cb432-27"><a href="#cb432-27" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node do %name:my_node_name <span class="at">--secret</span><span class="op">=</span>my_ak_secret delete /folder1</span>
<span id="cb432-28"><a href="#cb432-28" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node do %name:my_node_name <span class="at">--secret</span><span class="op">=</span>my_ak_secret delete /folder_sub</span>
<span id="cb432-29"><a href="#cb432-29" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node do %name:my_node_name <span class="at">--secret</span><span class="op">=</span>my_ak_secret mkdir /folder1</span>
<span id="cb432-30"><a href="#cb432-30" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node do %name:my_node_name <span class="at">--secret</span><span class="op">=</span>my_ak_secret mkdir /folder_sub</span>
<span id="cb432-31"><a href="#cb432-31" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node do %name:my_node_name <span class="at">--secret</span><span class="op">=</span>my_ak_secret v3 access_key create @json:<span class="st">&#39;{&quot;id&quot;:&quot;testsub1&quot;,&quot;storage&quot;:{&quot;path&quot;:&quot;/folder_sub&quot;}}&#39;</span></span>
<span id="cb432-32"><a href="#cb432-32" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node do %name:my_node_name <span class="at">--secret</span><span class="op">=</span>my_ak_secret v3 access_key delete testsub1</span>
<span id="cb432-33"><a href="#cb432-33" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node do %name:my_node_name <span class="at">--secret</span><span class="op">=</span>my_ak_secret v3 events</span>
<span id="cb432-34"><a href="#cb432-34" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node do %name:my_node_name delete test_shared_folder</span>
<span id="cb432-35"><a href="#cb432-35" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node do %name:my_node_name mkdir test_shared_folder</span>
<span id="cb432-36"><a href="#cb432-36" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node do %name:my_node_name perm test_shared_folder create @json:<span class="st">&#39;{&quot;with&quot;:&quot;&quot;,&quot;as&quot;:&quot;other_name_shared&quot;}&#39;</span> <span class="at">--workspace</span><span class="op">=</span>my_workspace_shared_inbox</span>
<span id="cb432-37"><a href="#cb432-37" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node do %name:my_node_name perm test_shared_folder create @json:<span class="st">&#39;{&quot;with&quot;:&quot;my_user_email&quot;,&quot;as&quot;:&quot;other_name_shared&quot;}&#39;</span> <span class="at">--workspace</span><span class="op">=</span>my_workspace_shared_inbox</span>
<span id="cb432-38"><a href="#cb432-38" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node do %name:my_node_name perm test_shared_folder create @json:<span class="st">&#39;{&quot;with&quot;:&quot;my_user_group&quot;,&quot;as&quot;:&quot;other_name_shared&quot;}&#39;</span> <span class="at">--workspace</span><span class="op">=</span>my_workspace_shared_inbox</span>
<span id="cb432-39"><a href="#cb432-39" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node list</span>
<span id="cb432-40"><a href="#cb432-40" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> operation list</span>
<span id="cb432-41"><a href="#cb432-41" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> organization show</span>
<span id="cb432-42"><a href="#cb432-42" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> package list <span class="at">--http-options</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;read_timeout&quot;:120.0}&#39;</span></span>
<span id="cb432-43"><a href="#cb432-43" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> saml_configuration list</span>
<span id="cb432-44"><a href="#cb432-44" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> self show</span>
<span id="cb432-45"><a href="#cb432-45" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> short_link list</span>
<span id="cb432-46"><a href="#cb432-46" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> subscription account</span>
<span id="cb432-47"><a href="#cb432-47" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> subscription usage</span>
<span id="cb432-48"><a href="#cb432-48" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> subscription usage MONTH</span>
<span id="cb432-49"><a href="#cb432-49" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> user list</span>
<span id="cb432-50"><a href="#cb432-50" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> user modify %name:my_user_email @json:<span class="st">&#39;{&quot;deactivated&quot;:false}&#39;</span></span>
<span id="cb432-51"><a href="#cb432-51" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> workspace list</span>
<span id="cb432-52"><a href="#cb432-52" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> workspace_membership list</span>
<span id="cb432-53"><a href="#cb432-53" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> workspace_membership list <span class="at">--fields</span><span class="op">=</span>ALL <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;page&quot;:1,&quot;per_page&quot;:50,&quot;embed&quot;:&quot;member&quot;,&quot;inherited&quot;:false,&quot;workspace_id&quot;:11363,&quot;sort&quot;:&quot;name&quot;}&#39;</span></span>
<span id="cb432-54"><a href="#cb432-54" aria-hidden="true" tabindex="-1"></a><span class="ex">automation</span> workflow action wf_id create @json:<span class="st">&#39;{&quot;name&quot;:&quot;toto&quot;}&#39;</span> <span class="dt">\</span></span>
<span id="cb432-55"><a href="#cb432-55" aria-hidden="true" tabindex="-1"></a>automation workflow create @json:<span class="st">&#39;{&quot;name&quot;:&quot;test_workflow&quot;}&#39;</span></span>
<span id="cb432-56"><a href="#cb432-56" aria-hidden="true" tabindex="-1"></a><span class="ex">automation</span> workflow delete wf_id</span>
<span id="cb432-57"><a href="#cb432-57" aria-hidden="true" tabindex="-1"></a><span class="ex">automation</span> workflow list</span>
<span id="cb432-58"><a href="#cb432-58" aria-hidden="true" tabindex="-1"></a><span class="ex">automation</span> workflow list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;show_org_workflows&quot;:&quot;true&quot;}&#39;</span> <span class="at">--scope</span><span class="op">=</span>admin:all</span>
<span id="cb432-59"><a href="#cb432-59" aria-hidden="true" tabindex="-1"></a><span class="ex">automation</span> workflow list <span class="at">--select</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;name&quot;:&quot;test_workflow&quot;}&#39;</span> <span class="at">--fields</span><span class="op">=</span>id <span class="at">--format</span><span class="op">=</span>csv <span class="at">--display</span><span class="op">=</span>data <span class="at">--output</span><span class="op">=</span>test</span>
<span id="cb432-60"><a href="#cb432-60" aria-hidden="true" tabindex="-1"></a><span class="ex">bearer_token</span> <span class="at">--display</span><span class="op">=</span>data <span class="at">--scope</span><span class="op">=</span>user:all</span>
<span id="cb432-61"><a href="#cb432-61" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> bearer /</span>
<span id="cb432-62"><a href="#cb432-62" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> bearer_token_node / <span class="at">--cache-tokens</span><span class="op">=</span>no</span>
<span id="cb432-63"><a href="#cb432-63" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> browse /</span>
<span id="cb432-64"><a href="#cb432-64" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> browse / <span class="at">--url</span><span class="op">=</span>my_private_link</span>
<span id="cb432-65"><a href="#cb432-65" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> browse / <span class="at">--url</span><span class="op">=</span>my_public_link_folder_no_pass</span>
<span id="cb432-66"><a href="#cb432-66" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> browse / <span class="at">--url</span><span class="op">=</span>my_public_link_folder_pass <span class="at">--password</span><span class="op">=</span>my_public_link_password</span>
<span id="cb432-67"><a href="#cb432-67" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> browse my_remote_file</span>
<span id="cb432-68"><a href="#cb432-68" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> browse my_remote_folder</span>
<span id="cb432-69"><a href="#cb432-69" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> browse my_remote_folder/</span>
<span id="cb432-70"><a href="#cb432-70" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> cat testdst/test_file.bin</span>
<span id="cb432-71"><a href="#cb432-71" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> delete /testsrc</span>
<span id="cb432-72"><a href="#cb432-72" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> down <span class="at">--to-folder</span><span class="op">=</span>. testdst/test_file.bin testdst/test_file.bin</span>
<span id="cb432-73"><a href="#cb432-73" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> download <span class="at">--transfer</span><span class="op">=</span>connect testdst/test_file.bin</span>
<span id="cb432-74"><a href="#cb432-74" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> download <span class="at">--transfer</span><span class="op">=</span>desktop testdst/test_file.bin</span>
<span id="cb432-75"><a href="#cb432-75" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> find /</span>
<span id="cb432-76"><a href="#cb432-76" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> find / <span class="st">&#39;\.partial$&#39;</span></span>
<span id="cb432-77"><a href="#cb432-77" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> find / @ruby:<span class="st">&#39;-&gt;(f){f[&quot;type&quot;].eql?(&quot;file&quot;)}&#39;</span></span>
<span id="cb432-78"><a href="#cb432-78" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> mkdir /testsrc</span>
<span id="cb432-79"><a href="#cb432-79" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> modify my_test_folder</span>
<span id="cb432-80"><a href="#cb432-80" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> permission my_test_folder list</span>
<span id="cb432-81"><a href="#cb432-81" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> rename /some_folder testdst</span>
<span id="cb432-82"><a href="#cb432-82" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> short_link /testdst private create</span>
<span id="cb432-83"><a href="#cb432-83" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> short_link /testdst private list</span>
<span id="cb432-84"><a href="#cb432-84" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> short_link /testdst public create</span>
<span id="cb432-85"><a href="#cb432-85" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> show %id:aoc_file_id</span>
<span id="cb432-86"><a href="#cb432-86" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> show /</span>
<span id="cb432-87"><a href="#cb432-87" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> show testdst/test_file.bin</span>
<span id="cb432-88"><a href="#cb432-88" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> sync admin status /data/local_sync</span>
<span id="cb432-89"><a href="#cb432-89" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> sync pull /testdst <span class="at">--to-folder</span><span class="op">=</span>/data/local_sync @json:<span class="st">&#39;{&quot;reset&quot;:true,&quot;transport&quot;:{&quot;target_rate&quot;:my_bps}}&#39;</span></span>
<span id="cb432-90"><a href="#cb432-90" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> thumbnail my_test_folder/video_file.mpg</span>
<span id="cb432-91"><a href="#cb432-91" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> thumbnail my_test_folder/video_file.mpg <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;text&quot;:true,&quot;double&quot;:true}&#39;</span></span>
<span id="cb432-92"><a href="#cb432-92" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> transfer push /testsrc <span class="at">--to-folder</span><span class="op">=</span>/testdst test_file.bin</span>
<span id="cb432-93"><a href="#cb432-93" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> upload <span class="at">--to-folder</span><span class="op">=</span>/ test_file.bin <span class="at">--url</span><span class="op">=</span>my_public_link_folder_no_pass</span>
<span id="cb432-94"><a href="#cb432-94" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> upload <span class="at">--to-folder</span><span class="op">=</span>/testsrc test_file.bin</span>
<span id="cb432-95"><a href="#cb432-95" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> upload <span class="at">--to-folder</span><span class="op">=</span>/testsrc test_file.bin test_file.bin</span>
<span id="cb432-96"><a href="#cb432-96" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> upload <span class="at">--workspace</span><span class="op">=</span>my_other_workspace <span class="at">--to-folder</span><span class="op">=</span>my_other_folder test_file.bin <span class="at">--transfer</span><span class="op">=</span>node <span class="at">--transfer-info</span><span class="op">=</span>@json:@stdin:</span>
<span id="cb432-97"><a href="#cb432-97" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> v3 info</span>
<span id="cb432-98"><a href="#cb432-98" aria-hidden="true" tabindex="-1"></a><span class="ex">gateway</span> <span class="at">--pid-file</span><span class="op">=</span>pid_aocfxgw @json:<span class="st">&#39;{&quot;url&quot;:&quot;https://localhost:12345/aspera/faspex&quot;}&#39;</span> <span class="kw">&amp;</span></span>
<span id="cb432-99"><a href="#cb432-99" aria-hidden="true" tabindex="-1"></a><span class="ex">organization</span></span>
<span id="cb432-100"><a href="#cb432-100" aria-hidden="true" tabindex="-1"></a><span class="ex">organization</span> <span class="at">--format</span><span class="op">=</span>image <span class="at">--fields</span><span class="op">=</span>background_image_url <span class="at">--ui</span><span class="op">=</span>text</span>
<span id="cb432-101"><a href="#cb432-101" aria-hidden="true" tabindex="-1"></a><span class="ex">organization</span> <span class="at">--url</span><span class="op">=</span>my_public_link_recv_from_aoc_user</span>
<span id="cb432-102"><a href="#cb432-102" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> browse package_id3 /</span>
<span id="cb432-103"><a href="#cb432-103" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> list</span>
<span id="cb432-104"><a href="#cb432-104" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;dropbox_name&quot;:&quot;my_shared_inbox_name&quot;,&quot;sort&quot;:&quot;-received_at&quot;,&quot;archived&quot;:false,&quot;received&quot;:true,&quot;has_content&quot;:true,&quot;exclude_dropbox_packages&quot;:false}&#39;</span></span>
<span id="cb432-105"><a href="#cb432-105" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> receive ALL <span class="at">--once-only</span><span class="op">=</span>yes <span class="at">--to-folder</span><span class="op">=</span>. <span class="at">--lock-port</span><span class="op">=</span>12345</span>
<span id="cb432-106"><a href="#cb432-106" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> receive ALL <span class="at">--once-only</span><span class="op">=</span>yes <span class="at">--to-folder</span><span class="op">=</span>. <span class="at">--lock-port</span><span class="op">=</span>12345 <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;dropbox_name&quot;:&quot;my_shared_inbox_name&quot;,&quot;archived&quot;:false,&quot;received&quot;:true,&quot;has_content&quot;:true,&quot;exclude_dropbox_packages&quot;:false,&quot;include_draft&quot;:false}&#39;</span> <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;resume_policy&quot;:&quot;sparse_csum&quot;,&quot;target_rate_kbps&quot;:50000}&#39;</span></span>
<span id="cb432-107"><a href="#cb432-107" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> receive INIT <span class="at">--once-only</span><span class="op">=</span>yes <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;dropbox_name&quot;:&quot;my_shared_inbox_name&quot;}&#39;</span></span>
<span id="cb432-108"><a href="#cb432-108" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> receive package_id3 <span class="at">--to-folder</span><span class="op">=</span>.</span>
<span id="cb432-109"><a href="#cb432-109" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> receive package_id3 <span class="at">--to-folder</span><span class="op">=</span>. / <span class="at">--package-folder</span><span class="op">=</span>name</span>
<span id="cb432-110"><a href="#cb432-110" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> send <span class="at">--workspace</span><span class="op">=</span>my_workspace_shared_inbox <span class="at">--validate-metadata</span><span class="op">=</span>yes @json:<span class="st">&#39;{&quot;name&quot;:&quot;$(notdir test) PACKAGE_TITLE_BASE&quot;,&quot;recipients&quot;:[&quot;my_shared_inbox_meta&quot;],&quot;metadata&quot;:[{&quot;input_type&quot;:&quot;single-text&quot;,&quot;name&quot;:&quot;Project Id&quot;,&quot;values&quot;:[&quot;123&quot;]},{&quot;input_type&quot;:&quot;single-dropdown&quot;,&quot;name&quot;:&quot;Type&quot;,&quot;values&quot;:[&quot;Opt2&quot;]},{&quot;input_type&quot;:&quot;multiple-checkbox&quot;,&quot;name&quot;:&quot;CheckThose&quot;,&quot;values&quot;:[&quot;Check1&quot;,&quot;Check2&quot;]},{&quot;input_type&quot;:&quot;date&quot;,&quot;name&quot;:&quot;Optional Date&quot;,&quot;values&quot;:[&quot;2021-01-13T15:02:00.000Z&quot;]}]}&#39;</span> test_file.bin</span>
<span id="cb432-111"><a href="#cb432-111" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> send <span class="at">--workspace</span><span class="op">=</span>my_workspace_shared_inbox <span class="at">--validate-metadata</span><span class="op">=</span>yes @json:<span class="st">&#39;{&quot;name&quot;:&quot;$(notdir test) PACKAGE_TITLE_BASE&quot;,&quot;recipients&quot;:[&quot;my_shared_inbox_meta&quot;],&quot;metadata&quot;:{&quot;Project Id&quot;:&quot;456&quot;,&quot;Type&quot;:&quot;Opt2&quot;,&quot;CheckThose&quot;:[&quot;Check1&quot;,&quot;Check2&quot;],&quot;Optional Date&quot;:&quot;2021-01-13T15:02:00.000Z&quot;}}&#39;</span> test_file.bin</span>
<span id="cb432-112"><a href="#cb432-112" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> send <span class="at">--workspace</span><span class="op">=</span>my_workspace_shared_inbox <span class="at">--validate-metadata</span><span class="op">=</span>yes @json:<span class="st">&#39;{&quot;name&quot;:&quot;$(notdir test) PACKAGE_TITLE_BASE&quot;,&quot;recipients&quot;:[&quot;my_shared_inbox_meta&quot;],&quot;metadata&quot;:{&quot;Type&quot;:&quot;Opt2&quot;,&quot;CheckThose&quot;:[&quot;Check1&quot;,&quot;Check2&quot;],&quot;Optional Date&quot;:&quot;2021-01-13T15:02:00.000Z&quot;}}&#39;</span> test_file.bin</span>
<span id="cb432-113"><a href="#cb432-113" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> send <span class="at">--workspace</span><span class="op">=</span>my_workspace_shared_inbox @json:<span class="st">&#39;{&quot;name&quot;:&quot;$(notdir test) PACKAGE_TITLE_BASE&quot;,&quot;recipients&quot;:[&quot;my_shared_inbox_name&quot;]}&#39;</span> test_file.bin</span>
<span id="cb432-114"><a href="#cb432-114" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> send @json:<span class="st">&#39;{&quot;name&quot;:&quot;$(notdir test) PACKAGE_TITLE_BASE&quot;,&quot;recipients&quot;:[&quot;my_email_external&quot;]}&#39;</span> <span class="at">--new-user-option</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;package_contact&quot;:true}&#39;</span> test_file.bin</span>
<span id="cb432-115"><a href="#cb432-115" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> send @json:<span class="st">&#39;{&quot;name&quot;:&quot;$(notdir test) PACKAGE_TITLE_BASE&quot;,&quot;recipients&quot;:[&quot;my_email_internal&quot;],&quot;note&quot;:&quot;my note&quot;}&#39;</span> test_file.bin</span>
<span id="cb432-116"><a href="#cb432-116" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> send @json:<span class="st">&#39;{&quot;name&quot;:&quot;$(notdir test) PACKAGE_TITLE_BASE&quot;}&#39;</span> test_file.bin <span class="at">--url</span><span class="op">=</span>my_public_link_send_aoc_user <span class="at">--password</span><span class="op">=</span>my_public_link_send_use_pass</span>
<span id="cb432-117"><a href="#cb432-117" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> send @json:<span class="st">&#39;{&quot;name&quot;:&quot;$(notdir test) PACKAGE_TITLE_BASE&quot;}&#39;</span> test_file.bin <span class="at">--url</span><span class="op">=</span>my_public_link_send_shared_inbox</span>
<span id="cb432-118"><a href="#cb432-118" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> shared_inboxes list</span>
<span id="cb432-119"><a href="#cb432-119" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> shared_inboxes show %name:my_shared_inbox_name</span>
<span id="cb432-120"><a href="#cb432-120" aria-hidden="true" tabindex="-1"></a><span class="ex">remind</span> <span class="at">--username</span><span class="op">=</span>my_user_email</span>
<span id="cb432-121"><a href="#cb432-121" aria-hidden="true" tabindex="-1"></a><span class="ex">servers</span></span>
<span id="cb432-122"><a href="#cb432-122" aria-hidden="true" tabindex="-1"></a><span class="ex">tier_restrictions</span></span>
<span id="cb432-123"><a href="#cb432-123" aria-hidden="true" tabindex="-1"></a><span class="ex">user</span> contacts list</span>
<span id="cb432-124"><a href="#cb432-124" aria-hidden="true" tabindex="-1"></a><span class="ex">user</span> pref modify @json:<span class="st">&#39;{&quot;default_language&quot;:&quot;en-us&quot;}&#39;</span></span>
<span id="cb432-125"><a href="#cb432-125" aria-hidden="true" tabindex="-1"></a><span class="ex">user</span> pref show</span>
<span id="cb432-126"><a href="#cb432-126" aria-hidden="true" tabindex="-1"></a><span class="ex">user</span> profile modify @json:<span class="st">&#39;{&quot;name&quot;:&quot;dummy change&quot;}&#39;</span></span>
<span id="cb432-127"><a href="#cb432-127" aria-hidden="true" tabindex="-1"></a><span class="ex">user</span> profile show</span>
<span id="cb432-128"><a href="#cb432-128" aria-hidden="true" tabindex="-1"></a><span class="ex">user</span> workspaces current</span>
<span id="cb432-129"><a href="#cb432-129" aria-hidden="true" tabindex="-1"></a><span class="ex">user</span> workspaces list</span></code></pre></div>
<h1 data-number="6" id="plugin-ats-ibm-aspera-transfer-service"><span class="header-section-number">6</span> Plugin: <code>ats</code>: IBM
Aspera Transfer Service</h1>
<p>ATS is usable either :</p>
<ul>
<li><p>From an AoC subscription : <code>ascli aoc admin ats</code> : use
AoC authentication</p></li>
<li><p>Or from an IBM Cloud subscription : <code>ascli ats</code> : use
IBM Cloud API key authentication</p></li>
</ul>
<h2 data-number="6.1" id="ibm-cloud-ats--creation-of-api-key"><span class="header-section-number">6.1</span> IBM Cloud ATS : Creation of API
key</h2>
<p>This section is about using ATS with an IBM cloud subscription. If
you are using ATS as part of AoC, then authentication is through AoC,
not IBM Cloud.</p>
<p>First get your IBM Cloud API key. For instance, it can be created
using the IBM Cloud web interface, or using command line:</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb433-1"><a href="#cb433-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ibmcloud</span> iam api-key-create mykeyname <span class="at">-d</span> <span class="st">&#39;my sample key&#39;</span></span></code></pre></div>
<pre class="text"><code>OK
API key mykeyname was created

Please preserve the API key! It cannot be retrieved after it&#39;s created.

Name          mykeyname
Description   my sample key
Created At    2019-09-30T12:17+0000
API Key       my_secret_api_key_here
Locked        false
UUID          ApiKey-05b8fadf-e7fe-abcd-93a9-6fd348c5ab1f</code></pre>
<p>References:</p>
<!-- spellchecker: disable -->

<ul>
<li><a href="https://cloud.ibm.com/docs/account?topic=account-userapikey&amp;interface=cli">IBM
Cloud Managing user API keys</a></li>
<li><a href="https://ibmaspera.com/help/cloud_platforms_and_regions_supported">IBM
Aspera on Cloud regions</a></li>
</ul>
<!-- spellchecker: enable -->

<p>Then, to register the key by default for the <code>ats</code> plugin,
create a preset. Execute:</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb435-1"><a href="#cb435-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset update my_ibm_ats <span class="at">--ibm-api-key</span><span class="op">=</span>my_secret_api_key_here</span></code></pre></div>
<div class="sourceCode" id="cb436"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb436-1"><a href="#cb436-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set default ats my_ibm_ats</span></code></pre></div>
<div class="sourceCode" id="cb437"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb437-1"><a href="#cb437-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> ats api_key instances</span></code></pre></div>
<pre class="text"><code>+--------------------------------------+
| instance                             |
+--------------------------------------+
| aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee |
+--------------------------------------+</code></pre>
<div class="sourceCode" id="cb439"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb439-1"><a href="#cb439-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset update my_ibm_ats <span class="at">--instance</span><span class="op">=</span>aaaaaaaa-bbbb-cccc-dddd-eeeeeeeeeeee</span></code></pre></div>
<div class="sourceCode" id="cb440"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb440-1"><a href="#cb440-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> ats api_key create</span></code></pre></div>
<pre class="text"><code>+--------+----------------------------------------------+
| field  | value                                        |
+--------+----------------------------------------------+
| id     | ats_XXXXXXXXXXXXXXXXXXXXXXXX                 |
| secret | YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY |
+--------+----------------------------------------------+
ascli config preset update my_ibm_ats --ats-key=ats_XXXXXXXXXXXXXXXXXXXXXXXX --ats-secret=YYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYYY</code></pre>
<h2 data-number="6.2" id="ats-access-key-creation-parameters"><span class="header-section-number">6.2</span> ATS Access key creation
parameters</h2>
<p>When creating an ATS access key, the option <code>params</code> must
contain an extended value with the creation parameters. Those are
directly the parameters expected by the <a href="https://developer.ibm.com/apis/catalog?search=%22Aspera%20ATS%20API%22">ATS
API</a>.</p>
<h2 data-number="6.3" id="misc-examples"><span class="header-section-number">6.3</span> Misc. Examples</h2>
<p>Example: create access key on IBM Cloud (Softlayer):</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb442-1"><a href="#cb442-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> ats access_key create <span class="at">--cloud</span><span class="op">=</span>softlayer <span class="at">--region</span><span class="op">=</span>ams <span class="at">--params</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;storage&quot;:{&quot;type&quot;:&quot;softlayer_swift&quot;,&quot;container&quot;:&quot;_container_name_&quot;,&quot;credentials&quot;:{&quot;api_key&quot;:&quot;my_secret_here&quot;,&quot;username&quot;:&quot;_name_:_usr_name_&quot;},&quot;path&quot;:&quot;/&quot;},&quot;id&quot;:&quot;_optional_id_&quot;,&quot;name&quot;:&quot;_optional_name_&quot;}&#39;</span></span></code></pre></div>
<p>Example: create access key on AWS:</p>
<div class="sourceCode" id="cb443"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb443-1"><a href="#cb443-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> ats access_key create <span class="at">--cloud</span><span class="op">=</span>aws <span class="at">--region</span><span class="op">=</span>eu-west-1 <span class="at">--params</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;id&quot;:&quot;myaccesskey&quot;,&quot;name&quot;:&quot;laurent key AWS&quot;,&quot;storage&quot;:{&quot;type&quot;:&quot;aws_s3&quot;,&quot;bucket&quot;:&quot;my-bucket&quot;,&quot;credentials&quot;:{&quot;access_key_id&quot;:&quot;_access_key_id_here_&quot;,&quot;secret_access_key&quot;:&quot;my_secret_here&quot;},&quot;path&quot;:&quot;/laurent&quot;}}&#39;</span></span></code></pre></div>
<p>Example: create access key on Azure SAS:</p>
<div class="sourceCode" id="cb444"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb444-1"><a href="#cb444-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> ats access_key create <span class="at">--cloud</span><span class="op">=</span>azure <span class="at">--region</span><span class="op">=</span>eastus <span class="at">--params</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;id&quot;:&quot;myaccesskey&quot;,&quot;name&quot;:&quot;laurent key azure&quot;,&quot;storage&quot;:{&quot;type&quot;:&quot;azure_sas&quot;,&quot;credentials&quot;:{&quot;shared_access_signature&quot;:&quot;https://containername.blob.core.windows.net/blobname?sr=c&amp;...&quot;},&quot;path&quot;:&quot;/&quot;}}&#39;</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The blob name is mandatory after server address and before
parameters, and that parameter <code>sr=c</code> is mandatory.</p></div>
</div>
<p>Example: create access key on Azure:</p>
<div class="sourceCode" id="cb445"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb445-1"><a href="#cb445-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> ats access_key create <span class="at">--cloud</span><span class="op">=</span>azure <span class="at">--region</span><span class="op">=</span>eastus <span class="at">--params</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;id&quot;:&quot;myaccesskey&quot;,&quot;name&quot;:&quot;laurent key azure&quot;,&quot;storage&quot;:{&quot;type&quot;:&quot;azure&quot;,&quot;credentials&quot;:{&quot;account&quot;:&quot;myaccount&quot;,&quot;key&quot;:&quot;myaccesskey&quot;,&quot;storage_endpoint&quot;:&quot;myblob&quot;},&quot;path&quot;:&quot;/&quot;}}&#39;</span></span></code></pre></div>
<p>delete all my access keys:</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb446-1"><a href="#cb446-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> ats access_key list <span class="at">--field</span><span class="op">=</span>id <span class="at">--format</span><span class="op">=</span>csv <span class="kw">|</span> <span class="ex">ascli</span> ats access_key delete @lines:@stdin: <span class="at">--bulk</span><span class="op">=</span>yes</span></code></pre></div>
<p>The parameters provided to ATS for access key creation are the ones
of <a href="https://developer.ibm.com/apis/catalog?search=%22aspera%20ats%22">ATS
API</a> for the <code>POST /access_keys</code> endpoint.</p>
<h2 data-number="6.4" id="tested-commands-for-ats"><span class="header-section-number">6.4</span> Tested commands for
<code>ats</code></h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Add <code>ascli ats</code> in front of the following commands:</p></div>
</div>
<div class="sourceCode" id="cb447"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb447-1"><a href="#cb447-1" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> cluster ak2ibmcloud <span class="at">--secret</span><span class="op">=</span>my_secret_here</span>
<span id="cb447-2"><a href="#cb447-2" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> create <span class="at">--cloud</span><span class="op">=</span>aws <span class="at">--region</span><span class="op">=</span>my_region <span class="at">--params</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;id&quot;:&quot;ak_aws&quot;,&quot;name&quot;:&quot;my test key AWS&quot;,&quot;storage&quot;:{&quot;type&quot;:&quot;aws_s3&quot;,&quot;bucket&quot;:&quot;my_bucket&quot;,&quot;credentials&quot;:{&quot;access_key_id&quot;:&quot;my_access_key&quot;,&quot;secret_access_key&quot;:&quot;my_secret_key&quot;},&quot;path&quot;:&quot;/&quot;}}&#39;</span></span>
<span id="cb447-3"><a href="#cb447-3" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> create <span class="at">--cloud</span><span class="op">=</span>softlayer <span class="at">--region</span><span class="op">=</span>my_region <span class="at">--params</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;id&quot;:&quot;ak2ibmcloud&quot;,&quot;secret&quot;:&quot;my_secret_here&quot;,&quot;name&quot;:&quot;my test key&quot;,&quot;storage&quot;:{&quot;type&quot;:&quot;ibm-s3&quot;,&quot;bucket&quot;:&quot;my_bucket&quot;,&quot;credentials&quot;:{&quot;access_key_id&quot;:&quot;my_access_key&quot;,&quot;secret_access_key&quot;:&quot;my_secret_key&quot;},&quot;path&quot;:&quot;/&quot;}}&#39;</span></span>
<span id="cb447-4"><a href="#cb447-4" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> delete ak2ibmcloud</span>
<span id="cb447-5"><a href="#cb447-5" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> delete ak_aws</span>
<span id="cb447-6"><a href="#cb447-6" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> entitlement ak2ibmcloud</span>
<span id="cb447-7"><a href="#cb447-7" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> list <span class="at">--fields</span><span class="op">=</span>name,id</span>
<span id="cb447-8"><a href="#cb447-8" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> node ak2ibmcloud browse / <span class="at">--secret</span><span class="op">=</span>my_secret_here</span>
<span id="cb447-9"><a href="#cb447-9" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> show ak2ibmcloud</span>
<span id="cb447-10"><a href="#cb447-10" aria-hidden="true" tabindex="-1"></a><span class="ex">api_key</span> create</span>
<span id="cb447-11"><a href="#cb447-11" aria-hidden="true" tabindex="-1"></a><span class="ex">api_key</span> instances</span>
<span id="cb447-12"><a href="#cb447-12" aria-hidden="true" tabindex="-1"></a><span class="ex">api_key</span> list</span>
<span id="cb447-13"><a href="#cb447-13" aria-hidden="true" tabindex="-1"></a><span class="ex">cluster</span> clouds</span>
<span id="cb447-14"><a href="#cb447-14" aria-hidden="true" tabindex="-1"></a><span class="ex">cluster</span> list</span>
<span id="cb447-15"><a href="#cb447-15" aria-hidden="true" tabindex="-1"></a><span class="ex">cluster</span> show <span class="at">--cloud</span><span class="op">=</span>aws <span class="at">--region</span><span class="op">=</span>eu-west-1</span>
<span id="cb447-16"><a href="#cb447-16" aria-hidden="true" tabindex="-1"></a><span class="ex">cluster</span> show 1f412ae7-869a-445c-9c05-02ad16813be2</span></code></pre></div>
<h1 data-number="7" id="plugin-server-ibm-aspera-high-speed-transfer-server-ssh"><span class="header-section-number">7</span> Plugin: <code>server</code>: IBM
Aspera High Speed Transfer Server (SSH)</h1>
<p>The <code>server</code> plugin is used for operations on Aspera HSTS
using SSH authentication. It is the original way of accessing an Aspera
Server, often used for server to server transfers. An SSH session is
established, authenticated with either a password or an SSH private key,
then commands <code>ascp</code> (for transfers) and <code>ascmd</code>
(for file operations) are executed.</p>
<p>The URL to be provided with option <code>url</code> shall be like
<code>ssh://_server_address_:33001</code>, then option
<code>username</code> is used to specify the transfer user, and finally
either option <code>password</code> or <code>ssh_keys</code> (with one
or several paths) for the authentication.</p>
<p>Typically:</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb448-1"><a href="#cb448-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server <span class="at">--url</span><span class="op">=</span>ssh://hsts.example.com:33001 <span class="at">--username</span><span class="op">=</span>john <span class="at">--password</span><span class="op">=</span>_something_here_ ...</span></code></pre></div>
<div class="sourceCode" id="cb449"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb449-1"><a href="#cb449-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server <span class="at">--url</span><span class="op">=</span>ssh://hsts.example.com:33001 <span class="at">--username</span><span class="op">=</span>john <span class="at">--ssh-keys</span><span class="op">=</span>~/.ssh/id_rsa ...</span></code></pre></div>
<h2 data-number="7.1" id="tested-commands-for-server"><span class="header-section-number">7.1</span> Tested commands for
<code>server</code></h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Add <code>ascli server</code> in front of the following commands:</p></div>
</div>
<div class="sourceCode" id="cb450"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb450-1"><a href="#cb450-1" aria-hidden="true" tabindex="-1"></a><span class="ex">browse</span> /</span>
<span id="cb450-2"><a href="#cb450-2" aria-hidden="true" tabindex="-1"></a><span class="ex">browse</span> / <span class="at">--password</span><span class="op">=</span>@none: <span class="at">--ssh-options</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;number_of_password_prompts&quot;:0}&#39;</span> <span class="at">--ssh-keys</span><span class="op">=</span><span class="va">$aspera_key_path</span></span>
<span id="cb450-3"><a href="#cb450-3" aria-hidden="true" tabindex="-1"></a><span class="ex">browse</span> my_inside_folder/test_file.bin</span>
<span id="cb450-4"><a href="#cb450-4" aria-hidden="true" tabindex="-1"></a><span class="ex">browse</span> my_upload_folder/target_hot</span>
<span id="cb450-5"><a href="#cb450-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cp</span> my_inside_folder/test_file.bin my_upload_folder/200KB.2</span>
<span id="cb450-6"><a href="#cb450-6" aria-hidden="true" tabindex="-1"></a><span class="ex">delete</span> my_inside_folder</span>
<span id="cb450-7"><a href="#cb450-7" aria-hidden="true" tabindex="-1"></a><span class="ex">delete</span> my_upload_folder/to.delete</span>
<span id="cb450-8"><a href="#cb450-8" aria-hidden="true" tabindex="-1"></a><span class="fu">df</span></span>
<span id="cb450-9"><a href="#cb450-9" aria-hidden="true" tabindex="-1"></a><span class="ex">download</span> my_inside_folder/test_file.bin <span class="at">--to-folder</span><span class="op">=</span>. <span class="at">--transfer-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;wss&quot;:false,&quot;resume&quot;:{&quot;iter_max&quot;:1}}&#39;</span></span>
<span id="cb450-10"><a href="#cb450-10" aria-hidden="true" tabindex="-1"></a><span class="ex">download</span> my_large_file <span class="at">--to-folder</span><span class="op">=</span>my_upload_folder <span class="at">--transfer</span><span class="op">=</span>node <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;resume_policy&quot;:&quot;none&quot;}&#39;</span></span>
<span id="cb450-11"><a href="#cb450-11" aria-hidden="true" tabindex="-1"></a><span class="fu">du</span> /</span>
<span id="cb450-12"><a href="#cb450-12" aria-hidden="true" tabindex="-1"></a><span class="ex">health</span> transfer <span class="at">--to-folder</span><span class="op">=</span>my_upload_folder <span class="at">--format</span><span class="op">=</span>nagios</span>
<span id="cb450-13"><a href="#cb450-13" aria-hidden="true" tabindex="-1"></a><span class="ex">info</span></span>
<span id="cb450-14"><a href="#cb450-14" aria-hidden="true" tabindex="-1"></a><span class="fu">md5sum</span> my_inside_folder/test_file.bin</span>
<span id="cb450-15"><a href="#cb450-15" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> my_inside_folder <span class="at">--logger</span><span class="op">=</span>stdout</span>
<span id="cb450-16"><a href="#cb450-16" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> my_upload_folder/target_hot</span>
<span id="cb450-17"><a href="#cb450-17" aria-hidden="true" tabindex="-1"></a><span class="fu">mv</span> my_upload_folder/200KB.2 my_upload_folder/to.delete</span>
<span id="cb450-18"><a href="#cb450-18" aria-hidden="true" tabindex="-1"></a><span class="fu">sync</span> admin status /data/local_sync</span>
<span id="cb450-19"><a href="#cb450-19" aria-hidden="true" tabindex="-1"></a><span class="fu">sync</span> pull my_inside_folder <span class="at">--to-folder</span><span class="op">=</span>/data/local_sync @json:<span class="st">&#39;{&quot;name&quot;:&quot;serv_sync_pull_conf&quot;}&#39;</span></span>
<span id="cb450-20"><a href="#cb450-20" aria-hidden="true" tabindex="-1"></a><span class="ex">upload</span> <span class="st">&#39;faux:///test1?100m&#39;</span> <span class="st">&#39;faux:///test2?100m&#39;</span> <span class="at">--to-folder</span><span class="op">=</span>/Upload <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;target_rate_kbps&quot;:1000000,&quot;resume_policy&quot;:&quot;none&quot;,&quot;precalculate_job_size&quot;:true}&#39;</span></span>
<span id="cb450-21"><a href="#cb450-21" aria-hidden="true" tabindex="-1"></a><span class="ex">upload</span> <span class="st">&#39;faux:///test1?100m&#39;</span> <span class="st">&#39;faux:///test2?100m&#39;</span> <span class="at">--to-folder</span><span class="op">=</span>/Upload <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;target_rate_kbps&quot;:1000000,&quot;resume_policy&quot;:&quot;none&quot;,&quot;precalculate_job_size&quot;:true}&#39;</span> <span class="at">--transfer-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;quiet&quot;:false}&#39;</span> <span class="at">--progress</span><span class="op">=</span>no</span>
<span id="cb450-22"><a href="#cb450-22" aria-hidden="true" tabindex="-1"></a><span class="ex">upload</span> <span class="st">&#39;test_file.bin&#39;</span> <span class="at">--to-folder</span><span class="op">=</span>my_inside_folder <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;multi_session&quot;:3,&quot;multi_session_threshold&quot;:1,&quot;resume_policy&quot;:&quot;none&quot;,&quot;target_rate_kbps&quot;:100000}&#39;</span> <span class="at">--transfer-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;spawn_delay_sec&quot;:2.5,&quot;multi_incr_udp&quot;:false}&#39;</span> <span class="at">--progress-bar</span><span class="op">=</span>yes</span>
<span id="cb450-23"><a href="#cb450-23" aria-hidden="true" tabindex="-1"></a><span class="ex">upload</span> <span class="at">--sources</span><span class="op">=</span>@ts <span class="at">--transfer-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;ascp_args&quot;:[&quot;--file-list&quot;,&quot;filelist.txt&quot;]}&#39;</span> <span class="at">--to-folder</span><span class="op">=</span>my_inside_folder</span>
<span id="cb450-24"><a href="#cb450-24" aria-hidden="true" tabindex="-1"></a><span class="ex">upload</span> <span class="at">--sources</span><span class="op">=</span>@ts <span class="at">--transfer-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;ascp_args&quot;:[&quot;--file-pair-list&quot;,&quot;file_pair_list.txt&quot;]}&#39;</span></span>
<span id="cb450-25"><a href="#cb450-25" aria-hidden="true" tabindex="-1"></a><span class="ex">upload</span> <span class="at">--sources</span><span class="op">=</span>@ts <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;paths&quot;:[{&quot;source&quot;:&quot;test_file.bin&quot;,&quot;destination&quot;:&quot;my_inside_folder/other_name_4&quot;}]}&#39;</span> <span class="at">--transfer</span><span class="op">=</span>transferd</span>
<span id="cb450-26"><a href="#cb450-26" aria-hidden="true" tabindex="-1"></a><span class="ex">upload</span> <span class="at">--src-type</span><span class="op">=</span>pair <span class="st">&#39;test_file.bin&#39;</span> my_inside_folder/other_name_2 <span class="at">--notify-to</span><span class="op">=</span>my_email_external <span class="at">--transfer-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;ascp_args&quot;:[&quot;-l&quot;,&quot;100m&quot;]}&#39;</span></span>
<span id="cb450-27"><a href="#cb450-27" aria-hidden="true" tabindex="-1"></a><span class="ex">upload</span> <span class="at">--src-type</span><span class="op">=</span>pair <span class="at">--sources</span><span class="op">=</span>@json:<span class="st">&#39;[&quot;test_file.bin&quot;,&quot;my_inside_folder/other_name_3&quot;]&#39;</span> <span class="at">--transfer-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;quiet&quot;:false}&#39;</span> <span class="at">--progress</span><span class="op">=</span>no</span>
<span id="cb450-28"><a href="#cb450-28" aria-hidden="true" tabindex="-1"></a><span class="ex">upload</span> <span class="at">--src-type</span><span class="op">=</span>pair test_file.bin my_upload_folder/other_name_5 <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;cipher&quot;:&quot;aes-192-gcm&quot;,&quot;content_protection&quot;:&quot;encrypt&quot;,&quot;content_protection_password&quot;:&quot;my_secret_here&quot;,&quot;cookie&quot;:&quot;biscuit&quot;,&quot;create_dir&quot;:true,&quot;delete_before_transfer&quot;:false,&quot;delete_source&quot;:false,&quot;exclude_newer_than&quot;:&quot;-1&quot;,&quot;exclude_older_than&quot;:&quot;-10000&quot;,&quot;fasp_port&quot;:33001,&quot;http_fallback&quot;:false,&quot;multi_session&quot;:0,&quot;overwrite&quot;:&quot;diff+older&quot;,&quot;precalculate_job_size&quot;:true,&quot;preserve_access_time&quot;:true,&quot;preserve_creation_time&quot;:true,&quot;rate_policy&quot;:&quot;fair&quot;,&quot;resume_policy&quot;:&quot;sparse_csum&quot;,&quot;symlink_policy&quot;:&quot;follow&quot;}&#39;</span></span>
<span id="cb450-29"><a href="#cb450-29" aria-hidden="true" tabindex="-1"></a><span class="ex">upload</span> <span class="at">--to-folder</span><span class="op">=</span>my_upload_folder/target_hot <span class="at">--lock-port</span><span class="op">=</span>12345 <span class="at">--transfer-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;ascp_args&quot;:[&quot;--remove-after-transfer&quot;,&quot;--remove-empty-directories&quot;,&quot;--exclude-newer-than=-8&quot;,&quot;--src-base&quot;,&quot;source_hot&quot;]}&#39;</span> source_hot</span></code></pre></div>
<h2 data-number="7.2" id="authentication-on-server-with-ssh-session"><span class="header-section-number">7.2</span> Authentication on Server with
SSH session</h2>
<p>If SSH is the session protocol (by default i.e. not WSS), then
following session authentication methods are supported:</p>
<ul>
<li><code>password</code>: SSH password</li>
<li><code>ssh_keys</code>: SSH keys (Multiple SSH key paths can be
provided.)</li>
</ul>
<p>If <code>username</code> is not provided then the default transfer
user <code>xfer</code> is used.</p>
<p>If neither SSH password nor key is provided and a transfer token is
provided in transfer spec (option <code>ts</code>), then standard SSH
bypass key(s) is used.</p>
<p>Example:</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb451-1"><a href="#cb451-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server <span class="at">--url</span><span class="op">=</span>ssh://_server_address_:33001 ... <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;token&quot;:&quot;Basic _token_here_&quot;}&#39;</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>If you need to use the Aspera public keys, then specify an empty
token: <code>--ts=@json:&#39;{&quot;token&quot;:&quot;&quot;}&#39;</code> : Aspera public SSH keys
will be used, but the protocol will ignore the empty token.</p></div>
</div>
<p>The value of the <code>ssh_keys</code> option can be a single value
or an <code>Array</code>. Each value is a <strong>path</strong> to a
private key and is expanded (<code>~</code> is replaced with the user&#39;s
home folder).</p>
<p>Examples:</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb452-1"><a href="#cb452-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server <span class="at">--ssh-keys</span><span class="op">=</span>~/.ssh/id_rsa</span>
<span id="cb452-2"><a href="#cb452-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server <span class="at">--ssh-keys</span><span class="op">=</span>@list:,~/.ssh/id_rsa</span>
<span id="cb452-3"><a href="#cb452-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server <span class="at">--ssh-keys</span><span class="op">=</span>@json:<span class="st">&#39;[&quot;~/.ssh/id_rsa&quot;]&#39;</span></span></code></pre></div>
<p>For file operation command (browse, delete), the Ruby SSH client
library <code>Net::SSH</code> is used and provides several options
settable using option <code>ssh_options</code> (additive option like
<code>ts</code>).</p>
<p>For a list of SSH client options, refer to the Ruby documentation of
<a href="http://net-ssh.github.io/net-ssh/Net/SSH.html#method-c-start">Net::SSH</a>.</p>
<p>Among the 50 available SSH options:</p>
<ul>
<li><code>verbose</code></li>
<li><code>use_agent</code></li>
<li><code>passphrase</code></li>
</ul>
<p>By default, the SSH library will check if a local
<code>ssh-agent</code> is running.</p>
<p>On Linux, if you get an error message such as:</p>
<div class="sourceCode" id="cb453"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb453-1"><a href="#cb453-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ERROR</span> <span class="at">--</span> net.ssh.authentication.agent: could not connect to ssh-agent: Agent not configured</span></code></pre></div>
<p>or on Windows:</p>
<div class="sourceCode" id="cb454"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb454-1"><a href="#cb454-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ERROR</span> <span class="at">--</span> net.ssh.authentication.agent: could not connect to ssh-agent: pageant process not running</span></code></pre></div>
<p>This means that your environment suggests using an agent, but you
don&#39;t have such an SSH agent running, then:</p>
<ul>
<li>Check env var: <code>SSH_AGENT_SOCK</code></li>
<li>Check your file: <code>$HOME/.ssh/config</code></li>
<li>Check if the SSH key is protected with a passphrase (then, use the
<code>passphrase</code> SSH option)</li>
<li><a href="https://github.com/net-ssh/net-ssh/blob/master/lib/net/ssh.rb">Check
the Ruby SSH options in start method</a></li>
<li>To disable the use of <code>ssh-agent</code>, use the option
<code>ssh_options</code> like this:</li>
</ul>
<div class="sourceCode" id="cb455"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb455-1"><a href="#cb455-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server <span class="at">--ssh-options</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;use_agent&quot;: false}&#39;</span> ...</span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>This can also be set using a preset.</p></div>
</div>
<p>If one of the SSH private keys is passphrase-protected, then option
<code>passphrase</code> can be used. It is equivalent to setting both
options <code>ssh_options.passphrase</code> and
<code>ts.ssh_private_key_passphrase</code>.</p>
<h2 data-number="7.3" id="other-session-channels-for-server"><span class="header-section-number">7.3</span> Other session channels for
<code>server</code></h2>
<p>URL schemes <code>local</code> and <code>https</code> are also
supported (mainly for testing purpose). (<code>--url=local:</code>,
<code>--url=https://...</code>)</p>
<ul>
<li><code>local</code> will execute <code>ascmd</code> locally, instead
of using an SSH connection.</li>
<li><code>https</code> will use Web Socket Session: This requires the
use of a transfer token. For example a <code>Basic</code> token can be
used.</li>
</ul>
<p>As, most of the time, SSH is used, if a <code>http</code> scheme is
provided without token, the plugin will fallback to SSH and port
33001.</p>
<h2 data-number="7.4" id="examples-server"><span class="header-section-number">7.4</span> Examples:
<code>server</code></h2>
<p>One can test the <code>server</code> application using the well known
demo server:</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb456-1"><a href="#cb456-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config initdemo</span>
<span id="cb456-2"><a href="#cb456-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server browse /aspera-test-dir-large</span>
<span id="cb456-3"><a href="#cb456-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server download /aspera-test-dir-large/200MB</span></code></pre></div>
<p><code>initdemo</code> creates an <a href="#option-preset">Option
Preset</a> <code>demoserver</code> and set it as default for plugin
<code>server</code>.</p>
<p>If an SSH private key is used for authentication with a passphrase,
the passphrase needs to be provided to both options:
<code>ssh_options</code> (for browsing) and <code>ts</code> (for
transfers):</p>
<div class="sourceCode" id="cb457"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb457-1"><a href="#cb457-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server <span class="at">--url</span><span class="op">=</span>ssh://_server_address_here_:33001 <span class="at">--username</span><span class="op">=</span>_user_here_ <span class="at">--ssh_keys</span><span class="op">=</span>_private_key_path_here_ <span class="at">--passphrase</span><span class="op">=</span>_passphrase_here_</span></code></pre></div>
<h1 data-number="8" id="plugin-node-ibm-aspera-high-speed-transfer-server-node"><span class="header-section-number">8</span> Plugin: <code>node</code>: IBM
Aspera High Speed Transfer Server Node</h1>
<p>This plugin gives access to capabilities provided by the HSTS Node
API.</p>
<p>The authentication is <code>username</code> and <code>password</code>
or <code>access_key</code> and <code>secret</code> through options:
<code>username</code> and <code>password</code>.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Capabilities of this plugin are used in other plugins which access to
the Node API, such as <code>aoc</code>, <code>ats</code>,
<code>shares</code>.</p></div>
</div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>This plugin can be used with any type of <strong>Aspera
Node</strong>, either on premise or ATS, provided that you have Node API
credentials. Those credentials can be either Node API user or Access Key
(e.g. on ATS).</p></div>
</div>
<h2 data-number="8.1" id="file-operations"><span class="header-section-number">8.1</span> File Operations</h2>
<p>It is possible to do <strong>gen3/node user</strong> operations:</p>
<ul>
<li><code>browse</code></li>
<li>Transfer (<code>upload</code> / <code>download</code> /
<code>sync</code>)</li>
<li><code>delete</code></li>
<li>...</li>
</ul>
<p>When using an access key, so called <strong>gen4/access key</strong>
API is also supported through sub commands using
<code>access_keys do self</code>.</p>
<p>Example:</p>
<ul>
<li><code>ascli node browse /</code> : list files with <strong>gen3/node
user</strong> API</li>
<li><code>ascli node access_key do self browse /</code> : list files
with <strong>gen4/access key</strong> API</li>
</ul>
<h3 data-number="8.1.1" id="browse"><span class="header-section-number">8.1.1</span> Browse</h3>
<p>Native API parameters can be placed in option <code>query</code>.</p>
<p>Special parameters can be placed in option <code>query</code> for
&quot;gen3&quot; browse:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>recursive</code></td>
<td>Recursively list files</td>
</tr>
<tr>
<td><code>max</code></td>
<td>Maximum number of files to list</td>
</tr>
<tr>
<td><code>self</code></td>
<td>Offset in the list</td>
</tr>
</tbody>
</table>
<p>Option <code>node_cache</code> can be set to <code>no</code> to avoid
use of folder cache (Redis) and force actual read of file system.</p>
<h2 data-number="8.2" id="operation-find-on-gen4access-key"><span class="header-section-number">8.2</span> Operation <code>find</code> on
<strong>gen4/access key</strong></h2>
<p>The command <code>find &lt;folder&gt; [filter_expr]</code> is
available for <strong>gen4/access key</strong>, under
<code>access_keys do self</code>.</p>
<p>The argument <code>&lt;folder&gt;</code> is mandatory and is the root
from which search is performed. The argument <code>[filter_expr]</code>
is optional and represent the matching criteria.</p>
<p>It recursively scans storage to find files/folders matching criteria
and then returns a list of matching entries.</p>
<p><code>[filter_expr]</code> is either:</p>
<ul>
<li>Optional (default) : all files and folder are selected</li>
<li>Type <code>String</code> : the expression is similar to shell
globing, refer to <strong>Ruby</strong> function: <a href="https://ruby-doc.org/3.2.2/File.html#method-c-fnmatch"><code>File.fnmatch</code></a></li>
<li>Type <code>Proc</code> : the expression is a Ruby lambda that takes
one argument: a <code>Hash</code> that contains the current folder entry
to test. Refer to the following examples.</li>
</ul>
<p>Examples of expressions:</p>
<ul>
<li><p>Find all files and folders under <code>/</code></p>
<div class="sourceCode" id="cb458"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb458-1"><a href="#cb458-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node access_keys do self find</span></code></pre></div></li>
<li><p>Find all text files <code>/Documents</code></p>
<div class="sourceCode" id="cb459"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb459-1"><a href="#cb459-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node access_keys do self find /Documents <span class="st">&#39;*.txt&#39;</span></span></code></pre></div></li>
</ul>
<p>The following are examples of Ruby lambda code to be provided in the
following template command:</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb460-1"><a href="#cb460-1" aria-hidden="true" tabindex="-1"></a> <span class="ex">ascli</span> node access_keys do self find / @ruby:<span class="st">&#39;-&gt;(f){[code here]}&#39;</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Single quotes are used here above to protect the whole
<strong>Ruby</strong> expression from the shell. Then double quotes are
used for strings in the <strong>Ruby</strong> expression to not mix with
the shell.</p></div>
</div>
<ul>
<li><p>Find files more recent than 100 days</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb461-1"><a href="#cb461-1" aria-hidden="true" tabindex="-1"></a><span class="op">-&gt;</span>(f)<span class="op">{</span>f<span class="kw">[</span><span class="st">&quot;type&quot;</span><span class="kw">]</span><span class="at">.eql?</span>(<span class="st">&quot;file&quot;</span>) <span class="cf">and</span> (<span class="dt">DateTime</span><span class="at">.now</span><span class="op">-</span><span class="dt">DateTime</span><span class="at">.parse</span>(f<span class="kw">[</span><span class="st">&quot;modified_time&quot;</span><span class="kw">]</span>))<span class="op">&lt;</span><span class="dv">100</span><span class="op">}</span></span></code></pre></div></li>
<li><p>Find files older than 1 year</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb462-1"><a href="#cb462-1" aria-hidden="true" tabindex="-1"></a><span class="op">-&gt;</span>(f)<span class="op">{</span>f<span class="kw">[</span><span class="st">&quot;type&quot;</span><span class="kw">]</span><span class="at">.eql?</span>(<span class="st">&quot;file&quot;</span>) <span class="cf">and</span> (<span class="dt">DateTime</span><span class="at">.now</span><span class="op">-</span><span class="dt">DateTime</span><span class="at">.parse</span>(f<span class="kw">[</span><span class="st">&quot;modified_time&quot;</span><span class="kw">]</span>))<span class="op">&gt;</span><span class="dv">365</span><span class="op">}</span></span></code></pre></div></li>
<li><p>Find files larger than 1 MB</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb463-1"><a href="#cb463-1" aria-hidden="true" tabindex="-1"></a><span class="op">-&gt;</span>(f)<span class="op">{</span>f<span class="kw">[</span><span class="st">&quot;type&quot;</span><span class="kw">]</span><span class="at">.eql?</span>(<span class="st">&quot;file&quot;</span>) <span class="cf">and</span> f<span class="kw">[</span><span class="st">&quot;size&quot;</span><span class="kw">]</span><span class="at">.to_i</span><span class="op">&gt;</span><span class="dv">1000000</span><span class="op">}</span></span></code></pre></div></li>
<li><p>Filter out files beginning with <code>._</code> or named
<code>.DS_Store</code>:</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb464-1"><a href="#cb464-1" aria-hidden="true" tabindex="-1"></a><span class="op">-&gt;</span>(f)<span class="op">{!</span>(f<span class="kw">[</span><span class="st">&quot;name&quot;</span><span class="kw">]</span><span class="at">.start_with?</span>(<span class="st">&quot;._&quot;</span>) <span class="cf">or</span> f<span class="kw">[</span><span class="st">&quot;name&quot;</span><span class="kw">]</span><span class="at">.eql?</span>(<span class="st">&quot;.DS_Store&quot;</span>))<span class="op">}</span></span></code></pre></div></li>
<li><p>Match files using a <a href="https://ruby-doc.org/core/Regexp.html">Ruby Regex</a> :
<code>\.gif$</code></p>
<div class="sourceCode" id="cb465"><pre class="sourceCode ruby"><code class="sourceCode ruby"><span id="cb465-1"><a href="#cb465-1" aria-hidden="true" tabindex="-1"></a><span class="op">-&gt;</span>(f)<span class="op">{</span>f<span class="kw">[</span><span class="st">&quot;name&quot;</span><span class="kw">]</span><span class="at">.match?</span>(<span class="ss">/</span><span class="sc">\.</span><span class="ss">gif$/</span>)<span class="op">}</span></span></code></pre></div></li>
</ul>
<p><code>ascli</code> commands can be piped in order to combine
operations, such as <strong>find and delete</strong>:</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb466-1"><a href="#cb466-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node access_keys do self find / @ruby:<span class="st">&#39;-&gt;(f){f[&quot;type&quot;].eql?(&quot;file&quot;) and (DateTime.now-DateTime.parse(f[&quot;modified_time&quot;]))&gt;365}&#39;</span> <span class="at">--fields</span><span class="op">=</span>path <span class="at">--format</span><span class="op">=</span>csv <span class="kw">|</span> <span class="ex">ascli</span> node <span class="at">--bulk</span><span class="op">=</span>yes delete @lines:@stdin:</span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The pipe <code>|</code> character on the last line.</p></div>
</div>
<h2 data-number="8.3" id="listing-transfer-events"><span class="header-section-number">8.3</span> Listing transfer events</h2>
<p>When a transfer is run, its information is stored (typically, 1 day)
in the HSTS database (Redis). This information can be retrieved with
command: <code>transfer list</code>.</p>
<p>If the number of transfers is too large, then the list will be
retrieved using several API calls.</p>
<p>In addition, it is possible to list &quot;only new information&quot; using
option <code>once_only</code>.</p>
<div class="sourceCode" id="cb467"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb467-1"><a href="#cb467-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node transfer list <span class="at">--once-only</span><span class="op">=</span>yes</span></code></pre></div>
<p>The <code>iteration_token</code> that keeps memory of the latest
event is stored in the persistence repository of <code>ascli</code>. To
reset it, add option: <code>--query=@json:&#39;{&quot;reset&quot;: true}&#39;</code>. To
list only a number of events, use the <code>max</code> parameter in
query. Other parameters are directly transmitted to the underlying API
(<code>GET /ops/transfers</code>).</p>
<h2 data-number="8.4" id="central"><span class="header-section-number">8.4</span> Central</h2>
<p>The central sub-command uses the <strong>reliable query</strong> API
(session and file). It allows listing transfer sessions and transferred
files.</p>
<p>Filtering can be applied:</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb468-1"><a href="#cb468-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node central file list</span></code></pre></div>
<p>By providing the <code>validator</code> option, offline transfer
validation can be done.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>See later in this doc, refer to HSTS doc.</p></div>
</div>
<h2 data-number="8.5" id="sync"><span class="header-section-number">8.5</span> Sync</h2>
<p>There are three commands related to file synchronisation:</p>
<ul>
<li><code>sync</code>: Perform a local sync, by executing
<code>async</code> locally.</li>
<li><code>ssync</code> : Calls the newer <code>async</code> API on node
: <code>/asyncs</code> : it can start a sync operation on the server
side, and monitor only those.</li>
<li><code>async</code>: Calls the legacy <code>async</code> API on node
: <code>/async</code> : get status on sync operation on server side,
like Aspera Console.</li>
</ul>
<p>For details on the <code>sync</code> action, refer to <a href="#ibm-aspera-sync">IBM Aspera Sync</a>.</p>
<h2 data-number="8.6" id="fasp-stream"><span class="header-section-number">8.6</span> FASP Stream</h2>
<p>It is possible to start a faspstream session using the Node API:</p>
<p>Use the command
<code>ascli node stream create --ts=@json:&lt;value&gt;</code>, with <a href="#transfer-specification"><strong>transfer-spec</strong></a>:</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb469-1"><a href="#cb469-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;direction&quot;</span><span class="fu">:</span><span class="st">&quot;send&quot;</span><span class="fu">,</span><span class="dt">&quot;source&quot;</span><span class="fu">:</span><span class="st">&quot;udp://233.3.3.4:3000?loopback=1&amp;ttl=2&quot;</span><span class="fu">,</span><span class="dt">&quot;destination&quot;</span><span class="fu">:</span><span class="st">&quot;udp://233.3.3.3:3001/&quot;</span><span class="fu">,</span><span class="dt">&quot;remote_host&quot;</span><span class="fu">:</span><span class="st">&quot;localhost&quot;</span><span class="fu">,</span><span class="dt">&quot;remote_user&quot;</span><span class="fu">:</span><span class="st">&quot;stream&quot;</span><span class="fu">,</span><span class="dt">&quot;remote_password&quot;</span><span class="fu">:</span><span class="st">&quot;my_pass_here&quot;</span><span class="fu">}</span></span></code></pre></div>
<h2 data-number="8.7" id="watchfolder"><span class="header-section-number">8.7</span> Watchfolder</h2>
<p>Refer to <a href="https://www.ibm.com/docs/en/ahte/4.4.x?topic=wffcl-watch-folder-json-configuration-file-reference">Aspera
Server documentation</a>, or <a href="https://developer.ibm.com/apis/catalog/aspera--aspera-watch-folders-api/api/API--aspera--ibm-aspera-watch-folders-api">Aspera
Watchfolder API Documentation</a> for watch folder creation.</p>
<p><code>ascli</code> supports remote operations through the Node API.
Operations are:</p>
<ul>
<li>Start <code>watchd</code> and <code>watchfolderd</code> services
running as a system user having access to files</li>
<li>Configure a <strong>Watchfolder</strong> to define automated
transfers</li>
</ul>
<div class="sourceCode" id="cb470"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb470-1"><a href="#cb470-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node service create @json:<span class="st">&#39;{&quot;id&quot;:&quot;mywatchd&quot;,&quot;type&quot;:&quot;WATCHD&quot;,&quot;run_as&quot;:{&quot;user&quot;:&quot;user1&quot;}}&#39;</span></span>
<span id="cb470-2"><a href="#cb470-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node service create @json:<span class="st">&#39;{&quot;id&quot;:&quot;mywatchfolderd&quot;,&quot;type&quot;:&quot;WATCHFOLDERD&quot;,&quot;run_as&quot;:{&quot;user&quot;:&quot;user1&quot;}}&#39;</span></span>
<span id="cb470-3"><a href="#cb470-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node watch_folder create @json:<span class="st">&#39;{&quot;id&quot;:&quot;mywfolder&quot;,&quot;source_dir&quot;:&quot;/watch1&quot;,&quot;target_dir&quot;:&quot;/&quot;,&quot;transport&quot;:{&quot;host&quot;:&quot;10.25.0.4&quot;,&quot;user&quot;:&quot;user1&quot;,&quot;pass&quot;:&quot;mypassword&quot;}}&#39;</span></span></code></pre></div>
<h2 data-number="8.8" id="out-of-transfer-file-validation"><span class="header-section-number">8.8</span> Out of Transfer File
Validation</h2>
<p>Follow the Aspera Transfer Server configuration to activate this
feature.</p>
<p>The following command lists one file that requires validation, and
assign it to the unique validator identifier provided:</p>
<div class="sourceCode" id="cb471"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb471-1"><a href="#cb471-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node central file list <span class="at">--validator</span><span class="op">=</span>ascli @json:<span class="st">&#39;{&quot;file_transfer_filter&quot;:{&quot;max_result&quot;:1}}&#39;</span></span></code></pre></div>
<pre class="text"><code>+--------------+--------------+------------+--------------------------------------+
| session_uuid |    file_id   |   status   |              path                    |
+--------------+--------------+------------+--------------------------------------+
| 1a74444c-... | 084fb181-... | validating | /home/xfer.../PKG - my title/200KB.1 |
+--------------+--------------+------------+--------------------------------------+</code></pre>
<p>To update the status of the file, use the following command:</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb473-1"><a href="#cb473-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node central file update <span class="at">--validator</span><span class="op">=</span>ascli @json:<span class="st">&#39;{&quot;files&quot;:[{&quot;session_uuid&quot;: &quot;1a74444c-...&quot;,&quot;file_id&quot;: &quot;084fb181-...&quot;,&quot;status&quot;: &quot;completed&quot;}]}&#39;</span></span></code></pre></div>
<pre class="text"><code>updated</code></pre>
<h2 data-number="8.9" id="example-shod-to-ats"><span class="header-section-number">8.9</span> Example: SHOD to ATS</h2>
<p>Scenario: Access to a <strong>Shares on Demand</strong> (SHOD) server
on AWS is provided by a partner. We need to transfer files from this
third party SHOD instance into our Azure BLOB storage. Simply create an
<strong>Aspera Transfer Service</strong> instance, which provides access
to the Node API. Then create a configuration for the
<strong>SHOD</strong> instance in the configuration file: in section
<strong>shares</strong>, a configuration named: <code>aws_shod</code>.
Create another configuration for the Azure ATS instance: in section
<strong>node</strong>, named <code>azure_ats</code>. Then execute the
following command:</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb475-1"><a href="#cb475-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node download /share/sourcefile <span class="at">--to-folder</span><span class="op">=</span>/destination_folder <span class="at">--preset</span><span class="op">=</span>aws_shod <span class="at">--transfer</span><span class="op">=</span>node <span class="at">--transfer-info</span><span class="op">=</span>@preset:azure_ats</span></code></pre></div>
<p>This will get transfer information from the SHOD instance and tell
the Azure ATS instance to download files.</p>
<h2 data-number="8.10" id="node-file-information"><span class="header-section-number">8.10</span> Node file information</h2>
<p>When Node API is used with an <strong>Access key</strong>, extra
information can be retrieved, such as preview.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Display of preview on terminal requires installation of extra gem:
<code>rmagick</code></p></div>
</div>
<div class="sourceCode" id="cb476"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb476-1"><a href="#cb476-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dnf</span> install <span class="at">-y</span> ImageMagick-devel</span>
<span id="cb476-2"><a href="#cb476-2" aria-hidden="true" tabindex="-1"></a><span class="ex">gem</span> install rmagick rainbow</span></code></pre></div>
<p>For example, it is possible to display the preview of a file, if it
exists, using an access key on node:</p>
<div class="sourceCode" id="cb477"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb477-1"><a href="#cb477-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node access_key do self thumbnail /preview_samples/Aspera.mpg</span></code></pre></div>
<p>Previews are mainly used in AoC, this also works with AoC:</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb478-1"><a href="#cb478-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc files thumbnail /preview_samples/Aspera.mpg</span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>To specify the file by its file ID, use the selector syntax:
<code>%id:_file_id_here_</code></p></div>
</div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>To force textual display of the preview on <strong>iTerm</strong>,
prefix command with: <code>env -u TERM_PROGRAM -u LC_TERMINAL</code> or
use option: ``</p></div>
</div>
<h2 data-number="8.11" id="create-access-key"><span class="header-section-number">8.11</span> Create access key</h2>
<div class="sourceCode" id="cb479"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb479-1"><a href="#cb479-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node access_key create @json:<span class="st">&#39;{&quot;id&quot;:&quot;myaccesskey&quot;,&quot;secret&quot;:&quot;my_secret_here&quot;,&quot;storage&quot;:{&quot;type&quot;:&quot;local&quot;,&quot;path&quot;:&quot;/data/mydir&quot;}}&#39;</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The <code>id</code> and <code>secret</code> are optional. If not
provided, they will be generated and returned into the result.</p></div>
</div>
<p>Access keys support extra overriding parameters using parameter:
<code>configuration</code> and sub keys <code>transfer</code> and
<code>server</code>. For example, an access key can be modified or
created with the following options:</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb480-1"><a href="#cb480-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;configuration&quot;</span><span class="fu">:{</span><span class="dt">&quot;transfer&quot;</span><span class="fu">:{</span><span class="dt">&quot;target_rate_cap_kbps&quot;</span><span class="fu">:</span><span class="dv">500000</span><span class="fu">}}}</span></span></code></pre></div>
<p>The list of supported options can be displayed using command:</p>
<div class="sourceCode" id="cb481"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb481-1"><a href="#cb481-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node info <span class="at">--field</span><span class="op">=</span>@ruby:<span class="st">&#39;/^access_key_configuration_capabilities.*/&#39;</span></span></code></pre></div>
<h2 data-number="8.12" id="generate-and-use-bearer-token"><span class="header-section-number">8.12</span> Generate and use bearer
token</h2>
<p>Bearer tokens are part of the <strong>gen4/access key</strong> API.
It follows the model of OAuth 2. For example, they are used in Aspera on
Cloud. This is also available for developers for any application
integrating Aspera. In this API, files, users and groups are identified
by an ID (a <code>String</code>, e.g. <code>&quot;125&quot;</code>, not
necessarily numerical).</p>
<p>Bearer tokens are typically generated by the authenticating
application and then recognized by the Node API. A bearer token is
authorized on the node by creating <code>permissions</code> on a
<strong>folder</strong>.</p>
<p>Bearer tokens can be generated using <code>ascli</code> command
<code>bearer_token</code>: it takes two arguments:</p>
<ul>
<li>The private key used to sign the token.</li>
<li>The token information, which is a <code>Hash</code> containing the
following elements:</li>
</ul>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>_scope</code></td>
<td><code>user:all</code></td>
<td>Special</td>
<td>Either <code>user:all</code> or <code>admin:all</code></td>
</tr>
<tr>
<td><code>_validity</code></td>
<td>86400</td>
<td>Special</td>
<td>Validity in seconds from now.</td>
</tr>
<tr>
<td><code>user_id</code></td>
<td>-</td>
<td>Mandatory</td>
<td>Identifier of user</td>
</tr>
<tr>
<td><code>scope</code></td>
<td><code>node.&lt;access_key&gt;:&lt;_scope&gt;</code></td>
<td>Mandatory</td>
<td>API scope, e.g.
<code>node.&lt;access_key&gt;:&lt;node scope&gt;</code></td>
</tr>
<tr>
<td><code>expires_at</code></td>
<td><code>now+&lt;_validity&gt;</code></td>
<td>Mandatory</td>
<td>Format: <code>%Y-%m-%dT%H:%M:%SZ</code> e.g.
<code>2021-12-31T23:59:59Z</code></td>
</tr>
<tr>
<td><code>auth_type</code></td>
<td><code>access_key</code></td>
<td>Optional</td>
<td><code>access_key</code>, <code>node_user</code></td>
</tr>
<tr>
<td><code>group_ids</code></td>
<td>-</td>
<td>Optional</td>
<td>List of group IDs</td>
</tr>
<tr>
<td><code>organization_id</code></td>
<td>-</td>
<td>Optional</td>
<td>Organization ID</td>
</tr>
<tr>
<td><code>watermarking_json_base64</code></td>
<td>-</td>
<td>Optional</td>
<td>Watermarking information (not used)</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>For convenience, <code>ascli</code> provides additional parameters
<code>_scope</code> and <code>_validity</code>. They are not part of the
API and are removed from the final payload. They are used respectively
to easily set a value for <code>scope</code> and
<code>expires_at</code>.</p></div>
</div>
<h3 data-number="8.12.1" id="bearer-token-environment"><span class="header-section-number">8.12.1</span> Bearer token:
Environment</h3>
<p>An access key shall be created to grant access for transfers to its
storage. The access key and its secret represent administrative access
to the storage as it has access rights to the whole storage of the
access key.</p>
<p>They way to create access keys depend slightly on the type of
HSTS:</p>
<ul>
<li><p>If a self-managed Aspera node is used, then a <strong>node user
admin</strong> must be created: It has no <code>docroot</code> but has
at least one file restriction (for testing, one can use <code>*</code>
to accept creation of an access key with any storage root path). Refer
to the Aspera HSTS documentation.</p></li>
<li><p>If Cloud Pak for integration is used, then the node admin is
created automatically.</p></li>
<li><p>If Aspera on Cloud or ATS is used, then the SaaS API for access
key creation is used.</p></li>
</ul>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Refer to <a href="https://www.ibm.com/docs/en/ahts">HSTS manual</a>:
<code>Access key authentication</code> section for more details on
access key creation.</p></div>
</div>
<p>In the next sections, we will assume that an access key has been
created and that <code>ascli</code> is configured to use this access key
by default using <code>node</code>.</p>
<h3 data-number="8.12.2" id="bearer-token-preparation"><span class="header-section-number">8.12.2</span> Bearer token:
Preparation</h3>
<p>Let&#39;s assume that the access key was created, and a default
configuration is set to use this <strong>access key</strong>. Using
<code>ascli</code>, an access key can be created using the
<code>access_key create</code> on the node (using main node credentials)
or ATS.</p>
<p>Create a private key (organization key) that will be used to sign
bearer tokens:</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb482-1"><a href="#cb482-1" aria-hidden="true" tabindex="-1"></a><span class="va">my_private_pem</span><span class="op">=</span>./myorgkey.pem</span>
<span id="cb482-2"><a href="#cb482-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config genkey <span class="va">$my_private_pem</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>This key is not used for authentication, it is used to sign bearer
tokens. Refer to section <a href="#private-key">private key</a> for more
details on generation.</p></div>
</div>
<p>The corresponding public key shall be placed as an attribute of the
<strong>access key</strong> (done with
<code>PUT /access_keys/&lt;id&gt;</code>):</p>
<div class="sourceCode" id="cb483"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb483-1"><a href="#cb483-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node access_key set_bearer_key self @file:<span class="va">$my_private_pem</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Either the public or private key can be provided, and only the public
key is used. This will enable to check the signature of the bearer
token. Above command is executed with access key credentials.</p></div>
</div>
<p>Alternatively, use the following equivalent command, as
<code>ascli</code> kindly extracts the public key with extension
<code>.pub</code>:</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb484-1"><a href="#cb484-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node access_key modify %id:self @ruby:<span class="st">&#39;{token_verification_key: File.read(&quot;&#39;</span><span class="va">$my_private_pem</span><span class="st">&#39;.pub&quot;)}&#39;</span></span></code></pre></div>
<h3 data-number="8.12.3" id="bearer-token-configuration-for-user"><span class="header-section-number">8.12.3</span> Bearer token: Configuration
for user</h3>
<ul>
<li><p>Select a folder for which we want to grant access to a user, and
get its identifier:</p>
<div class="sourceCode" id="cb485"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb485-1"><a href="#cb485-1" aria-hidden="true" tabindex="-1"></a><span class="va">my_folder_id</span><span class="op">=</span><span class="va">$(</span><span class="ex">ascli</span> node access_key do self show / <span class="at">--fields</span><span class="op">=</span>id<span class="va">)</span></span></code></pre></div></li>
</ul>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Here we simply select <code>/</code>, but any folder can be selected
in the access key storage.</p></div>
</div>
<ul>
<li><p>Let&#39;s designate a user by its ID:</p>
<div class="sourceCode" id="cb486"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb486-1"><a href="#cb486-1" aria-hidden="true" tabindex="-1"></a><span class="va">my_user_id</span><span class="op">=</span>777</span></code></pre></div></li>
</ul>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>This is an arbitrary identifier, typically managed by the web
application. Not related to Linux user IDs or anything else.</p></div>
</div>
<ul>
<li><p>Grant this user access to the selected folder:</p>
<div class="sourceCode" id="cb487"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb487-1"><a href="#cb487-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node access_key do self permission %id:<span class="va">$my_folder_id</span> create @json:<span class="st">&#39;{&quot;access_type&quot;:&quot;user&quot;,&quot;access_id&quot;:&quot;&#39;</span><span class="va">$my_user_id</span><span class="st">&#39;&quot;}&#39;</span></span></code></pre></div></li>
<li><p>Create a Bearer token for the user:</p>
<div class="sourceCode" id="cb488"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb488-1"><a href="#cb488-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node bearer_token @file:./myorgkey.pem @json:<span class="st">&#39;{&quot;user_id&quot;:&quot;&#39;</span><span class="va">$my_user_id</span><span class="st">&#39;&quot;,&quot;_validity&quot;:3600}&#39;</span> <span class="at">--output</span><span class="op">=</span>bearer.txt</span></code></pre></div></li>
</ul>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The Bearer token can also be created using command
<code>asnodeadmin</code> on HSTS. Refer to the <a href="https://www.ibm.com/docs/en/ahts">HSTS manual</a>:
<code>Bearer tokens</code> section. Code for token generation is
provided in <a href="lib/aspera/api/node.rb"><code>lib/aspera/api/node.rb</code></a></p></div>
</div>
<h3 data-number="8.12.4" id="bearer-token-user-side"><span class="header-section-number">8.12.4</span> Bearer token: User side</h3>
<p>Now, let&#39;s assume we are the user, the only information received
are:</p>
<ul>
<li>The URL of the Node API</li>
<li>A Bearer token</li>
<li>A file ID for which we have access</li>
</ul>
<p>Let&#39;s use it:</p>
<div class="sourceCode" id="cb489"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb489-1"><a href="#cb489-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node <span class="at">-N</span> <span class="at">--url</span><span class="op">=</span>https://... <span class="at">--password</span><span class="op">=</span><span class="st">&quot;Bearer </span><span class="va">$(</span><span class="fu">cat</span> bearer.txt<span class="va">)</span><span class="st">&quot;</span> <span class="at">--root-id</span><span class="op">=</span><span class="va">$my_folder_id</span> access_key do self br /</span></code></pre></div>
<h2 data-number="8.13" id="tested-commands-for-node"><span class="header-section-number">8.13</span> Tested commands for
<code>node</code></h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Add <code>ascli node</code> in front of the following commands:</p></div>
</div>
<div class="sourceCode" id="cb490"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb490-1"><a href="#cb490-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--url=https://tst.example.com/path</span> <span class="at">--password</span><span class="op">=</span><span class="st">&quot;Bearer bearer_666&quot;</span> <span class="at">--root-id</span><span class="op">=</span>root_id access_key do self br /</span>
<span id="cb490-2"><a href="#cb490-2" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> create @json:<span class="st">&#39;{&quot;id&quot;:&quot;my_username&quot;,&quot;secret&quot;:&quot;my_password_here&quot;,&quot;storage&quot;:{&quot;type&quot;:&quot;local&quot;,&quot;path&quot;:&quot;/&quot;}}&#39;</span></span>
<span id="cb490-3"><a href="#cb490-3" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> delete my_username</span>
<span id="cb490-4"><a href="#cb490-4" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> do my_ak_name browse /</span>
<span id="cb490-5"><a href="#cb490-5" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> do my_ak_name delete /test_nd_ak2</span>
<span id="cb490-6"><a href="#cb490-6" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> do my_ak_name delete test_nd_ak3</span>
<span id="cb490-7"><a href="#cb490-7" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> do my_ak_name download test_nd_ak3 <span class="at">--to-folder</span><span class="op">=</span>.</span>
<span id="cb490-8"><a href="#cb490-8" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> do my_ak_name find my_test_folder</span>
<span id="cb490-9"><a href="#cb490-9" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> do my_ak_name find my_test_folder @re:<span class="st">&#39;\.jpg$&#39;</span></span>
<span id="cb490-10"><a href="#cb490-10" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> do my_ak_name find my_test_folder @ruby:<span class="st">&#39;-&gt;(f){f[&quot;name&quot;].end_with?(&quot;.jpg&quot;)}&#39;</span></span>
<span id="cb490-11"><a href="#cb490-11" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> do my_ak_name mkdir /tst_nd_ak</span>
<span id="cb490-12"><a href="#cb490-12" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> do my_ak_name node_info /</span>
<span id="cb490-13"><a href="#cb490-13" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> do my_ak_name rename /tst_nd_ak test_nd_ak2</span>
<span id="cb490-14"><a href="#cb490-14" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> do my_ak_name show %id:1</span>
<span id="cb490-15"><a href="#cb490-15" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> do my_ak_name show /test_nd_ak3</span>
<span id="cb490-16"><a href="#cb490-16" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> do my_ak_name upload <span class="st">&#39;faux:///test_nd_ak3?100k&#39;</span> <span class="at">--default-ports</span><span class="op">=</span>no</span>
<span id="cb490-17"><a href="#cb490-17" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> do self permission %id:root_id create @json:<span class="st">&#39;{&quot;access_type&quot;:&quot;user&quot;,&quot;access_id&quot;:&quot;666&quot;}&#39;</span></span>
<span id="cb490-18"><a href="#cb490-18" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> do self permission / show 1</span>
<span id="cb490-19"><a href="#cb490-19" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> do self show / <span class="at">--fields</span><span class="op">=</span>id <span class="at">--output</span><span class="op">=</span>root_id</span>
<span id="cb490-20"><a href="#cb490-20" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> list</span>
<span id="cb490-21"><a href="#cb490-21" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> set_bearer_key self @file:my_private_key</span>
<span id="cb490-22"><a href="#cb490-22" aria-hidden="true" tabindex="-1"></a><span class="ex">access_key</span> show %id:self</span>
<span id="cb490-23"><a href="#cb490-23" aria-hidden="true" tabindex="-1"></a><span class="ex">api_details</span></span>
<span id="cb490-24"><a href="#cb490-24" aria-hidden="true" tabindex="-1"></a><span class="ex">asperabrowser</span></span>
<span id="cb490-25"><a href="#cb490-25" aria-hidden="true" tabindex="-1"></a><span class="ex">async</span> bandwidth %name:my_node_sync2</span>
<span id="cb490-26"><a href="#cb490-26" aria-hidden="true" tabindex="-1"></a><span class="ex">async</span> counters %name:my_node_sync2</span>
<span id="cb490-27"><a href="#cb490-27" aria-hidden="true" tabindex="-1"></a><span class="ex">async</span> files %name:my_node_sync2</span>
<span id="cb490-28"><a href="#cb490-28" aria-hidden="true" tabindex="-1"></a><span class="ex">async</span> list</span>
<span id="cb490-29"><a href="#cb490-29" aria-hidden="true" tabindex="-1"></a><span class="ex">async</span> show %name:my_node_sync2</span>
<span id="cb490-30"><a href="#cb490-30" aria-hidden="true" tabindex="-1"></a><span class="ex">async</span> show ALL</span>
<span id="cb490-31"><a href="#cb490-31" aria-hidden="true" tabindex="-1"></a><span class="ex">basic_token</span></span>
<span id="cb490-32"><a href="#cb490-32" aria-hidden="true" tabindex="-1"></a><span class="ex">bearer_token</span> @file:my_private_key @json:<span class="st">&#39;{&quot;user_id&quot;:&quot;666&quot;}&#39;</span> <span class="at">--output</span><span class="op">=</span>bearer_666</span>
<span id="cb490-33"><a href="#cb490-33" aria-hidden="true" tabindex="-1"></a><span class="ex">browse</span> / <span class="at">--log-level</span><span class="op">=</span>trace2</span>
<span id="cb490-34"><a href="#cb490-34" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> my_upload_folder/test_file.bin <span class="at">--to-folder</span><span class="op">=</span>.</span>
<span id="cb490-35"><a href="#cb490-35" aria-hidden="true" tabindex="-1"></a><span class="ex">central</span> file list</span>
<span id="cb490-36"><a href="#cb490-36" aria-hidden="true" tabindex="-1"></a><span class="ex">central</span> file modify <span class="at">--validator</span><span class="op">=</span>1 @json:<span class="st">&#39;{&quot;files&quot;:[]}&#39;</span></span>
<span id="cb490-37"><a href="#cb490-37" aria-hidden="true" tabindex="-1"></a><span class="ex">central</span> session list</span>
<span id="cb490-38"><a href="#cb490-38" aria-hidden="true" tabindex="-1"></a><span class="ex">delete</span> @list:,my_upload_folder/a_folder,my_upload_folder/tdlink,my_upload_folder/a_file</span>
<span id="cb490-39"><a href="#cb490-39" aria-hidden="true" tabindex="-1"></a><span class="ex">delete</span> my_upload_folder/test_file.bin</span>
<span id="cb490-40"><a href="#cb490-40" aria-hidden="true" tabindex="-1"></a><span class="ex">download</span> my_upload_folder/test_file.bin <span class="at">--to-folder</span><span class="op">=</span>.</span>
<span id="cb490-41"><a href="#cb490-41" aria-hidden="true" tabindex="-1"></a><span class="ex">health</span></span>
<span id="cb490-42"><a href="#cb490-42" aria-hidden="true" tabindex="-1"></a><span class="ex">info</span> <span class="at">--fpac</span><span class="op">=</span><span class="st">&#39;function FindProxyForURL(url,host){return &quot;DIRECT&quot;}&#39;</span></span>
<span id="cb490-43"><a href="#cb490-43" aria-hidden="true" tabindex="-1"></a><span class="ex">license</span></span>
<span id="cb490-44"><a href="#cb490-44" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> my_upload_folder/a_folder</span>
<span id="cb490-45"><a href="#cb490-45" aria-hidden="true" tabindex="-1"></a><span class="ex">mkfile</span> my_upload_folder/a_file1 <span class="st">&quot;hello world&quot;</span></span>
<span id="cb490-46"><a href="#cb490-46" aria-hidden="true" tabindex="-1"></a><span class="ex">mklink</span> my_upload_folder/a_folder my_upload_folder/tdlink</span>
<span id="cb490-47"><a href="#cb490-47" aria-hidden="true" tabindex="-1"></a><span class="ex">rename</span> my_upload_folder a_file1 a_file</span>
<span id="cb490-48"><a href="#cb490-48" aria-hidden="true" tabindex="-1"></a><span class="ex">search</span> / <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;sort&quot;:&quot;mtime&quot;}&#39;</span></span>
<span id="cb490-49"><a href="#cb490-49" aria-hidden="true" tabindex="-1"></a><span class="ex">service</span> create @json:<span class="st">&#39;{&quot;id&quot;:&quot;service1&quot;,&quot;type&quot;:&quot;WATCHD&quot;,&quot;run_as&quot;:{&quot;user&quot;:&quot;user1&quot;}}&#39;</span></span>
<span id="cb490-50"><a href="#cb490-50" aria-hidden="true" tabindex="-1"></a><span class="ex">service</span> delete service1</span>
<span id="cb490-51"><a href="#cb490-51" aria-hidden="true" tabindex="-1"></a><span class="ex">service</span> list</span>
<span id="cb490-52"><a href="#cb490-52" aria-hidden="true" tabindex="-1"></a><span class="ex">slash</span></span>
<span id="cb490-53"><a href="#cb490-53" aria-hidden="true" tabindex="-1"></a><span class="ex">space</span> /</span>
<span id="cb490-54"><a href="#cb490-54" aria-hidden="true" tabindex="-1"></a><span class="ex">ssync</span> bandwidth %name:my_node_sync</span>
<span id="cb490-55"><a href="#cb490-55" aria-hidden="true" tabindex="-1"></a><span class="ex">ssync</span> counters %name:my_node_sync</span>
<span id="cb490-56"><a href="#cb490-56" aria-hidden="true" tabindex="-1"></a><span class="ex">ssync</span> create @json:<span class="st">&#39;{&quot;configuration&quot;:{&quot;name&quot;:&quot;my_node_sync&quot;,&quot;local&quot;:{&quot;path&quot;:&quot;my_local_path_real&quot;},&quot;remote&quot;:{&quot;host&quot;:&quot;my_host&quot;,&quot;port&quot;:my_port,&quot;user&quot;:&quot;my_username&quot;,&quot;pass&quot;:&quot;my_password_here&quot;,&quot;path&quot;:&quot;my_remote_path&quot;}}}&#39;</span></span>
<span id="cb490-57"><a href="#cb490-57" aria-hidden="true" tabindex="-1"></a><span class="ex">ssync</span> delete %name:my_node_sync</span>
<span id="cb490-58"><a href="#cb490-58" aria-hidden="true" tabindex="-1"></a><span class="ex">ssync</span> files %name:my_node_sync</span>
<span id="cb490-59"><a href="#cb490-59" aria-hidden="true" tabindex="-1"></a><span class="ex">ssync</span> list</span>
<span id="cb490-60"><a href="#cb490-60" aria-hidden="true" tabindex="-1"></a><span class="ex">ssync</span> show %name:my_node_sync</span>
<span id="cb490-61"><a href="#cb490-61" aria-hidden="true" tabindex="-1"></a><span class="ex">ssync</span> start %name:my_node_sync</span>
<span id="cb490-62"><a href="#cb490-62" aria-hidden="true" tabindex="-1"></a><span class="ex">ssync</span> state %name:my_node_sync</span>
<span id="cb490-63"><a href="#cb490-63" aria-hidden="true" tabindex="-1"></a><span class="ex">ssync</span> stop %name:my_node_sync</span>
<span id="cb490-64"><a href="#cb490-64" aria-hidden="true" tabindex="-1"></a><span class="ex">ssync</span> summary %name:my_node_sync</span>
<span id="cb490-65"><a href="#cb490-65" aria-hidden="true" tabindex="-1"></a><span class="ex">stream</span> list</span>
<span id="cb490-66"><a href="#cb490-66" aria-hidden="true" tabindex="-1"></a><span class="fu">sync</span> admin status /data/local_sync</span>
<span id="cb490-67"><a href="#cb490-67" aria-hidden="true" tabindex="-1"></a><span class="fu">sync</span> pull /aspera-test-dir-tiny <span class="at">--to-folder</span><span class="op">=</span>/data/local_sync @json:<span class="st">&#39;{&quot;name&quot;:&quot;my_node_sync2&quot;,&quot;reset&quot;:true}&#39;</span></span>
<span id="cb490-68"><a href="#cb490-68" aria-hidden="true" tabindex="-1"></a><span class="fu">sync</span> pull /aspera-test-dir-tiny <span class="at">--to-folder</span><span class="op">=</span>/data/local_sync @json:<span class="st">&#39;{&quot;reset&quot;:true}&#39;</span></span>
<span id="cb490-69"><a href="#cb490-69" aria-hidden="true" tabindex="-1"></a><span class="ex">transfer</span> list <span class="at">--once-only</span><span class="op">=</span>yes</span>
<span id="cb490-70"><a href="#cb490-70" aria-hidden="true" tabindex="-1"></a><span class="ex">transfer</span> list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;active_only&quot;:true}&#39;</span></span>
<span id="cb490-71"><a href="#cb490-71" aria-hidden="true" tabindex="-1"></a><span class="ex">transfer</span> list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;reset&quot;:true}&#39;</span> <span class="at">--once-only</span><span class="op">=</span>yes</span>
<span id="cb490-72"><a href="#cb490-72" aria-hidden="true" tabindex="-1"></a><span class="ex">transfer</span> sessions</span>
<span id="cb490-73"><a href="#cb490-73" aria-hidden="true" tabindex="-1"></a><span class="ex">transport</span></span>
<span id="cb490-74"><a href="#cb490-74" aria-hidden="true" tabindex="-1"></a><span class="ex">upload</span> <span class="at">--to-folder</span><span class="op">=</span>my_upload_folder <span class="at">--sources</span><span class="op">=</span>@ts <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;paths&quot;:[{&quot;source&quot;:&quot;/aspera-test-dir-small/10MB.2&quot;}],&quot;precalculate_job_size&quot;:true}&#39;</span> <span class="at">--transfer</span><span class="op">=</span>node <span class="at">--transfer-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;url&quot;:&quot;https://node.example.com/path@&quot;,&quot;username&quot;:&quot;my_username&quot;,&quot;password&quot;:&quot;my_password_here&quot;}&#39;</span></span>
<span id="cb490-75"><a href="#cb490-75" aria-hidden="true" tabindex="-1"></a><span class="ex">upload</span> <span class="at">--username</span><span class="op">=</span>my_ak_name <span class="at">--password</span><span class="op">=</span>my_ak_secret test_file.bin</span>
<span id="cb490-76"><a href="#cb490-76" aria-hidden="true" tabindex="-1"></a><span class="ex">upload</span> test_file.bin <span class="at">--to-folder</span><span class="op">=</span>my_upload_folder <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;target_rate_cap_kbps&quot;:10000}&#39;</span></span>
<span id="cb490-77"><a href="#cb490-77" aria-hidden="true" tabindex="-1"></a><span class="ex">watch_folder</span> list</span></code></pre></div>
<h2 data-number="8.14" id="open-telemetry"><span class="header-section-number">8.14</span> Open Telemetry</h2>
<p>The <code>node</code> plugin supports Open Telemetry (OTel) for
monitoring and tracing.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>This is an experimental feature and currently only available for the
<code>node</code> plugin and Instana backend.</p></div>
</div>
<p><code>ascli</code> polls the Node API for transfer events and sends
them to an OTel collector.</p>
<p>The command expects the following parameters provided as a
<code>Hash</code> positional parameter:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>url</code></td>
<td><code>String</code></td>
<td>-</td>
<td>URL of the Instana HTTPS backend for OTel.</td>
</tr>
<tr>
<td><code>key</code></td>
<td><code>String</code></td>
<td>-</td>
<td>Agent key for the backend.</td>
</tr>
<tr>
<td><code>interval</code></td>
<td><code>Float</code></td>
<td>10</td>
<td>Polling interval in seconds. <code>0</code> for single shot.</td>
</tr>
</tbody>
</table>
<p>To retrieve OTel backend information: Go to the Instana web
interface, <strong>More</strong> → <strong>Agents</strong> →
<strong>Docker</strong> and identify the agent endpoint and key, e.g.
<code>endpoint=ingress-blue-saas.instana.io</code>. Identify the region
and the endpoint URL will be
<code>https://otlp-[region]-saas.instana.io</code>, i.e. replace
<code>ingress</code> with <code>otlp</code>.</p>
<p>For convenience, those parameters can be provided in a preset, e.g.
named <code>otel_default</code>.</p>
<div class="sourceCode" id="cb491"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb491-1"><a href="#cb491-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset init otel_default @json:<span class="st">&#39;{&quot;url&quot;:&quot;https://otlp-orange-saas.instana.io:4318&quot;,&quot;key&quot;:&quot;*********&quot;,&quot;interval&quot;:1.1}&#39;</span></span></code></pre></div>
<p>Then it is invoked like this (assuming a default node is
configured):</p>
<div class="sourceCode" id="cb492"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb492-1"><a href="#cb492-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> node telemetry @preset:otel_default</span></code></pre></div>
<p>In Instana, create a custom Dashboard to visualize the OTel data:</p>
<ul>
<li>Add Widget: Histogram</li>
<li>Data Source: Infrastructure and Platforms</li>
<li>Metric: search <code>transfer</code></li>
</ul>
<h1 data-number="9" id="plugin-faspex5-ibm-aspera-faspex-v5"><span class="header-section-number">9</span> Plugin: <code>faspex5</code>: IBM
Aspera Faspex v5</h1>
<p>IBM Aspera&#39;s newer self-managed application.</p>
<p>3 authentication methods are supported (option
<code>auth</code>):</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>jwt</code></td>
<td>General purpose, private-key based authentication</td>
</tr>
<tr>
<td><code>web</code></td>
<td>Requires authentication with web browser</td>
</tr>
<tr>
<td><code>public_link</code></td>
<td>Public link authentication (set when option <code>url</code> is a
public link)</td>
</tr>
<tr>
<td><code>boot</code></td>
<td>Use authentication token copied from browser (experimental)</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>If you have a Faspex 5 public link, provide it, unchanged, through
the option <code>url</code></p></div>
</div>
<p>For a quick start, one can use the wizard, which will help to create
an <a href="#option-preset">Option Preset</a>:</p>
<div class="sourceCode" id="cb493"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb493-1"><a href="#cb493-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config wizard</span></code></pre></div>
<pre class="text"><code>argument: url&gt; faspex5.example.com
Multiple applications detected:
+---------+-------------------------------------------+-------------+
| product | url                                       | version     |
+---------+-------------------------------------------+-------------+
| faspex5 | https://faspex5.example.com/aspera/faspex | F5.0.6      |
| server  | ssh://faspex5.example.com:22              | OpenSSH_8.3 |
+---------+-------------------------------------------+-------------+
product&gt; faspex5
Using: Faspex at https://faspex5.example.com/aspera/faspex
Please provide the path to your private RSA key, or nothing to generate one:
option: key_path&gt;
Using existing key:
/Users/someuser/.aspera/ascli/my_key
option: username&gt; someuser@example.com
Ask the ascli client ID and secret to your Administrator.
Admin should login to: https://faspex5.example.com/aspera/faspex
Navigate to: ::  → Admin → Configurations → API clients
Create an API client with:
- name: ascli
- JWT: enabled
Then, logged in as someuser@example.com go to your profile:
() → Account Settings → Preferences -&gt; Public Key in PEM:
-----BEGIN PUBLIC KEY-----
redacted
-----END PUBLIC KEY-----
Once set, fill in the parameters:
option: client_id&gt; _my_key_here_
option: client_secret&gt; ****
Preparing preset: faspex5_example_com_user
Setting config preset as default for faspex5
Done.
You can test with:
ascli faspex5 user profile show
Saving configuration file.</code></pre>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Include the public key <code>BEGIN</code> and <code>END</code> lines
when pasting in the user profile.</p></div>
</div>
<p>For details on the JWT method, see the following section.</p>
<h2 data-number="9.1" id="faspex-5-jwt-authentication"><span class="header-section-number">9.1</span> Faspex 5 JWT
authentication</h2>
<p>This is the general purpose and <strong>recommended</strong> method
to use.</p>
<p>Activation is in two steps:</p>
<ul>
<li><p>The administrator must create an API client in Faspex with JWT
support</p>
<p>This operation is generally done only once:</p>
<ul>
<li>As Admin, Navigate to the web UI: Admin → Configurations → API
Clients → Create</li>
<li>Give a name, like <code>ascli</code></li>
<li>Activate JWT</li>
<li>There is an option to set a global public key allowing the owner of
the private key to impersonate any user. Unless you want to do this,
leave this field empty.</li>
<li>Click on <code>Create</code> Button</li>
<li>Take note of Client ID (and Client Secret, but not used in current
version)</li>
</ul></li>
<li><p>The user will authenticate with a private key and set the public
key in his Faspex 5 profile.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>If you don&#39;t have a private key refer to section <a href="#private-key">Private Key</a> to generate one.</p></div>
</div>
<p>This operation is done by each user using the CLI.</p>
<ul>
<li>As user, click on the user logo, left to the app switcher on top
right.</li>
<li>Select <code>Account Settings</code></li>
<li>on the bottom in the text field:
<code>Public key in PEM format</code> paste the <strong>public</strong>
key corresponding to the private key used by the user.</li>
</ul></li>
</ul>
<p>Then use these options:</p>
<pre class="text"><code>--auth=jwt
--client-id=_client_id_here_
--client-secret=my_secret_here
--username=_username_here_
--private-key=@file:.../path/to/key.pem</code></pre>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The <code>private_key</code> option must contain the PEM
<strong>value</strong> (not file path) of the private key which can be
read from a file using the modifier: <code>@file:</code>, e.g.
<code>@file:/path/to/key.pem</code>.</p></div>
</div>
<p>As usual, typically a user will create preset to avoid having to type
these options each time.</p>
<p>Example:</p>
<div class="sourceCode" id="cb496"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb496-1"><a href="#cb496-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset update myf5 <span class="at">--auth</span><span class="op">=</span>jwt <span class="at">--client-id</span><span class="op">=</span>_client_id_here_ <span class="at">--client-secret</span><span class="op">=</span>my_secret_here <span class="at">--username</span><span class="op">=</span>_username_here_ <span class="at">--private-key</span><span class="op">=</span>@file:.../path/to/key.pem</span>
<span id="cb496-2"><a href="#cb496-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb496-3"><a href="#cb496-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set default faspx5 myf5</span>
<span id="cb496-4"><a href="#cb496-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb496-5"><a href="#cb496-5" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 user profile show</span></code></pre></div>
<h2 data-number="9.2" id="faspex-5-web-authentication"><span class="header-section-number">9.2</span> Faspex 5 web
authentication</h2>
<p>The administrator must create an <strong>API client</strong> in
Faspex for an external web app support:</p>
<ul>
<li>As Admin, Navigate to the web UI: Admin → Configurations → API
Clients → Create</li>
<li>Do not Activate JWT</li>
<li>Set <strong>Redirect URI</strong> to
<code>https://127.0.0.1:8888</code></li>
<li>Click on <code>Create</code> Button</li>
<li>Take note of the Client Id (and Client Secret, but not used in
current version)</li>
</ul>
<p>The user will use the following options:</p>
<pre class="text"><code>--auth=web
--client-id=_client_id_here_
--client-secret=my_secret_here
--redirect-uri=https://127.0.0.1:8888</code></pre>
<h2 data-number="9.3" id="faspex-5-bootstrap-authentication"><span class="header-section-number">9.3</span> Faspex 5 bootstrap
authentication</h2>
<p>For <code>boot</code> method: (will be removed in future)</p>
<ul>
<li>As user: Open a Web Browser</li>
<li>Start developer mode</li>
<li>Login to Faspex 5</li>
<li>Find the first API call with <code>Authorization</code> header, and
copy the value of the token (series of base64 values with dots)</li>
</ul>
<p>Use this token as password and use <code>--auth=boot</code>.</p>
<div class="sourceCode" id="cb498"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb498-1"><a href="#cb498-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset update f5boot <span class="at">--url</span><span class="op">=</span>https://localhost/aspera/faspex <span class="at">--auth</span><span class="op">=</span>boot <span class="at">--password</span><span class="op">=</span>_token_here_</span></code></pre></div>
<h2 data-number="9.4" id="tested-commands-for-faspex5"><span class="header-section-number">9.4</span> Tested commands for
<code>faspex5</code></h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Add <code>ascli faspex5</code> in front of the following
commands:</p></div>
</div>
<div class="sourceCode" id="cb499"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb499-1"><a href="#cb499-1" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> accounts list</span>
<span id="cb499-2"><a href="#cb499-2" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> alternate_addresses list</span>
<span id="cb499-3"><a href="#cb499-3" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> clean_deleted</span>
<span id="cb499-4"><a href="#cb499-4" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> configuration modify @json:<span class="st">&#39;{&quot;mfa_required&quot;:false}&#39;</span></span>
<span id="cb499-5"><a href="#cb499-5" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> configuration show</span>
<span id="cb499-6"><a href="#cb499-6" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> contacts list</span>
<span id="cb499-7"><a href="#cb499-7" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> distribution_lists create @json:<span class="st">&#39;{&quot;name&quot;:&quot;test4&quot;,&quot;contacts&quot;:[{&quot;name&quot;:&quot;john@example.com&quot;}]}&#39;</span></span>
<span id="cb499-8"><a href="#cb499-8" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> distribution_lists delete %name:test4</span>
<span id="cb499-9"><a href="#cb499-9" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> distribution_lists list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;type&quot;:&quot;global&quot;}&#39;</span></span>
<span id="cb499-10"><a href="#cb499-10" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> email_notifications list</span>
<span id="cb499-11"><a href="#cb499-11" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> email_notifications show welcome_email</span>
<span id="cb499-12"><a href="#cb499-12" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> event app <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;max&quot;:20}&#39;</span></span>
<span id="cb499-13"><a href="#cb499-13" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> event web</span>
<span id="cb499-14"><a href="#cb499-14" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> jobs list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;job_type&quot;:&quot;email&quot;,&quot;status&quot;:&quot;failed&quot;}&#39;</span> <span class="at">--fields</span><span class="op">=</span>id,error_desc</span>
<span id="cb499-15"><a href="#cb499-15" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> metadata_profiles list</span>
<span id="cb499-16"><a href="#cb499-16" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node browse %name:Local</span>
<span id="cb499-17"><a href="#cb499-17" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node list</span>
<span id="cb499-18"><a href="#cb499-18" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node shared_folders %name:Local list</span>
<span id="cb499-19"><a href="#cb499-19" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node shared_folders %name:Local show %name:Main</span>
<span id="cb499-20"><a href="#cb499-20" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node shared_folders %name:Local user %name:Main list</span>
<span id="cb499-21"><a href="#cb499-21" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node show %name:Local</span>
<span id="cb499-22"><a href="#cb499-22" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> oauth_clients list</span>
<span id="cb499-23"><a href="#cb499-23" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> registrations list</span>
<span id="cb499-24"><a href="#cb499-24" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> saml_configs list</span>
<span id="cb499-25"><a href="#cb499-25" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> shared_inboxes invite %name:my_shared_box_name johnny@example.com</span>
<span id="cb499-26"><a href="#cb499-26" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> shared_inboxes list</span>
<span id="cb499-27"><a href="#cb499-27" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> shared_inboxes list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;all&quot;:true}&#39;</span></span>
<span id="cb499-28"><a href="#cb499-28" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> shared_inboxes members %name:my_shared_box_name create %name:john@example.com</span>
<span id="cb499-29"><a href="#cb499-29" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> shared_inboxes members %name:my_shared_box_name delete %name:john@example.com</span>
<span id="cb499-30"><a href="#cb499-30" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> shared_inboxes members %name:my_shared_box_name delete %name:johnny@example.com</span>
<span id="cb499-31"><a href="#cb499-31" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> shared_inboxes members %name:my_shared_box_name list</span>
<span id="cb499-32"><a href="#cb499-32" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> smtp create @json:<span class="st">&#39;{&quot;auth_type&quot;:&quot;open&quot;,&quot;server_address&quot;:&quot;smtp.gmail.com&quot;,&quot;server_port&quot;:587,&quot;domain&quot;:&quot;gmail.com&quot;,&quot;tls_enabled&quot;:true,&quot;packages_recipient_from&quot;:&quot;sender&quot;}&#39;</span></span>
<span id="cb499-33"><a href="#cb499-33" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> smtp modify @json:<span class="st">&#39;{&quot;default_time_zone_offset&quot;:&quot;0&quot;}&#39;</span></span>
<span id="cb499-34"><a href="#cb499-34" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> smtp show</span>
<span id="cb499-35"><a href="#cb499-35" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> smtp test my_email_external</span>
<span id="cb499-36"><a href="#cb499-36" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> workgroups list</span>
<span id="cb499-37"><a href="#cb499-37" aria-hidden="true" tabindex="-1"></a><span class="ex">bearer_token</span></span>
<span id="cb499-38"><a href="#cb499-38" aria-hidden="true" tabindex="-1"></a><span class="ex">gateway</span> <span class="at">--pid-file</span><span class="op">=</span>pid_f5_fxgw @json:<span class="st">&#39;{&quot;url&quot;:&quot;https://localhost:12346/aspera/faspex&quot;}&#39;</span> <span class="kw">&amp;</span></span>
<span id="cb499-39"><a href="#cb499-39" aria-hidden="true" tabindex="-1"></a><span class="ex">health</span></span>
<span id="cb499-40"><a href="#cb499-40" aria-hidden="true" tabindex="-1"></a><span class="ex">invitation</span> list</span>
<span id="cb499-41"><a href="#cb499-41" aria-hidden="true" tabindex="-1"></a><span class="ex">invitations</span> create @json:<span class="st">&#39;{&quot;email_address&quot;:&quot;aspera.user1+u@gmail.com&quot;}&#39;</span></span>
<span id="cb499-42"><a href="#cb499-42" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> browse f5_pack_id <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;recursive&quot;:true}&#39;</span></span>
<span id="cb499-43"><a href="#cb499-43" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> delete f5_pack_id</span>
<span id="cb499-44"><a href="#cb499-44" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> list <span class="at">--box</span><span class="op">=</span>ALL</span>
<span id="cb499-45"><a href="#cb499-45" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> list <span class="at">--box</span><span class="op">=</span>my_shared_box_name</span>
<span id="cb499-46"><a href="#cb499-46" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> list <span class="at">--box</span><span class="op">=</span>my_workgroup <span class="at">--group-type</span><span class="op">=</span>workgroups</span>
<span id="cb499-47"><a href="#cb499-47" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> list <span class="at">--box</span><span class="op">=</span>outbox <span class="at">--fields</span><span class="op">=</span>DEF,sender.email,recipients.0.recipient_type</span>
<span id="cb499-48"><a href="#cb499-48" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;mailbox&quot;:&quot;inbox&quot;,&quot;status&quot;:&quot;completed&quot;}&#39;</span></span>
<span id="cb499-49"><a href="#cb499-49" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> receive <span class="at">--box</span><span class="op">=</span>my_shared_box_name package_box_id1 <span class="at">--to-folder</span><span class="op">=</span>.</span>
<span id="cb499-50"><a href="#cb499-50" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> receive <span class="at">--box</span><span class="op">=</span>my_workgroup <span class="at">--group-type</span><span class="op">=</span>workgroups workgroup_package_id1 <span class="at">--to-folder</span><span class="op">=</span>.</span>
<span id="cb499-51"><a href="#cb499-51" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> receive ALL <span class="at">--once-only</span><span class="op">=</span>yes <span class="at">--to-folder</span><span class="op">=</span>.</span>
<span id="cb499-52"><a href="#cb499-52" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> receive INIT <span class="at">--once-only</span><span class="op">=</span>yes</span>
<span id="cb499-53"><a href="#cb499-53" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> receive f5_pack_id <span class="at">--to-folder</span><span class="op">=</span>. <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;content_protection_password&quot;:&quot;my_secret_here&quot;}&#39;</span></span>
<span id="cb499-54"><a href="#cb499-54" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> send <span class="at">--shared-folder</span><span class="op">=</span>%name:my_shared_folder_name @json:<span class="st">&#39;{&quot;title&quot;:&quot;test title&quot;,&quot;recipients&quot;:[&quot;my_email_internal&quot;]}&#39;</span> my_shared_folder_file <span class="at">--fields</span><span class="op">=</span>id <span class="at">--display</span><span class="op">=</span>data <span class="at">--output</span><span class="op">=</span>f5_pack_id</span>
<span id="cb499-55"><a href="#cb499-55" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> send <span class="at">--url</span><span class="op">=</span>my_public_link_send_f5_user @json:<span class="st">&#39;{&quot;title&quot;:&quot;test title&quot;}&#39;</span> test_file.bin</span>
<span id="cb499-56"><a href="#cb499-56" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> send <span class="at">--url</span><span class="op">=</span>my_public_link_send_shared_box @json:<span class="st">&#39;{&quot;title&quot;:&quot;test title&quot;}&#39;</span> test_file.bin</span>
<span id="cb499-57"><a href="#cb499-57" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> send @json:<span class="st">&#39;{&quot;title&quot;:&quot;test title&quot;,&quot;recipients&quot;:[&quot;my_shared_box_name&quot;],&quot;metadata&quot;:{&quot;Options&quot;:&quot;Opt1&quot;,&quot;TextInput&quot;:&quot;example text&quot;}}&#39;</span> test_file.bin</span>
<span id="cb499-58"><a href="#cb499-58" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> send @json:<span class="st">&#39;{&quot;title&quot;:&quot;test title&quot;,&quot;recipients&quot;:[&quot;my_workgroup&quot;]}&#39;</span> test_file.bin</span>
<span id="cb499-59"><a href="#cb499-59" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> send @json:<span class="st">&#39;{&quot;title&quot;:&quot;test title&quot;,&quot;recipients&quot;:[{&quot;name&quot;:&quot;my_username&quot;}]my_meta}&#39;</span> test_file.bin <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;content_protection_password&quot;:&quot;my_secret_here&quot;}&#39;</span></span>
<span id="cb499-60"><a href="#cb499-60" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> show <span class="at">--box</span><span class="op">=</span>my_shared_box_name package_box_id1</span>
<span id="cb499-61"><a href="#cb499-61" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> show <span class="at">--box</span><span class="op">=</span>my_workgroup <span class="at">--group-type</span><span class="op">=</span>workgroups workgroup_package_id1</span>
<span id="cb499-62"><a href="#cb499-62" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> show f5_pack_id</span>
<span id="cb499-63"><a href="#cb499-63" aria-hidden="true" tabindex="-1"></a><span class="ex">packages</span> status f5_pack_id</span>
<span id="cb499-64"><a href="#cb499-64" aria-hidden="true" tabindex="-1"></a><span class="ex">postprocessing</span> <span class="at">--pid-file</span><span class="op">=</span>pid_f5_postproc @json:<span class="st">&#39;{&quot;url&quot;:&quot;https://localhost:8553/asclihook&quot;,&quot;script_folder&quot;:&quot;&quot;,&quot;cert&quot;:&quot;localhost.p12&quot;,&quot;key&quot;:&quot;changeit&quot;}&#39;</span> <span class="kw">&amp;</span></span>
<span id="cb499-65"><a href="#cb499-65" aria-hidden="true" tabindex="-1"></a><span class="ex">shared</span> browse %name:my_src</span>
<span id="cb499-66"><a href="#cb499-66" aria-hidden="true" tabindex="-1"></a><span class="ex">shared</span> list</span>
<span id="cb499-67"><a href="#cb499-67" aria-hidden="true" tabindex="-1"></a><span class="ex">shared_folders</span> browse %name:my_shared_folder_name</span>
<span id="cb499-68"><a href="#cb499-68" aria-hidden="true" tabindex="-1"></a><span class="ex">shared_folders</span> list</span>
<span id="cb499-69"><a href="#cb499-69" aria-hidden="true" tabindex="-1"></a><span class="ex">user</span> account</span>
<span id="cb499-70"><a href="#cb499-70" aria-hidden="true" tabindex="-1"></a><span class="ex">user</span> profile modify @json:<span class="st">&#39;{&quot;preference&quot;:{&quot;connect_disabled&quot;:false}}&#39;</span></span>
<span id="cb499-71"><a href="#cb499-71" aria-hidden="true" tabindex="-1"></a><span class="ex">user</span> profile show</span>
<span id="cb499-72"><a href="#cb499-72" aria-hidden="true" tabindex="-1"></a><span class="ex">version</span></span></code></pre></div>
<p>Most commands are directly REST API calls. Parameters to commands are
carried through option <code>query</code>, as extended value, for
<code>list</code>, or through <strong>Command Parameter</strong> for
creation. One can conveniently use the JSON format with prefix
<code>@json:</code>.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The API is listed in <a href="https://developer.ibm.com/apis/catalog?search=&quot;faspex+5&quot;">Faspex
5 API Reference</a> under <strong>IBM Aspera Faspex API</strong>.</p></div>
</div>
<h2 data-number="9.5" id="faspex-5-inbox-selection"><span class="header-section-number">9.5</span> Faspex 5: Inbox selection</h2>
<p>By default, package operations (send, receive, list) are done on the
user&#39;s inbox.</p>
<p>To select another inbox, use option <code>box</code> with one of the
following values:</p>
<table>
<thead>
<tr>
<th><code>box</code></th>
<th>Comment</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>inbox</code></td>
<td>Default</td>
</tr>
<tr>
<td><code>inbox_history</code></td>
<td></td>
</tr>
<tr>
<td><code>inbox_all</code></td>
<td></td>
</tr>
<tr>
<td><code>inbox_all_history</code></td>
<td></td>
</tr>
<tr>
<td><code>outbox</code></td>
<td></td>
</tr>
<tr>
<td><code>outbox_history</code></td>
<td></td>
</tr>
<tr>
<td><code>pending</code></td>
<td></td>
</tr>
<tr>
<td><code>pending_history</code></td>
<td></td>
</tr>
<tr>
<td><code>all</code></td>
<td></td>
</tr>
<tr>
<td><code>ALL</code></td>
<td><strong>admin only</strong>, all inboxes of all users</td>
</tr>
<tr>
<td>Any other value</td>
<td>Name of a shared inbox if <code>group_type</code> is
<code>shared_inboxes</code> (default)<br />or workgroup if
<code>group_type</code> is <code>workgroups</code></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>In case the name of the <code>box</code> is an open value, use option
<code>group_type</code> with either <code>shared_inboxes</code> or
<code>workgroups</code>.</p></div>
</div>
<h2 data-number="9.6" id="faspex-5-send-a-package"><span class="header-section-number">9.6</span> Faspex 5: Send a package</h2>
<p>A package can be sent with the command:</p>
<div class="sourceCode" id="cb500"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb500-1"><a href="#cb500-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 packages send [extended value: Hash with package info] <span class="pp">[</span><span class="ss">files...</span><span class="pp">]</span></span></code></pre></div>
<p>The <code>Hash</code> creation <strong>Command Parameter</strong>
provided to command corresponds to the Faspex 5 API:
<code>POST /packages</code> (refer to the API reference for a full list
of parameters, or look at request in browser).</p>
<p>Required fields are <code>title</code> and
<code>recipients</code>.</p>
<p>Example (assuming a default preset is created for the connection
information):</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb501-1"><a href="#cb501-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 packages send @json:<span class="st">&#39;{&quot;title&quot;:&quot;some title&quot;,&quot;recipients&quot;:[&quot;user@example.com&quot;]}&#39;</span> mybygfile1</span></code></pre></div>
<p>Longer example for the payload of <code>@json:</code>:</p>
<div class="sourceCode" id="cb502"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb502-1"><a href="#cb502-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;title&quot;</span><span class="fu">:</span><span class="st">&quot;some title&quot;</span><span class="fu">,</span><span class="dt">&quot;recipients&quot;</span><span class="fu">:</span><span class="ot">[</span><span class="fu">{</span><span class="dt">&quot;recipient_type&quot;</span><span class="fu">:</span><span class="st">&quot;user&quot;</span><span class="fu">,</span><span class="dt">&quot;name&quot;</span><span class="fu">:</span><span class="st">&quot;user@example.com&quot;</span><span class="fu">}</span><span class="ot">]</span><span class="fu">}</span></span></code></pre></div>
<p><code>recipient_type</code> is one of (Refer to API):</p>
<ul>
<li><code>user</code></li>
<li><code>workgroup</code></li>
<li><code>external_user</code></li>
<li><code>distribution_list</code></li>
<li><code>shared_inbox</code></li>
</ul>
<p><code>ascli</code> adds some convenience: The API expects the field
<code>recipients</code> to be an <code>Array</code> of
<code>Hash</code>, each with field <code>name</code> and optionally
<code>recipient_type</code>. <code>ascli</code> also accepts an
<code>Array</code> of <code>String</code>, with simply a recipient name.
Then, <code>ascli</code> will look up existing contacts among all
possible types, use it if a single match is found, and set the
<code>name</code> and <code>recipient_type</code> accordingly. Else an
exception is sent.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The lookup is case-insensitive and on partial matches.</p></div>
</div>
<div class="sourceCode" id="cb503"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb503-1"><a href="#cb503-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;title&quot;</span><span class="fu">:</span><span class="st">&quot;some title&quot;</span><span class="fu">,</span><span class="dt">&quot;recipients&quot;</span><span class="fu">:</span><span class="ot">[</span><span class="st">&quot;user@example.com&quot;</span><span class="ot">]</span><span class="fu">}</span></span></code></pre></div>
<p>If the lookup needs to be only on certain types, you can specify the
field: <code>recipient_types</code> with either a single value or an
<code>Array</code> of values (from the list above). e.g. :</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb504-1"><a href="#cb504-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;title&quot;</span><span class="fu">:</span><span class="st">&quot;test title&quot;</span><span class="fu">,</span><span class="dt">&quot;recipient_types&quot;</span><span class="fu">:</span><span class="st">&quot;user&quot;</span><span class="fu">,</span><span class="dt">&quot;recipients&quot;</span><span class="fu">:</span><span class="ot">[</span><span class="st">&quot;user1@example.com&quot;</span><span class="ot">,</span><span class="st">&quot;user2@example.com&quot;</span><span class="ot">]</span><span class="fu">}</span></span></code></pre></div>
<h2 data-number="9.7" id="faspex-5-send-a-package-with-metadata"><span class="header-section-number">9.7</span> Faspex 5: Send a package with
metadata</h2>
<p>It&#39;s the same as sending a package, but with an extra field
<code>metadata</code> in the package info.</p>
<div class="sourceCode" id="cb505"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb505-1"><a href="#cb505-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;title&quot;</span><span class="fu">:</span><span class="st">&quot;test title&quot;</span><span class="fu">,</span><span class="dt">&quot;recipients&quot;</span><span class="fu">:</span><span class="ot">[</span><span class="st">&quot;my shared inbox&quot;</span><span class="ot">]</span><span class="fu">,</span><span class="dt">&quot;metadata&quot;</span><span class="fu">:{</span><span class="dt">&quot;Confidential&quot;</span><span class="fu">:</span><span class="st">&quot;Yes&quot;</span><span class="fu">,</span><span class="dt">&quot;Drop menu&quot;</span><span class="fu">:</span><span class="st">&quot;Option 1&quot;</span><span class="fu">}}</span></span></code></pre></div>
<p>Basically, add the field <code>metadata</code>, with one key per
metadata and the value is directly the metadata value. (Refer to API
documentation for more details).</p>
<h2 data-number="9.8" id="faspex-5-list-packages"><span class="header-section-number">9.8</span> Faspex 5: List packages</h2>
<p>Option <code>box</code> can be used to list packages from a specific
box (see <a href="#faspex-5-inbox-selection">Inbox Selection</a>
above).</p>
<p>Option <code>query</code> can be used to filter the list of packages,
based on native API parameters, directly sent to <a href="https://developer.ibm.com/apis/catalog/aspera--ibm-aspera-faspex-5-0-api/api/API--aspera--ibm-aspera-faspex-api#getAllPackages">Faspex
5 API <code>GET /packages</code></a>.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>offset</code></td>
<td>Native</td>
<td>Managed by <code>ascli</code>: Offset of first package. Default:
0</td>
</tr>
<tr>
<td><code>limit</code></td>
<td>Native</td>
<td>Managed by <code>ascli</code>: # of packages per API call. Default:
100</td>
</tr>
<tr>
<td><code>q</code></td>
<td>Native</td>
<td>General search string (case-insensitive, matches if value is
contained in several fields)</td>
</tr>
<tr>
<td>...</td>
<td>Native</td>
<td>Other native parameters are supported (Refer to API
documentation)</td>
</tr>
<tr>
<td><code>max</code></td>
<td>Special</td>
<td>Maximum number of items to retrieve (stop pages when the maximum is
passed)</td>
</tr>
<tr>
<td><code>pmax</code></td>
<td>Special</td>
<td>Maximum number of pages to request (stop pages when the maximum is
passed)</td>
</tr>
</tbody>
</table>
<p>A <strong>Command Parameter</strong> in last position, of type
<code>Proc</code>, can be used to filter the list of packages. This
advantage of this method is that the expression can be any test, even
complex, as it is Ruby code. But the disadvantage is that the filtering
is done in <code>ascli</code> and not in Faspex 5, so it is less
efficient.</p>
<p>Examples:</p>
<ul>
<li><p>List only available packages: (filtering is done in Faspex)</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb506-1"><a href="#cb506-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 packages list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;status&quot;:&quot;completed&quot;}&#39;</span></span></code></pre></div></li>
<li><p>Similar, using filtering in <code>ascli</code>:</p>
<div class="sourceCode" id="cb507"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb507-1"><a href="#cb507-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 packages list @ruby:<span class="st">&#39;-&gt;(p){p[&quot;state&quot;].eql?(&quot;released&quot;)}&#39;</span></span></code></pre></div></li>
</ul>
<h2 data-number="9.9" id="faspex-5-browsing-folder-content"><span class="header-section-number">9.9</span> Faspex 5: Browsing folder
content</h2>
<p>Several entities support folder browsing: Packages, Nodes, Shared
Folders. All support two modes: paging and legacy API. By default,
paging is used.</p>
<p>Option <code>query</code> is available with parameters supported by
the API and <code>ascli</code> :</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Evaluation</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>paging</code></td>
<td><code>ascli</code></td>
<td>Use paging API. Default: <code>true</code></td>
</tr>
<tr>
<td><code>recursive</code></td>
<td><code>ascli</code></td>
<td>List inside folders. Default: <code>false</code></td>
</tr>
<tr>
<td><code>max</code></td>
<td><code>ascli</code></td>
<td>Maximum number of items.</td>
</tr>
<tr>
<td><code>filter</code></td>
<td>API</td>
<td>Refer to API doc. Default: <code>{&quot;basenames&quot;:[]}</code></td>
</tr>
<tr>
<td><code>offset</code></td>
<td>API (legacy)</td>
<td>Index of first item. Default: <code>0</code></td>
</tr>
<tr>
<td><code>limit</code></td>
<td>API (legacy)</td>
<td>Number of items in one API call result. Default:
<code>500</code></td>
</tr>
<tr>
<td><code>per_page</code></td>
<td>API (paging)</td>
<td>Number of items in one API call result. Default:
<code>500</code></td>
</tr>
</tbody>
</table>
<h2 data-number="9.10" id="faspex-5-content-of-a-received-package"><span class="header-section-number">9.10</span> Faspex 5: Content of a
received Package</h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Listing content also applies to sent packages using
<code>--box=outbox</code>.</p></div>
</div>
<p>To list the content of a received package, use command
<code>faspex5 packages browse &lt;package id&gt;</code>. Optionally,
provide a folder path.</p>
<h2 data-number="9.11" id="faspex-5-receive-a-package"><span class="header-section-number">9.11</span> Faspex 5: Receive a
package</h2>
<p>To receive one, or several packages at once, use command
<code>faspex5 packages receive</code>. Provide either a single package
ID, or an extended value <code>Array</code> of package IDs, e.g.
<code>@list:,1,2,3</code> as argument.</p>
<p>The same options as for <code>faspex5 packages list</code> can be
used to select the box and filter the packages to download. I.e. options
<code>box</code> and <code>query</code>, as well as last <strong>Command
Parameter</strong> <code>Proc</code> (filter).</p>
<p>Option <code>--once-only=yes</code> can be used, for &quot;cargo-like&quot;
behavior. Special package ID <code>INIT</code> initializes the
persistency of already received packages when option
<code>--once-only=yes</code> is used.</p>
<p>Special package ID <code>ALL</code> selects all packages (of the
selected box). In this case, typically, only <code>completed</code>
packages should be downloaded, so use option
<code>--query=@json:&#39;{&quot;status&quot;:&quot;completed&quot;}&#39;</code>.</p>
<p>If a package is password protected, then the content protection
password is asked interactively. To keep the content encrypted, use
option: <code>--ts=@json:&#39;{&quot;content_protection&quot;:null}&#39;</code>, or
provide the password instead of <code>null</code>.</p>
<blockquote>
<p><strong>Tip:</strong> If you use option <code>query</code> and/or
positional <code>filter</code>, you can use the <code>list</code>
command for a dry run.</p>
</blockquote>
<h2 data-number="9.12" id="faspex-5-list-all-shared-inboxes-and-work-groups"><span class="header-section-number">9.12</span> Faspex 5: List all shared
inboxes and work groups</h2>
<p>If you are a regular user, to list work groups you belong to:</p>
<div class="sourceCode" id="cb508"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb508-1"><a href="#cb508-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 admin workgroup list</span></code></pre></div>
<p>If you are admin or manager, add option:
<code>--query=@json:&#39;{&quot;all&quot;:true}&#39;</code>, this will list items you
manage, even if you do not belong to them. Example:</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb509-1"><a href="#cb509-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 admin shared list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;all&quot;:true}&#39;</span> <span class="at">--fields</span><span class="op">=</span>id,name</span></code></pre></div>
<p>Shared inbox members can also be listed, added, removed, and external
users can be invited to a shared inbox.</p>
<div class="sourceCode" id="cb510"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb510-1"><a href="#cb510-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 admin shared_inboxes invite <span class="st">&#39;%name:the shared inbox&#39;</span> john@example.com</span></code></pre></div>
<p>It is equivalent to:</p>
<div class="sourceCode" id="cb511"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb511-1"><a href="#cb511-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 admin shared_inboxes invite <span class="st">&#39;%name:the shared inbox&#39;</span> @json:<span class="st">&#39;{&quot;email_address&quot;:&quot;john@example.com&quot;}&#39;</span></span></code></pre></div>
<p>Other payload parameters are possible for <code>invite</code> in this
last <code>Hash</code> <strong>Command Parameter</strong>:</p>
<div class="sourceCode" id="cb512"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb512-1"><a href="#cb512-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;description&quot;</span><span class="fu">:</span><span class="st">&quot;blah&quot;</span><span class="fu">,</span><span class="dt">&quot;prevent_http_upload&quot;</span><span class="fu">:</span><span class="kw">true</span><span class="fu">,</span><span class="dt">&quot;custom_link_expiration_policy&quot;</span><span class="fu">:</span><span class="kw">false</span><span class="fu">,</span><span class="dt">&quot;invitation_expires_after_upload&quot;</span><span class="fu">:</span><span class="kw">false</span><span class="fu">,</span><span class="dt">&quot;set_invitation_link_expiration&quot;</span><span class="fu">:</span><span class="kw">false</span><span class="fu">,</span><span class="dt">&quot;invitation_expiration_days&quot;</span><span class="fu">:</span><span class="dv">3</span><span class="fu">}</span></span></code></pre></div>
<h2 data-number="9.13" id="faspex-5-create-metadata-profile"><span class="header-section-number">9.13</span> Faspex 5: Create Metadata
profile</h2>
<div class="sourceCode" id="cb513"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb513-1"><a href="#cb513-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 admin metadata_profiles create @json:<span class="st">&#39;{&quot;name&quot;:&quot;the profile&quot;,&quot;default&quot;:false,&quot;title&quot;:{&quot;max_length&quot;:200,&quot;illegal_chars&quot;:[]},&quot;note&quot;:{&quot;max_length&quot;:400,&quot;illegal_chars&quot;:[],&quot;enabled&quot;:false},&quot;fields&quot;:[{&quot;ordering&quot;:0,&quot;name&quot;:&quot;field1&quot;,&quot;type&quot;:&quot;text_area&quot;,&quot;require&quot;:true,&quot;illegal_chars&quot;:[],&quot;max_length&quot;:100},{&quot;ordering&quot;:1,&quot;name&quot;:&quot;fff2&quot;,&quot;type&quot;:&quot;option_list&quot;,&quot;require&quot;:false,&quot;choices&quot;:[&quot;opt1&quot;,&quot;opt2&quot;]}]}&#39;</span></span></code></pre></div>
<h2 data-number="9.14" id="faspex-5-create-a-shared-inbox-with-specific-metadata-profile"><span class="header-section-number">9.14</span> Faspex 5: Create a Shared
inbox with specific metadata profile</h2>
<div class="sourceCode" id="cb514"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb514-1"><a href="#cb514-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 admin shared create @json:<span class="st">&#39;{&quot;name&quot;:&quot;the shared inbox&quot;,&quot;metadata_profile_id&quot;:1}&#39;</span></span></code></pre></div>
<h2 data-number="9.15" id="faspex-5-list-content-in-shared-folder-and-send-package-from-remote-source"><span class="header-section-number">9.15</span> Faspex 5: List content in
Shared folder and send package from remote source</h2>
<div class="sourceCode" id="cb515"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb515-1"><a href="#cb515-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 shared_folders list <span class="at">--fields</span><span class="op">=</span>id,name</span></code></pre></div>
<div class="sourceCode" id="cb516"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb516-1"><a href="#cb516-1" aria-hidden="true" tabindex="-1"></a>+----+----------+</span>
<span id="cb516-2"><a href="#cb516-2" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> id <span class="pp">|</span> name     <span class="pp">|</span></span>
<span id="cb516-3"><a href="#cb516-3" aria-hidden="true" tabindex="-1"></a>+----+----------+</span>
<span id="cb516-4"><a href="#cb516-4" aria-hidden="true" tabindex="-1"></a><span class="pp">|</span> 3  <span class="pp">|</span> partages <span class="pp">|</span></span>
<span id="cb516-5"><a href="#cb516-5" aria-hidden="true" tabindex="-1"></a>+----+----------+</span></code></pre></div>
<div class="sourceCode" id="cb517"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb517-1"><a href="#cb517-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 shared_folders br %name:partages /folder</span></code></pre></div>
<div class="sourceCode" id="cb518"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb518-1"><a href="#cb518-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 packages send @json:<span class="st">&#39;{&quot;title&quot;:&quot;hello&quot;,&quot;recipients&quot;:[{&quot;name&quot;:&quot;_recipient_here_&quot;}]}&#39;</span> <span class="at">--shared-folder</span><span class="op">=</span>%name:partages /folder/file</span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The shared folder can be identified by its numerical <code>id</code>
or by name using percent selector:
<code>%&lt;field&gt;:&lt;value&gt;</code>. e.g.
<code>--shared-folder=3</code></p></div>
</div>
<h2 data-number="9.16" id="faspex-5-receive-all-packages-cargo"><span class="header-section-number">9.16</span> Faspex 5: Receive all packages
(cargo)</h2>
<p>To receive all packages, only once, through persistency of already
received packages:</p>
<div class="sourceCode" id="cb519"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb519-1"><a href="#cb519-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 packages receive ALL <span class="at">--once-only</span><span class="op">=</span>yes <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;status&quot;:&quot;completed&quot;}&#39;</span></span></code></pre></div>
<p>To initialize, and skip all current package so that next time
<code>ALL</code> is used, only newer packages are downloaded:</p>
<div class="sourceCode" id="cb520"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb520-1"><a href="#cb520-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 packages receive INIT <span class="at">--once-only</span><span class="op">=</span>yes</span></code></pre></div>
<h2 data-number="9.17" id="faspex-5-invitations"><span class="header-section-number">9.17</span> Faspex 5: Invitations</h2>
<p>There are two types of invitations of package submission: public or
private.</p>
<p>Public invitations are for external users, provide just the email
address.</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb521-1"><a href="#cb521-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 invitations create @json:<span class="st">&#39;{&quot;email_address&quot;:&quot;john@example.com&quot;}&#39;</span> <span class="at">--fields</span><span class="op">=</span>access_url</span></code></pre></div>
<p>Private invitations are for internal users, provide the user or
shared inbox identifier through field <code>recipient_name</code>.</p>
<h2 data-number="9.18" id="faspex-5-cleanup-packages"><span class="header-section-number">9.18</span> Faspex 5: Cleanup
packages</h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Operation requires admin level.</p></div>
</div>
<p>The default automated cleanup period can be displayed with:</p>
<div class="sourceCode" id="cb522"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb522-1"><a href="#cb522-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 admin configuration show <span class="at">--fields</span><span class="op">=</span>days_before_deleting_package_records</span></code></pre></div>
<p>This parameter can be modified with:</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb523-1"><a href="#cb523-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 admin configuration modify @json:<span class="st">&#39;{&quot;days_before_deleting_package_records&quot;:30}&#39;</span></span></code></pre></div>
<p>To start package purge, i.e. permanently remove packages marked for
deletion older than <code>days_before_deleting_package_records</code>,
use command:</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb524-1"><a href="#cb524-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 admin clean_deleted</span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The expiration period taken by default is the one from
<code>admin configuration show</code>. To use a different period than
the default, specify it on command line with:
<code>@json:&#39;{&quot;days_before_deleting_package_records&quot;:15}&#39;</code></p></div>
</div>
<p>To delete all packages, one can use the following command:</p>
<div class="sourceCode" id="cb525"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb525-1"><a href="#cb525-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 packages list <span class="at">--box</span><span class="op">=</span>ALL <span class="at">--format</span><span class="op">=</span>yaml <span class="at">--fields</span><span class="op">=</span>id <span class="kw">|</span> <span class="ex">ascli</span> faspex5 packages delete @yaml:@stdin:</span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Above command will mark all packages for deletion, and will be
permanently removed after the configured period
(<code>clean_deleted</code> command). It is possible to add a filter to
the list command to only delete packages matching some criteria, e.g.
using <code>--select=@ruby:&#39;-&gt;(p){...}&#39;</code> on
<code>packages list</code>.</p></div>
</div>
<h2 data-number="9.19" id="faspex-5-admin-unlock-user"><span class="header-section-number">9.19</span> Faspex 5: Admin: Unlock
user</h2>
<p>To unlock a user, you can deactivate and then re-activate the
user:</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb526-1"><a href="#cb526-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 admin accounts modify %name:some.user@example.com @json:<span class="st">&#39;{&quot;account_activated&quot;:false}&#39;</span></span></code></pre></div>
<div class="sourceCode" id="cb527"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb527-1"><a href="#cb527-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 admin accounts modify %name:some.user@example.com @json:<span class="st">&#39;{&quot;account_activated&quot;:true}&#39;</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Here we use the convenient percent selector, but the numerical ID can
be used as well.</p></div>
</div>
<p>To send a password reset link to a user, use command
<code>reset_password</code> on the <code>account</code>.</p>
<h2 data-number="9.20" id="faspex-5-faspex-4-style-post-processing"><span class="header-section-number">9.20</span> Faspex 5: Faspex 4-style
post-processing</h2>
<p>The command <code>ascli faspex5 postprocessing</code> emulates Faspex
4 post-processing script execution in Faspex 5. It implements a web hook
for Faspex 5 and calls a script with the same environment variables as
set by Faspex 4. Environment variables at set to the values provided by
the web hook which are the same as Faspex 4 post-processing.</p>
<p>It allows to quickly migrate workflows from Faspex 4 to Faspex 5
while preserving scripts. Nevertheless, on long term, a native approach
shall be considered, such as using Aspera Orchestrator or other workflow
engine, using Faspex 5 native web hooks or File Processing.</p>
<p>It is invoked like this:</p>
<div class="sourceCode" id="cb528"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb528-1"><a href="#cb528-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 postprocessing</span></code></pre></div>
<p>An optional positional parameter can be provided as extended value
<code>Hash</code>:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>server info</strong></td>
<td>-</td>
<td>-</td>
<td>See <a href="#web-service">Web service</a>.</td>
</tr>
<tr>
<td><code>script_folder</code></td>
<td><code>String</code></td>
<td><code>.</code></td>
<td>Prefix added to script path (Default: CWD)</td>
</tr>
<tr>
<td><code>fail_on_error</code></td>
<td><code>Bool</code></td>
<td>false</td>
<td>Fail if true and process exits with non-zero code</td>
</tr>
<tr>
<td><code>timeout_seconds</code></td>
<td><code>Integer</code></td>
<td>60</td>
<td>Time out before script is killed</td>
</tr>
</tbody>
</table>
<p>When a request on <code>ascli</code> is received the following
happens:</p>
<ul>
<li><code>ascli</code> gets the path of the URL called</li>
<li>It removes the <strong>base path</strong> of base URL.</li>
<li>It prepends it with the value of <code>script_folder</code></li>
<li>It executes the script at that path</li>
<li>Upon success, a success code is returned</li>
</ul>
<p>For example:</p>
<div class="sourceCode" id="cb529"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb529-1"><a href="#cb529-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 postprocessing @json:<span class="st">&#39;{&quot;url&quot;:&quot;http://localhost:8080/processing&quot;,&quot;script_folder&quot;:&quot;/opt/scripts&quot;}&#39;</span></span></code></pre></div>
<p>In Faspex 5, the URL of the webhook endpoint shall be reachable from
within Faspex containers. For example, if <code>ascli</code> in running
in the base host, the URL hostname shall not be localhost, as this
refers to the local address inside Faspex container. Instead, one can
specify the <strong>IP address of the host</strong> or
<code>host.containers.internal</code> (Check <code>podman</code>
manual).</p>
<p>Let&#39;s define the web hook:</p>
<p><strong>Webhook endpoint URI</strong> :
<code>http://host.containers.internal:8080/processing/script1.sh</code></p>
<p>Then the post-processing script executed will be
<code>/opt/scripts/script1.sh</code>.</p>
<h2 data-number="9.21" id="faspex-5-faspex-4-gateway"><span class="header-section-number">9.21</span> Faspex 5: Faspex 4
Gateway</h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>This is not a feature for production. It&#39;s provided for testing
only.</p></div>
</div>
<p>For legacy Faspex client applications that use the <code>send</code>
API (only) of Faspex v4, the command <code>gateway</code> provides the
capability to present an API compatible with Faspex 4, and it will call
the Faspex 5 API.</p>
<p>It takes a single argument which is the URL at which the gateway will
be located (locally):</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb530-1"><a href="#cb530-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex5 gateway @json:<span class="st">&#39;{&quot;url&quot;:&quot;https://localhost:12345/aspera/faspex&quot;}&#39;</span></span></code></pre></div>
<p>There are many limitations:</p>
<ul>
<li>It&#39;s only to emulate the Faspex 4 <code>send</code> API (send
package).</li>
<li>No support for remote sources, only for an actual file transfer by
the client.</li>
<li>The client must use the transfer spec returned by the API (not
<code>faspe:</code> URL).</li>
<li>Tags returned in transfer spec must be used in transfer.</li>
<li>Only a single authentication is possible (per gateway) on
Faspex5.</li>
<li>No authentication of F4 side (ignored).</li>
</ul>
<p>Behavior: The API client calls the Faspex 4 API on the gateway, then
the gateway transforms this into a Faspex5 API call, which returns a
transfer spec, which is returned to the calling client. The calling
client uses this to start a transfer to HSTS which is actually managed
by Faspex 5.</p>
<p>For other parameters, see <a href="#web-service">Web service</a>.</p>
<h2 data-number="9.22" id="faspex-5-get-bearer-token-to-use-api"><span class="header-section-number">9.22</span> Faspex 5: Get Bearer token to
use API</h2>
<p>If a command is missing, then it is still possible to execute command
by calling directly the API on the command line using
<code>curl</code>:</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb531-1"><a href="#cb531-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-H</span> <span class="st">&quot;Authorization: </span><span class="va">$(</span><span class="ex">ascli</span> ascli bearer<span class="va">)</span><span class="st">&quot;</span> https://faspex5.example.com/aspera/faspex/api/v5/api_endpoint_here</span></code></pre></div>
<h1 data-number="10" id="plugin-faspex-ibm-aspera-faspex-v4"><span class="header-section-number">10</span> Plugin: <code>faspex</code>: IBM
Aspera Faspex v4</h1>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Faspex v4 is end of support since Sept. 30th, 2024. So this plugin
for Faspex v4 is deprecated. If you still need to use Faspex4, then use
<code>ascli</code> version 4.19.0 or earlier.</p></div>
</div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>For full details on Faspex API, refer to: <a href="https://developer.ibm.com/apis/catalog/?search=faspex">Reference
on Developer Site</a></p></div>
</div>
<p>This plugin uses APIs versions 3 Faspex v4. The <code>v4</code>
command requires the use of API v4, refer to the Faspex Admin manual on
how to activate.</p>
<h2 data-number="10.1" id="listing-packages"><span class="header-section-number">10.1</span> Listing Packages</h2>
<p>Command: <code>faspex package list</code></p>
<h3 data-number="10.1.1" id="option-box"><span class="header-section-number">10.1.1</span> Option <code>box</code></h3>
<p>By default, it looks in box <code>inbox</code>, but the following
boxes are also supported: <code>archive</code> and <code>sent</code>,
selected with option <code>box</code>.</p>
<h3 data-number="10.1.2" id="option-recipient"><span class="header-section-number">10.1.2</span> Option
<code>recipient</code></h3>
<p>A user can receive a package because the recipient is:</p>
<ul>
<li>The user himself (default)</li>
<li>The user is member of a dropbox/workgroup: filter using option
<code>recipient</code> set with value
<code>*&lt;name of dropbox/workgroup&gt;</code></li>
</ul>
<h3 data-number="10.1.3" id="option-query-1"><span class="header-section-number">10.1.3</span> Option
<code>query</code></h3>
<p>As inboxes may be large, it is possible to use the following query
parameters:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Evaluation</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>count</code></td>
<td>API</td>
<td>Number of items in one API call result (default=0, equivalent to
10)</td>
</tr>
<tr>
<td><code>page</code></td>
<td>API</td>
<td>ID of page in call (default=0)</td>
</tr>
<tr>
<td><code>startIndex</code></td>
<td>API</td>
<td>Index of item to start (default=0)</td>
</tr>
<tr>
<td><code>max</code></td>
<td><code>ascli</code></td>
<td>Maximum number of items</td>
</tr>
<tr>
<td><code>pmax</code></td>
<td><code>ascli</code></td>
<td>Maximum number of pages</td>
</tr>
</tbody>
</table>
<p>(SQL query is
<code>LIMIT &lt;startIndex&gt;, &lt;count&gt;</code>)</p>
<p>The API is listed in <a href="https://developer.ibm.com/apis/catalog/?search=faspex">Faspex 4
API Reference</a> under <strong>Services (API v.3)</strong>.</p>
<p>If no parameter <code>max</code> or <code>pmax</code> is provided,
then all packages will be listed in the inbox, which result in paged API
calls (using parameter: <code>count</code> and <code>page</code>). By
default, <code>count</code> is <code>0</code> (<code>10</code>), it can
be increased to issue less HTTP calls.</p>
<h3 data-number="10.1.4" id="example-list-packages-in-dropbox"><span class="header-section-number">10.1.4</span> Example: List packages in
dropbox</h3>
<div class="sourceCode" id="cb532"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb532-1"><a href="#cb532-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex package list <span class="at">--box</span><span class="op">=</span>inbox <span class="at">--recipient</span><span class="op">=</span><span class="st">&#39;*my_dropbox&#39;</span> <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;max&quot;:20,&quot;pmax&quot;:2,&quot;count&quot;:20}&#39;</span></span></code></pre></div>
<p>List a maximum of 20 items grouped by pages of 20, with maximum 2
pages in received box (inbox) when received in dropbox
<code>*my_dropbox</code>.</p>
<h2 data-number="10.2" id="receiving-a-package"><span class="header-section-number">10.2</span> Receiving a Package</h2>
<p>The command is <code>package recv</code>, possible methods are:</p>
<ul>
<li>Provide a package ID with option <code>id</code></li>
<li>Provide a public link with option <code>link</code></li>
<li>Provide a <code>faspe:</code> URI with option <code>link</code></li>
</ul>
<div class="sourceCode" id="cb533"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb533-1"><a href="#cb533-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex package recv 12345</span>
<span id="cb533-2"><a href="#cb533-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex package recv <span class="at">--link</span><span class="op">=</span>faspe://...</span></code></pre></div>
<p>If the package is in a specific
<strong>dropbox</strong>/<strong>workgroup</strong>, add option
<code>recipient</code> for both the <code>list</code> and
<code>recv</code> commands.</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb534-1"><a href="#cb534-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex package list <span class="at">--recipient</span><span class="op">=</span><span class="st">&#39;*dropbox_name&#39;</span></span>
<span id="cb534-2"><a href="#cb534-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex package recv 125 <span class="at">--recipient</span><span class="op">=</span><span class="st">&#39;*dropbox_name&#39;</span></span></code></pre></div>
<p>If <code>id</code> is set to <code>ALL</code>, then all packages are
downloaded, and if option <code>once_only</code>is used, then a
persistency file is created to keep track of already downloaded
packages.</p>
<h2 data-number="10.3" id="sending-a-package"><span class="header-section-number">10.3</span> Sending a Package</h2>
<p>The command is <code>faspex package send</code>. Package information
(title, note, metadata, options) is provided in option
<code>delivery_info</code>. The content of <code>delivery_info</code> is
directly the contents of the <code>send</code> v3 <a href="https://developer.ibm.com/apis/catalog/aspera--aspera-faspex-client-sdk/API%20v.3:%20Send%20Packages">API
of Faspex 4</a>.</p>
<p>Example:</p>
<div class="sourceCode" id="cb535"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb535-1"><a href="#cb535-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex package send <span class="at">--delivery-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;title&quot;:&quot;my title&quot;,&quot;recipients&quot;:[&quot;someuser@example.com&quot;]}&#39;</span> /tmp/file1 /home/bar/file2</span></code></pre></div>
<p>If the recipient is a dropbox or workgroup: provide the name of the
dropbox or workgroup preceded with <code>*</code> in the
<code>recipients</code> field of the <code>delivery_info</code> option:
<code>&quot;recipients&quot;:[&quot;*MyDropboxName&quot;]</code></p>
<p>Additional optional parameters in mandatory option
<code>delivery_info</code>:</p>
<ul>
<li>Package Note: : <code>&quot;note&quot;:&quot;note this and that&quot;</code></li>
<li>Package Metadata:
<code>&quot;metadata&quot;:{&quot;Meta1&quot;:&quot;Val1&quot;,&quot;Meta2&quot;:&quot;Val2&quot;}</code></li>
</ul>
<p>It is possible to send from a remote source using option
<code>remote_source</code>, providing either the numerical ID, or the
name of the remote source using percent selector:
<code>%name:&lt;name&gt;</code>.</p>
<p>Remote source can be browsed if option <code>storage</code> is
provided. <code>storage</code> is a <code>Hash</code> extended value.
The key is the storage name, as listed in <code>source list</code>
command. The value is a <code>Hash</code> with the following keys:</p>
<ul>
<li><code>node</code> is a <code>Hash</code> with keys:
<code>url</code>, <code>username</code>, <code>password</code></li>
<li><code>path</code> is the sub-path inside the node, as configured in
Faspex</li>
</ul>
<h2 data-number="10.4" id="email-notification-on-transfer"><span class="header-section-number">10.4</span> Email notification on
transfer</h2>
<p>Like for any transfer, a notification can be sent by email using
options: <code>notify_to</code> and <code>notify_template</code>.</p>
<p>Example:</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb536-1"><a href="#cb536-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex package send <span class="at">--delivery-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;title&quot;:&quot;test pkg 1&quot;,&quot;recipients&quot;:[&quot;aspera.user1@gmail.com&quot;]}&#39;</span> ~/Documents/Samples/200KB.1 <span class="at">--notify-to</span><span class="op">=</span>aspera.user1@gmail.com <span class="at">--notify-template</span><span class="op">=</span>@ruby:<span class="st">&#39;%Q{From: &lt;%=from_name%&gt; &lt;&lt;%=from_email%&gt;&gt;\nTo: &lt;&lt;%=to%&gt;&gt;\nSubject: Package sent: &lt;%=ts[&quot;tags&quot;][&quot;aspera&quot;][&quot;faspex&quot;][&quot;metadata&quot;][&quot;_pkg_name&quot;]%&gt; files received\n\nTo user: &lt;%=ts[&quot;tags&quot;][&quot;aspera&quot;][&quot;faspex&quot;][&quot;recipients&quot;].first[&quot;email&quot;]%&gt;}&#39;</span></span></code></pre></div>
<p>In this example the notification template is directly provided on
command line. Package information placed in the message are directly
taken from the tags in transfer spec. The template can be placed in a
file using modifier: <code>@file:</code></p>
<h2 data-number="10.5" id="operations-on-dropbox"><span class="header-section-number">10.5</span> Operations on dropbox</h2>
<p>Example:</p>
<div class="sourceCode" id="cb537"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb537-1"><a href="#cb537-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex v4 dropbox create @json:<span class="st">&#39;{&quot;dropbox&quot;:{&quot;e_wg_name&quot;:&quot;test1&quot;,&quot;e_wg_desc&quot;:&quot;test1&quot;}}&#39;</span></span>
<span id="cb537-2"><a href="#cb537-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex v4 dropbox list</span>
<span id="cb537-3"><a href="#cb537-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex v4 dropbox delete 36</span></code></pre></div>
<h2 data-number="10.6" id="remote-sources"><span class="header-section-number">10.6</span> Remote sources</h2>
<p>Faspex lacks an API to list the contents of a remote source
(available in web UI). To work around this, the Node API is used, for
this it is required to set option: <code>storage</code> that links a
storage name to a node configuration and sub path.</p>
<p>Example:</p>
<div class="sourceCode" id="cb538"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb538-1"><a href="#cb538-1" aria-hidden="true" tabindex="-1"></a><span class="fu">my_faspex_conf</span><span class="kw">:</span></span>
<span id="cb538-2"><a href="#cb538-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">url</span><span class="kw">:</span><span class="at"> https://10.25.0.3/aspera/faspex</span></span>
<span id="cb538-3"><a href="#cb538-3" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">username</span><span class="kw">:</span><span class="at"> admin</span></span>
<span id="cb538-4"><a href="#cb538-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">password</span><span class="kw">:</span><span class="at"> MyUserPassword</span></span>
<span id="cb538-5"><a href="#cb538-5" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">storage</span><span class="kw">:</span></span>
<span id="cb538-6"><a href="#cb538-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">my_storage</span><span class="kw">:</span></span>
<span id="cb538-7"><a href="#cb538-7" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">node</span><span class="kw">:</span><span class="at"> </span><span class="st">&quot;@preset:my_faspex_node&quot;</span></span>
<span id="cb538-8"><a href="#cb538-8" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">path</span><span class="kw">:</span><span class="at"> /mydir</span></span>
<span id="cb538-9"><a href="#cb538-9" aria-hidden="true" tabindex="-1"></a><span class="fu">my_faspex_node</span><span class="kw">:</span></span>
<span id="cb538-10"><a href="#cb538-10" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">url</span><span class="kw">:</span><span class="at"> https://10.25.0.3:9092</span></span>
<span id="cb538-11"><a href="#cb538-11" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">username</span><span class="kw">:</span><span class="at"> node_faspex</span></span>
<span id="cb538-12"><a href="#cb538-12" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">password</span><span class="kw">:</span><span class="at"> MyNodePassword</span></span></code></pre></div>
<p>In this example, a Faspex storage named <code>my_storage</code>
exists in Faspex, and is located under the docroot in
<code>/mydir</code> (this must be the same as configured in Faspex). The
node configuration name is <code>my_faspex_node</code> here.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The v4 API provides an API for nodes and shares.</p></div>
</div>
<h2 data-number="10.7" id="automated-package-download-cargo"><span class="header-section-number">10.7</span> Automated package download
(cargo)</h2>
<p>It is possible to tell <code>ascli</code> to download newly received
packages, much like the official cargo client, or drive. Refer to the <a href="#receive-new-packages-only-cargo">same section</a> in the Aspera
on Cloud plugin:</p>
<div class="sourceCode" id="cb539"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb539-1"><a href="#cb539-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> faspex packages recv ALL <span class="at">--once-only</span><span class="op">=</span>yes <span class="at">--lock-port</span><span class="op">=</span>12345</span></code></pre></div>
<h2 data-number="10.8" id="tested-commands-for-faspex"><span class="header-section-number">10.8</span> Tested commands for
<code>faspex</code></h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Add <code>ascli faspex</code> in front of the following commands:</p></div>
</div>
<div class="sourceCode" id="cb540"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb540-1"><a href="#cb540-1" aria-hidden="true" tabindex="-1"></a><span class="ex">address_book</span></span>
<span id="cb540-2"><a href="#cb540-2" aria-hidden="true" tabindex="-1"></a><span class="ex">dropbox</span> list <span class="at">--recipient</span><span class="op">=</span><span class="st">&quot;*my_dbx&quot;</span></span>
<span id="cb540-3"><a href="#cb540-3" aria-hidden="true" tabindex="-1"></a><span class="ex">health</span></span>
<span id="cb540-4"><a href="#cb540-4" aria-hidden="true" tabindex="-1"></a><span class="ex">login_methods</span></span>
<span id="cb540-5"><a href="#cb540-5" aria-hidden="true" tabindex="-1"></a><span class="ex">me</span></span>
<span id="cb540-6"><a href="#cb540-6" aria-hidden="true" tabindex="-1"></a><span class="ex">package</span> list <span class="at">--box</span><span class="op">=</span>sent <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;max&quot;:1}&#39;</span> <span class="at">--fields</span><span class="op">=</span>package_id <span class="at">--display</span><span class="op">=</span>data <span class="at">--format</span><span class="op">=</span>csv <span class="at">--output</span><span class="op">=</span>f4_prs2</span>
<span id="cb540-7"><a href="#cb540-7" aria-hidden="true" tabindex="-1"></a><span class="ex">package</span> list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;max&quot;:1}&#39;</span> <span class="at">--fields</span><span class="op">=</span>package_id <span class="at">--display</span><span class="op">=</span>data <span class="at">--format</span><span class="op">=</span>csv <span class="at">--output</span><span class="op">=</span>f4_prs1</span>
<span id="cb540-8"><a href="#cb540-8" aria-hidden="true" tabindex="-1"></a><span class="ex">package</span> list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;max&quot;:5}&#39;</span></span>
<span id="cb540-9"><a href="#cb540-9" aria-hidden="true" tabindex="-1"></a><span class="ex">package</span> list <span class="at">--recipient</span><span class="op">=</span><span class="st">&quot;*my_dbx&quot;</span> <span class="at">--format</span><span class="op">=</span>csv <span class="at">--fields</span><span class="op">=</span>package_id <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;max&quot;:1}&#39;</span> <span class="at">--output</span><span class="op">=</span>f4_db_id1</span>
<span id="cb540-10"><a href="#cb540-10" aria-hidden="true" tabindex="-1"></a><span class="ex">package</span> list <span class="at">--recipient</span><span class="op">=</span><span class="st">&quot;*my_wkg&quot;</span> <span class="at">--format</span><span class="op">=</span>csv <span class="at">--fields</span><span class="op">=</span>package_id <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;max&quot;:1}&#39;</span> <span class="at">--output</span><span class="op">=</span>f4_db_id2</span>
<span id="cb540-11"><a href="#cb540-11" aria-hidden="true" tabindex="-1"></a><span class="ex">package</span> receive <span class="at">--to-folder</span><span class="op">=</span>. <span class="at">--link</span><span class="op">=</span>https://app.example.com/recv_from_user_path</span>
<span id="cb540-12"><a href="#cb540-12" aria-hidden="true" tabindex="-1"></a><span class="ex">package</span> receive ALL <span class="at">--once-only</span><span class="op">=</span>yes <span class="at">--to-folder</span><span class="op">=</span>. <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;max&quot;:10}&#39;</span></span>
<span id="cb540-13"><a href="#cb540-13" aria-hidden="true" tabindex="-1"></a><span class="ex">package</span> receive f4_db_id1 <span class="at">--recipient</span><span class="op">=</span><span class="st">&quot;*my_dbx&quot;</span> <span class="at">--to-folder</span><span class="op">=</span>.</span>
<span id="cb540-14"><a href="#cb540-14" aria-hidden="true" tabindex="-1"></a><span class="ex">package</span> receive f4_db_id2 <span class="at">--recipient</span><span class="op">=</span><span class="st">&quot;*my_wkg&quot;</span> <span class="at">--to-folder</span><span class="op">=</span>.</span>
<span id="cb540-15"><a href="#cb540-15" aria-hidden="true" tabindex="-1"></a><span class="ex">package</span> receive f4_pri1 <span class="at">--to-folder</span><span class="op">=</span>.</span>
<span id="cb540-16"><a href="#cb540-16" aria-hidden="true" tabindex="-1"></a><span class="ex">package</span> receive f4_prs2 <span class="at">--to-folder</span><span class="op">=</span>. <span class="at">--box</span><span class="op">=</span>sent</span>
<span id="cb540-17"><a href="#cb540-17" aria-hidden="true" tabindex="-1"></a><span class="ex">package</span> send <span class="at">--delivery-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;title&quot;:&quot;$(notdir test) PACKAGE_TITLE_BASE&quot;,&quot;recipients&quot;:[&quot;*my_dbx&quot;]}&#39;</span> test_file.bin</span>
<span id="cb540-18"><a href="#cb540-18" aria-hidden="true" tabindex="-1"></a><span class="ex">package</span> send <span class="at">--delivery-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;title&quot;:&quot;$(notdir test) PACKAGE_TITLE_BASE&quot;,&quot;recipients&quot;:[&quot;*my_wkg&quot;]}&#39;</span> test_file.bin</span>
<span id="cb540-19"><a href="#cb540-19" aria-hidden="true" tabindex="-1"></a><span class="ex">package</span> send <span class="at">--delivery-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;title&quot;:&quot;$(notdir test) PACKAGE_TITLE_BASE&quot;,&quot;recipients&quot;:[&quot;my_email_internal&quot;,&quot;my_username&quot;]}&#39;</span> test_file.bin</span>
<span id="cb540-20"><a href="#cb540-20" aria-hidden="true" tabindex="-1"></a><span class="ex">package</span> send <span class="at">--delivery-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;title&quot;:&quot;$(notdir test) PACKAGE_TITLE_BASE&quot;,&quot;recipients&quot;:[&quot;my_email_internal&quot;]}&#39;</span> <span class="at">--remote-source</span><span class="op">=</span>%name:my_src sample_source.txt</span>
<span id="cb540-21"><a href="#cb540-21" aria-hidden="true" tabindex="-1"></a><span class="ex">package</span> send <span class="at">--link</span><span class="op">=</span>https://app.example.com/send_to_dropbox_path <span class="at">--delivery-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;title&quot;:&quot;$(notdir test) PACKAGE_TITLE_BASE&quot;}&#39;</span> test_file.bin</span>
<span id="cb540-22"><a href="#cb540-22" aria-hidden="true" tabindex="-1"></a><span class="ex">package</span> send <span class="at">--link</span><span class="op">=</span>https://app.example.com/send_to_user_path <span class="at">--delivery-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;title&quot;:&quot;$(notdir test) PACKAGE_TITLE_BASE&quot;}&#39;</span> test_file.bin</span>
<span id="cb540-23"><a href="#cb540-23" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> info %name:my_src <span class="at">--storage</span><span class="op">=</span>@preset:faspex4_storage</span>
<span id="cb540-24"><a href="#cb540-24" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> list</span>
<span id="cb540-25"><a href="#cb540-25" aria-hidden="true" tabindex="-1"></a><span class="bu">source</span> node %name:my_src br / <span class="at">--storage</span><span class="op">=</span>@preset:faspex4_storage</span>
<span id="cb540-26"><a href="#cb540-26" aria-hidden="true" tabindex="-1"></a><span class="ex">v4</span> dmembership list</span>
<span id="cb540-27"><a href="#cb540-27" aria-hidden="true" tabindex="-1"></a><span class="ex">v4</span> dropbox list</span>
<span id="cb540-28"><a href="#cb540-28" aria-hidden="true" tabindex="-1"></a><span class="ex">v4</span> metadata_profile list</span>
<span id="cb540-29"><a href="#cb540-29" aria-hidden="true" tabindex="-1"></a><span class="ex">v4</span> user list</span>
<span id="cb540-30"><a href="#cb540-30" aria-hidden="true" tabindex="-1"></a><span class="ex">v4</span> wmembership list</span>
<span id="cb540-31"><a href="#cb540-31" aria-hidden="true" tabindex="-1"></a><span class="ex">v4</span> workgroup list</span></code></pre></div>
<h1 data-number="11" id="plugin-shares-ibm-aspera-shares-v1"><span class="header-section-number">11</span> Plugin: <code>shares</code>: IBM
Aspera Shares v1</h1>
<p>Aspera Shares supports the <strong>Node API</strong> for the file
transfer part.</p>
<p>Supported commands are listed in Share&#39;s API documentation:</p>
<p><a href="https://developer.ibm.com/apis/catalog/aspera--aspera-shares-api/Introduction">https://developer.ibm.com/apis/catalog/aspera--aspera-shares-api/Introduction</a></p>
<p>The payload for creation is the same as for the API, parameters are
provided as positional <code>Hash</code>.</p>
<p>Example: Create a Node: Attributes are like API:</p>
<table>
<thead>
<tr>
<th>Attribute</th>
<th>Required</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>name</code></td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td><code>host</code></td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td><code>api_username</code></td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td><code>api_password</code></td>
<td>Yes</td>
<td></td>
</tr>
<tr>
<td><code>port</code></td>
<td></td>
<td><code>9092</code></td>
</tr>
<tr>
<td><code>ssl</code></td>
<td></td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>verify_ssl</code></td>
<td></td>
<td><code>false</code></td>
</tr>
<tr>
<td><code>timeout</code></td>
<td></td>
<td><code>30s</code></td>
</tr>
<tr>
<td><code>open_timeout</code></td>
<td></td>
<td><code>10s</code></td>
</tr>
</tbody>
</table>
<p>Example: Create a share and add a user to it.</p>
<div class="sourceCode" id="cb541"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb541-1"><a href="#cb541-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> shares admin share create @json:<span class="st">&#39;{&quot;node_id&quot;:1,&quot;name&quot;:&quot;test1&quot;,&quot;directory&quot;:&quot;test1&quot;,&quot;create_directory&quot;:true}&#39;</span></span>
<span id="cb541-2"><a href="#cb541-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb541-3"><a href="#cb541-3" aria-hidden="true" tabindex="-1"></a><span class="va">share_id</span><span class="op">=</span><span class="va">$(</span><span class="ex">ascli</span> shares admin share list <span class="at">--select</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;name&quot;:&quot;test1&quot;}&#39;</span> <span class="at">--fields</span><span class="op">=</span>id<span class="va">)</span></span>
<span id="cb541-4"><a href="#cb541-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb541-5"><a href="#cb541-5" aria-hidden="true" tabindex="-1"></a><span class="va">user_id</span><span class="op">=</span><span class="va">$(</span><span class="ex">ascli</span> shares admin user all list <span class="at">--select</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;username&quot;:&quot;username1&quot;}&#39;</span> <span class="at">--fields</span><span class="op">=</span>id<span class="va">)</span></span>
<span id="cb541-6"><a href="#cb541-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb541-7"><a href="#cb541-7" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> shares admin share user_permissions <span class="va">$share_id</span> create @json:<span class="st">&#39;{&quot;user_id&quot;:&#39;</span><span class="va">$user_id</span><span class="st">&#39;,&quot;browse_permission&quot;:true, &quot;download_permission&quot;:true, &quot;mkdir_permission&quot;:true,&quot;delete_permission&quot;:true,&quot;rename_permission&quot;:true,&quot;content_availability_permission&quot;:true,&quot;manage_permission&quot;:true}&#39;</span></span></code></pre></div>
<h2 data-number="11.1" id="tested-commands-for-shares"><span class="header-section-number">11.1</span> Tested commands for
<code>shares</code></h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Add <code>ascli shares</code> in front of the following commands:</p></div>
</div>
<div class="sourceCode" id="cb542"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb542-1"><a href="#cb542-1" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> group all list</span>
<span id="cb542-2"><a href="#cb542-2" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> node list</span>
<span id="cb542-3"><a href="#cb542-3" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> share list <span class="at">--fields</span><span class="op">=</span>DEF,-status,status_message</span>
<span id="cb542-4"><a href="#cb542-4" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> share user_permissions 1 list</span>
<span id="cb542-5"><a href="#cb542-5" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> user all app_authorizations 1 modify @json:<span class="st">&#39;{&quot;app_login&quot;:true}&#39;</span></span>
<span id="cb542-6"><a href="#cb542-6" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> user all app_authorizations 1 show</span>
<span id="cb542-7"><a href="#cb542-7" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> user all list</span>
<span id="cb542-8"><a href="#cb542-8" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> user all share_permissions 1 list</span>
<span id="cb542-9"><a href="#cb542-9" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> user all share_permissions 1 show 1</span>
<span id="cb542-10"><a href="#cb542-10" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> user ldap add the_name</span>
<span id="cb542-11"><a href="#cb542-11" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> user local list</span>
<span id="cb542-12"><a href="#cb542-12" aria-hidden="true" tabindex="-1"></a><span class="ex">admin</span> user saml import @json:<span class="st">&#39;{&quot;id&quot;:&quot;the_id&quot;,&quot;name_id&quot;:&quot;the_name&quot;}&#39;</span></span>
<span id="cb542-13"><a href="#cb542-13" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> browse /</span>
<span id="cb542-14"><a href="#cb542-14" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> delete my_share_folder/new_folder</span>
<span id="cb542-15"><a href="#cb542-15" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> delete my_share_folder/test_file.bin</span>
<span id="cb542-16"><a href="#cb542-16" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> download <span class="at">--to-folder</span><span class="op">=</span>. my_share_folder/test_file.bin</span>
<span id="cb542-17"><a href="#cb542-17" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> download <span class="at">--to-folder</span><span class="op">=</span>. my_share_folder/test_file.bin my_share_folder/test_file.bin <span class="at">--transfer</span><span class="op">=</span>httpgw <span class="at">--transfer-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;url&quot;:&quot;https://tst.example.com/path@&quot;}&#39;</span></span>
<span id="cb542-18"><a href="#cb542-18" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> mkdir my_share_folder/new_folder</span>
<span id="cb542-19"><a href="#cb542-19" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> sync push /data/local_sync <span class="at">--to-folder</span><span class="op">=</span>my_share_folder/synctst</span>
<span id="cb542-20"><a href="#cb542-20" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> sync push /data/local_sync <span class="at">--to-folder</span><span class="op">=</span>my_share_folder/synctst @json:<span class="st">&#39;{&quot;reset&quot;:true}&#39;</span></span>
<span id="cb542-21"><a href="#cb542-21" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> upload <span class="at">--to-folder</span><span class="op">=</span>my_share_folder <span class="st">&#39;faux:///testfile?1m&#39;</span> <span class="at">--transfer</span><span class="op">=</span>httpgw <span class="at">--transfer-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;url&quot;:&quot;https://tst.example.com/path@&quot;,&quot;synchronous&quot;:true,&quot;api_version&quot;:&quot;v1&quot;,&quot;upload_chunk_size&quot;:100000}&#39;</span></span>
<span id="cb542-22"><a href="#cb542-22" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> upload <span class="at">--to-folder</span><span class="op">=</span>my_share_folder sendfolder <span class="at">--transfer</span><span class="op">=</span>httpgw <span class="at">--transfer-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;url&quot;:&quot;https://tst.example.com/path@&quot;,&quot;synchronous&quot;:true,&quot;api_version&quot;:&quot;v1&quot;,&quot;upload_chunk_size&quot;:100000}&#39;</span></span>
<span id="cb542-23"><a href="#cb542-23" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> upload <span class="at">--to-folder</span><span class="op">=</span>my_share_folder test_file.bin</span>
<span id="cb542-24"><a href="#cb542-24" aria-hidden="true" tabindex="-1"></a><span class="ex">files</span> upload <span class="at">--to-folder</span><span class="op">=</span>my_share_folder test_file.bin <span class="at">--transfer</span><span class="op">=</span>httpgw <span class="at">--transfer-info</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;url&quot;:&quot;https://tst.example.com/path@&quot;}&#39;</span></span>
<span id="cb542-25"><a href="#cb542-25" aria-hidden="true" tabindex="-1"></a><span class="ex">health</span></span></code></pre></div>
<h1 data-number="12" id="plugin-console-ibm-aspera-console"><span class="header-section-number">12</span> Plugin: <code>console</code>:
IBM Aspera Console</h1>
<h2 data-number="12.1" id="transfer-filter"><span class="header-section-number">12.1</span> Transfer filter</h2>
<p>Listing transfers supports the API syntax.</p>
<p>In addition, it is possible to place a single <code>query</code>
parameter in the request to filter the results : <code>filter</code>,
following the syntax:</p>
<pre class="text"><code>(field operator value)and(field operator value)...</code></pre>
<h2 data-number="12.2" id="tested-commands-for-console"><span class="header-section-number">12.2</span> Tested commands for
<code>console</code></h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Add <code>ascli console</code> in front of the following
commands:</p></div>
</div>
<div class="sourceCode" id="cb544"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb544-1"><a href="#cb544-1" aria-hidden="true" tabindex="-1"></a><span class="ex">health</span></span>
<span id="cb544-2"><a href="#cb544-2" aria-hidden="true" tabindex="-1"></a><span class="ex">transfer</span> current files console_xfer_id</span>
<span id="cb544-3"><a href="#cb544-3" aria-hidden="true" tabindex="-1"></a><span class="ex">transfer</span> current list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;filter&quot;:&quot;(transfer_name contain aoc)&quot;}&#39;</span></span>
<span id="cb544-4"><a href="#cb544-4" aria-hidden="true" tabindex="-1"></a><span class="ex">transfer</span> current list <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;filter1&quot;:&quot;transfer_name&quot;,&quot;comp1&quot;:&quot;contain&quot;,&quot;val1&quot;:&quot;aoc&quot;}&#39;</span></span>
<span id="cb544-5"><a href="#cb544-5" aria-hidden="true" tabindex="-1"></a><span class="ex">transfer</span> current show console_xfer_id</span>
<span id="cb544-6"><a href="#cb544-6" aria-hidden="true" tabindex="-1"></a><span class="ex">transfer</span> smart list</span>
<span id="cb544-7"><a href="#cb544-7" aria-hidden="true" tabindex="-1"></a><span class="ex">transfer</span> smart sub my_smart_id @json:<span class="st">&#39;{&quot;source&quot;:{&quot;paths&quot;:[&quot;my_smart_file&quot;]},&quot;source_type&quot;:&quot;user_selected&quot;}&#39;</span></span></code></pre></div>
<h1 data-number="13" id="plugin-orchestratoribm-aspera-orchestrator"><span class="header-section-number">13</span> Plugin:
<code>orchestrator</code>:IBM Aspera Orchestrator</h1>
<h2 data-number="13.1" id="tested-commands-for-orchestrator"><span class="header-section-number">13.1</span> Tested commands for
<code>orchestrator</code></h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Add <code>ascli orchestrator</code> in front of the following
commands:</p></div>
</div>
<div class="sourceCode" id="cb545"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb545-1"><a href="#cb545-1" aria-hidden="true" tabindex="-1"></a><span class="ex">health</span></span>
<span id="cb545-2"><a href="#cb545-2" aria-hidden="true" tabindex="-1"></a><span class="ex">info</span></span>
<span id="cb545-3"><a href="#cb545-3" aria-hidden="true" tabindex="-1"></a><span class="ex">plugins</span></span>
<span id="cb545-4"><a href="#cb545-4" aria-hidden="true" tabindex="-1"></a><span class="ex">processes</span></span>
<span id="cb545-5"><a href="#cb545-5" aria-hidden="true" tabindex="-1"></a><span class="ex">workflow</span> details my_workflow_id</span>
<span id="cb545-6"><a href="#cb545-6" aria-hidden="true" tabindex="-1"></a><span class="ex">workflow</span> export my_workflow_id</span>
<span id="cb545-7"><a href="#cb545-7" aria-hidden="true" tabindex="-1"></a><span class="ex">workflow</span> inputs my_workflow_id</span>
<span id="cb545-8"><a href="#cb545-8" aria-hidden="true" tabindex="-1"></a><span class="ex">workflow</span> list</span>
<span id="cb545-9"><a href="#cb545-9" aria-hidden="true" tabindex="-1"></a><span class="ex">workflow</span> start my_workflow_id @json:<span class="st">&#39;{&quot;Param&quot;:&quot;world !&quot;}&#39;</span></span>
<span id="cb545-10"><a href="#cb545-10" aria-hidden="true" tabindex="-1"></a><span class="ex">workflow</span> start my_workflow_id @json:<span class="st">&#39;{&quot;Param&quot;:&quot;world !&quot;}&#39;</span> <span class="at">--result</span><span class="op">=</span>ResultStep:Complete_status_message</span>
<span id="cb545-11"><a href="#cb545-11" aria-hidden="true" tabindex="-1"></a><span class="ex">workflow</span> status ALL</span>
<span id="cb545-12"><a href="#cb545-12" aria-hidden="true" tabindex="-1"></a><span class="ex">workflow</span> status my_workflow_id</span></code></pre></div>
<h1 data-number="14" id="plugin-cos-ibm-cloud-object-storage"><span class="header-section-number">14</span> Plugin: <code>cos</code>: IBM
Cloud Object Storage</h1>
<p>The IBM Cloud Object Storage provides the possibility to execute
transfers using FASP. It uses the same transfer service as Aspera on
Cloud, called Aspera Transfer Service (ATS). Available ATS regions: <a href="https://status.aspera.io"><span>https://status.aspera.io</span></a></p>
<p>There are two possibilities to provide credentials. If you already
have the endpoint, API key and Resource Instance ID (CRN), use the first
method. If you don&#39;t have credentials but have access to the IBM Cloud
console, then use the second method.</p>
<h2 data-number="14.1" id="using-endpoint-api-key-and-resource-instance-id-crn"><span class="header-section-number">14.1</span> Using endpoint, API key and
Resource Instance ID (CRN)</h2>
<p>If you have those parameters already, then following options shall be
provided:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bucket</code></td>
<td>Bucket name</td>
</tr>
<tr>
<td><code>endpoint</code></td>
<td>Storage endpoint URL<br />e.g.
<code>https://s3.hkg02.cloud-object-storage.appdomain.cloud</code></td>
</tr>
<tr>
<td><code>apikey</code></td>
<td>API Key</td>
</tr>
<tr>
<td><code>crn</code></td>
<td>Resource instance ID</td>
</tr>
</tbody>
</table>
<p>For example, let us create a default configuration:</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb546-1"><a href="#cb546-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset update mycos <span class="at">--bucket</span><span class="op">=</span>mybucket <span class="at">--endpoint</span><span class="op">=</span>https://s3.us-east.cloud-object-storage.appdomain.cloud <span class="at">--apikey</span><span class="op">=</span>abcdefgh <span class="at">--crn</span><span class="op">=</span>crn:v1:bluemix:public:iam-identity::a/xxxxxxx</span>
<span id="cb546-2"><a href="#cb546-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set default cos mycos</span></code></pre></div>
<p>Then, jump to the <a href="#operations-transfers">transfer
example</a>.</p>
<h2 data-number="14.2" id="using-service-credential-file"><span class="header-section-number">14.2</span> Using service credential
file</h2>
<p>If you are the COS administrator and don&#39;t have yet the credential:
Service credentials are directly created using the IBM cloud Console
(web UI). Navigate to:</p>
<ul>
<li>→ Navigation Menu</li>
<li>→ <a href="https://cloud.ibm.com/resources">Resource List</a></li>
<li>→ <a href="https://cloud.ibm.com/objectstorage">Storage</a></li>
<li>→ Select your storage instance</li>
<li>→ Service Credentials</li>
<li>→ New credentials (Leave default role: Writer, no special
options)</li>
<li>→ Copy to clipboard</li>
</ul>
<p>Then save the copied value to a file, e.g. :
<code>$HOME/cos_service_creds.json</code></p>
<p>or using the IBM Cloud CLI:</p>
<div class="sourceCode" id="cb547"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb547-1"><a href="#cb547-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ibmcloud</span> resource service-keys</span>
<span id="cb547-2"><a href="#cb547-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ibmcloud</span> resource service-key _service_key_name_here_ <span class="at">--output</span> JSON<span class="kw">|</span><span class="ex">jq</span> <span class="st">&#39;.[0].credentials&#39;</span><span class="op">&gt;</span><span class="va">$HOME</span>/service_creds.json</span></code></pre></div>
<p>(if you don&#39;t have <code>jq</code> installed, extract the structure
as follows)</p>
<p>It consists in the following structure:</p>
<div class="sourceCode" id="cb548"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb548-1"><a href="#cb548-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span></span>
<span id="cb548-2"><a href="#cb548-2" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;apikey&quot;</span><span class="fu">:</span> <span class="st">&quot;my_api_key_here&quot;</span><span class="fu">,</span></span>
<span id="cb548-3"><a href="#cb548-3" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;cos_hmac_keys&quot;</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb548-4"><a href="#cb548-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;access_key_id&quot;</span><span class="fu">:</span> <span class="st">&quot;my_access_key_here&quot;</span><span class="fu">,</span></span>
<span id="cb548-5"><a href="#cb548-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">&quot;secret_access_key&quot;</span><span class="fu">:</span> <span class="st">&quot;my_secret_here&quot;</span></span>
<span id="cb548-6"><a href="#cb548-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">},</span></span>
<span id="cb548-7"><a href="#cb548-7" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;endpoints&quot;</span><span class="fu">:</span> <span class="st">&quot;https://control.cloud-object-storage.cloud.ibm.com/v2/endpoints&quot;</span><span class="fu">,</span></span>
<span id="cb548-8"><a href="#cb548-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;iam_apikey_description&quot;</span><span class="fu">:</span> <span class="st">&quot;my_description_here&quot;</span><span class="fu">,</span></span>
<span id="cb548-9"><a href="#cb548-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;iam_apikey_name&quot;</span><span class="fu">:</span> <span class="st">&quot;my_key_name_here&quot;</span><span class="fu">,</span></span>
<span id="cb548-10"><a href="#cb548-10" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;iam_role_crn&quot;</span><span class="fu">:</span> <span class="st">&quot;crn:v1:bluemix:public:iam::::serviceRole:Writer&quot;</span><span class="fu">,</span></span>
<span id="cb548-11"><a href="#cb548-11" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;iam_serviceid_crn&quot;</span><span class="fu">:</span> <span class="st">&quot;crn:v1:bluemix:public:iam-identity::a/xxxxxxx.....&quot;</span><span class="fu">,</span></span>
<span id="cb548-12"><a href="#cb548-12" aria-hidden="true" tabindex="-1"></a>  <span class="dt">&quot;resource_instance_id&quot;</span><span class="fu">:</span> <span class="st">&quot;crn:v1:bluemix:public:cloud-object-storage:global:a/xxxxxxx.....&quot;</span></span>
<span id="cb548-13"><a href="#cb548-13" aria-hidden="true" tabindex="-1"></a><span class="fu">}</span></span></code></pre></div>
<p>The field <code>resource_instance_id</code> is for option
<code>crn</code></p>
<p>The field <code>apikey</code> is for option <code>apikey</code></p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Endpoints for regions can be found by querying the
<code>endpoints</code> URL from file or from the IBM Cloud Console.</p></div>
</div>
<p>The required options for this method are:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bucket</code></td>
<td>Bucket name</td>
</tr>
<tr>
<td><code>region</code></td>
<td>Bucket region<br />e.g. <code>eu-de</code></td>
</tr>
<tr>
<td><code>service_credentials</code></td>
<td>JSON information saved from IBM Cloud console.</td>
</tr>
</tbody>
</table>
<p>For example, let us create a default configuration:</p>
<div class="sourceCode" id="cb549"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb549-1"><a href="#cb549-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset update mycos <span class="at">--bucket</span><span class="op">=</span>laurent <span class="at">--service-credentials</span><span class="op">=</span>@val:@json:@file:~/service_creds.json <span class="at">--region</span><span class="op">=</span>us-south</span>
<span id="cb549-2"><a href="#cb549-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set default cos mycos</span></code></pre></div>
<h2 data-number="14.3" id="operations-transfers"><span class="header-section-number">14.3</span> Operations, transfers</h2>
<p>Let&#39;s assume you created a default configuration from one of the two
previous steps (else specify the access options on command lines).</p>
<p>A subset of <code>node</code> plugin operations are supported,
basically Node API:</p>
<div class="sourceCode" id="cb550"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb550-1"><a href="#cb550-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> cos node info</span>
<span id="cb550-2"><a href="#cb550-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> cos node upload <span class="st">&#39;faux:///sample1G?1g&#39;</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>A dummy file <code>sample1G</code> of size 2 GB is generated using
the <code>faux</code> PVCL scheme (see previous section and
<code>man ascp</code>), but you can, of course, send a real file by
specifying a real file path instead.</p></div>
</div>
<h2 data-number="14.4" id="tested-commands-for-cos"><span class="header-section-number">14.4</span> Tested commands for
<code>cos</code></h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Add <code>ascli cos</code> in front of the following commands:</p></div>
</div>
<div class="sourceCode" id="cb551"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb551-1"><a href="#cb551-1" aria-hidden="true" tabindex="-1"></a><span class="ex">node</span> download test_file.bin <span class="at">--to-folder</span><span class="op">=</span>.</span>
<span id="cb551-2"><a href="#cb551-2" aria-hidden="true" tabindex="-1"></a><span class="ex">node</span> info <span class="at">--bucket</span><span class="op">=</span>my_bucket <span class="at">--endpoint</span><span class="op">=</span>my_endpoint <span class="at">--apikey</span><span class="op">=</span>my_api_key <span class="at">--crn</span><span class="op">=</span>my_resource_instance_id</span>
<span id="cb551-3"><a href="#cb551-3" aria-hidden="true" tabindex="-1"></a><span class="ex">node</span> info <span class="at">--bucket</span><span class="op">=</span>my_bucket <span class="at">--region</span><span class="op">=</span>my_region <span class="at">--service-credentials</span><span class="op">=</span>@json:@file:my_cos_svc_cred</span>
<span id="cb551-4"><a href="#cb551-4" aria-hidden="true" tabindex="-1"></a><span class="ex">node</span> info <span class="at">--log-level</span><span class="op">=</span>trace2</span>
<span id="cb551-5"><a href="#cb551-5" aria-hidden="true" tabindex="-1"></a><span class="ex">node</span> upload test_file.bin</span></code></pre></div>
<h1 data-number="15" id="plugin-httpgw-http-gateway"><span class="header-section-number">15</span> Plugin: <code>httpgw</code>:
HTTP Gateway</h1>
<h2 data-number="15.1" id="tested-commands-for-httpgw"><span class="header-section-number">15.1</span> Tested commands for
<code>httpgw</code></h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Add <code>ascli httpgw</code> in front of the following commands:</p></div>
</div>
<div class="sourceCode" id="cb552"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb552-1"><a href="#cb552-1" aria-hidden="true" tabindex="-1"></a><span class="ex">health</span></span>
<span id="cb552-2"><a href="#cb552-2" aria-hidden="true" tabindex="-1"></a><span class="ex">info</span></span></code></pre></div>
<h1 data-number="16" id="plugin-faspio-faspio-gateway"><span class="header-section-number">16</span> Plugin: <code>faspio</code>:
Faspio Gateway</h1>
<h2 data-number="16.1" id="tested-commands-for-faspio"><span class="header-section-number">16.1</span> Tested commands for
<code>faspio</code></h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Add <code>ascli faspio</code> in front of the following commands:</p></div>
</div>
<div class="sourceCode" id="cb553"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb553-1"><a href="#cb553-1" aria-hidden="true" tabindex="-1"></a><span class="ex">bridges</span> create @json:<span class="st">&#39;{&quot;name&quot;:&quot;test1&quot;,&quot;local&quot;:{&quot;protocol&quot;:&quot;tcp&quot;,&quot;tls_enabled&quot;:false,&quot;port&quot;:&quot;3000&quot;,&quot;bind_address&quot;:&quot;127.0.0.1&quot;},&quot;forward&quot;:{&quot;protocol&quot;:&quot;fasp&quot;,&quot;tls_enabled&quot;:false,&quot;port&quot;:&quot;3994&quot;,&quot;bind_address&quot;:&quot;127.0.0.1&quot;,&quot;host&quot;:[&quot;10.0.0.1&quot;]}}&#39;</span></span>
<span id="cb553-2"><a href="#cb553-2" aria-hidden="true" tabindex="-1"></a><span class="ex">bridges</span> delete <span class="at">--bulk</span><span class="op">=</span>yes @json:@stdin:</span>
<span id="cb553-3"><a href="#cb553-3" aria-hidden="true" tabindex="-1"></a><span class="ex">bridges</span> list</span>
<span id="cb553-4"><a href="#cb553-4" aria-hidden="true" tabindex="-1"></a><span class="ex">health</span></span></code></pre></div>
<h1 data-number="17" id="plugin-alee-aspera-license-entitlement-engine"><span class="header-section-number">17</span> Plugin: <code>alee</code>:
Aspera License Entitlement Engine</h1>
<p>Retrieve information on subscription.</p>
<h2 data-number="17.1" id="tested-commands-for-alee"><span class="header-section-number">17.1</span> Tested commands for
<code>alee</code></h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Add <code>ascli alee</code> in front of the following commands:</p></div>
</div>
<div class="sourceCode" id="cb554"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb554-1"><a href="#cb554-1" aria-hidden="true" tabindex="-1"></a><span class="ex">entitlement</span></span>
<span id="cb554-2"><a href="#cb554-2" aria-hidden="true" tabindex="-1"></a><span class="ex">health</span> <span class="at">-N</span></span></code></pre></div>
<h1 data-number="18" id="plugin-preview-preview-generator-for-aoc"><span class="header-section-number">18</span> Plugin: <code>preview</code>:
Preview generator for AoC</h1>
<p>The <code>preview</code> generates thumbnails (office, images, video)
and video previews on storage for use primarily in the Aspera on Cloud
application. It uses the <strong>Node API</strong> of Aspera HSTS and
requires use of Access Keys and its <strong>storage root</strong>.
Several options can be used to tune several aspects:</p>
<ul>
<li>Methods for detection of new files needing generation</li>
<li>Methods for generation of video preview</li>
<li>Parameters for video handling</li>
</ul>
<p>See also <a href="https://github.com/IBM/aspera-on-cloud-file-previews">https://github.com/IBM/aspera-on-cloud-file-previews</a></p>
<h2 data-number="18.1" id="aspera-server-configuration"><span class="header-section-number">18.1</span> Aspera Server
configuration</h2>
<p>Specify the preview&#39;s folder as shown in:</p>
<p><a href="https://ibmaspera.com/help/admin/organization/installing_the_preview_maker">https://ibmaspera.com/help/admin/organization/installing_the_preview_maker</a></p>
<p>By default, the <code>preview</code> plugin expects previews to be
generated in a folder named <code>previews</code> located in the storage
root. On the transfer server execute:</p>
<div class="sourceCode" id="cb555"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb555-1"><a href="#cb555-1" aria-hidden="true" tabindex="-1"></a><span class="va">PATH</span><span class="op">=</span>/opt/aspera/bin:<span class="va">$PATH</span></span>
<span id="cb555-2"><a href="#cb555-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb555-3"><a href="#cb555-3" aria-hidden="true" tabindex="-1"></a><span class="ex">asconfigurator</span> <span class="at">-x</span> <span class="st">&quot;server;preview_dir,previews&quot;</span></span>
<span id="cb555-4"><a href="#cb555-4" aria-hidden="true" tabindex="-1"></a><span class="ex">asnodeadmin</span> <span class="at">--reload</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The configuration <code>preview_dir</code> is
<strong>relative</strong> to the storage root, no need leading or
trailing <code>/</code>. In general just set the value to
<code>previews</code></p></div>
</div>
<p>If another folder is configured on the HSTS, then specify it to
<code>ascli</code> using the option <code>previews_folder</code>.</p>
<p>The HSTS Node API limits any preview file to a parameter:
<code>max_request_file_create_size_kb</code> (1 KB is 1024 Bytes). This
size is internally capped to <code>1&lt;&lt;24</code> Bytes (16777216),
i.e. 16384 KB, i.e. 16 MB.</p>
<p>To change this parameter in <code>aspera.conf</code>, use
<code>asconfigurator</code>. To display the value, use
<code>asuserdata</code>:</p>
<div class="sourceCode" id="cb556"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb556-1"><a href="#cb556-1" aria-hidden="true" tabindex="-1"></a><span class="ex">asuserdata</span> <span class="at">-a</span> <span class="kw">|</span> <span class="fu">grep</span> max_request_file_create_size_kb</span></code></pre></div>
<pre class="text"><code>  max_request_file_create_size_kb: &quot;1024&quot;</code></pre>
<div class="sourceCode" id="cb558"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb558-1"><a href="#cb558-1" aria-hidden="true" tabindex="-1"></a><span class="ex">asconfigurator</span> <span class="at">-x</span> <span class="st">&quot;server; max_request_file_create_size_kb,16384&quot;</span></span></code></pre></div>
<p>If you use a value different from <code>16777216</code>, then specify
it using option <code>max_size</code>.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>The HSTS parameter (<code>max_request_file_create_size_kb</code>) is
in <strong>kilo Bytes</strong> while the generator parameter is in
<strong>Bytes</strong> (factor of 1024).</p></div>
</div>
<h2 data-number="18.2" id="external-tools-linux"><span class="header-section-number">18.2</span> External tools: Linux</h2>
<p><code>ascli</code> requires the following external tools available in
the <code>PATH</code>:</p>
<ul>
<li><strong>ImageMagick</strong> v7+: <code>magick</code> (for tools:
<code>convert</code> and <code>composite</code>)</li>
<li><strong>OptiPNG</strong> : <code>optipng</code></li>
<li><strong>FFmpeg</strong> : <code>ffmpeg</code>
<code>ffprobe</code></li>
<li><strong>LibreOffice</strong> : <code>unoconv</code></li>
</ul>
<p>Here shown on Red Hat/Rocky Linux.</p>
<p>Other OSes should work as well, but are not tested.</p>
<p>To check if all tools are found properly, execute:</p>
<div class="sourceCode" id="cb559"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb559-1"><a href="#cb559-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> preview check</span></code></pre></div>
<h3 data-number="18.2.1" id="image-imagemagick-and-optipng"><span class="header-section-number">18.2.1</span> Image: ImageMagick and
<code>optipng</code></h3>
<div class="sourceCode" id="cb560"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb560-1"><a href="#cb560-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dnf</span> install <span class="at">-y</span> ImageMagick optipng</span></code></pre></div>
<p>You may also install <code>ghostscript</code> which adds fonts to
ImageMagick. Available fonts, used to generate PNG for text, can be
listed with <code>magick identify -list font</code>. Prefer ImageMagick
version &gt;=7.</p>
<p>More info on ImageMagick at <a href="https://imagemagick.org/">https://imagemagick.org/</a></p>
<p>If your OS has only ImageMagick v6, then you can create a script
called <code>magick</code> and add it to your <code>PATH</code>:</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb561-1"><a href="#cb561-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb561-2"><a href="#cb561-2" aria-hidden="true" tabindex="-1"></a><span class="bu">exec</span> <span class="st">&quot;</span><span class="va">$@</span><span class="st">&quot;</span></span></code></pre></div>
<p>make it executable:</p>
<div class="sourceCode" id="cb562"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb562-1"><a href="#cb562-1" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> a+x /usr/local/bin/magick</span></code></pre></div>
<h3 data-number="18.2.2" id="video-ffmpeg"><span class="header-section-number">18.2.2</span> Video: FFmpeg</h3>
<p>The easiest method is to download and install the latest released
version of <code>ffmpeg</code> with static libraries from <a href="https://johnvansickle.com/ffmpeg/"><span>https://johnvansickle.com/ffmpeg/</span></a></p>
<div class="sourceCode" id="cb563"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb563-1"><a href="#cb563-1" aria-hidden="true" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-s</span> https://johnvansickle.com/ffmpeg/releases/ffmpeg-release-amd64-static.tar.xz<span class="kw">|(</span><span class="fu">mkdir</span> <span class="at">-p</span> /opt <span class="kw">&amp;&amp;</span> <span class="bu">cd</span> /opt <span class="kw">&amp;&amp;</span> <span class="fu">rm</span> <span class="at">-f</span> ffmpeg /usr/bin/<span class="dt">{ffmpeg</span><span class="op">,</span><span class="dt">ffprobe}</span> <span class="kw">&amp;&amp;</span> <span class="fu">rm</span> <span class="at">-fr</span> ffmpeg-<span class="pp">*</span>-amd64-static <span class="kw">&amp;&amp;</span> <span class="fu">tar</span> xJvf <span class="at">-</span> <span class="kw">&amp;&amp;</span> <span class="fu">ln</span> <span class="at">-s</span> ffmpeg-<span class="pp">*</span> ffmpeg <span class="kw">&amp;&amp;</span> <span class="fu">ln</span> <span class="at">-s</span> /opt/ffmpeg/<span class="dt">{ffmpeg</span><span class="op">,</span><span class="dt">ffprobe}</span> /usr/bin<span class="kw">)</span></span></code></pre></div>
<h3 data-number="18.2.3" id="office-unoconv-and-libreoffice"><span class="header-section-number">18.2.3</span> Office: <code>unoconv</code>
and LibreOffice</h3>
<p>If you don&#39;t want to have preview for office documents or if it is
too complex you can skip office document preview generation by using
option: <code>--skip-types=office</code></p>
<p>The generation of preview in based on the use of LibreOffice&#39;s
<code>unoconv</code>.</p>
<ul>
<li>RHEL 8/Rocky Linux 8+</li>
</ul>
<div class="sourceCode" id="cb564"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb564-1"><a href="#cb564-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dnf</span> install unoconv</span></code></pre></div>
<ul>
<li>Amazon Linux</li>
</ul>
<div class="sourceCode" id="cb565"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb565-1"><a href="#cb565-1" aria-hidden="true" tabindex="-1"></a><span class="ex">amazon-linux-extras</span> enable libreoffice</span>
<span id="cb565-2"><a href="#cb565-2" aria-hidden="true" tabindex="-1"></a><span class="ex">yum</span> clean metadata</span>
<span id="cb565-3"><a href="#cb565-3" aria-hidden="true" tabindex="-1"></a><span class="ex">yum</span> install libreoffice-core libreoffice-calc libreoffice-opensymbol-fonts libreoffice-ure libreoffice-writer libreoffice-pyuno libreoffice-impress</span>
<span id="cb565-4"><a href="#cb565-4" aria-hidden="true" tabindex="-1"></a><span class="fu">wget</span> https://raw.githubusercontent.com/unoconv/unoconv/master/unoconv</span>
<span id="cb565-5"><a href="#cb565-5" aria-hidden="true" tabindex="-1"></a><span class="fu">mv</span> unoconv /usr/bin</span>
<span id="cb565-6"><a href="#cb565-6" aria-hidden="true" tabindex="-1"></a><span class="fu">chmod</span> a+x /usr/bin/unoconv</span></code></pre></div>
<h2 data-number="18.3" id="configuration"><span class="header-section-number">18.3</span> Configuration</h2>
<p>The preview generator should be executed as a non-user. When using
object storage, any user can be used, but when using local storage it is
usually better to use the user <code>xfer</code>, as uploaded files are
under this identity: this ensures proper access rights. (we will assume
this)</p>
<p>Like any <code>ascli</code> commands, options can be passed on
command line or using a configuration <a href="#option-preset">Option
Preset</a>. The configuration file must be created with the same user
used to run so that it is properly used on runtime.</p>
<p>The <code>xfer</code> user has a special protected shell:
<code>aspshell</code>, so in order to update the configuration, and when
changing identity, specify an alternate shell. E.g.:</p>
<div class="sourceCode" id="cb566"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb566-1"><a href="#cb566-1" aria-hidden="true" tabindex="-1"></a><span class="fu">su</span> <span class="at">-s</span> /bin/bash <span class="at">-</span> xfer</span>
<span id="cb566-2"><a href="#cb566-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb566-3"><a href="#cb566-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset update mypreviewconf <span class="at">--url</span><span class="op">=</span>https://localhost:9092 <span class="at">--username</span><span class="op">=</span>my_access_key <span class="at">--password</span><span class="op">=</span>my_secret <span class="at">--skip-types</span><span class="op">=</span>office <span class="at">--lock-port</span><span class="op">=</span>12346</span>
<span id="cb566-4"><a href="#cb566-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb566-5"><a href="#cb566-5" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set default preview mypreviewconf</span></code></pre></div>
<p>Here we assume that Office file generation is disabled, else remove
this option. <code>lock_port</code> prevents concurrent execution of
generation when using a scheduler.</p>
<p>One can check if the access key is well configured using:</p>
<div class="sourceCode" id="cb567"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb567-1"><a href="#cb567-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> <span class="at">-Ppreviewconf</span> node browse /</span></code></pre></div>
<p>This shall list the contents of the storage root of the access
key.</p>
<h2 data-number="18.4" id="options-for-generated-files"><span class="header-section-number">18.4</span> Options for generated
files</h2>
<p>When generating preview files, some options are provided by default.
Some values for the options can be modified on command line. For video
preview, the whole set of options can be overridden with option
<code>reencode_ffmpeg</code>: it is a <code>Hash</code> with two keys:
<code>in</code> and <code>out</code>, each is an <code>Array</code> of
strings with the native options to <code>ffmpeg</code>.</p>
<h2 data-number="18.5" id="execution"><span class="header-section-number">18.5</span> Execution</h2>
<p><code>ascli</code> intentionally supports only a <strong>one
shot</strong> mode (no infinite loop) in order to avoid having a hanging
process or using too many resources (calling REST API too quickly during
the scan or event method). It needs to be run on a regular basis to
create or update preview files. For that use your best reliable
scheduler, see <a href="#scheduler">Scheduler</a>.</p>
<p>Typically, for <strong>Access key</strong> access, the
system/transfer user is <code>xfer</code>. So, in order to be
consistent, and generate the appropriate access rights, the generation
process should be run as user <code>xfer</code>.</p>
<p>Let&#39;s do a one shot test, using the configuration previously
created:</p>
<div class="sourceCode" id="cb568"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb568-1"><a href="#cb568-1" aria-hidden="true" tabindex="-1"></a><span class="fu">su</span> <span class="at">-s</span> /bin/bash <span class="at">-</span> xfer</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb569"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb569-1"><a href="#cb569-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> <span class="at">-u</span> xfer /bin/bash</span></code></pre></div>
<p>and then:</p>
<div class="sourceCode" id="cb570"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb570-1"><a href="#cb570-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> preview scan <span class="at">--overwrite</span><span class="op">=</span>always</span></code></pre></div>
<p>When the preview generator is first executed it will create a file:
<code>.aspera_access_key</code> in the preview&#39;s folder which contains
the access key used. On subsequent run it reads this file and check that
previews are generated for the same access key, else it fails. This is
to prevent clash of different access keys using the same root.</p>
<h2 data-number="18.6" id="configuration-for-execution-in-scheduler"><span class="header-section-number">18.6</span> Configuration for Execution in
scheduler</h2>
<p>Details are provided in section <a href="#scheduler">Scheduler</a>.</p>
<p>Shorter commands can be specified if a configuration preset was
created as shown previously.</p>
<p>For example the timeout value can be differentiated depending on the
option: event versus scan:</p>
<div class="sourceCode" id="cb571"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb571-1"><a href="#cb571-1" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="st">&quot;</span><span class="va">$*</span><span class="st">&quot;</span> <span class="kw">in</span> <span class="pp">*</span><span class="ss">trev</span><span class="pp">*</span><span class="kw">)</span> <span class="va">tmout</span><span class="op">=</span>10m <span class="cf">;;</span> <span class="pp">*</span><span class="kw">)</span> <span class="va">tmout</span><span class="op">=</span>30m <span class="cf">;;</span> <span class="cf">esac</span></span></code></pre></div>
<h2 data-number="18.7" id="candidate-detection-for-creation-or-update-or-deletion"><span class="header-section-number">18.7</span> Candidate detection for
creation or update (or deletion)</h2>
<p><code>ascli</code> generates preview files using those commands:</p>
<ul>
<li><code>trevents</code> : only recently uploaded files will be tested
(transfer events)</li>
<li><code>events</code> : only recently uploaded files will be tested
(file events: not working)</li>
<li><code>scan</code> : recursively scan all files under the access
key&#39;s <strong>storage root</strong></li>
<li><code>test</code> : test using a local file</li>
</ul>
<p>Once candidate are selected, once candidates are selected, a preview
is always generated if it does not exist already, else if a preview
already exist, it will be generated using one of three values for the
<code>overwrite</code> option:</p>
<ul>
<li><code>always</code> : preview is always generated, even if it
already exists and is newer than original</li>
<li><code>never</code> : preview is generated only if it does not exist
already</li>
<li><code>mtime</code> : preview is generated only if the original file
is newer than the existing</li>
</ul>
<p>Deletion of preview for deleted source files: not implemented yet
(TODO).</p>
<p>If the <code>scan</code> or <code>events</code> detection method is
used, then the option : <code>skip_folders</code> can be used to skip
some folders. It expects a list of path relative to the storage root
(docroot) starting with slash, use the <code>@json:</code> notation,
example:</p>
<div class="sourceCode" id="cb572"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb572-1"><a href="#cb572-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> preview scan <span class="at">--skip-folders</span><span class="op">=</span>@json:<span class="st">&#39;[&quot;/not_here&quot;]&#39;</span></span></code></pre></div>
<p>The option <code>folder_reset_cache</code> forces the node service to
refresh folder contents using various methods.</p>
<p>When scanning the option <code>query</code> has the same behavior as
for the <code>node access_keys do self find</code> command.</p>
<p>Refer to that section for details.</p>
<h2 data-number="18.8" id="preview-file-types"><span class="header-section-number">18.8</span> Preview File types</h2>
<p>Two types of preview can be generated:</p>
<ul>
<li><code>png</code>: thumbnail</li>
<li><code>mp4</code>: video preview (only for video)</li>
</ul>
<p>Use option <code>skip_format</code> to skip generation of a
format.</p>
<h2 data-number="18.9" id="supported-input-files-types"><span class="header-section-number">18.9</span> Supported input Files
types</h2>
<p>The preview generator supports rendering of those file
categories:</p>
<ul>
<li><code>image</code></li>
<li><code>pdf</code></li>
<li><code>plaintext</code></li>
<li><code>office</code></li>
<li><code>video</code></li>
</ul>
<p>To avoid generation for some categories, specify a list using option
<code>skip_types</code>.</p>
<p>Each category has a specific rendering method to produce the PNG
thumbnail.</p>
<p>The mp4 video preview file is only for category
<code>video</code></p>
<p>File type is primarily based on file extension detected by the Node
API and translated info a mime type returned by the Node API.</p>
<h2 data-number="18.10" id="mimemagic"><span class="header-section-number">18.10</span> <code>mimemagic</code></h2>
<p>By default, the Mime type used for conversion is the one returned by
the Node API, based on file name extension.</p>
<p>It is also possible to detect the mime type using option
<code>mimemagic</code>. To use it, set option <code>mimemagic</code> to
<code>yes</code>: <code>--mimemagic=yes</code>.</p>
<p>This requires to manually install the <code>mimemagic</code> gem:
<code>gem install mimemagic</code>.</p>
<p>In this case the <code>preview</code> command will first analyze the
file content using <code>mimemagic</code>, and if no match, will try by
extension.</p>
<p>If the <code>mimemagic</code> gem complains about missing mime info
file:</p>
<ul>
<li><p>Any OS:</p>
<ul>
<li>Examine the error message</li>
<li>Download the file: <a href="https://gitlab.freedesktop.org/xdg/shared-mime-info/-/raw/master/data/freedesktop.org.xml.in"><code>freedesktop.org.xml.in</code></a></li>
<li>move and rename this file to one of the locations expected by
<code>mimemagic</code> as specified in the error message</li>
</ul></li>
<li><p>Windows:</p>
<ul>
<li>Download the file: <a href="https://gitlab.freedesktop.org/xdg/shared-mime-info/-/raw/master/data/freedesktop.org.xml.in"><code>freedesktop.org.xml.in</code></a></li>
<li>Place this file in the root of Ruby (or elsewhere):
<code>C:\RubyVV-x64\freedesktop.org.xml.in</code></li>
<li>Set a global variable using
<code>SystemPropertiesAdvanced.exe</code> or using <code>cmd</code>
(replace <code>VV</code> with version) to the exact path of this
file:</li>
</ul>
<div class="sourceCode" id="cb573"><pre class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb573-1"><a href="#cb573-1" aria-hidden="true" tabindex="-1"></a>SETX FREEDESKTOP_MIME_TYPES_PATH C:\RubyVV-x64\freedesktop.org.xml.in</span></code></pre></div>
<ul>
<li>Close the <code>cmd</code> and restart a new one if needed to get
refreshed env vars</li>
</ul></li>
<li><p>Linux RHEL 8+:</p></li>
</ul>
<div class="sourceCode" id="cb574"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb574-1"><a href="#cb574-1" aria-hidden="true" tabindex="-1"></a><span class="ex">dnf</span> install shared-mime-info</span></code></pre></div>
<ul>
<li><strong>macOS</strong>:</li>
</ul>
<div class="sourceCode" id="cb575"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb575-1"><a href="#cb575-1" aria-hidden="true" tabindex="-1"></a><span class="ex">brew</span> install shared-mime-info</span></code></pre></div>
<h2 data-number="18.11" id="generation-read-source-files-and-write-preview"><span class="header-section-number">18.11</span> Generation: Read source files
and write preview</h2>
<p>Standard open source tools are used to create thumbnails and video
previews. Those tools require that original files are accessible in the
local file system and also write generated files on the local file
system. <code>ascli</code> provides 2 ways to read and write files with
the option: <code>file_access</code></p>
<p>If the preview generator is run on a system that has direct access to
the file system, then the value <code>local</code> can be used. In this
case, no transfer happen, source files are directly read from the
storage, and preview files are directly written to the storage.</p>
<p>If the preview generator does not have access to files on the file
system (it is remote, no mount, or is an object storage), then the
original file is first downloaded, then the result is uploaded, use
method <code>remote</code>.</p>
<h2 data-number="18.12" id="tested-commands-for-preview"><span class="header-section-number">18.12</span> Tested commands for
<code>preview</code></h2>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Add <code>ascli preview</code> in front of the following
commands:</p></div>
</div>
<div class="sourceCode" id="cb576"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb576-1"><a href="#cb576-1" aria-hidden="true" tabindex="-1"></a><span class="ex">check</span> <span class="at">--skip-types</span><span class="op">=</span>office</span>
<span id="cb576-2"><a href="#cb576-2" aria-hidden="true" tabindex="-1"></a><span class="ex">events</span> <span class="at">--once-only</span><span class="op">=</span>yes <span class="at">--skip-types</span><span class="op">=</span>office <span class="at">--log-level</span><span class="op">=</span>info</span>
<span id="cb576-3"><a href="#cb576-3" aria-hidden="true" tabindex="-1"></a><span class="ex">scan</span> <span class="at">--scan-id</span><span class="op">=</span>1 <span class="at">--skip-types</span><span class="op">=</span>office <span class="at">--log-level</span><span class="op">=</span>info <span class="at">--file-access</span><span class="op">=</span>remote <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;target_rate_kbps&quot;:1000000}&#39;</span></span>
<span id="cb576-4"><a href="#cb576-4" aria-hidden="true" tabindex="-1"></a><span class="ex">scan</span> <span class="at">--skip-types</span><span class="op">=</span>office <span class="at">--log-level</span><span class="op">=</span>info</span>
<span id="cb576-5"><a href="#cb576-5" aria-hidden="true" tabindex="-1"></a><span class="ex">show</span> <span class="at">--base</span><span class="op">=</span>test /etc/hosts</span>
<span id="cb576-6"><a href="#cb576-6" aria-hidden="true" tabindex="-1"></a><span class="ex">show</span> <span class="at">--base</span><span class="op">=</span>test my_docx</span>
<span id="cb576-7"><a href="#cb576-7" aria-hidden="true" tabindex="-1"></a><span class="ex">show</span> <span class="at">--base</span><span class="op">=</span>test my_mpg <span class="at">--video-png-conv</span><span class="op">=</span>animated</span>
<span id="cb576-8"><a href="#cb576-8" aria-hidden="true" tabindex="-1"></a><span class="ex">show</span> <span class="at">--base</span><span class="op">=</span>test my_mpg <span class="at">--video-png-conv</span><span class="op">=</span>fixed</span>
<span id="cb576-9"><a href="#cb576-9" aria-hidden="true" tabindex="-1"></a><span class="ex">show</span> <span class="at">--base</span><span class="op">=</span>test my_mpg mp4 <span class="at">--video-conversion</span><span class="op">=</span>clips</span>
<span id="cb576-10"><a href="#cb576-10" aria-hidden="true" tabindex="-1"></a><span class="ex">show</span> <span class="at">--base</span><span class="op">=</span>test my_mpg mp4 <span class="at">--video-conversion</span><span class="op">=</span>reencode</span>
<span id="cb576-11"><a href="#cb576-11" aria-hidden="true" tabindex="-1"></a><span class="ex">show</span> <span class="at">--base</span><span class="op">=</span>test my_pdf</span>
<span id="cb576-12"><a href="#cb576-12" aria-hidden="true" tabindex="-1"></a><span class="bu">test</span> <span class="at">--base</span><span class="op">=</span>test my_dcm</span>
<span id="cb576-13"><a href="#cb576-13" aria-hidden="true" tabindex="-1"></a><span class="bu">test</span> <span class="at">--base</span><span class="op">=</span>test my_mxf mp4 <span class="at">--video-conversion</span><span class="op">=</span>blend <span class="at">--query</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;text&quot;:true,&quot;double&quot;:true}&#39;</span></span>
<span id="cb576-14"><a href="#cb576-14" aria-hidden="true" tabindex="-1"></a><span class="bu">test</span> <span class="at">--mimemagic</span><span class="op">=</span>yes <span class="at">--base</span><span class="op">=</span>test my_dcm</span>
<span id="cb576-15"><a href="#cb576-15" aria-hidden="true" tabindex="-1"></a><span class="bu">test</span> <span class="at">--mimemagic</span><span class="op">=</span>yes <span class="at">--base</span><span class="op">=</span>test my_jpg_unk</span>
<span id="cb576-16"><a href="#cb576-16" aria-hidden="true" tabindex="-1"></a><span class="ex">trevents</span> <span class="at">--once-only</span><span class="op">=</span>yes <span class="at">--skip-types</span><span class="op">=</span>office <span class="at">--log-level</span><span class="op">=</span>info</span></code></pre></div>
<h1 data-number="19" id="ibm-aspera-sync"><span class="header-section-number">19</span> IBM Aspera Sync</h1>
<p>An interface for the <code>async</code> utility is provided in the
following plugins:</p>
<ul>
<li><code>server sync</code> (SSH Auth)</li>
<li><code>node sync</code> (use gen3 token)</li>
<li><code>aoc files sync</code> (uses <code>node</code> plugin with
bearer token)</li>
<li><code>shares files sync</code> (uses <code>node</code> plugin with
gen3 token)</li>
</ul>
<p>The <code>sync</code> command, available in above plugins, performs
the following actions:</p>
<ul>
<li>Start a local Sync session by executing the <code>async</code>
command with the appropriate parameters.</li>
<li>Get local Sync session information using the <code>asyncadmin</code>
command, if available.</li>
<li>Get local Sync session information accessing directly the Async snap
database.</li>
</ul>
<p>One advantage of using <code>ascli</code> over the <code>async</code>
command line is the possibility to use a configuration file, using
standard options of <code>ascli</code>. Moreover, <code>ascli</code>
supports sync with application requiring token-based authorization.</p>
<p>Some <code>sync</code> parameters are filled by the related plugin
using transfer spec parameters (e.g. including token).</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>All <code>sync</code> commands require an <code>async</code> enabled
license and availability of the <code>async</code> executable (and
<code>asyncadmin</code>). The Aspera Transfer Daemon 1.3+ includes
this.</p></div>
</div>
<h2 data-number="19.1" id="starting-a-sync-session"><span class="header-section-number">19.1</span> Starting a sync session</h2>
<p>To start a sync session, use one of the three sync directions
followed by a folder path (remote path for <code>pull</code>, local path
elsewise). The path on the other side is specified using option:
<code>to_folder</code>.</p>
<table>
<thead>
<tr>
<th>Direction<br />(parameter)</th>
<th>Path<br />(parameter)</th>
<th><code>to_folder</code><br />(option)</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>push</code></td>
<td>Local</td>
<td>Remote</td>
</tr>
<tr>
<td><code>bidi</code></td>
<td>Local</td>
<td>Remote</td>
</tr>
<tr>
<td><code>pull</code></td>
<td>Remote</td>
<td>Local</td>
</tr>
</tbody>
</table>
<p>An optional positional <code>Hash</code> argument
(<code>sync_info</code>) can be provided in either <code>conf</code>
(preferred) or <code>args</code> (legacy) format.</p>
<p>A single session can be specified using either formats.</p>
<h3 data-number="19.1.1" id="sync_info-conf-format"><span class="header-section-number">19.1.1</span> <code>sync_info</code>:
<code>conf</code> format</h3>
<p>This is the <strong>preferred</strong> syntax. It is the same payload
as specified on the <code>async</code> option <code>--conf</code> or in
Node API <code>/asyncs</code>.</p>
<p>Documentation on Async Node API can be found on <a href="https://developer.ibm.com/apis/catalog?search=%22aspera%20sync%20api%22">IBM
Developer Portal</a>.</p>
<p>Parameters <code>local.path</code> and <code>remote.path</code> are
not allowed since they are provided on command line.</p>
<h3 data-number="19.1.2" id="sync_info-args-format"><span class="header-section-number">19.1.2</span> <code>sync_info</code>:
<code>args</code> format</h3>
<p>This is the <strong>legacy</strong> syntax. <code>ascli</code>
defines a JSON equivalent to regular <code>async</code> options. It is
based on a JSON representation of <code>async</code> command line
options. Technically, it allows definition of multiple sync sessions in
a single command, but <code>ascli</code> only accepts a single session
for consistency with the previous syntax.</p>
<p>This is the mode selection if there are either keys
<code>sessions</code> or <code>instance</code> in option
<code>sync_info</code>.</p>
<p>Parameters <code>local_dir</code> and <code>remote_dir</code> are not
allowed since they are provided on command line.</p>
<h2 data-number="19.2" id="sync-management-and-monitoring"><span class="header-section-number">19.2</span> Sync management and
monitoring</h2>
<p>The <code>admin</code> command provides several sub commands:</p>
<ul>
<li><code>status</code>: Uses the utility <code>asyncadmin</code>,
available only on server products.</li>
<li>Other commands access directly the Async snap database
(<code>snap.db</code>).</li>
</ul>
<p>For those commands, the user must provide the path to the database
folder, i.e. a folder containing a subfolder named
<code>.private-asp</code>. By default it is the local synchronized
folder. If this folder contains only one session information (i.e. a
folder containing the <code>snap.db</code> file), it will be used by
default. Else, the user must specify a session name in the optional
<code>Hash</code>, in <code>name</code>.</p>
<h1 data-number="20" id="hot-folder"><span class="header-section-number">20</span> Hot folder</h1>
<h2 data-number="20.1" id="requirements"><span class="header-section-number">20.1</span> Requirements</h2>
<p><code>ascli</code> maybe used as a simple hot folder engine. A hot
folder being defined as a tool that:</p>
<ul>
<li>Locally (or remotely) detects new files in a top folder</li>
<li>Send detected files to a remote (respectively, local)
repository</li>
<li>Only sends new files, do not re-send already sent files</li>
<li>Optionally: sends only files that are not still
<strong>growing</strong></li>
<li>Optionally: after transfer of files, deletes or moves to an
archive</li>
</ul>
<p>In addition: the detection should be made
<strong>continuously</strong> or on specific time/date.</p>
<h2 data-number="20.2" id="setup-procedure"><span class="header-section-number">20.2</span> Setup procedure</h2>
<p>The general idea is to rely on :</p>
<ul>
<li>Existing <code>ascp</code> features for detection and transfer</li>
<li>Take advantage of <code>ascli</code> configuration capabilities and
server side knowledge</li>
<li>The OS scheduler for reliability and continuous operation</li>
</ul>
<h3 data-number="20.2.1" id="ascp-features"><span class="header-section-number">20.2.1</span> <code>ascp</code>
features</h3>
<p>Interesting <code>ascp</code> features are found in its arguments:
(see <code>ascp</code> manual):</p>
<ul>
<li>Sending only <strong>new</strong> files
<ul>
<li>option <code>-k 1,2,3</code> (<code>resume_policy</code>)</li>
</ul></li>
<li>Remove or move files after transfer:
<ul>
<li><code>--remove-after-transfer</code>
(<code>remove_after_transfer</code>)</li>
<li><code>--move-after-transfer</code>
(<code>move_after_transfer</code>)</li>
<li><code>--remove-empty-directories</code>
(<code>remove_empty_directories</code>)</li>
</ul></li>
<li>Send only files not modified since the last X seconds:
<ul>
<li><code>--exclude-newer-than</code>
(<code>exclude_newer_than</code>)</li>
<li><code>--exclude-older-than</code>
(<code>exclude_older_than</code>)</li>
</ul></li>
<li>Top level folder shall not be created on destination
<ul>
<li><code>--src-base</code> (<code>src_base</code>)</li>
</ul></li>
</ul>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p><code>ascli</code> takes transfer parameters exclusively as a <a href="#transfer-specification"><strong>transfer-spec</strong></a>, with
<code>ts</code> option.</p></div>
</div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Usual native <code>ascp</code> arguments are available as standard <a href="#transfer-specification"><strong>transfer-spec</strong></a>
parameters, but not special or advanced options.</p></div>
</div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Only for the <a href="#agent-direct"><code>direct</code></a> transfer
agent (not others, like connect or node), native <code>ascp</code>
arguments can be provided with parameter <code>ascp_args</code> of
option <code>transfer_info</code>.</p></div>
</div>
<h3 data-number="20.2.2" id="server-side-and-configuration"><span class="header-section-number">20.2.2</span> Server side and
configuration</h3>
<p>Virtually any transfer on a <strong>repository</strong> on a regular
basis might emulate a hot folder.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>File detection is not based on events (<code>inotify</code>, etc...),
but on a simple folder scan on source side.</p></div>
</div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Options may be saved in an <a href="#option-preset">Option Preset</a>
and used with <code>-P</code>.</p></div>
</div>
<h3 data-number="20.2.3" id="scheduling"><span class="header-section-number">20.2.3</span> Scheduling</h3>
<p>Once <code>ascli</code> command line arguments are defined, run the
command using the OS native scheduler, e.g. every minute, or 5 minutes,
etc... Refer to section <a href="#scheduler">Scheduler</a>. (on use of
option <code>lock_port</code>)</p>
<h2 data-number="20.3" id="example-upload-hot-folder"><span class="header-section-number">20.3</span> Example: Upload hot
folder</h2>
<div class="sourceCode" id="cb577"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb577-1"><a href="#cb577-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server upload source_hot <span class="at">--to-folder</span><span class="op">=</span>/Upload/target_hot <span class="at">--lock-port</span><span class="op">=</span>12345 <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;remove_after_transfer&quot;:true,&quot;remove_empty_directories&quot;:true,&quot;exclude_newer_than:-8,&quot;src_base&quot;:&quot;source_hot&quot;}&#39;</span></span></code></pre></div>
<p>The local folder (here, relative path: <code>source_hot</code>) is
sent (upload) to an Aspera server. Source files are deleted after
transfer. Growing files will be sent only once they don&#39;t grow anymore
(based on an 8-second cool-off period). If a transfer takes more than
the execution period, then the subsequent execution is skipped
(<code>lock_port</code>) preventing multiple concurrent runs.</p>
<h2 data-number="20.4" id="example-unidirectional-synchronization-upload-to-server"><span class="header-section-number">20.4</span> Example: Unidirectional
synchronization (upload) to server</h2>
<div class="sourceCode" id="cb578"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb578-1"><a href="#cb578-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server upload source_sync <span class="at">--to-folder</span><span class="op">=</span>/Upload/target_sync <span class="at">--lock-port</span><span class="op">=</span>12345 <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;resume_policy&quot;:&quot;sparse_csum&quot;,&quot;exclude_newer_than&quot;:-8,&quot;src_base&quot;:&quot;source_sync&quot;}&#39;</span></span></code></pre></div>
<p>This can also be used with other folder-based applications: Aspera on
Cloud, Shares, Node.</p>
<h2 data-number="20.5" id="example-unidirectional-synchronization-download-from-aspera-on-cloud-files"><span class="header-section-number">20.5</span> Example: Unidirectional
synchronization (download) from Aspera on Cloud Files</h2>
<div class="sourceCode" id="cb579"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb579-1"><a href="#cb579-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> aoc files download . <span class="at">--to-folder</span><span class="op">=</span>. <span class="at">--lock-port</span><span class="op">=</span>12345 <span class="at">--progress-bar</span><span class="op">=</span>no <span class="at">--display</span><span class="op">=</span>data <span class="at">--ts</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;resume_policy&quot;:&quot;sparse_csum&quot;,&quot;target_rate_kbps&quot;:50000,&quot;exclude_newer_than&quot;:-8,&quot;delete_before_transfer&quot;:true}&#39;</span></span></code></pre></div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Option <code>delete_before_transfer</code> will delete files locally,
if they are not present on remote side.</p></div>
</div>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>Options <code>progress</code> and <code>display</code> limit output
for headless operation (e.g. cron job)</p></div>
</div>
<h1 data-number="21" id="health-check-and-nagios"><span class="header-section-number">21</span> Health check and Nagios</h1>
<p>Most plugin provide a <code>health</code> command that will check the
health status of the application. Example:</p>
<div class="sourceCode" id="cb580"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb580-1"><a href="#cb580-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> console health</span></code></pre></div>
<pre class="text"><code>╭────────┬─────────────┬────────────╮
│ status │ component   │ message    │
╞════════╪═════════════╪════════════╡
│ ok     │ console api │ accessible │
╰────────┴─────────────┴────────────╯</code></pre>
<p>Typically, the health check uses the REST API of the application with
the following exception: the <code>server</code> plugin allows checking
health by:</p>
<ul>
<li>Issuing a transfer to the server</li>
<li>Checking web app status with <code>asctl all:status</code></li>
<li>Checking daemons process status</li>
</ul>
<p><code>ascli</code> can be called by Nagios to check the health status
of an Aspera server. The output can be made compatible to Nagios with
option <code>--format=nagios</code> :</p>
<div class="sourceCode" id="cb582"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb582-1"><a href="#cb582-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> server health transfer <span class="at">--to-folder</span><span class="op">=</span>/Upload <span class="at">--format</span><span class="op">=</span>nagios <span class="at">--progress-bar</span><span class="op">=</span>no</span></code></pre></div>
<pre class="text"><code>OK - [transfer:ok]</code></pre>
<h1 data-number="22" id="smtp-for-email-notifications"><span class="header-section-number">22</span> SMTP for email
notifications</h1>
<p><code>ascli</code> can send email, for that setup SMTP configuration.
This is done with option <code>smtp</code>.</p>
<p>The <code>smtp</code> option is a <code>Hash</code> (extended value)
with the following fields:</p>
<!-- markdownlint-disable MD034 -->

<table>
<thead>
<tr>
<th>Field</th>
<th>Default</th>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>server</code></td>
<td>-</td>
<td><code>smtp.gmail.com</code></td>
<td>SMTP server address</td>
</tr>
<tr>
<td><code>tls</code></td>
<td><code>true</code></td>
<td><code>true</code></td>
<td>Enable <code>STARTTLS</code> (port 587)</td>
</tr>
<tr>
<td><code>ssl</code></td>
<td><code>false</code></td>
<td><code>false</code></td>
<td>Enable <code>TLS</code> (port 465)</td>
</tr>
<tr>
<td><code>port</code></td>
<td><code>587</code> or <code>465</code> or <code>25</code></td>
<td><code>587</code></td>
<td>Port for service</td>
</tr>
<tr>
<td><code>domain</code></td>
<td><em>domain of server</em></td>
<td>gmail.com</td>
<td>Email domain of user</td>
</tr>
<tr>
<td><code>username</code></td>
<td>-</td>
<td><a href="mailto:john@example.com">john@example.com</a></td>
<td>User to authenticate on SMTP server, leave empty for open auth.</td>
</tr>
<tr>
<td><code>password</code></td>
<td>-</td>
<td>my_password_here</td>
<td>Password for above username</td>
</tr>
<tr>
<td><code>from_email</code></td>
<td>username if defined</td>
<td><a href="mailto:johnny@example.com">johnny@example.com</a></td>
<td>Address used if receiver replies</td>
</tr>
<tr>
<td><code>from_name</code></td>
<td>same as email</td>
<td>John Wayne</td>
<td>Display name of sender</td>
</tr>
</tbody>
</table>
<!-- markdownlint-enable MD034 -->

<h2 data-number="22.1" id="example-of-configuration"><span class="header-section-number">22.1</span> Example of configuration</h2>
<div class="sourceCode" id="cb584"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb584-1"><a href="#cb584-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set smtp_google server smtp.google.com</span>
<span id="cb584-2"><a href="#cb584-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set smtp_google username john@gmail.com</span>
<span id="cb584-3"><a href="#cb584-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set smtp_google password my_password_here</span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb585"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb585-1"><a href="#cb585-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset init smtp_google @json:<span class="st">&#39;{&quot;server&quot;:&quot;smtp.google.com&quot;,&quot;username&quot;:&quot;john@gmail.com&quot;,&quot;password&quot;:&quot;my_password_here&quot;}&#39;</span></span></code></pre></div>
<p>or</p>
<div class="sourceCode" id="cb586"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb586-1"><a href="#cb586-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset update smtp_google <span class="at">--server</span><span class="op">=</span>smtp.google.com <span class="at">--username</span><span class="op">=</span>john@gmail.com <span class="at">--password</span><span class="op">=</span>my_password_here</span></code></pre></div>
<p>Set this configuration as global default, for instance:</p>
<div class="sourceCode" id="cb587"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb587-1"><a href="#cb587-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set cli_default smtp @val:@preset:smtp_google</span>
<span id="cb587-2"><a href="#cb587-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config preset set default config cli_default</span></code></pre></div>
<h2 data-number="22.2" id="email-templates"><span class="header-section-number">22.2</span> Email templates</h2>
<p>Sent emails are built using a template that uses the <a href="https://www.tutorialspoint.com/ruby/eruby.htm"><code>ERB</code></a>
syntax.</p>
<p>The template is the full SMTP message, including headers.</p>
<p>The following variables are defined by default:</p>
<ul>
<li><code>from_name</code></li>
<li><code>from_email</code></li>
<li><code>to</code></li>
</ul>
<p>Other variables are defined depending on context.</p>
<h2 data-number="22.3" id="test"><span class="header-section-number">22.3</span> Test</h2>
<p>Check settings with <code>smtp_settings</code> command. Send test
email with <code>email_test</code>.</p>
<div class="sourceCode" id="cb588"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb588-1"><a href="#cb588-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config <span class="at">--smtp</span><span class="op">=</span>@preset:smtp_google smtp</span>
<span id="cb588-2"><a href="#cb588-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config <span class="at">--smtp</span><span class="op">=</span>@preset:smtp_google email <span class="at">--notify-to</span><span class="op">=</span>sample.dest@example.com</span></code></pre></div>
<h2 data-number="22.4" id="notifications-for-transfer-status"><span class="header-section-number">22.4</span> Notifications for transfer
status</h2>
<p>An e-mail notification can be sent upon transfer success and failure
(one email per transfer job, one job being possibly multi session, and
possibly after retry).</p>
<p>To activate, use option <code>notify_to</code>.</p>
<p>A default e-mail template is used, but it can be overridden with
option <code>notify_template</code>.</p>
<p>The environment provided contains the following additional
variables:</p>
<ul>
<li><code>subject</code> : a default subject including transfer
status</li>
<li><code>status</code> : global status of transfer</li>
<li><code>ts</code> : the <a href="#transfer-specification"><strong>transfer-spec</strong></a> used
for the transfer</li>
<li><code>from_email</code> : email of sender (from <code>smtp</code>
configuration)</li>
<li><code>from_name</code> : name of sender (from <code>smtp</code>
configuration)</li>
<li><code>to</code> : recipient of the email (from
<code>notify_to</code>)</li>
</ul>
<p>Example of template:</p>
<pre class="text"><code>From: &lt;%=from_name%&gt; &lt;&lt;%=from_email%&gt;&gt;
To: &lt;&lt;%=to%&gt;&gt;
Subject: &lt;%=subject%&gt;

Transfer is: &lt;%=status%&gt;</code></pre>
<h1 data-number="23" id="tool-asession"><span class="header-section-number">23</span> Tool: <code>asession</code></h1>
<p>This gem comes with a second executable tool providing a simplified
standardized interface to start a FASP session:
<code>asession</code>.</p>
<p>It aims at simplifying the startup of a FASP session from a
programmatic standpoint as formatting a <a href="#transfer-specification"><strong>transfer-spec</strong></a>
is:</p>
<ul>
<li>Common to Aspera Node API (HTTP POST /ops/transfer)</li>
<li>Common to Aspera Connect API (browser JavaScript
<code>startTransfer</code>)</li>
<li>Easy to generate by using any third party language specific JSON
library</li>
</ul>
<p>Hopefully, IBM integrates this directly in <code>ascp</code>, and
this tool is made redundant.</p>
<p>This makes it easy to integrate with any language provided that one
can spawn a sub process, write to its STDIN, read from STDOUT, generate
and parse JSON.</p>
<p><code>ascli</code> expect one single argument: a session
specification that contains parameters and a <a href="#transfer-specification"><strong>transfer-spec</strong></a>.</p>
<p>If no argument is provided, it assumes a value of:
<code>@json:@stdin:</code>, i.e. a JSON formatted on stdin.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>If JSON is the format, specify <code>@json:</code> to tell
<code>ascli</code> to decode the <code>Hash</code> using JSON
syntax.</p></div>
</div>
<p>During execution, it generates all low level events, one per line, in
JSON format on stdout.</p>
<p>Top level parameters supported by <code>asession</code>:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>spec</code></td>
<td>The <a href="#transfer-specification"><strong>transfer-spec</strong></a></td>
</tr>
<tr>
<td><code>agent</code></td>
<td>Same parameters as transfer-info for agent <code>direct</code></td>
</tr>
<tr>
<td><code>loglevel</code></td>
<td>Log level of <code>asession</code></td>
</tr>
<tr>
<td><code>file_list_folder</code></td>
<td>The folder used to store (for garbage collection) generated file
lists.<br />By default, it is
<code>[system tmp folder]/[username]_asession_filelists</code></td>
</tr>
</tbody>
</table>
<h2 data-number="23.1" id="comparison-of-interfaces"><span class="header-section-number">23.1</span> Comparison of interfaces</h2>
<table>
<thead>
<tr>
<th>feature/tool</th>
<th>Transfer Daemon</th>
<th>FASPManager</th>
<th><code>ascp</code></th>
<th><code>asession</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>language integration</td>
<td>Many</td>
<td>C/C++<br />C#/.net<br />Go<br />Python<br />java<br /></td>
<td>Any</td>
<td>Any</td>
</tr>
<tr>
<td>required additional components to <code>ascp</code></td>
<td>Daemon</td>
<td>Library<br />(+headers)</td>
<td>-</td>
<td>Ruby<br />Aspera gem</td>
</tr>
<tr>
<td>startup</td>
<td>Daemon</td>
<td>API</td>
<td>Command line arguments</td>
<td>JSON on stdin<br />(standard
APIs:<br />JSON.generate<br />Process.spawn)</td>
</tr>
<tr>
<td>events</td>
<td>Poll</td>
<td>Callback</td>
<td>Possibility to open management port<br />and proprietary text
syntax</td>
<td>JSON on stdout</td>
</tr>
<tr>
<td>platforms</td>
<td>Any with <code>ascp</code> and transfer daemon</td>
<td>Any with <code>ascp</code> (and SDK if compiled)</td>
<td>Any with <code>ascp</code></td>
<td>Any with Ruby and <code>ascp</code></td>
</tr>
</tbody>
</table>
<h2 data-number="23.2" id="simple-session"><span class="header-section-number">23.2</span> Simple session</h2>
<p>Create a file <code>session.json</code> with:</p>
<div class="sourceCode" id="cb590"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb590-1"><a href="#cb590-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;remote_host&quot;</span><span class="fu">:</span><span class="st">&quot;demo.asperasoft.com&quot;</span><span class="fu">,</span><span class="dt">&quot;remote_user&quot;</span><span class="fu">:</span><span class="st">&quot;asperaweb&quot;</span><span class="fu">,</span><span class="dt">&quot;ssh_port&quot;</span><span class="fu">:</span><span class="dv">33001</span><span class="fu">,</span><span class="dt">&quot;remote_password&quot;</span><span class="fu">:</span><span class="st">&quot;my_password_here&quot;</span><span class="fu">,</span><span class="dt">&quot;direction&quot;</span><span class="fu">:</span><span class="st">&quot;receive&quot;</span><span class="fu">,</span><span class="dt">&quot;destination_root&quot;</span><span class="fu">:</span><span class="st">&quot;./test.dir&quot;</span><span class="fu">,</span><span class="dt">&quot;paths&quot;</span><span class="fu">:</span><span class="ot">[</span><span class="fu">{</span><span class="dt">&quot;source&quot;</span><span class="fu">:</span><span class="st">&quot;/aspera-test-dir-tiny/200KB.1&quot;</span><span class="fu">}</span><span class="ot">]</span><span class="fu">,</span><span class="dt">&quot;resume_level&quot;</span><span class="fu">:</span><span class="st">&quot;none&quot;</span><span class="fu">}</span></span></code></pre></div>
<p>Then start the session:</p>
<div class="sourceCode" id="cb591"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb591-1"><a href="#cb591-1" aria-hidden="true" tabindex="-1"></a><span class="ex">asession</span> <span class="op">&lt;</span> session.json</span></code></pre></div>
<h2 data-number="23.3" id="asynchronous-commands-and-persistent-session"><span class="header-section-number">23.3</span> Asynchronous commands and
Persistent session</h2>
<p><code>asession</code> also supports asynchronous commands (on the
management port). Instead of the traditional text protocol as described
in <code>ascp</code> manual, the format for commands is: one single line
per command, formatted in JSON, where parameters shall be
<strong>snake</strong> style, for example: <code>LongParameter</code> →
<code>long_parameter</code></p>
<p>This is particularly useful for a persistent session (with the <a href="#transfer-specification"><strong>transfer-spec</strong></a>
parameter: <code>&quot;keepalive&quot;:true</code>)</p>
<div class="sourceCode" id="cb592"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb592-1"><a href="#cb592-1" aria-hidden="true" tabindex="-1"></a><span class="er">asession</span></span>
<span id="cb592-2"><a href="#cb592-2" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;remote_host&quot;</span><span class="fu">:</span><span class="st">&quot;demo.asperasoft.com&quot;</span><span class="fu">,</span><span class="dt">&quot;ssh_port&quot;</span><span class="fu">:</span><span class="dv">33001</span><span class="fu">,</span><span class="dt">&quot;remote_user&quot;</span><span class="fu">:</span><span class="st">&quot;asperaweb&quot;</span><span class="fu">,</span><span class="dt">&quot;remote_password&quot;</span><span class="fu">:</span><span class="st">&quot;my_password_here&quot;</span><span class="fu">,</span><span class="dt">&quot;direction&quot;</span><span class="fu">:</span><span class="st">&quot;receive&quot;</span><span class="fu">,</span><span class="dt">&quot;destination_root&quot;</span><span class="fu">:</span><span class="st">&quot;.&quot;</span><span class="fu">,</span><span class="dt">&quot;keepalive&quot;</span><span class="fu">:</span><span class="kw">true</span><span class="fu">,</span><span class="dt">&quot;resume_level&quot;</span><span class="fu">:</span><span class="st">&quot;none&quot;</span><span class="fu">}</span></span>
<span id="cb592-3"><a href="#cb592-3" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;type&quot;</span><span class="fu">:</span><span class="st">&quot;START&quot;</span><span class="fu">,</span><span class="dt">&quot;source&quot;</span><span class="fu">:</span><span class="st">&quot;/aspera-test-dir-tiny/200KB.2&quot;</span><span class="fu">}</span></span>
<span id="cb592-4"><a href="#cb592-4" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;type&quot;</span><span class="fu">:</span><span class="st">&quot;DONE&quot;</span><span class="fu">}</span></span></code></pre></div>
<p>(events from FASP are not shown in above example. They would appear
after each command)</p>
<h2 data-number="23.4" id="example-of-language-wrapper"><span class="header-section-number">23.4</span> Example of language
wrapper</h2>
<p>NodeJS: <a href="https://www.npmjs.com/package/aspera"><span>https://www.npmjs.com/package/aspera</span></a></p>
<h2 data-number="23.5" id="help"><span class="header-section-number">23.5</span> Help</h2>
<div class="sourceCode" id="cb593"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb593-1"><a href="#cb593-1" aria-hidden="true" tabindex="-1"></a><span class="ex">asession</span> <span class="at">-h</span></span>
<span id="cb593-2"><a href="#cb593-2" aria-hidden="true" tabindex="-1"></a><span class="ex">USAGE</span></span>
<span id="cb593-3"><a href="#cb593-3" aria-hidden="true" tabindex="-1"></a>    <span class="ex">asession</span></span>
<span id="cb593-4"><a href="#cb593-4" aria-hidden="true" tabindex="-1"></a>    <span class="ex">asession</span> <span class="at">-h</span><span class="kw">|</span><span class="ex">--help</span></span>
<span id="cb593-5"><a href="#cb593-5" aria-hidden="true" tabindex="-1"></a>    <span class="ex">asession</span> [<span class="op">&lt;</span>session spec extended value<span class="op">&gt;</span>]</span>
<span id="cb593-6"><a href="#cb593-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb593-7"><a href="#cb593-7" aria-hidden="true" tabindex="-1"></a>    <span class="ex">If</span> no argument is provided, default will be used: @json:@stdin</span>
<span id="cb593-8"><a href="#cb593-8" aria-hidden="true" tabindex="-1"></a>    <span class="ex">-h,</span> <span class="at">--help</span> display this message</span>
<span id="cb593-9"><a href="#cb593-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">&lt;</span>session <span class="ex">spec</span> extended value<span class="op">&gt;</span> a dictionary <span class="er">(</span><span class="ex">Hash</span><span class="kw">)</span></span>
<span id="cb593-10"><a href="#cb593-10" aria-hidden="true" tabindex="-1"></a>    <span class="ex">The</span> value can be either:</span>
<span id="cb593-11"><a href="#cb593-11" aria-hidden="true" tabindex="-1"></a>       <span class="ex">the</span> JSON description itself, e.g. @json:<span class="st">&#39;{&quot;xx&quot;:&quot;yy&quot;,...}&#39;</span></span>
<span id="cb593-12"><a href="#cb593-12" aria-hidden="true" tabindex="-1"></a>       <span class="ex">@json:@stdin,</span> if the JSON is provided from stdin</span>
<span id="cb593-13"><a href="#cb593-13" aria-hidden="true" tabindex="-1"></a>       <span class="ex">@json:@file:</span><span class="op">&lt;</span>path<span class="op">&gt;</span>, if the JSON is provided from a file</span>
<span id="cb593-14"><a href="#cb593-14" aria-hidden="true" tabindex="-1"></a>    <span class="ex">The</span> following keys are recognized in session spec:</span>
<span id="cb593-15"><a href="#cb593-15" aria-hidden="true" tabindex="-1"></a>       <span class="ex">spec</span> : mandatory, contains the transfer spec</span>
<span id="cb593-16"><a href="#cb593-16" aria-hidden="true" tabindex="-1"></a>       <span class="ex">loglevel</span> : modify log level <span class="er">(</span><span class="ex">to</span> stderr<span class="kw">)</span></span>
<span id="cb593-17"><a href="#cb593-17" aria-hidden="true" tabindex="-1"></a>       <span class="ex">agent</span> : modify transfer agent parameters, e.g. ascp_args</span>
<span id="cb593-18"><a href="#cb593-18" aria-hidden="true" tabindex="-1"></a>       <span class="ex">file_list_folder</span> : location of temporary files</span>
<span id="cb593-19"><a href="#cb593-19" aria-hidden="true" tabindex="-1"></a>       <span class="ex">sdk</span> : location of SDK <span class="er">(</span><span class="ex">ascp</span><span class="kw">)</span></span>
<span id="cb593-20"><a href="#cb593-20" aria-hidden="true" tabindex="-1"></a>    <span class="ex">Asynchronous</span> commands can be provided on STDIN, examples:</span>
<span id="cb593-21"><a href="#cb593-21" aria-hidden="true" tabindex="-1"></a>       <span class="dt">{</span><span class="st">&quot;type&quot;</span><span class="dt">:</span><span class="st">&quot;START&quot;</span><span class="op">,</span><span class="st">&quot;source&quot;</span><span class="dt">:</span><span class="st">&quot;/aspera-test-dir-tiny/200KB.2&quot;</span><span class="dt">}</span></span>
<span id="cb593-22"><a href="#cb593-22" aria-hidden="true" tabindex="-1"></a>       <span class="dt">{</span><span class="st">&quot;type&quot;</span><span class="dt">:</span><span class="st">&quot;START&quot;</span><span class="op">,</span><span class="st">&quot;source&quot;</span><span class="dt">:</span><span class="st">&quot;xx&quot;</span><span class="op">,</span><span class="st">&quot;destination&quot;</span><span class="dt">:</span><span class="st">&quot;yy&quot;</span><span class="dt">}</span></span>
<span id="cb593-23"><a href="#cb593-23" aria-hidden="true" tabindex="-1"></a>       <span class="ex">{</span><span class="st">&quot;type&quot;</span><span class="ex">:</span><span class="st">&quot;DONE&quot;</span><span class="ex">}</span></span>
<span id="cb593-24"><a href="#cb593-24" aria-hidden="true" tabindex="-1"></a><span class="ex">EXAMPLES</span></span>
<span id="cb593-25"><a href="#cb593-25" aria-hidden="true" tabindex="-1"></a>    <span class="ex">asession</span> @json:<span class="st">&#39;{&quot;spec&quot;:{&quot;remote_host&quot;:&quot;demo.asperasoft.com&quot;,&quot;remote_user&quot;:&quot;asperaweb&quot;,&quot;ssh_port&quot;:33001,&quot;remote_password&quot;:&quot;demoaspera&quot;,&quot;direction&quot;:&quot;receive&quot;,&quot;destination_root&quot;:&quot;./test.dir&quot;,&quot;paths&quot;:[{&quot;source&quot;:&quot;/aspera-test-dir-tiny/200KB.1&quot;}]}}&#39;</span></span>
<span id="cb593-26"><a href="#cb593-26" aria-hidden="true" tabindex="-1"></a>    <span class="bu">echo</span> <span class="st">&#39;{&quot;spec&quot;:{&quot;remote_host&quot;:...}}&#39;</span><span class="kw">|</span><span class="ex">asession</span> @json:@stdin</span></code></pre></div>
<h1 data-number="24" id="ruby-module-aspera"><span class="header-section-number">24</span> Ruby Module:
<code>Aspera</code></h1>
<p>Main components:</p>
<ul>
<li><code>Aspera</code> generic classes for REST and OAuth</li>
<li><code>Aspera::Agent::Direct</code>: starting and monitoring
transfers. It can be considered as a FASPManager class for Ruby.</li>
<li><code>Aspera::Cli</code>: <code>ascli</code>.</li>
</ul>
<p>Working examples can be found in repo: <a href="https://github.com/laurent-martin/aspera-api-examples">https://github.com/laurent-martin/aspera-api-examples</a>
in Ruby examples.</p>
<h1 data-number="25" id="history"><span class="header-section-number">25</span> History</h1>
<p>When I joined Aspera, there was only one CLI: <code>ascp</code>,
which is the implementation of the FASP protocol, but there was no CLI
to access the various existing products (Server, Faspex, Shares). Once,
Serban (founder) provided a shell script able to create a Faspex Package
using Faspex REST API. Since all products relate to file transfers using
FASP (<code>ascp</code>), I thought it would be interesting to have a
unified CLI for transfers using FASP. Also, because there was already
the <code>ascp</code> tool, I thought of an extended tool :
<code>eascp.pl</code> which was accepting all <code>ascp</code> options
for transfer but was also able to transfer to Faspex and Shares
(destination was a kind of URI for the applications).</p>
<p>There were a few pitfalls:</p>
<ul>
<li><code>ascli</code> was written in the aging <code>perl</code>
language while most Aspera web application products (but the Transfer
Server) are written in <code>ruby</code>.</li>
<li><code>ascli</code> was only for transfers, but not able to call
other products APIs</li>
</ul>
<p>So, it evolved into <code>ascli</code>:</p>
<ul>
<li>Portable: works on platforms supporting <code>ruby</code> (and
<code>ascp</code>)</li>
<li>Easy to install with the <code>gem</code> utility</li>
<li>Supports transfers with multiple <a href="#transfer-clients-agents">Transfer Agents</a>, that&#39;s why transfer
parameters moved from <code>ascp</code> command line to <a href="#transfer-specification"><strong>transfer-spec</strong></a> (more
reliable, more standard)</li>
<li><code>ruby</code> is consistent with other Aspera products</li>
</ul>
<p>Over the time, a supported command line tool <code>aspera</code> was
developed in C++, it was later on deprecated. It had the advantage of
being relatively easy to installed, as a single executable (well, still
using <code>ascp</code>), but it was too limited IMHO, and lacked a lot
of the features of this CLI.</p>
<p>Enjoy a coffee on me:</p>
<div class="sourceCode" id="cb594"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb594-1"><a href="#cb594-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config coffee <span class="at">--ui</span><span class="op">=</span>text</span>
<span id="cb594-2"><a href="#cb594-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config coffee <span class="at">--ui</span><span class="op">=</span>text <span class="at">--image</span><span class="op">=</span>@json:<span class="st">&#39;{&quot;text&quot;:true}&#39;</span></span>
<span id="cb594-3"><a href="#cb594-3" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config coffee</span></code></pre></div>
<h1 data-number="26" id="common-problems"><span class="header-section-number">26</span> Common problems</h1>
<p><code>ascli</code> detects common problems and provides hints to
solve them.</p>
<h2 data-number="26.1" id="error-remote-host-is-not-who-we-expected"><span class="header-section-number">26.1</span> Error: &quot;Remote host is not who
we expected&quot;</h2>
<p>Cause: <code>ascp</code> &gt;= 4.x checks fingerprint of the highest
server host key, including ECDSA. <code>ascp</code> &lt; 4.0 (3.9.6 and
earlier) support only to RSA level (and ignore ECDSA presented by
server). <code>aspera.conf</code> supports a single fingerprint.</p>
<p>Workaround on client side: To ignore the certificate (SSH
fingerprint) add option on client side (this option can also be added
permanently to the configuration file):</p>
<div class="sourceCode" id="cb595"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb595-1"><a href="#cb595-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--ts=@json:</span><span class="st">&#39;{&quot;sshfp&quot;:null}&#39;</span></span></code></pre></div>
<p>Workaround on server side: Either remove the fingerprint from
<code>aspera.conf</code>, or keep only RSA host keys in
<code>sshd_config</code>.</p>
<p>References: ES-1944 in release notes of 4.1 and to <a href="https://www.ibm.com/docs/en/ahts/4.2?topic=upgrades-configuring-ssh-server">HSTS
admin manual section &quot;Configuring Transfer Server Authentication With a
Host-Key Fingerprint&quot;</a>.</p>
<h2 data-number="26.2" id="error-cant-find-header-files-for-ruby"><span class="header-section-number">26.2</span> Error: &quot;can&#39;t find header
files for ruby&quot;</h2>
<p>Some Ruby gems dependencies require compilation of native parts (C).
This also requires Ruby header files. If Ruby was installed as a Linux
Packages, then also install Ruby development package:
<code>ruby-dev</code> or <code>ruby-devel</code>, depending on
distribution.</p>
<h2 data-number="26.3" id="ed25519-key-not-supported"><span class="header-section-number">26.3</span> ED25519 key not supported</h2>
<p>ED25519 keys are deactivated since <code>ascli</code> version 0.9.24
as it requires additional gems that require native compilation and thus
caused problems. This type of key will just be ignored.</p>
<p>To re-activate, set env var <code>ASCLI_ENABLE_ED25519</code> to
<code>true</code>.</p>
<p>Without this deactivation, if such key was present in user&#39;s
<code>.ssh</code> folder then the following error was generated:</p>
<pre class="text"><code>OpenSSH keys only supported if ED25519 is available</code></pre>
<p>Which meant that you do not have Ruby support for ED25519 SSH keys.
You may either install the suggested Gems, or remove your ed25519 key
from your <code>.ssh</code> folder to solve the issue.</p>
<p>In addition, host keys of type: <code>ecdsa-sha2</code> and
<code>ecdh-sha2</code> are also deactivated by default. To re-activate,
set env var <code>ASCLI_ENABLE_ECDSHA2</code> to <code>true</code>.</p>
<h2 data-number="26.4" id="jruby-net-ssh-unsupported-algorithm"><span class="header-section-number">26.4</span> JRuby: <code>net-ssh</code>:
Unsupported algorithm</h2>
<p>JRuby may not implement all the algorithms supported by OpenSSH.</p>
<p>Add the following to option <code>ssh_options</code>:</p>
<div class="sourceCode" id="cb597"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb597-1"><a href="#cb597-1" aria-hidden="true" tabindex="-1"></a><span class="fu">{</span><span class="dt">&quot;host_key&quot;</span><span class="fu">:</span><span class="ot">[</span><span class="st">&quot;rsa-sha2-512&quot;</span><span class="ot">,</span><span class="st">&quot;rsa-sha2-256&quot;</span><span class="ot">]</span><span class="fu">,</span><span class="dt">&quot;kex&quot;</span><span class="fu">:</span><span class="ot">[</span><span class="st">&quot;curve25519-sha256&quot;</span><span class="ot">,</span><span class="st">&quot;diffie-hellman-group14-sha256&quot;</span><span class="ot">]</span><span class="fu">,</span><span class="dt">&quot;encryption&quot;</span><span class="fu">:</span> <span class="ot">[</span><span class="st">&quot;aes256-ctr&quot;</span><span class="ot">,</span> <span class="st">&quot;aes192-ctr&quot;</span><span class="ot">,</span> <span class="st">&quot;aes128-ctr&quot;</span><span class="ot">]</span><span class="fu">}</span></span></code></pre></div>
<p>e.g.</p>
<div class="sourceCode" id="cb598"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb598-1"><a href="#cb598-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--ssh-options=@json:</span><span class="st">&#39;{&quot;host_key&quot;:[&quot;rsa-sha2-512&quot;,&quot;rsa-sha2-256&quot;],&quot;kex&quot;:[&quot;curve25519-sha256&quot;,&quot;diffie-hellman-group14-sha256&quot;],&quot;encryption&quot;: [&quot;aes256-ctr&quot;, &quot;aes192-ctr&quot;, &quot;aes128-ctr&quot;]}&#39;</span></span></code></pre></div>
<h2 data-number="26.5" id="error-ssl_read-unexpected-eof-while-reading"><span class="header-section-number">26.5</span> Error: &quot;SSL_read: unexpected
eof while reading&quot;</h2>
<p>Newer OpenSSL library expects a clean SSL close. To deactivate this
error, enable option <code>IGNORE_UNEXPECTED_EOF</code> for
<code>ssl_options</code> in option <code>http_options</code>.</p>
<div class="sourceCode" id="cb599"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb599-1"><a href="#cb599-1" aria-hidden="true" tabindex="-1"></a><span class="ex">--http-options=@json:</span><span class="st">&#39;{&quot;ssl_options&quot;:[&quot;IGNORE_UNEXPECTED_EOF&quot;]}&#39;</span></span></code></pre></div>
<h2 data-number="26.6" id="error-ascp-lib64libcso6-version-glibc_228-not-found"><span class="header-section-number">26.6</span> Error: <code>ascp</code>:
/lib64/libc.so.6: version `GLIBC_2.28&#39; not found</h2>
<p>This happens on Linux x86 if you try to install
<code>transferd</code> on a Linux version too old to support a newer
<code>ascp</code> executable.</p>
<p>Workaround: Install an older version:</p>
<div class="sourceCode" id="cb600"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb600-1"><a href="#cb600-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ascli</span> config transferd install 1.1.2</span></code></pre></div>
<p>Refer to: <a href="#single-file-executable">Binary</a></p>
<h2 data-number="26.7" id="error-cannot-rename-partial-file"><span class="header-section-number">26.7</span> Error: Cannot rename partial
file</h2>
<p>This is an error coming from <code>ascp</code> when it is configured
to use a partial file name, and at the end of the transfer, the partial
file, now complete, does not exist anymore.</p>
<p>This often happens when two transfers start in parallel for the same
file:</p>
<ul>
<li>session 1 starts for file1, it creates file: file1.partial and fills
it</li>
<li>session 2 starts for file1 (same), it creates file: file1.partial
and fills it</li>
<li>session 1 finishes, and renames file1.partial to file1</li>
<li>session 2 finishes, and tries to rename file1.partial to file1, but
it fails as it does not exist anymore...</li>
</ul>
<p>By default, <code>ascli</code> creates a config
file:<code>~/.aspera/sdk/aspera.conf</code> like this:</p>
<div class="sourceCode" id="cb601"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb601-1"><a href="#cb601-1" aria-hidden="true" tabindex="-1"></a><span class="fu">&lt;?xml</span> <span class="ot">version=</span><span class="st">&#39;1.0&#39;</span> <span class="ot">encoding=</span><span class="st">&#39;UTF-8&#39;</span><span class="fu">?&gt;</span></span>
<span id="cb601-2"><a href="#cb601-2" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">CONF</span> <span class="ot">version=</span><span class="st">&quot;2&quot;</span>&gt;</span>
<span id="cb601-3"><a href="#cb601-3" aria-hidden="true" tabindex="-1"></a>&lt;<span class="kw">default</span>&gt;</span>
<span id="cb601-4"><a href="#cb601-4" aria-hidden="true" tabindex="-1"></a>    &lt;<span class="kw">file_system</span>&gt;</span>
<span id="cb601-5"><a href="#cb601-5" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">resume_suffix</span>&gt;.aspera-ckpt&lt;/<span class="kw">resume_suffix</span>&gt;</span>
<span id="cb601-6"><a href="#cb601-6" aria-hidden="true" tabindex="-1"></a>        &lt;<span class="kw">partial_file_suffix</span>&gt;.partial&lt;/<span class="kw">partial_file_suffix</span>&gt;</span>
<span id="cb601-7"><a href="#cb601-7" aria-hidden="true" tabindex="-1"></a>    &lt;/<span class="kw">file_system</span>&gt;</span>
<span id="cb601-8"><a href="#cb601-8" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">default</span>&gt;</span>
<span id="cb601-9"><a href="#cb601-9" aria-hidden="true" tabindex="-1"></a>&lt;/<span class="kw">CONF</span>&gt;</span></code></pre></div>
<p>In container, this is located in <code>/ibm_aspera</code>.</p>
<p>One possibility to avoid that error is to disable partial filename
suffix... But that only hides the problem.</p>
<p>For example, when using the container, override that file with a
volume and remove the line for extension. Another possibility is to add
this option:
<code>--transfer-info==@json:&#39;{&quot;ascp_args&quot;:[&quot;--partial-file-suffix=&quot;]}&#39;</code>
: this overrides the value in config file.</p>
<div class="admonition note">
<div class="admonition-title">Note</div>
<div class="admonition-body"><p>If one relies on <code>--lock-port</code> when using containers to
avoir parallel transfers in a cron job, this can be the problem, as
<code>lock_port</code> does not lock between containers. Use
<code>flock</code> instead.</p></div>
</div>
</body>
</html>
